{"version":3,"mappings":"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","names":["m","require$$0","createRoot","cn","inputs","twMerge","clsx","formatTanggalIndonesia","tanggal","bulanIndo","d","y","formatKabKota","str","TooltipProvider","TooltipPrimitive.Provider","TooltipContent","React.forwardRef","className","sideOffset","props","ref","jsx","TooltipPrimitive.Content","getBaseUrl","apiFetch","method","url","options","data","token","headers","BASE_URL","fullUrl","fetchOptions","res","contentType","responseData","refreshRes","refreshData","apiGet","apiPost","apiPut","apiDelete","AuthContext","createContext","AuthProvider","children","user","setUser","useState","originalUser","setOriginalUser","setToken","originalToken","setOriginalToken","loading","setLoading","useEffect","newToken","currentPath","logout","storedToken","storedOriginalToken","storedOriginalUser","error","login","email","password","refreshUser","updateToken","impersonateUser","userId","isAdminKanwil","stopImpersonating","isImpersonating","useAuth","useContext","buttonVariants","cva","Button","variant","size","asChild","Comp","Slot","DropdownMenu","DropdownMenuPrimitive.Root","DropdownMenuTrigger","DropdownMenuPrimitive.Trigger","DropdownMenuSubTrigger","inset","jsxs","DropdownMenuPrimitive.SubTrigger","ChevronRight","DropdownMenuSubContent","DropdownMenuPrimitive.SubContent","DropdownMenuContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuItem","DropdownMenuPrimitive.Item","DropdownMenuCheckboxItem","checked","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","Check","DropdownMenuRadioItem","DropdownMenuPrimitive.RadioItem","Circle","DropdownMenuLabel","DropdownMenuPrimitive.Label","DropdownMenuSeparator","DropdownMenuPrimitive.Separator","Dialog","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogClose","DialogPrimitive.Close","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","X","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","Avatar","AvatarPrimitive.Root","AvatarImage","AvatarPrimitive.Image","AvatarFallback","AvatarPrimitive.Fallback","Input","type","badgeVariants","Badge","NavigationBar","location","useLocation","isMobileMenuOpen","setIsMobileMenuOpen","showLogoutModal","setShowLogoutModal","showImpersonateModal","setShowImpersonateModal","showStopImpersonateModal","setShowStopImpersonateModal","showStopSuccessModal","setShowStopSuccessModal","selectedUser","setSelectedUser","availableUsers","setAvailableUsers","loadingUsers","setLoadingUsers","showUserSelectionModal","setShowUserSelectionModal","userSearchTerm","setUserSearchTerm","navigationItems","baseItems","Home","FileText","Upload","UserCog","Settings","fetchAvailableUsers","response","filteredUsers","u","isActive","path","handleLogoutClick","handleLogoutConfirm","handleImpersonateClick","handleUserSelection","handleImpersonateConfirm","handleStopImpersonatingClick","handleStopImpersonatingConfirm","Fragment","Link","e","UserCheck","UserX","item","Icon","n","Users","LogOut","Menu","AlertTriangle","Search","Loader2","User","selectedUserData","ArrowLeft","CheckCircle","Skeleton","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","t","toast","listeners","memoryState","listener","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","ToastProvider","ToastPrimitives.Provider","ToastViewport","ToastPrimitives.Viewport","toastVariants","Toast","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","AppLayout","showOfficeModal","setShowOfficeModal","offices","setOffices","ErrorBoundary","Component","__publicField","errorInfo","Dashboard","lazy","TemplateSelection","TemplateForm","NotFound","Index","LetterDetail","Letters","LetterPrintPreview","PengajuanSelect","PengajuanFileUpload","PengajuanIndex","PengajuanDetail","PengajuanEdit","JobTypeConfiguration","AdminWilayahDashboard","AdminWilayahUploadPage","PageLoading","queryClient","QueryClient","ProtectedRoute","Navigate","AdminRoute","AdminOperatorRoute","AdminWilayahRoute","AppRoutes","Routes","Route","Suspense","AppInner","showSessionExpiredModal","setShowSessionExpiredModal","navigate","useNavigate","handleGlobalError","event","_a","_b","handleUnhandledRejection","originalFetch","args","QueryClientProvider","Lock","App","BrowserRouter"],"ignoreList":[0],"sources":["../../node_modules/react-dom/client.js","../../src/lib/utils.ts","../../src/components/ui/tooltip.tsx","../../src/lib/api.ts","../../src/contexts/AuthContext.tsx","../../src/components/ui/button.tsx","../../src/components/ui/dropdown-menu.tsx","../../src/components/ui/dialog.tsx","../../src/components/ui/avatar.tsx","../../src/components/ui/input.tsx","../../src/components/ui/badge.tsx","../../src/components/NavigationBar.tsx","../../src/components/ui/skeleton.tsx","../../src/hooks/use-toast.ts","../../src/components/ui/toast.tsx","../../src/components/ui/toaster.tsx","../../src/components/AppLayout.tsx","../../src/components/ErrorBoundary.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\n// Fungsi untuk mengkonversi tanggal ke format Indonesia dengan nama bulan\r\nexport function formatTanggalIndonesia(tanggal: string) {\r\n  if (!tanggal) return '';\r\n  const bulanIndo = [\r\n    '', 'Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',\r\n    'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'\r\n  ];\r\n  let d, m, y;\r\n  if (/\\d{4}-\\d{2}-\\d{2}/.test(tanggal)) {\r\n    // yyyy-mm-dd\r\n    [y, m, d] = tanggal.split('-');\r\n    return `${parseInt(d, 10)} ${bulanIndo[parseInt(m, 10)]} ${y}`;\r\n  } else if (/\\d{2}-\\d{2}-\\d{4}/.test(tanggal)) {\r\n    // dd-mm-yyyy\r\n    [d, m, y] = tanggal.split('-');\r\n    return `${parseInt(d, 10)} ${bulanIndo[parseInt(m, 10)]} ${y}`;\r\n  } else {\r\n    return tanggal;\r\n  }\r\n}\r\n\r\n\r\n\r\n// Format nama kabupaten/kota agar rapi (Kota Mataram, Kabupaten Lombok Timur)\r\nexport function formatKabKota(str: string): string {\r\n  if (!str) return '';\r\n  return str\r\n    .toLowerCase()\r\n    .replace(/^(kota|kabupaten)/, (m) => m.charAt(0).toUpperCase() + m.slice(1))\r\n    .replace(/(^| )([a-z])/g, (s) => s.toUpperCase());\r\n}\r\n\r\nexport function getKanwilSettings() {\r\n  try {\r\n    const savedSettings = localStorage.getItem('kanwilSettings');\r\n    if (savedSettings) {\r\n      const parsed = JSON.parse(savedSettings);\r\n      return {\r\n        tingkat1: parsed.tingkat1 || 'KEMENTERIAN AGAMA REPUBLIK INDONESIA',\r\n        tingkat2: parsed.tingkat2 || 'KANTOR WILAYAH KEMENTERIAN AGAMA',\r\n        tingkat3: parsed.tingkat3 || 'PROVINSI NUSA TENGGARA BARAT',\r\n        alamat: parsed.alamat || '',\r\n        telepon: parsed.telepon || '',\r\n        fax: parsed.fax || '',\r\n        email: parsed.email || '',\r\n        website: parsed.website || ''\r\n      };\r\n    }\r\n  } catch (err) {\r\n    console.error('Error parsing kanwil settings:', err);\r\n  }\r\n\r\n  // Default values if no settings found\r\n  return {\r\n    tingkat1: 'KEMENTERIAN AGAMA REPUBLIK INDONESIA',\r\n    tingkat2: 'KANTOR WILAYAH KEMENTERIAN AGAMA',\r\n    tingkat3: 'PROVINSI NUSA TENGGARA BARAT',\r\n    alamat: '',\r\n    telepon: '',\r\n    fax: '',\r\n    email: '',\r\n    website: ''\r\n  };\r\n}\r\n\r\n// Role-based permission utilities\r\nexport const canCreate = (userRole: string): boolean => {\r\n  return ['admin', 'operator'].includes(userRole);\r\n};\r\n\r\nexport const canEdit = (userRole: string): boolean => {\r\n  return ['admin', 'operator'].includes(userRole);\r\n};\r\n\r\nexport const canDelete = (userRole: string): boolean => {\r\n  return userRole === 'admin';\r\n};\r\n\r\nexport const canManageUsers = (userRole: string): boolean => {\r\n  return userRole === 'admin';\r\n};\r\n\r\nexport const canManageSettings = (userRole: string): boolean => {\r\n  return userRole === 'admin';\r\n};\r\n\r\nexport const isViewOnly = (userRole: string): boolean => {\r\n  return userRole === 'user';\r\n};\r\n","import * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n","// Helper API untuk request ke backend dengan JWT\nimport { useAuth } from '@/contexts/AuthContext';\n\n// Environment configuration - simplified\nconst getBaseUrl = () => {\n  // Use environment variable if available, otherwise detect based on hostname\n  const apiUrl = import.meta.env.VITE_API_URL;\n  \n  if (apiUrl) {\n    return apiUrl;\n  }\n  \n  // Fallback: detect based on hostname\n  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n    return 'http://localhost:3001';\n  }\n\n  // Production default: use same-origin with relative path (to be reverse-proxied, e.g., /api)\n  // This avoids mixed content when the app is served over HTTPS\n  return '';\n};\n\n// Get current environment for logging\nconst getCurrentEnvironment = () => {\n  const apiUrl = import.meta.env.VITE_API_URL;\n  \n  if (apiUrl) {\n    return apiUrl.includes('localhost') ? 'development' : 'production';\n  }\n  \n  return window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' \n    ? 'development' \n    : 'production';\n};\n\nexport async function apiFetch(method: string, url: string, options: { data?: any; token?: string; headers?: any } = {}) {\n  const { data, token, headers = {} } = options;\n  const BASE_URL = getBaseUrl();\n  const fullUrl = url.startsWith('http') ? url : BASE_URL + url;\n  \n  const fetchOptions: RequestInit = {\n    method,\n    headers: {\n      ...headers,\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    },\n    credentials: 'include', // penting agar cookie refresh token dikirim\n  };\n  if (data) {\n    // Jika data adalah FormData, biarkan browser set Content-Type boundary otomatis\n    if (typeof FormData !== 'undefined' && data instanceof FormData) {\n      fetchOptions.body = data as any;\n    } else {\n      fetchOptions.headers = {\n        'Content-Type': 'application/json',\n        ...fetchOptions.headers,\n      };\n      fetchOptions.body = JSON.stringify(data);\n    }\n  }\n  let res = await fetch(fullUrl, fetchOptions);\n  let contentType = res.headers.get('content-type');\n  let responseData;\n  if (contentType && contentType.includes('application/json')) {\n    responseData = await res.json();\n  } else {\n    responseData = await res.text();\n  }\n  \n  // Handle authentication errors (401) and authorization errors (403) that might indicate session expiry\n  if ((res.status === 401 || res.status === 403) && url !== '/api/auth/refresh') {\n    try {\n      const refreshRes = await fetch(getBaseUrl() + '/api/auth/refresh', {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n      });\n      if (refreshRes.ok) {\n        const refreshData = await refreshRes.json();\n        if (refreshData.token) {\n          localStorage.setItem('token', refreshData.token);\n          // Update AuthContext jika ada\n          if (window.dispatchTokenUpdate) {\n            window.dispatchTokenUpdate(refreshData.token);\n          }\n          // Retry request dengan token baru\n          fetchOptions.headers = {\n            ...fetchOptions.headers,\n            Authorization: `Bearer ${refreshData.token}`,\n          };\n          res = await fetch(fullUrl, fetchOptions);\n          contentType = res.headers.get('content-type');\n          if (contentType && contentType.includes('application/json')) {\n            responseData = await res.json();\n          } else {\n            responseData = await res.text();\n          }\n          if (!res.ok) throw new Error(responseData?.message || res.statusText);\n          return responseData;\n        }\n      }\n      // Jika refresh gagal, trigger modal sesi berakhir global\n      if (window.showSessionExpiredModal) {\n        window.showSessionExpiredModal();\n      }\n      throw new Error('Sesi berakhir, silakan login kembali');\n    } catch (err) {\n      if (window.showSessionExpiredModal) {\n        window.showSessionExpiredModal();\n      }\n      throw new Error('Sesi berakhir, silakan login kembali');\n    }\n  }\n  \n  if (!res.ok) {\n    throw new Error(responseData?.message || res.statusText);\n  }\n  return responseData;\n}\n\nexport const apiGet = (url: string, token?: string, headers?: any) => apiFetch('GET', url, { token, headers });\nexport const apiPost = (url: string, data?: any, token?: string, headers?: any) => apiFetch('POST', url, { data, token, headers });\nexport const apiPut = (url: string, data?: any, token?: string, headers?: any) => apiFetch('PUT', url, { data, token, headers });\nexport const apiDelete = (url: string, token?: string, headers?: any) => apiFetch('DELETE', url, { token, headers }); ","\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { apiPost, apiGet } from '../lib/api';\n\ninterface User {\n  id: string;\n  email: string;\n  full_name: string;\n  role: 'admin' | 'operator' | 'user' | 'admin_wilayah';\n  office_id?: string | null;\n  kabkota?: string;\n  original_admin_id?: string; // For impersonation tracking\n  impersonating?: boolean;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  originalUser: User | null; // User asli sebelum impersonate\n  token: string | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n  refreshUser: () => Promise<void>;\n  isAuthenticated: boolean;\n  isImpersonating: boolean;\n  isAdminKanwil: boolean; // Admin kanwil yang bisa impersonate\n  impersonateUser: (userId: string) => Promise<void>;\n  stopImpersonating: () => Promise<void>;\n  updateToken: (newToken: string) => void;\n}\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [originalUser, setOriginalUser] = useState<User | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [originalToken, setOriginalToken] = useState<string | null>(null); // token admin asli\n  const [loading, setLoading] = useState(true);\n\n  // Setup window functions untuk refresh token\n  useEffect(() => {\n    // Fungsi untuk update token dari API layer\n    window.dispatchTokenUpdate = (newToken: string) => {\n      setToken(newToken);\n      localStorage.setItem('token', newToken);\n    };\n\n    // Fungsi untuk show session expired modal\n    window.showSessionExpiredModal = () => {\n      // Cek apakah sedang di halaman login\n      const currentPath = window.location.pathname;\n      const isOnLoginPage = currentPath === '/' || currentPath === '/login';\n      \n      // Jika sedang di halaman login, langsung logout tanpa modal/redirect\n      if (isOnLoginPage) {\n        logout();\n        return;\n      }\n      \n      // Jika di halaman lain, logout dan redirect ke login\n      logout();\n      window.location.href = '/';\n    };\n\n    return () => {\n      delete window.dispatchTokenUpdate;\n      delete window.showSessionExpiredModal;\n    };\n  }, []);\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    const storedOriginalToken = localStorage.getItem('originalToken');\n    const storedOriginalUser = localStorage.getItem('originalUser');\n    \n    if (storedToken) {\n      setToken(storedToken);\n      \n      // Restore original token and user if they exist (for impersonation)\n      if (storedOriginalToken && storedOriginalUser) {\n        try {\n          setOriginalToken(storedOriginalToken);\n          setOriginalUser(JSON.parse(storedOriginalUser));\n        } catch (error) {\n          console.error('Error parsing stored original user:', error);\n          // Clear invalid stored data\n          localStorage.removeItem('originalToken');\n          localStorage.removeItem('originalUser');\n        }\n      }\n      \n      apiGet('/api/auth/me', storedToken)\n        .then((res) => {\n          setUser(res.user);\n          // Jika user sudah login dan tidak ada originalUser, set originalUser\n          if (!originalUser && !storedOriginalUser) {\n            setOriginalUser(res.user);\n          }\n        })\n        .catch((error) => {\n          console.error('Error fetching user:', error);\n          logout();\n        })\n        .finally(() => setLoading(false));\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    setLoading(true);\n    try {\n      const res = await apiPost('/api/auth/login', { email, password });\n      setToken(res.token);\n      setUser(res.user);\n      setOriginalUser(res.user); // Set original user saat login\n      setOriginalToken(null); // Reset impersonate\n      localStorage.setItem('token', res.token);\n      \n      // Clean up impersonation data from localStorage\n      localStorage.removeItem('originalToken');\n      localStorage.removeItem('originalUser');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const logout = () => {\n    setToken(null);\n    setUser(null);\n    setOriginalUser(null);\n    setOriginalToken(null);\n    localStorage.removeItem('token');\n    localStorage.removeItem('originalToken');\n    localStorage.removeItem('originalUser');\n  };\n\n  const refreshUser = async () => {\n    if (!token) return;\n    setLoading(true);\n    try {\n      const res = await apiGet('/api/auth/me', token);\n      setUser(res.user);\n      // Jangan update originalUser saat refresh\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fungsi untuk update token (dipanggil dari API layer)\n  const updateToken = (newToken: string) => {\n    setToken(newToken);\n    localStorage.setItem('token', newToken);\n  };\n\n  // Impersonate: request token baru ke backend, simpan token admin asli, set token impersonate\n  const impersonateUser = async (userId: string) => {\n    if (!token || !isAdminKanwil) {\n      throw new Error('Only admin kanwil can impersonate');\n    }\n    setLoading(true);\n    try {\n      // Simpan token admin asli jika belum\n      if (!originalToken) {\n        setOriginalToken(token);\n        localStorage.setItem('originalToken', token);\n      }\n      \n      // Simpan original user jika belum\n      if (!originalUser) {\n        setOriginalUser(user);\n        localStorage.setItem('originalUser', JSON.stringify(user));\n      }\n      \n      const res = await apiPost('/api/auth/impersonate', { userId }, token);\n      setToken(res.token);\n      setUser(res.user);\n      localStorage.setItem('token', res.token);\n      \n      console.log('Impersonation started:', res.impersonation);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Stop impersonate: call backend then restore token admin asli\n  const stopImpersonating = async () => {\n    if (!token || (!user?.impersonating && !originalToken)) {\n      console.log('No impersonation to stop:', { \n        hasToken: !!token, \n        userImpersonating: user?.impersonating, \n        hasOriginalToken: !!originalToken \n      });\n      return;\n    }\n    \n    setLoading(true);\n    try {\n      console.log('Stopping impersonation...');\n      // Call backend to stop impersonation\n      const res = await apiPost('/api/auth/stop-impersonate', {}, token);\n      \n      // Restore admin token\n      setToken(res.token);\n      setUser(res.user);\n      setOriginalToken(null);\n      localStorage.setItem('token', res.token);\n      \n      // Clean up localStorage\n      localStorage.removeItem('originalToken');\n      localStorage.removeItem('originalUser');\n      \n      console.log('Impersonation stopped successfully');\n    } catch (error) {\n      console.error('Error stopping impersonation:', error);\n      // Fallback: restore from stored token\n      if (originalToken && originalUser) {\n        console.log('Using fallback restore');\n        setToken(originalToken);\n        setUser(originalUser);\n        setOriginalToken(null);\n        localStorage.setItem('token', originalToken);\n        \n        // Clean up localStorage\n        localStorage.removeItem('originalToken');\n        localStorage.removeItem('originalUser');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n    const isImpersonating = !!originalToken || !!user?.impersonating;\n  const isAdminKanwil = user?.role === 'admin' && user?.office_id === null;\n\n  return (\n    <AuthContext.Provider value={{ \n      user, \n      originalUser,\n      token,\n      loading,\n      login,\n      logout,\n      refreshUser,\n      isAuthenticated: !!user && !!token,\n      isImpersonating,\n      isAdminKanwil,\n      impersonateUser,\n      stopImpersonating,\n      updateToken\n    }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n\n// Extend Window interface untuk TypeScript\ndeclare global {\n  interface Window {\n    dispatchTokenUpdate?: (token: string) => void;\n    showSessionExpiredModal?: () => void;\n  }\n}\n","import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-[9999] bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 duration-200\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n","import * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","\nimport React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiGet } from '@/lib/api';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport { \n  Home, \n  FileText, \n  Settings, \n  LogOut, \n  Menu, \n  X,\n  AlertTriangle,\n  UserCheck,\n  Users,\n  UserX,\n  Loader2,\n  UserCog,\n  Upload,\n  CheckCircle,\n  Search,\n  ArrowLeft,\n  User\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\n\n\ninterface User {\n  id: string;\n  email: string;\n  full_name: string;\n  role: 'admin' | 'operator' | 'user';\n  office_id?: string;\n}\n\nconst NavigationBar = () => {\n  const { user, originalUser, isImpersonating, impersonateUser, stopImpersonating, logout, token, loading, isAdminKanwil } = useAuth();\n  const location = useLocation();\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const [showLogoutModal, setShowLogoutModal] = useState(false);\n  const [showImpersonateModal, setShowImpersonateModal] = useState(false);\n  const [showStopImpersonateModal, setShowStopImpersonateModal] = useState(false);\n  const [showStopSuccessModal, setShowStopSuccessModal] = useState(false);\n  const [selectedUser, setSelectedUser] = useState('');\n  const [availableUsers, setAvailableUsers] = useState<User[]>([]);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [showUserSelectionModal, setShowUserSelectionModal] = useState(false);\n  const [userSearchTerm, setUserSearchTerm] = useState('');\n\n\n  // Navigation items berdasarkan role\n  const getNavigationItems = () => {\n    const baseItems = [\n      { name: 'Dashboard', href: '/dashboard', icon: Home },\n      { name: 'Template Generator', href: '/generator', icon: FileText },\n      { name: 'Riwayat Surat', href: '/letters', icon: FileText },\n      { name: 'Data Pengajuan', href: '/pengajuan', icon: Upload },\n    ];\n\n    // Tambahkan Management User untuk admin\n    // Gunakan originalUser?.role jika sedang impersonate, atau user?.role jika tidak\n    const isAdmin = isImpersonating ? originalUser?.role === 'admin' : user?.role === 'admin';\n    if (isAdmin) {\n      baseItems.push({ name: 'Management User', href: '/users', icon: UserCog });\n    }\n\n    // Tambahkan menu khusus untuk admin wilayah\n    const isAdminWilayah = isImpersonating ? originalUser?.role === 'admin_wilayah' : user?.role === 'admin_wilayah';\n    if (isAdminWilayah) {\n      baseItems.push(\n        { name: 'Dashboard Admin Wilayah', href: '/admin-wilayah/dashboard', icon: Home },\n        { name: 'Upload File', href: '/admin-wilayah/upload', icon: Upload }\n      );\n    }\n\n\n\n    baseItems.push({ name: 'Settings', href: '/settings', icon: Settings });\n\n    return baseItems;\n  };\n\n  const navigationItems = getNavigationItems();\n\n  // Fetch available users untuk impersonate\n  useEffect(() => {\n    if (showUserSelectionModal && isAdminKanwil) {\n      fetchAvailableUsers();\n    }\n  }, [showUserSelectionModal, isAdminKanwil]);\n\n  const fetchAvailableUsers = async () => {\n    if (!token) return;\n    \n    setLoadingUsers(true);\n    try {\n      console.log(' Fetching users for impersonation...');\n      const response = await apiGet('/api/users', token);\n      console.log(' Raw users response:', response);\n      \n      // Filter out current user dan admin lain\n      const filteredUsers = response.users.filter((u: User) => \n        u.id !== originalUser?.id && u.role !== 'admin'\n      );\n      console.log('✅ Filtered users:', filteredUsers);\n      setAvailableUsers(filteredUsers);\n    } catch (error) {\n      console.error('❌ Failed to fetch users:', error);\n      setAvailableUsers([]);\n    } finally {\n      setLoadingUsers(false);\n    }\n  };\n\n  // Deteksi active, support /letters dan /letters/:id, serta /pengajuan dan /pengajuan/:id\n  const isActive = (path: string) => {\n    if (path === '/letters') {\n      return location.pathname.startsWith('/letters');\n    }\n    if (path === '/pengajuan') {\n      return location.pathname.startsWith('/pengajuan');\n    }\n    return location.pathname === path;\n  };\n\n  const handleLogoutClick = () => {\n    setShowLogoutModal(true);\n    setIsMobileMenuOpen(false);\n  };\n\n  const handleLogoutConfirm = () => {\n    logout();\n    setShowLogoutModal(false);\n  };\n\n  const handleImpersonateClick = () => {\n    setShowUserSelectionModal(true); // Buka modal selection dulu\n    setIsMobileMenuOpen(false);\n  };\n\n  const handleUserSelection = (userId: string) => {\n    setSelectedUser(userId);\n    setShowUserSelectionModal(false);\n    setShowImpersonateModal(true);\n  };\n\n  const filteredUsers = availableUsers.filter(user =>\n    user.full_name.toLowerCase().includes(userSearchTerm.toLowerCase()) ||\n    user.email.toLowerCase().includes(userSearchTerm.toLowerCase())\n  );\n\n  const handleImpersonateConfirm = async () => {\n    if (selectedUser) {\n      try {\n        await impersonateUser(selectedUser);\n        setShowImpersonateModal(false);\n        setSelectedUser('');\n      } catch (error) {\n        console.error('Failed to impersonate user:', error);\n        alert('Failed to impersonate user. Please try again.');\n      }\n    }\n  };\n\n  const handleStopImpersonatingClick = () => {\n    setShowStopImpersonateModal(true);\n    setIsMobileMenuOpen(false);\n  };\n\n  const handleStopImpersonatingConfirm = async () => {\n    try {\n      await stopImpersonating();\n      setShowStopImpersonateModal(false);\n      setShowStopSuccessModal(true);\n      \n      // Auto close success modal after 3 seconds\n      setTimeout(() => {\n        setShowStopSuccessModal(false);\n      }, 3000);\n    } catch (error) {\n      console.error('Failed to stop impersonating:', error);\n      alert('Failed to stop impersonating. Please try again.');\n    }\n  };\n\n  return (\n    <>\n      <nav className=\"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            {/* Logo and Brand */}\n            <div className=\"flex items-center\">\n              <Link to=\"/dashboard\" className=\"flex items-center space-x-3\">\n                <img \n                  src=\"/FE/logo-kemenag.png\"\n                  alt=\"Kementerian Agama\" \n                  className=\"h-8 w-8\"\n                  onError={(e) => {\n                    console.error('Logo Kemenag not found');\n                    e.currentTarget.style.display = 'none';\n                  }}\n                />\n                <div className=\"hidden sm:block\">\n                  <h1 className=\"text-lg font-semibold text-green-700\">\n                    Surat Generator\n                  </h1>\n                  <p className=\"text-xs text-gray-600\">\n                    Kementerian Agama RI\n                  </p>\n                </div>\n              </Link>\n            </div>\n\n            {/* Impersonate Indicator */}\n            {isImpersonating && (\n              <div className=\"hidden md:flex items-center bg-blue-50 border border-blue-200 rounded-lg px-3 py-1\">\n                <UserCheck className=\"w-4 h-4 text-blue-600 mr-2\" />\n                <span className=\"text-sm text-blue-700\">\n                  Impersonating: {user?.full_name}\n                </span>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={handleStopImpersonatingClick}\n                  className=\"ml-2 h-6 px-2 text-blue-600 hover:text-blue-700\"\n                >\n                  <UserX className=\"w-3 h-3\" />\n                </Button>\n              </div>\n            )}\n\n            {/* Desktop Navigation */}\n            <div className=\"hidden md:flex items-center space-x-8\">\n              {navigationItems.map((item) => {\n                const Icon = item.icon;\n                return (\n                  <Link\n                    key={item.name}\n                    to={item.href}\n                    className={cn(\n                      \"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n                      isActive(item.href)\n                        ? \"bg-green-100 text-green-700\"\n                        : \"text-gray-600 hover:text-green-700 hover:bg-green-50\"\n                    )}\n                  >\n                    <Icon className=\"h-4 w-4\" />\n                    <span>{item.name}</span>\n                  </Link>\n                );\n              })}\n              \n\n            </div>\n\n            {/* User Menu */}\n            <div className=\"flex items-center space-x-4\">\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"ghost\" className=\"relative h-8 w-8 rounded-full\">\n                    <Avatar className=\"h-8 w-8\">\n                      <AvatarFallback className=\"bg-green-100 text-green-700\">\n                        {loading ? (\n                          <span className=\"animate-pulse w-6 h-6 block bg-green-200 rounded-full mx-auto\" />\n                        ) : user?.full_name ? (\n                          user.full_name.split(' ').map(n => n[0]).join('').toUpperCase()\n                        ) : (\n                          '?'\n                        )}\n                      </AvatarFallback>\n                    </Avatar>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent className=\"w-64\" align=\"end\">\n                  <DropdownMenuLabel className=\"font-normal\">\n                    <div className=\"flex flex-col space-y-1\">\n                      <p className=\"text-sm font-semibold leading-none\">{user?.full_name}</p>\n                      <p className=\"text-xs leading-none text-muted-foreground\">{user?.email}</p>\n                      {isAdminKanwil ? (\n                        <p className=\"text-xs leading-none text-blue-600 font-medium\">\n                          👑 Admin Kanwil (All Access)\n                        </p>\n                      ) : (\n                        <p className=\"text-xs leading-none text-gray-500\">Role: {user?.role}</p>\n                      )}\n                      {user?.office_id && !isAdminKanwil && <p className=\"text-xs leading-none text-gray-500\">Office ID: {user.office_id}</p>}\n                      {isImpersonating && (\n                        <p className=\"text-xs leading-none text-blue-600\">\n                          Impersonating as {user?.full_name}\n                        </p>\n                      )}\n                    </div>\n                  </DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  {/* Stop Impersonating option */}\n                  {isImpersonating && (\n                    <>\n                      <DropdownMenuItem onClick={handleStopImpersonatingClick} className=\"text-blue-600\">\n                        <UserX className=\"mr-2 h-4 w-4\" />\n                        <span>Stop Impersonating</span>\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                    </>\n                  )}\n                  {/* Impersonate option hanya untuk admin kanwil */}\n                  {isAdminKanwil && !isImpersonating && (\n                    <>\n                      <DropdownMenuItem onClick={handleImpersonateClick} className=\"text-blue-600\">\n                        <Users className=\"mr-2 h-4 w-4\" />\n                        <span>Impersonate User</span>\n                      </DropdownMenuItem>\n                      <DropdownMenuSeparator />\n                    </>\n                  )}\n                  <DropdownMenuItem onClick={handleLogoutClick} className=\"text-red-600\">\n                    <LogOut className=\"mr-2 h-4 w-4\" />\n                    <span>Logout</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n\n              {/* Mobile menu button */}\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"md:hidden\"\n                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n              >\n                {isMobileMenuOpen ? (\n                  <X className=\"h-5 w-5\" />\n                ) : (\n                  <Menu className=\"h-5 w-5\" />\n                )}\n              </Button>\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          {isMobileMenuOpen && (\n            <div className=\"md:hidden\">\n              <div className=\"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t\">\n\n                \n                {navigationItems.map((item) => {\n                  const Icon = item.icon;\n                  return (\n                    <Link\n                      key={item.name}\n                      to={item.href}\n                      className={cn(\n                        \"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium\",\n                        isActive(item.href)\n                          ? \"bg-green-100 text-green-700\"\n                          : \"text-gray-600 hover:text-green-700 hover:bg-green-50\"\n                      )}\n                      onClick={() => setIsMobileMenuOpen(false)}\n                    >\n                      <Icon className=\"h-5 w-5\" />\n                      <span>{item.name}</span>\n                    </Link>\n                  );\n                })}\n                {/* Stop Impersonating option untuk mobile */}\n                {isImpersonating && (\n                  <button\n                    onClick={handleStopImpersonatingClick}\n                    className=\"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full\"\n                  >\n                    <UserX className=\"h-5 w-5\" />\n                    <span>Stop Impersonating</span>\n                  </button>\n                )}\n                {/* Impersonate option untuk mobile */}\n                {isAdminKanwil && !isImpersonating && (\n                  <button\n                    onClick={handleImpersonateClick}\n                    className=\"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full\"\n                  >\n                    <Users className=\"h-5 w-5\" />\n                    <span>Impersonate User</span>\n                  </button>\n                )}\n                <button\n                  onClick={handleLogoutClick}\n                  className=\"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 w-full\"\n                >\n                  <LogOut className=\"h-5 w-5\" />\n                  <span>Logout</span>\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </nav>\n\n      {/* Logout Confirmation Modal */}\n      <Dialog open={showLogoutModal} onOpenChange={setShowLogoutModal}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <AlertTriangle className=\"w-5 h-5 text-orange-500\" />\n              Konfirmasi Logout\n            </DialogTitle>\n            <DialogDescription>\n              Apakah Anda yakin ingin keluar dari sistem? Anda perlu login kembali untuk mengakses aplikasi.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex justify-end gap-2\">\n            <Button \n              onClick={() => setShowLogoutModal(false)}\n              variant=\"outline\"\n            >\n              Batal\n            </Button>\n            <Button \n              onClick={handleLogoutConfirm}\n              className=\"bg-red-600 hover:bg-red-700 text-white\"\n            >\n              Logout\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* User Selection Modal */}\n      <Dialog open={showUserSelectionModal} onOpenChange={setShowUserSelectionModal}>\n        <DialogContent className=\"sm:max-w-lg\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <UserCheck className=\"w-5 h-5 text-blue-500\" />\n              Pilih User untuk Impersonate\n            </DialogTitle>\n            <DialogDescription>\n              Pilih user yang ingin Anda impersonate dari daftar di bawah ini.\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            {/* Search Input */}\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n              <Input\n                placeholder=\"Cari user...\"\n                value={userSearchTerm}\n                onChange={(e) => setUserSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n\n            {/* User List */}\n            <div className=\"max-h-96 overflow-y-auto border rounded-lg\">\n              {loadingUsers ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <Loader2 className=\"w-6 h-6 animate-spin mr-2\" />\n                  <span className=\"text-sm text-gray-500\">Loading users...</span>\n                </div>\n              ) : availableUsers.length === 0 ? (\n                <div className=\"p-4 text-center text-gray-500\">\n                  Tidak ada user yang tersedia untuk impersonation\n                </div>\n              ) : filteredUsers.length === 0 ? (\n                <div className=\"p-4 text-center text-gray-500\">\n                  Tidak ada user yang cocok dengan pencarian\n                </div>\n              ) : (\n                <div className=\"divide-y\">\n                  {filteredUsers.map((user) => (\n                    <div\n                      key={user.id}\n                      className=\"p-4 hover:bg-gray-50 cursor-pointer transition-colors\"\n                      onClick={() => handleUserSelection(user.id)}\n                    >\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"p-2 bg-blue-100 rounded-lg\">\n                          <User className=\"w-4 h-4 text-blue-600\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"font-medium text-sm\">{user.full_name}</div>\n                          <div className=\"text-xs text-gray-500\">{user.email}</div>\n                          <div className=\"flex items-center space-x-2 mt-1\">\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {user.role}\n                            </Badge>\n                            <span className=\"text-xs text-gray-500\">\n                              {user.office_id || 'No Office'}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button \n              onClick={() => setShowUserSelectionModal(false)}\n              variant=\"outline\"\n            >\n              Batal\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Impersonate User Modal (Modified) */}\n      <Dialog open={showImpersonateModal} onOpenChange={setShowImpersonateModal}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <UserCheck className=\"w-5 h-5 text-blue-500\" />\n              Impersonate User\n            </DialogTitle>\n            <DialogDescription>\n              Konfirmasi untuk impersonate user yang dipilih.\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            {selectedUser && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"p-2 bg-blue-100 rounded-lg\">\n                    <User className=\"w-4 h-4 text-blue-600\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    {(() => {\n                      const selectedUserData = availableUsers.find(u => u.id === selectedUser);\n                      return selectedUserData ? (\n                        <>\n                          <div className=\"font-medium text-sm\">{selectedUserData.full_name}</div>\n                          <div className=\"text-xs text-gray-500\">{selectedUserData.email}</div>\n                          <div className=\"flex items-center space-x-2 mt-1\">\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {selectedUserData.role}\n                            </Badge>\n                            <span className=\"text-xs text-gray-500\">\n                              {selectedUserData.office_id || 'No Office'}\n                            </span>\n                          </div>\n                        </>\n                      ) : (\n                        <div className=\"text-sm text-gray-500\">User tidak ditemukan</div>\n                      );\n                    })()}\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            <div className=\"flex items-center justify-center\">\n              <Button \n                onClick={() => {\n                  setShowImpersonateModal(false);\n                  setShowUserSelectionModal(true);\n                }}\n                variant=\"outline\"\n                className=\"w-full\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Pilih User Lain\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button \n              onClick={() => setShowImpersonateModal(false)}\n              variant=\"outline\"\n            >\n              Batal\n            </Button>\n            <Button \n              onClick={handleImpersonateConfirm}\n              disabled={!selectedUser}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n            >\n              Impersonate\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Stop Impersonate Confirmation Modal */}\n      <Dialog open={showStopImpersonateModal} onOpenChange={setShowStopImpersonateModal}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <UserX className=\"w-5 h-5 text-blue-500\" />\n              Stop Impersonating\n            </DialogTitle>\n            <DialogDescription>\n              Anda sedang mengakses sistem sebagai <strong>{user?.full_name}</strong>. \n              Apakah Anda yakin ingin kembali ke akun admin Anda?\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 my-4\">\n            <div className=\"flex items-center\">\n              <UserCheck className=\"w-4 h-4 text-blue-600 mr-2\" />\n              <span className=\"text-sm text-blue-700\">\n                Setelah stop impersonate, Anda akan kembali ke akun: <strong>{originalUser?.full_name}</strong>\n              </span>\n            </div>\n          </div>\n          <div className=\"flex justify-end gap-2\">\n            <Button \n              onClick={() => setShowStopImpersonateModal(false)}\n              variant=\"outline\"\n            >\n              Batal\n            </Button>\n            <Button \n              onClick={handleStopImpersonatingConfirm}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n            >\n              Ya, Stop Impersonating\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Stop Impersonate Success Modal */}\n      <Dialog open={showStopSuccessModal} onOpenChange={setShowStopSuccessModal}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <CheckCircle className=\"w-5 h-5 text-green-500\" />\n              Stop Impersonating Berhasil\n            </DialogTitle>\n            <DialogDescription>\n              Anda telah berhasil kembali ke akun admin Anda.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 my-4\">\n            <div className=\"flex items-center\">\n              <UserCheck className=\"w-4 h-4 text-green-600 mr-2\" />\n              <span className=\"text-sm text-green-700\">\n                Sekarang Anda mengakses sistem sebagai: <strong>{originalUser?.full_name}</strong>\n              </span>\n            </div>\n          </div>\n          <div className=\"flex justify-end\">\n            <Button \n              onClick={() => setShowStopSuccessModal(false)}\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              OK\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nexport default NavigationBar;\n","import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n","import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"@/components/ui/toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n","import * as React from \"react\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[10000] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-background text-foreground\",\r\n        destructive:\r\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n","import { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"@/components/ui/toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props}>\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n","\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport NavigationBar from './NavigationBar';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '@/components/ui/dialog';\r\nimport { Select, SelectTrigger, SelectContent, SelectItem, SelectValue } from '@/components/ui/select';\r\nimport { apiGet, apiPut } from '@/lib/api';\r\nimport { Button } from './ui/button';\r\nimport { Toaster } from '@/components/ui/toaster';\r\n\r\ninterface AppLayoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst AppLayout: React.FC<AppLayoutProps> = ({ children }) => {\r\n  const { user, token, refreshUser } = useAuth();\r\n  const [showOfficeModal, setShowOfficeModal] = useState(false);\r\n  const [offices, setOffices] = useState<any[]>([]);\r\n  const [selectedOffice, setSelectedOffice] = useState<string>('');\r\n  const [saving, setSaving] = useState(false);\r\n  const [notif, setNotif] = useState<{ success: boolean; message: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (user && !user.office_id) {\r\n      setShowOfficeModal(true);\r\n      if (token) {\r\n        apiGet('/api/offices', token).then(res => setOffices(res.offices || []));\r\n      }\r\n    } else {\r\n      setShowOfficeModal(false);\r\n    }\r\n  }, [user, token]);\r\n\r\n  const handleSaveOffice = async () => {\r\n    if (!selectedOffice || !user || !token) return;\r\n    setSaving(true);\r\n    try {\r\n      await apiPut(`/api/users/${user.id}/office`, { office_id: selectedOffice }, token);\r\n      await refreshUser();\r\n      setNotif({ success: true, message: 'Kantor berhasil dipilih dan terhubung ke akun Anda.' });\r\n      setShowOfficeModal(false);\r\n    } catch (err: any) {\r\n      setNotif({ success: false, message: 'Gagal menghubungkan kantor: ' + (err.message || 'Terjadi kesalahan.') });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (!user && token) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        <div className=\"h-16 bg-white border-b border-gray-200\">\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"flex justify-between items-center h-16\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Skeleton className=\"h-8 w-8 rounded\" />\r\n                <div className=\"space-y-1\">\r\n                  <Skeleton className=\"h-4 w-32\" />\r\n                  <Skeleton className=\"h-3 w-24\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-4\">\r\n                <Skeleton className=\"h-8 w-8 rounded-full\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"space-y-4\">\r\n            <Skeleton className=\"h-8 w-48\" />\r\n            <Skeleton className=\"h-32 w-full\" />\r\n            <Skeleton className=\"h-32 w-full\" />\r\n          </div>\r\n        </div>\r\n        <Toaster />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <NavigationBar />\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {children}\r\n      </main>\r\n      <Toaster />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppLayout;\r\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  public state: State = {\r\n    hasError: false\r\n  };\r\n\r\n  public static getDerivedStateFromError(error: Error): State {\r\n    // Check if error is related to 403 Forbidden\r\n    if (error.message.includes('403') || error.message.includes('Forbidden')) {\r\n      // Show session expired modal instead of error boundary\r\n      if (window.showSessionExpiredModal) {\r\n        window.showSessionExpiredModal();\r\n      }\r\n      return { hasError: false };\r\n    }\r\n    \r\n    return { hasError: true, error };\r\n  }\r\n\r\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    \r\n    // If it's a 403 error, show session expired modal\r\n    if (error.message.includes('403') || error.message.includes('Forbidden')) {\r\n      if (window.showSessionExpiredModal) {\r\n        window.showSessionExpiredModal();\r\n      }\r\n      return;\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n          <div className=\"max-w-md w-full bg-white shadow-lg rounded-lg p-6\">\r\n            <div className=\"text-center\">\r\n              <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\r\n                <svg className=\"h-6 w-6 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n                </svg>\r\n              </div>\r\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Terjadi Kesalahan</h3>\r\n              <p className=\"mt-1 text-sm text-gray-500\">\r\n                Maaf, terjadi kesalahan yang tidak terduga. Silakan coba refresh halaman atau hubungi administrator.\r\n              </p>\r\n              <div className=\"mt-6\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\r\n                  onClick={() => window.location.reload()}\r\n                >\r\n                  Refresh Halaman\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","\nimport React, { useState, useEffect, Suspense, lazy } from 'react'\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate } from \"react-router-dom\";\nimport { AuthProvider, useAuth } from \"@/contexts/AuthContext\";\nimport AppLayout from \"@/components/AppLayout\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport { Lock } from 'lucide-react';\n\n// Lazy load all pages for code splitting\nconst Dashboard = lazy(() => import(\"./pages/Dashboard\"));\nconst Settings = lazy(() => import(\"./pages/Settings\"));\nconst TemplateSelection = lazy(() => import(\"./pages/TemplateSelection\"));\nconst TemplateForm = lazy(() => import(\"./pages/TemplateForm\"));\nconst NotFound = lazy(() => import(\"./pages/NotFound\"));\nconst Index = lazy(() => import(\"./pages/Index\"));\nconst LetterDetail = lazy(() => import(\"./pages/LetterDetail\"));\nconst Letters = lazy(() => import(\"./pages/Letters\"));\nconst LetterPrintPreview = lazy(() => import(\"./pages/LetterPrintPreview\"));\nconst Users = lazy(() => import(\"./pages/Users\"));\nconst PengajuanSelect = lazy(() => import(\"./pages/PengajuanSelect\"));\nconst PengajuanFileUpload = lazy(() => import(\"./components/PengajuanFileUpload\"));\nconst PengajuanIndex = lazy(() => import(\"./pages/PengajuanIndex\"));\nconst PengajuanDetail = lazy(() => import(\"./pages/PengajuanDetail\"));\nconst PengajuanEdit = lazy(() => import(\"./pages/PengajuanEdit\"));\nconst JobTypeConfiguration = lazy(() => import(\"./pages/JobTypeConfiguration\"));\nconst AdminWilayahDashboard = lazy(() => import(\"./pages/AdminWilayahDashboard\"));\nconst AdminWilayahUploadPage = lazy(() => import(\"./pages/AdminWilayahUploadPage\"));\n\n// Loading component for Suspense fallback\nconst PageLoading = () => (\n  <div className=\"flex items-center justify-center min-h-screen\">\n    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600\"></div>\n  </div>\n);\n\nconst queryClient = new QueryClient();\n\nconst ProtectedRoute = ({ children }: { children: React.ReactNode }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return null; // AppLayout handles loading state\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/\" replace />;\n  }\n  \n  return <AppLayout>{children}</AppLayout>;\n};\n\nconst AdminRoute = ({ children }: { children: React.ReactNode }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!user || user.role !== 'admin') {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  \n  return <AppLayout>{children}</AppLayout>;\n};\n\nconst AdminOperatorRoute = ({ children }: { children: React.ReactNode }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!user || (user.role !== 'admin' && user.role !== 'operator')) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  \n  return <AppLayout>{children}</AppLayout>;\n};\n\nconst AdminWilayahRoute = ({ children }: { children: React.ReactNode }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!user || user.role !== 'admin_wilayah') {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  \n  return <AppLayout>{children}</AppLayout>;\n};\n\nconst AppRoutes = () => {\n  return (\n    <Routes>\n      <Route path=\"/\" element={\n        <Suspense fallback={<PageLoading />}>\n          <Index />\n        </Suspense>\n      } />\n      <Route path=\"/dashboard\" element={\n        <ProtectedRoute>\n          <Suspense fallback={<PageLoading />}>\n            <Dashboard />\n          </Suspense>\n        </ProtectedRoute>\n      } />\n      <Route path=\"/generator\" element={\n        <AdminOperatorRoute>\n          <Suspense fallback={<PageLoading />}>\n            <TemplateSelection />\n          </Suspense>\n        </AdminOperatorRoute>\n      } />\n      <Route path=\"/generator/create/:templateId\" element={\n        <AdminOperatorRoute>\n          <Suspense fallback={<PageLoading />}>\n            <TemplateForm />\n          </Suspense>\n        </AdminOperatorRoute>\n      } />\n      <Route path=\"/users\" element={\n        <AdminRoute>\n          <Suspense fallback={<PageLoading />}>\n            <Users />\n          </Suspense>\n        </AdminRoute>\n      } />\n      <Route path=\"/settings\" element={\n        <ProtectedRoute>\n          <Suspense fallback={<PageLoading />}>\n            <Settings />\n          </Suspense>\n        </ProtectedRoute>\n      } />\n      <Route path=\"/letters/:id\" element={\n        <ProtectedRoute>\n          <Suspense fallback={<PageLoading />}>\n            <LetterDetail />\n          </Suspense>\n        </ProtectedRoute>\n      } />\n      <Route path=\"/letters\" element={\n        <ProtectedRoute>\n          <Suspense fallback={<PageLoading />}>\n            <Letters />\n          </Suspense>\n        </ProtectedRoute>\n      } />\n      <Route path=\"/letters/:id/preview\" element={\n        <Suspense fallback={<PageLoading />}>\n          <LetterPrintPreview />\n        </Suspense>\n      } />\n      <Route path=\"/pengajuan\" element={\n        <ProtectedRoute>\n          <Suspense fallback={<PageLoading />}>\n            <PengajuanIndex />\n          </Suspense>\n        </ProtectedRoute>\n      } />\n      <Route path=\"/pengajuan/select\" element={\n        <AdminOperatorRoute>\n          <Suspense fallback={<PageLoading />}>\n            <PengajuanSelect />\n          </Suspense>\n        </AdminOperatorRoute>\n      } />\n      <Route path=\"/pengajuan/:pengajuanId\" element={\n        <ProtectedRoute>\n          <Suspense fallback={<PageLoading />}>\n            <PengajuanDetail />\n          </Suspense>\n        </ProtectedRoute>\n      } />\n      <Route path=\"/pengajuan/:pengajuanId/upload\" element={\n        <AdminOperatorRoute>\n          <Suspense fallback={<PageLoading />}>\n            <PengajuanFileUpload />\n          </Suspense>\n        </AdminOperatorRoute>\n      } />\n      <Route path=\"/pengajuan/:pengajuanId/edit\" element={\n        <AdminOperatorRoute>\n          <Suspense fallback={<PageLoading />}>\n            <PengajuanEdit />\n          </Suspense>\n        </AdminOperatorRoute>\n      } />\n      <Route path=\"/job-type-configuration\" element={\n        <AdminRoute>\n          <Suspense fallback={<PageLoading />}>\n            <JobTypeConfiguration />\n          </Suspense>\n        </AdminRoute>\n      } />\n      \n      {/* Admin Wilayah Routes */}\n      <Route path=\"/admin-wilayah/dashboard\" element={\n        <AdminWilayahRoute>\n          <Suspense fallback={<PageLoading />}>\n            <AdminWilayahDashboard />\n          </Suspense>\n        </AdminWilayahRoute>\n      } />\n      <Route path=\"/admin-wilayah/upload/:pengajuanId\" element={\n        <AdminWilayahRoute>\n          <Suspense fallback={<PageLoading />}>\n            <AdminWilayahUploadPage />\n          </Suspense>\n        </AdminWilayahRoute>\n      } />\n      \n      \n      <Route path=\"*\" element={\n        <Suspense fallback={<PageLoading />}>\n          <NotFound />\n        </Suspense>\n      } />\n    </Routes>\n  );\n};\n\nconst AppInner = () => {\n  const [showSessionExpiredModal, setShowSessionExpiredModal] = useState(false);\n  const navigate = useNavigate();\n  \n  // Setup global error handling and session expired modal\n  useEffect(() => {\n    // Setup window functions\n    window.showSessionExpiredModal = () => {\n      // Cek apakah sedang di halaman login\n      const currentPath = window.location.pathname;\n      const isOnLoginPage = currentPath === '/' || currentPath === '/login';\n      \n      // Jika sedang di halaman login, jangan tampilkan modal\n      if (isOnLoginPage) {\n        return;\n      }\n      \n      // Jika di halaman lain, tampilkan modal\n      setShowSessionExpiredModal(true);\n    };\n    \n    window.dispatchTokenUpdate = (token) => {\n      localStorage.setItem('token', token);\n    };\n\n    // Handle global errors\n    const handleGlobalError = (event: ErrorEvent) => {\n      if (event.error && typeof event.error === 'object') {\n        const error = event.error as any;\n        if (error.status === 403 || error.message?.includes('403') || error.message?.includes('Forbidden')) {\n          event.preventDefault();\n          // Check if user is on login page\n          const currentPath = window.location.pathname;\n          const isOnLoginPage = currentPath === '/' || currentPath === '/login';\n          \n          if (!isOnLoginPage && window.showSessionExpiredModal) {\n            window.showSessionExpiredModal();\n          }\n        }\n      }\n    };\n\n    // Handle unhandled promise rejections (fetch errors)\n    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n      if (event.reason && typeof event.reason === 'object') {\n        const error = event.reason as any;\n        if (error.status === 403 || error.message?.includes('403') || error.message?.includes('Forbidden')) {\n          event.preventDefault();\n          // Check if user is on login page\n          const currentPath = window.location.pathname;\n          const isOnLoginPage = currentPath === '/' || currentPath === '/login';\n          \n          if (!isOnLoginPage && window.showSessionExpiredModal) {\n            window.showSessionExpiredModal();\n          }\n        }\n      }\n    };\n\n    // Intercept fetch requests to catch 403 errors\n    const originalFetch = window.fetch;\n    window.fetch = async (...args) => {\n      try {\n        const response = await originalFetch(...args);\n        \n        // If we get a 403 response, show session expired modal\n        if (response.status === 403) {\n          const url = typeof args[0] === 'string' ? args[0] : (args[0] as Request).url;\n          // Don't intercept auth-related requests\n          if (!url.includes('/api/auth/')) {\n            // Check if user is on login page\n            const currentPath = window.location.pathname;\n            const isOnLoginPage = currentPath === '/' || currentPath === '/login';\n            \n            if (!isOnLoginPage && window.showSessionExpiredModal) {\n              window.showSessionExpiredModal();\n            }\n            // Return a custom response to prevent the default 403 page\n            return new Response(JSON.stringify({ \n              success: false, \n              message: 'Sesi berakhir, silakan login kembali' \n            }), {\n              status: 403,\n              headers: { 'Content-Type': 'application/json' }\n            });\n          }\n        }\n        \n        return response;\n      } catch (error) {\n        // Re-throw the error if it's not a 403\n        throw error;\n      }\n    };\n\n    window.addEventListener('error', handleGlobalError);\n    window.addEventListener('unhandledrejection', handleUnhandledRejection);\n\n    return () => {\n      window.removeEventListener('error', handleGlobalError);\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n      window.fetch = originalFetch;\n      delete window.showSessionExpiredModal;\n      delete window.dispatchTokenUpdate;\n    };\n  }, []);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        {showSessionExpiredModal && (\n          <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200\">\n            <div className=\"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200\">\n              <Lock className=\"w-16 h-16 text-yellow-500 mb-4\" />\n              <h2 className=\"text-2xl font-bold mb-2 text-gray-900\">Sesi Berakhir</h2>\n              <p className=\"text-gray-600 mb-6 text-center\">Sesi Anda telah habis. Silakan login kembali untuk melanjutkan.</p>\n              <button\n                className=\"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400\"\n                onClick={() => {\n                  localStorage.removeItem('token');\n                  setShowSessionExpiredModal(false);\n                  navigate('/', { replace: true });\n                }}\n              >\n                Login Ulang\n              </button>\n            </div>\n          </div>\n        )}\n        <AuthProvider>\n          <AppRoutes />\n        </AuthProvider>\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n};\n\nconst App = () => (\n  <ErrorBoundary>\n    <BrowserRouter basename={import.meta.env.MODE === 'production' ? '/FE' : '/'}>\n      <AppInner />\n    </BrowserRouter>\n  </ErrorBoundary>\n);\n\nexport default App;\n","import React from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport App from './App.tsx'\r\nimport './index.css'\r\n\r\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\r\n"],"file":"assets/index-DMfYXVru.js"}