{"version":3,"file":"AdminWilayahDashboard-B2WTTzMS.js","sources":["../../src/pages/AdminWilayahDashboard.tsx"],"sourcesContent":["/** @jsxImportSource react */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { \r\n  Upload, \r\n  FileText, \r\n  CheckCircle, \r\n  Clock, \r\n  AlertCircle, \r\n  Users, \r\n  TrendingUp,\r\n  BarChart3,\r\n  Activity,\r\n  Calendar,\r\n  ArrowRight,\r\n  RefreshCw,\r\n  Download\r\n} from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet, apiPost } from '@/lib/api';\r\n\r\ninterface UploadActivity {\r\n  id: string;\r\n  pengajuan: {\r\n    id: string;\r\n    pegawai: {\r\n      nama: string;\r\n      nip: string;\r\n    };\r\n    jenis_jabatan: string;\r\n    status: string;\r\n  };\r\n  file_type: string;\r\n  file_name: string;\r\n  uploaded_by_name: string;\r\n  uploaded_by_office: string;\r\n  uploaded_at: string;\r\n  status: string;\r\n}\r\n\r\ninterface DashboardStats {\r\n  totalPengajuan: number;\r\n  pendingUpload: number;\r\n  completedUpload: number;\r\n  totalFiles: number;\r\n  verifiedFiles: number;\r\n  rejectedFiles: number;\r\n}\r\n\r\ninterface PengajuanDataTableItem {\r\n  id: string;\r\n  nama: string;\r\n  nip: string;\r\n  kabupaten: string;\r\n  status: string;\r\n  jenis_jabatan: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface StatusAggregation {\r\n  kabupaten: string;\r\n  total: number;\r\n  statuses: Array<{\r\n    status: string;\r\n    count: number;\r\n  }>;\r\n}\r\n\r\nconst AdminWilayahDashboard: React.FC = () => {\r\n  const { token } = useAuth();\r\n  const [activeTab, setActiveTab] = useState<'process' | 'archive' | 'rekap'>('process');\r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    totalPengajuan: 0,\r\n    pendingUpload: 0,\r\n    completedUpload: 0,\r\n    totalFiles: 0,\r\n    verifiedFiles: 0,\r\n    rejectedFiles: 0\r\n  });\r\n  const [recentUploads, setRecentUploads] = useState<UploadActivity[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [pengajuan, setPengajuan] = useState<any[]>([]);\r\n  const [submittingId, setSubmittingId] = useState<string | null>(null);\r\n  const [archive, setArchive] = useState<any[]>([]);\r\n  const [dataTableData, setDataTableData] = useState<PengajuanDataTableItem[]>([]);\r\n  const [aggregationData, setAggregationData] = useState<StatusAggregation[]>([]);\r\n  const [dataTableLoading, setDataTableLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [kabupatenFilter, setKabupatenFilter] = useState<string>('all');\r\n  // Drill-down state\r\n  const [drillKabupaten, setDrillKabupaten] = useState<string | null>(null);\r\n\r\n  // Generate recent activities from real data\r\n  const generateRecentActivities = () => {\r\n    const activities: Array<{\r\n      type: 'upload' | 'approval' | 'rejection' | 'system';\r\n      message: string;\r\n      time: string;\r\n    }> = [];\r\n\r\n    // Add recent uploads\r\n    recentUploads.slice(0, 3).forEach((upload) => {\r\n      const timeAgo = getTimeAgo(upload.uploaded_at);\r\n      activities.push({\r\n        type: 'upload',\r\n        message: `File ${upload.file_type} uploaded for ${upload.pengajuan.pegawai.nama} (NIP: ${upload.pengajuan.pegawai.nip})`,\r\n        time: timeAgo\r\n      });\r\n    });\r\n\r\n    // Add recent pengajuan status changes\r\n    pengajuan.slice(0, 2).forEach((item) => {\r\n      const timeAgo = getTimeAgo(item.updated_at || item.created_at);\r\n      if (item.status === 'approved') {\r\n        activities.push({\r\n          type: 'approval',\r\n          message: `Pengajuan approved for ${item.pegawai?.nama || 'Unknown'} (${item.jenis_jabatan})`,\r\n          time: timeAgo\r\n        });\r\n      } else if (item.status === 'rejected') {\r\n        activities.push({\r\n          type: 'rejection',\r\n          message: `Pengajuan rejected for ${item.pegawai?.nama || 'Unknown'} (${item.jenis_jabatan})`,\r\n          time: timeAgo\r\n        });\r\n      }\r\n    });\r\n\r\n    // Sort by most recent (assuming ISO date strings)\r\n    return activities.sort((a, b) => {\r\n      // For now, return as is since we're limiting to latest items already\r\n      return 0;\r\n    }).slice(0, 5); // Show max 5 activities\r\n  };\r\n\r\n  const getTimeAgo = (dateString: string): string => {\r\n    const now = new Date();\r\n    const date = new Date(dateString);\r\n    const diffInMs = now.getTime() - date.getTime();\r\n    const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60));\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n\r\n    if (diffInDays > 0) {\r\n      return `${diffInDays} day${diffInDays > 1 ? 's' : ''} ago`;\r\n    } else if (diffInHours > 0) {\r\n      return `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`;\r\n    } else {\r\n      return 'Just now';\r\n    }\r\n  };\r\n\r\n  const recentActivities = generateRecentActivities();\r\n  const [drillStatus, setDrillStatus] = useState<string | null>(null);\r\n  const [drillItems, setDrillItems] = useState<PengajuanDataTableItem[]>([]);\r\n  const [drillTotal, setDrillTotal] = useState(0);\r\n  const [drillPage, setDrillPage] = useState(1);\r\n  const [drillPageSize, setDrillPageSize] = useState(25);\r\n  const [drillLoading, setDrillLoading] = useState(false);\r\n  const [filterOptions, setFilterOptions] = useState<{\r\n    statuses: Array<{ value: string; label: string; count: number }>;\r\n  }>({ statuses: [] });\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const response = await apiGet('/api/admin-wilayah/dashboard', token);\r\n      // Terima berbagai bentuk payload: {success, data:{stats,...}} atau {success, stats, ...}\r\n      const statsPayload = response?.data?.stats || response?.stats;\r\n      const uploadsPayload = response?.data?.recentUploads || response?.recentUploads || [];\r\n      const pengajuanPayload = response?.data?.pengajuan || response?.pengajuan || [];\r\n\r\n      if (statsPayload) {\r\n        setStats({\r\n          totalPengajuan: Number(statsPayload.total_pengajuan || statsPayload.totalPengajuan || 0),\r\n          pendingUpload: Number(statsPayload.pending_upload || statsPayload.pendingUpload || 0),\r\n          completedUpload: Number(statsPayload.completed_upload || statsPayload.completedUpload || 0),\r\n          totalFiles: Number(statsPayload.total_files || statsPayload.totalFiles || 0),\r\n          verifiedFiles: Number(statsPayload.verified_files || statsPayload.verifiedFiles || 0),\r\n          rejectedFiles: Number(statsPayload.rejected_files || statsPayload.rejectedFiles || 0),\r\n        });\r\n        setRecentUploads(Array.isArray(uploadsPayload) ? uploadsPayload : []);\r\n        setPengajuan(Array.isArray(pengajuanPayload) ? pengajuanPayload : []);\r\n      } else {\r\n        setError('Failed to fetch dashboard data');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching dashboard data:', error);\r\n      setError('Error connecting to server');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchHistory = async () => {\r\n    try {\r\n      const res = await apiGet('/api/admin-wilayah/history', token);\r\n      const payload = res?.data?.pengajuan || res?.pengajuan || [];\r\n      setArchive(Array.isArray(payload) ? payload : []);\r\n    } catch (e) {\r\n      // ignore silently for history\r\n      setArchive([]);\r\n    }\r\n  };\r\n\r\n  const fetchDataTableData = async () => {\r\n    try {\r\n      setDataTableLoading(true);\r\n      const res = await apiGet('/api/admin-wilayah/pengajuan-datatable', token);\r\n      if (res?.success && res?.data) {\r\n        setDataTableData(res.data.pengajuan || []);\r\n        setAggregationData(res.data.aggregation || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching data table:', error);\r\n      setDataTableData([]);\r\n      setAggregationData([]);\r\n    } finally {\r\n      setDataTableLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchFilterOptions = async () => {\r\n    try {\r\n      const response = await apiGet('/api/pengajuan/filter-options', token);\r\n      if (response.success) {\r\n        setFilterOptions(response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching filter options:', error);\r\n    }\r\n  };\r\n\r\n  const fetchDrillDown = async (kabupaten: string, status: string, page = 1) => {\r\n    try {\r\n      setDrillLoading(true);\r\n      setDrillPage(page);\r\n      const params = new URLSearchParams({ kabupaten, status, page: String(page), pageSize: String(drillPageSize) });\r\n      const res = await apiGet(`/api/pengajuan/rekap/list?${params.toString()}`, token);\r\n      const items = res?.data?.items || res?.items || [];\r\n      const total = Number(res?.data?.total ?? res?.total ?? 0);\r\n      setDrillItems(items);\r\n      setDrillTotal(total);\r\n    } catch (e) {\r\n      setDrillItems([]);\r\n      setDrillTotal(0);\r\n    } finally {\r\n      setDrillLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmitToSuperadmin = async (id: string) => {\r\n    if (!token) return;\r\n    setSubmittingId(id);\r\n    try {\r\n      const res = await apiPost(`/api/admin-wilayah/pengajuan/${id}/submit-to-superadmin`, {}, token);\r\n      if (res?.success !== false) {\r\n        await fetchDashboardData();\r\n      }\r\n    } finally {\r\n      setSubmittingId(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n    fetchHistory();\r\n    fetchDataTableData();\r\n    fetchFilterOptions();\r\n  }, [token]);\r\n\r\n  // Auto-refresh progress setiap 30 detik untuk update live\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    \r\n    const interval = setInterval(() => {\r\n      fetchDashboardData();\r\n      fetchDataTableData();\r\n    }, 30000); // 30 detik\r\n\r\n    return () => clearInterval(interval);\r\n  }, [token]);\r\n\r\n  // Refresh data ketika user kembali ke halaman (window focus)\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    const handleFocus = () => {\r\n      fetchDashboardData();\r\n      fetchDataTableData();\r\n    };\r\n\r\n    window.addEventListener('focus', handleFocus);\r\n    return () => window.removeEventListener('focus', handleFocus);\r\n  }, [token]);\r\n\r\n  const getProgressPercentage = () => {\r\n    if (stats.totalFiles === 0) return 0;\r\n    return (stats.verifiedFiles / stats.totalFiles) * 100;\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('id-ID', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = {\r\n      draft: { label: 'Draf', className: 'bg-gray-100 text-gray-800' },\r\n      submitted: { label: 'Diajukan', className: 'bg-blue-100 text-blue-800' },\r\n      approved: { label: 'Disetujui', className: 'bg-green-100 text-green-800' },\r\n      rejected: { label: 'Ditolak', className: 'bg-red-100 text-red-800' },\r\n      resubmitted: { label: 'Diajukan Ulang', className: 'bg-yellow-100 text-yellow-800' },\r\n      admin_wilayah_approved: { label: 'Disetujui Admin Wilayah', className: 'bg-green-200 text-green-800' },\r\n      admin_wilayah_rejected: { label: 'Ditolak Admin Wilayah', className: 'bg-red-200 text-red-800' },\r\n      final_approved: { label: 'Selesai', className: 'bg-green-600 text-white' },\r\n      final_rejected: { label: 'Ditolak Final', className: 'bg-red-600 text-white' },\r\n    };\r\n\r\n    const config = statusConfig[status as keyof typeof statusConfig] || { \r\n      label: status.toUpperCase(), \r\n      className: 'bg-gray-100 text-gray-800' \r\n    };\r\n\r\n    return (\r\n      <Badge className={config.className}>\r\n        {config.label}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const getStatusLabel = (status: string) => {\r\n    const statusConfig = {\r\n      draft: 'Draf',\r\n      submitted: 'Diajukan',\r\n      approved: 'Disetujui',\r\n      rejected: 'Ditolak',\r\n      resubmitted: 'Diajukan Ulang',\r\n      admin_wilayah_approved: 'Disetujui Admin Wilayah',\r\n      admin_wilayah_rejected: 'Ditolak Admin Wilayah',\r\n      final_approved: 'Selesai',\r\n      final_rejected: 'Ditolak Final',\r\n    };\r\n\r\n    return statusConfig[status as keyof typeof statusConfig] || status.toUpperCase();\r\n  };\r\n\r\n  const exportExcel = () => {\r\n    // Sheet 1: Data Detail per Pengajuan (sudah terfilter berdasarkan scope admin wilayah)\r\n    const detailData = dataTableData.map(item => ({\r\n      'Nama': item.nama,\r\n      'Status': getStatusLabel(item.status),\r\n      'Kabupaten/Kota': item.kabupaten\r\n    }));\r\n\r\n    // Sheet 2: Summary per Kabupaten (sudah terfilter berdasarkan scope admin wilayah)\r\n    const summaryData = aggregationData.map(row => {\r\n      const countByStatus = row.statuses.reduce((acc, s) => { \r\n        acc[s.status] = s.count; \r\n        return acc; \r\n      }, {} as Record<string, number>);\r\n\r\n      return {\r\n        'Kabupaten/Kota': row.kabupaten,\r\n        'Draf': countByStatus['draft'] || 0,\r\n        'Diajukan': countByStatus['submitted'] || 0,\r\n        'Disetujui': countByStatus['approved'] || 0,\r\n        'Ditolak': countByStatus['rejected'] || 0,\r\n        'Diajukan Ulang': countByStatus['resubmitted'] || 0,\r\n        'Disetujui Admin Wilayah': countByStatus['admin_wilayah_approved'] || 0,\r\n        'Ditolak Admin Wilayah': countByStatus['admin_wilayah_rejected'] || 0,\r\n        'Selesai': countByStatus['final_approved'] || 0,\r\n        'Ditolak Final': countByStatus['final_rejected'] || 0,\r\n        'Total': row.total\r\n      };\r\n    });\r\n\r\n    // Buat workbook dengan 2 sheet\r\n    const wb = XLSX.utils.book_new();\r\n    \r\n    // Sheet 1: Data Detail\r\n    const ws1 = XLSX.utils.json_to_sheet(detailData);\r\n    XLSX.utils.book_append_sheet(wb, ws1, 'Data Detail Pengajuan');\r\n    \r\n    // Sheet 2: Summary per Kabupaten\r\n    const ws2 = XLSX.utils.json_to_sheet(summaryData);\r\n    XLSX.utils.book_append_sheet(wb, ws2, 'Rekap per Kabupaten');\r\n\r\n    // Generate filename dengan timestamp\r\n    const now = new Date();\r\n    const timestamp = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}`;\r\n    const filename = `Rekap_Status_Admin_Wilayah_${timestamp}.xlsx`;\r\n\r\n    // Download file\r\n    XLSX.writeFile(wb, filename);\r\n  };\r\n\r\n  // Filter data berdasarkan search term dan filter\r\n  const filteredData = dataTableData.filter(item => {\r\n    const matchesSearch = searchTerm === '' || \r\n      item.nama.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      item.nip.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      item.kabupaten.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      item.jenis_jabatan.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === 'all' || item.status === statusFilter;\r\n    const matchesKabupaten = kabupatenFilter === 'all' || item.kabupaten === kabupatenFilter;\r\n    \r\n    return matchesSearch && matchesStatus && matchesKabupaten;\r\n  });\r\n\r\n  // Get unique kabupaten untuk filter dropdown\r\n  const uniqueKabupaten = Array.from(new Set(dataTableData.map(item => item.kabupaten))).sort();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background p-6\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <div className=\"animate-pulse space-y-6\">\r\n            <div className=\"h-8 bg-gray-200 rounded w-1/3\"></div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              {[...Array(4)].map((_, i) => (\r\n                <div key={i} className=\"h-32 bg-gray-200 rounded\"></div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background p-6\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <div className=\"text-center py-12\">\r\n            <AlertCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Error Loading Dashboard</h2>\r\n            <p className=\"text-gray-600 mb-4\">{error}</p>\r\n            <Button onClick={fetchDashboardData} className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white\">\r\n              <RefreshCw className=\"h-4 w-4\" />\r\n              Retry\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background p-6\">\r\n      <div className=\"max-w-6xl mx-auto space-y-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard Admin Wilayah</h1>\r\n            <p className=\"text-gray-600 mt-2\">\r\n              Monitoring aktivitas upload file dan progress pengajuan\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button onClick={fetchDashboardData} variant=\"outline\" size=\"sm\" className=\"border-green-200 text-green-700 hover:bg-green-50\">\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Refresh\r\n            </Button>\r\n            <Button onClick={exportExcel} variant=\"outline\" size=\"sm\" className=\"border-green-200 text-green-700 hover:bg-green-50\">\r\n              <Download className=\"h-4 w-4 mr-2\" />\r\n              Export Excel\r\n            </Button>\r\n            <Activity className=\"h-6 w-6 text-green-600\" />\r\n            <Badge className=\"bg-green-100 text-green-800\">Admin Wilayah</Badge>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex gap-2\">\r\n          <Button className={`${activeTab === 'process' ? 'bg-green-600 hover:bg-green-700 text-white' : 'border-green-200 text-green-700 hover:bg-green-50'}`} variant={activeTab === 'process' ? 'default' : 'outline'} size=\"sm\" onClick={() => setActiveTab('process')}>üìã Pengajuan</Button>\r\n          <Button className={`${activeTab === 'archive' ? 'bg-green-600 hover:bg-green-700 text-white' : 'border-green-200 text-green-700 hover:bg-green-50'}`} variant={activeTab === 'archive' ? 'default' : 'outline'} size=\"sm\" onClick={() => setActiveTab('archive')}>üìÅ Riwayat</Button>\r\n          <Button className={`${activeTab === 'rekap' ? 'bg-green-600 hover:bg-green-700 text-white' : 'border-green-200 text-green-700 hover:bg-green-50'}`} variant={activeTab === 'rekap' ? 'default' : 'outline'} size=\"sm\" onClick={() => setActiveTab('rekap')}>üìä Laporan</Button>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Pengajuan</CardTitle>\r\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.totalPengajuan}</div>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Pengajuan yang sudah di-ACC admin wilayah\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Pending Upload</CardTitle>\r\n              <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold text-yellow-600\">{stats.pendingUpload}</div>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Menunggu upload file admin wilayah\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Completed Upload</CardTitle>\r\n              <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold text-green-600\">{stats.completedUpload}</div>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                File admin wilayah sudah lengkap\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Files</CardTitle>\r\n              <FileText className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"text-2xl font-bold\">{stats.totalFiles}</div>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                File yang sudah diupload\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Progress Overview */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Progress Overview</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"text-sm font-medium\">File Verification Progress</span>\r\n                <span className=\"text-sm text-muted-foreground\">\r\n                  {stats.verifiedFiles} of {stats.totalFiles} files verified\r\n                </span>\r\n              </div>\r\n              <Progress value={getProgressPercentage()} className=\"h-2\" />\r\n              <div className=\"flex justify-between text-xs text-muted-foreground\">\r\n                <span>Pending: {stats.totalFiles - stats.verifiedFiles - stats.rejectedFiles}</span>\r\n                <span>Verified: {stats.verifiedFiles}</span>\r\n                <span>Rejected: {stats.rejectedFiles}</span>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Table Pengajuan Approved Kab/Kota */}\r\n        {activeTab === 'process' && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Pengajuan yang Sudah Di-ACC Admin Wilayah</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {pengajuan.length === 0 ? (\r\n              <div className=\"text-center text-gray-500 py-8\">Tidak ada data</div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full text-sm\">\r\n                  <thead>\r\n                    <tr className=\"text-left border-b\">\r\n                      <th className=\"py-2 pr-4\">Pegawai</th>\r\n                      <th className=\"py-2 pr-4\">NIP</th>\r\n                      <th className=\"py-2 pr-4\">Jenis Jabatan</th>\r\n                      <th className=\"py-2 pr-4\">Berkas Kab/Kota</th>\r\n                      <th className=\"py-2 pr-4\">Progress Kanwil</th>\r\n                      <th className=\"py-2 pr-4\">Aksi</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {pengajuan.map((row) => {\r\n                      const pegawai = row.pegawai || {};\r\n                      // Gunakan data upload progress yang sama dengan upload page\r\n                      const uploadProgress = row.uploadProgress || { required: 0, total: 0 };\r\n                      const progressText = `${uploadProgress.required}/${uploadProgress.total}`;\r\n                      const canSubmit = row.status === 'admin_wilayah_approved' && (uploadProgress.total || 0) > 0 && (uploadProgress.required || 0) >= (uploadProgress.total || 0);\r\n                      return (\r\n                        <tr key={row.id} className=\"border-b\">\r\n                          <td className=\"py-2 pr-4\">{pegawai.nama || '-'}</td>\r\n                          <td className=\"py-2 pr-4\">{pegawai.nip || '-'}</td>\r\n                          <td className=\"py-2 pr-4\">{row.jenis_jabatan}</td>\r\n                          <td className=\"py-2 pr-4\">{row.kabupaten_files_count}</td>\r\n                          <td className=\"py-2 pr-4\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <span>{progressText}</span>\r\n                              <Progress value={uploadProgress.total ? (uploadProgress.required / uploadProgress.total) * 100 : 0} className=\"h-2 w-32\" />\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-2 pr-4\">\r\n                            <div className=\"flex gap-2\">\r\n                              <Button asChild variant=\"outline\" size=\"sm\" className=\"border-green-200 text-green-700 hover:bg-green-50\">\r\n                                <Link to={`/pengajuan/${row.id}`}>Detail</Link>\r\n                              </Button>\r\n                              <Button asChild size=\"sm\" className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                                <Link to={`/admin-wilayah/upload/${row.id}`}>Upload Kanwil</Link>\r\n                              </Button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n        )}\r\n\r\n        {activeTab === 'archive' && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Arsip (Keputusan Superadmin)</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {archive.length === 0 ? (\r\n              <div className=\"text-center text-gray-500 py-8\">Belum ada arsip</div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full text-sm\">\r\n                  <thead>\r\n                    <tr className=\"text-left border-b\">\r\n                      <th className=\"py-2 pr-4\">Pegawai</th>\r\n                      <th className=\"py-2 pr-4\">NIP</th>\r\n                      <th className=\"py-2 pr-4\">Jenis Jabatan</th>\r\n                      <th className=\"py-2 pr-4\">Status</th>\r\n                      <th className=\"py-2 pr-4\">Tanggal</th>\r\n                      <th className=\"py-2 pr-4\">Aksi</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {archive.map((row) => (\r\n                      <tr key={row.id} className=\"border-b\">\r\n                        <td className=\"py-2 pr-4\">{row.pegawai?.nama || '-'}</td>\r\n                        <td className=\"py-2 pr-4\">{row.pegawai?.nip || '-'}</td>\r\n                        <td className=\"py-2 pr-4\">{row.jenis_jabatan}</td>\r\n                        <td className=\"py-2 pr-4\">\r\n                          <Badge className={row.status === 'approved' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'}>\r\n                            {row.status === 'approved' ? 'Disetujui' : 'Ditolak'}\r\n                          </Badge>\r\n                        </td>\r\n                        <td className=\"py-2 pr-4\">{formatDate(row.updated_at)}</td>\r\n                        <td className=\"py-2 pr-4\">\r\n                          <Button asChild variant=\"outline\" size=\"sm\">\r\n                            <Link to={`/pengajuan/${row.id}`}>Detail</Link>\r\n                          </Button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n        )}\r\n\r\n        {/* Rekap Status Tab */}\r\n        {activeTab === 'rekap' && (\r\n        <div className=\"space-y-6\">\r\n          {/* Pivot Rekap Tabel */}\r\n          <Card>\r\n            <CardHeader>\r\n              <div className=\"flex items-center justify-between\">\r\n                <CardTitle>Rekap Status per Kabupaten</CardTitle>\r\n                <Button onClick={exportExcel} variant=\"outline\" size=\"sm\" className=\"border-green-200 text-green-700 hover:bg-green-50\">\r\n                  <Download className=\"h-4 w-4 mr-2\" />\r\n                  Export Excel\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {aggregationData.length === 0 ? (\r\n                <div className=\"text-center text-gray-500 py-8\">Tidak ada data</div>\r\n              ) : (\r\n                (() => {\r\n                  const statusKeys = Array.from(new Set(aggregationData.flatMap(k => k.statuses.map(s => s.status))));\r\n                  return (\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"min-w-full text-sm\">\r\n                        <thead>\r\n                          <tr className=\"text-left border-b\">\r\n                            <th className=\"py-3 pr-4 font-medium\">Kabupaten</th>\r\n                            {statusKeys.map((sk) => (\r\n                              <th key={sk} className=\"py-3 pr-4 font-medium whitespace-nowrap text-center\">{getStatusBadge(sk)}</th>\r\n                            ))}\r\n                            <th className=\"py-3 pr-4 font-medium text-center\">Total</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {aggregationData.map((row) => {\r\n                            const countByStatus = row.statuses.reduce((acc, s) => { acc[s.status] = s.count; return acc; }, {} as Record<string, number>);\r\n                            return (\r\n                              <tr key={row.kabupaten} className=\"border-b hover:bg-gray-50\">\r\n                                <td className=\"py-3 pr-4 font-medium\">{row.kabupaten}</td>\r\n                            {statusKeys.map((sk) => (\r\n                              <td key={sk} className=\"py-3 pr-4 text-center\">\r\n                                <button\r\n                                  className=\"text-green-700 hover:underline\"\r\n                                  onClick={() => {\r\n                                    setDrillKabupaten(row.kabupaten);\r\n                                    setDrillStatus(sk);\r\n                                    fetchDrillDown(row.kabupaten, sk, 1);\r\n                                  }}\r\n                                >\r\n                                  {countByStatus[sk] || 0}\r\n                                </button>\r\n                              </td>\r\n                            ))}\r\n                                <td className=\"py-3 pr-4 font-semibold text-center\">{row.total}</td>\r\n                              </tr>\r\n                            );\r\n                          })}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  );\r\n                })()\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Data Table */}\r\n          <Card>\r\n            <CardHeader>\r\n              <div className=\"flex items-center justify-between\">\r\n                <CardTitle>Data Pengajuan ({filteredData.length} dari {dataTableData.length})</CardTitle>\r\n                <Button onClick={fetchDataTableData} variant=\"outline\" size=\"sm\" disabled={dataTableLoading}>\r\n                  <RefreshCw className={`h-4 w-4 mr-2 ${dataTableLoading ? 'animate-spin' : ''}`} />\r\n                  Refresh\r\n                </Button>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {/* Filter dan Search */}\r\n              <div className=\"mb-6 space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Cari</label>\r\n                    <Input\r\n                      placeholder=\"Cari nama, NIP, kabupaten, atau jenis jabatan...\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Filter Status</label>\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Pilih status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">Semua Status</SelectItem>\r\n                        {filterOptions.statuses\r\n                          .filter(status => status.count > 0) // Only show statuses with data\r\n                          .map((status) => (\r\n                            <SelectItem key={status.value} value={status.value}>\r\n                              {status.label} ({status.count})\r\n                            </SelectItem>\r\n                          ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Filter Kabupaten</label>\r\n                    <Select value={kabupatenFilter} onValueChange={setKabupatenFilter}>\r\n                      <SelectTrigger>\r\n                        <SelectValue placeholder=\"Pilih kabupaten\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">Semua Kabupaten</SelectItem>\r\n                        {uniqueKabupaten.map((kabupaten) => (\r\n                          <SelectItem key={kabupaten} value={kabupaten}>\r\n                            {kabupaten}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n                {(searchTerm || statusFilter !== 'all' || kabupatenFilter !== 'all') && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      size=\"sm\" \r\n                      onClick={() => {\r\n                        setSearchTerm('');\r\n                        setStatusFilter('all');\r\n                        setKabupatenFilter('all');\r\n                      }}\r\n                    >\r\n                      Reset Filter\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {dataTableLoading ? (\r\n                <div className=\"text-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto\"></div>\r\n                  <p className=\"text-gray-500 mt-2\">Memuat data...</p>\r\n                </div>\r\n              ) : dataTableData.length === 0 ? (\r\n                <div className=\"text-center text-gray-500 py-8\">Tidak ada data pengajuan</div>\r\n              ) : filteredData.length === 0 ? (\r\n                <div className=\"text-center text-gray-500 py-8\">Tidak ada data yang sesuai dengan filter</div>\r\n              ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full text-sm\">\r\n                    <thead>\r\n                      <tr className=\"text-left border-b\">\r\n                        <th className=\"py-3 pr-4 font-medium\">Nama</th>\r\n                        <th className=\"py-3 pr-4 font-medium\">NIP</th>\r\n                        <th className=\"py-3 pr-4 font-medium\">Kabupaten</th>\r\n                        <th className=\"py-3 pr-4 font-medium\">Jenis Jabatan</th>\r\n                        <th className=\"py-3 pr-4 font-medium\">Status</th>\r\n                        <th className=\"py-3 pr-4 font-medium\">Tanggal Dibuat</th>\r\n                        <th className=\"py-3 pr-4 font-medium\">Aksi</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {filteredData.map((row) => (\r\n                        <tr key={row.id} className=\"border-b hover:bg-gray-50\">\r\n                          <td className=\"py-3 pr-4 font-medium\">{row.nama}</td>\r\n                          <td className=\"py-3 pr-4 text-gray-600\">{row.nip}</td>\r\n                          <td className=\"py-3 pr-4\">{row.kabupaten}</td>\r\n                          <td className=\"py-3 pr-4\">{row.jenis_jabatan}</td>\r\n                          <td className=\"py-3 pr-4\">{getStatusBadge(row.status)}</td>\r\n                          <td className=\"py-3 pr-4 text-gray-600\">{formatDate(row.created_at)}</td>\r\n                          <td className=\"py-3 pr-4\">\r\n                            <Button asChild variant=\"outline\" size=\"sm\">\r\n                              <Link to={`/pengajuan/${row.id}`}>Detail</Link>\r\n                            </Button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n        )}\r\n\r\n        {/* Recent Uploads */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Recent Uploads</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-4\">\r\n              {recentUploads.length === 0 ? (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  <FileText className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\r\n                  <p>Belum ada file yang diupload</p>\r\n                </div>\r\n              ) : (\r\n                recentUploads.map((upload) => (\r\n                  <div key={upload.id} className=\"border rounded-lg p-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <div className=\"font-medium\">{upload.pengajuan.pegawai.nama}</div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          {upload.pengajuan.jenis_jabatan} ‚Ä¢ {upload.file_type}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Badge variant={upload.status === 'approved' ? 'default' : 'secondary'}>\r\n                          {upload.status}\r\n                        </Badge>\r\n                        <Button size=\"sm\" variant=\"outline\" asChild>\r\n                          <Link to={`/admin-wilayah/upload/${upload.pengajuan.id}`}>\r\n                            <ArrowRight className=\"h-4 w-4\" />\r\n                          </Link>\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-2 text-xs text-gray-400\">\r\n                      {(() => {\r\n                        const officeRaw = (upload.uploaded_by_office || '').toString();\r\n                        const withoutParens = officeRaw.replace(/\\s*\\([^)]*\\)\\s*$/, '');\r\n                        const withoutUuid = withoutParens.replace(/\\b[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\b/g, '').trim();\r\n                        const officeText = withoutUuid ? ` ${withoutUuid}` : '';\r\n                        return `Diupload oleh: ${upload.uploaded_by_name}${officeText} - ${formatDate(upload.uploaded_at)}`;\r\n                      })()}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Recent Activity */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Recent Activity</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-3\">\r\n              {recentActivities.length > 0 ? (\r\n                recentActivities.map((activity, index) => (\r\n                  <div key={index} className=\"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors\">\r\n                    <div className={`w-2 h-2 rounded-full ${activity.type === 'upload' ? 'bg-blue-500' : \r\n                      activity.type === 'approval' ? 'bg-green-500' : \r\n                      activity.type === 'rejection' ? 'bg-red-500' : 'bg-gray-400'}`} />\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"text-sm text-gray-900\">{activity.message}</p>\r\n                      <p className=\"text-xs text-gray-500\">{activity.time}</p>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"text-center py-4\">\r\n                  <Activity className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\r\n                  <p className=\"text-sm text-gray-500\">No recent activities</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminWilayahDashboard;\r\n"],"names":["AdminWilayahDashboard","token","useAuth","activeTab","setActiveTab","useState","stats","setStats","recentUploads","setRecentUploads","loading","setLoading","error","setError","pengajuan","setPengajuan","archive","setArchive","dataTableData","setDataTableData","aggregationData","setAggregationData","dataTableLoading","setDataTableLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","kabupatenFilter","setKabupatenFilter","drillKabupaten","setDrillKabupaten","generateRecentActivities","activities","upload","timeAgo","getTimeAgo","item","_a","_b","a","b","dateString","now","date","diffInMs","diffInHours","diffInDays","recentActivities","drillStatus","setDrillStatus","drillItems","setDrillItems","drillTotal","setDrillTotal","drillPage","setDrillPage","drillPageSize","setDrillPageSize","drillLoading","setDrillLoading","filterOptions","setFilterOptions","fetchDashboardData","response","apiGet","statsPayload","uploadsPayload","pengajuanPayload","_c","fetchHistory","res","payload","fetchDataTableData","fetchFilterOptions","fetchDrillDown","kabupaten","status","page","params","items","total","useEffect","interval","handleFocus","getProgressPercentage","formatDate","getStatusBadge","config","Badge","getStatusLabel","exportExcel","detailData","summaryData","row","countByStatus","acc","s","wb","XLSX.utils","ws1","ws2","filename","XLSX.writeFile","filteredData","matchesSearch","matchesStatus","matchesKabupaten","uniqueKabupaten","jsx","jsxs","_","i","AlertCircle","Button","RefreshCw","Download","Activity","Card","CardHeader","CardTitle","Users","CardContent","Clock","CheckCircle","FileText","Progress","pegawai","uploadProgress","progressText","Link","statusKeys","k","sk","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","ArrowRight","withoutUuid","officeText","activity","index"],"mappings":"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"}