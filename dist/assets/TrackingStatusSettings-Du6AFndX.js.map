{"version":3,"file":"TrackingStatusSettings-Du6AFndX.js","sources":["../../src/pages/TrackingStatusSettings.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useToast } from '../hooks/use-toast';\r\nimport { apiGet, apiPost, apiPut, apiDelete } from '../lib/api';\r\nimport { Button } from '../components/ui/button';\r\nimport { Input } from '../components/ui/input';\r\nimport { Label } from '../components/ui/label';\r\nimport { Textarea } from '../components/ui/textarea';\r\nimport { Switch } from '../components/ui/switch';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../components/ui/card';\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '../components/ui/dialog';\r\nimport { Badge } from '../components/ui/badge';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '../components/ui/alert-dialog';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../components/ui/table';\r\nimport { Plus, Edit, Trash2, ArrowUpDown, HelpCircle } from 'lucide-react';\r\nimport { PageHeader } from '../components/PageHeader';\r\nimport Shepherd, { type Tour } from 'shepherd.js';\r\nimport 'shepherd.js/dist/css/shepherd.css';\r\n\r\ninterface TrackingStatus {\r\n  id: number;\r\n  status_name: string;\r\n  status_code: string;\r\n  description?: string;\r\n  is_active: boolean;\r\n  sort_order: number;\r\n  created_by?: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nconst TrackingStatusSettings: React.FC = () => {\r\n  const { user, token } = useAuth();\r\n  const { toast } = useToast();\r\n  const navigate = useNavigate();\r\n  \r\n  const [trackingStatuses, setTrackingStatuses] = useState<TrackingStatus[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingStatus, setEditingStatus] = useState<TrackingStatus | null>(null);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const trackingSettingsTourRef = useRef<Tour | null>(null);\r\n  \r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    status_name: '',\r\n    status_code: '', // Akan diisi otomatis dengan ID\r\n    description: '',\r\n    is_active: true,\r\n    sort_order: 0\r\n  });\r\n\r\n  // Load data\r\n  useEffect(() => {\r\n    loadTrackingStatuses();\r\n  }, []);\r\n\r\n  const loadTrackingStatuses = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiGet('/api/tracking/status-master/all', token);\r\n      if (response.success) {\r\n        setTrackingStatuses(response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading tracking statuses:', error);\r\n      toast({\r\n        title: 'Error',\r\n        description: 'Gagal memuat data status tracking',\r\n        variant: 'destructive'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenDialog = (status?: TrackingStatus) => {\r\n    if (status) {\r\n      setEditingStatus(status);\r\n      setFormData({\r\n        status_name: status.status_name,\r\n        status_code: status.status_code,\r\n        description: status.description || '',\r\n        is_active: status.is_active,\r\n        sort_order: status.sort_order\r\n      });\r\n    } else {\r\n      setEditingStatus(null);\r\n      setFormData({\r\n        status_name: '',\r\n        status_code: '',\r\n        description: '',\r\n        is_active: true,\r\n        sort_order: 0\r\n      });\r\n    }\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n\r\n      if (!formData.status_name) {\r\n        toast({\r\n          title: 'Error',\r\n          description: 'Nama status harus diisi',\r\n          variant: 'destructive'\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Generate status_code otomatis jika tidak ada\r\n      const submitData = {\r\n        ...formData,\r\n        status_code: editingStatus ? formData.status_code : `status-${Date.now()}`\r\n      };\r\n\r\n      let response;\r\n      if (editingStatus) {\r\n        // Update existing status\r\n        response = await apiPut(`/api/tracking/status-master/${editingStatus.id}`, submitData, token);\r\n      } else {\r\n        // Create new status\r\n        response = await apiPost('/api/tracking/status-master', submitData, token);\r\n      }\r\n\r\n      if (response.success) {\r\n        toast({\r\n          title: 'Berhasil',\r\n          description: editingStatus ? 'Status tracking berhasil diperbarui' : 'Status tracking berhasil dibuat',\r\n        });\r\n        setIsDialogOpen(false);\r\n        loadTrackingStatuses();\r\n      } else {\r\n        toast({\r\n          title: 'Error',\r\n          description: response.message || 'Terjadi kesalahan',\r\n          variant: 'destructive'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting form:', error);\r\n      toast({\r\n        title: 'Error',\r\n        description: 'Terjadi kesalahan saat menyimpan data',\r\n        variant: 'destructive'\r\n      });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (status: TrackingStatus) => {\r\n    try {\r\n      const response = await apiDelete(`/api/tracking/status-master/${status.id}`, token);\r\n      if (response.success) {\r\n        toast({\r\n          title: 'Berhasil',\r\n          description: 'Status tracking berhasil dihapus',\r\n        });\r\n        loadTrackingStatuses();\r\n      } else {\r\n        toast({\r\n          title: 'Error',\r\n          description: response.message || 'Gagal menghapus status tracking',\r\n          variant: 'destructive'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting status:', error);\r\n      toast({\r\n        title: 'Error',\r\n        description: 'Terjadi kesalahan saat menghapus data',\r\n        variant: 'destructive'\r\n      });\r\n    }\r\n  };\r\n\r\n  const generateStatusCode = (statusName: string) => {\r\n    // Generate ID-based code yang akan diisi otomatis saat save\r\n    return `status-${Date.now()}`;\r\n  };\r\n\r\nconst handleStatusNameChange = (value: string) => {\r\n  setFormData(prev => ({\r\n    ...prev,\r\n    status_name: value,\r\n    status_code: editingStatus ? prev.status_code : generateStatusCode(value)\r\n  }));\r\n};\r\n\r\nconst startTrackingSettingsTour = useCallback(() => {\r\n  if (trackingSettingsTourRef.current) {\r\n    trackingSettingsTourRef.current.cancel();\r\n    trackingSettingsTourRef.current = null;\r\n  }\r\n\r\n  if (loading) {\r\n    toast({\r\n      title: 'Tunggu sebentar',\r\n      description: 'Data status tracking sedang dimuat.',\r\n    });\r\n    return;\r\n  }\r\n\r\n  const tour = new Shepherd.Tour({\r\n    useModalOverlay: true,\r\n    defaultStepOptions: {\r\n      cancelIcon: { enabled: true },\r\n      classes: 'bg-white shadow-xl rounded-lg border border-gray-200 text-gray-800',\r\n      scrollTo: { behavior: 'smooth', block: 'center' }\r\n    }\r\n  });\r\n\r\n  const ensureDialogOpen = () => new Promise<void>((resolve) => {\r\n    if (!isDialogOpen) {\r\n      setIsDialogOpen(true);\r\n      setTimeout(resolve, 350);\r\n    } else {\r\n      resolve();\r\n    }\r\n  });\r\n\r\n  const buildButtons = (options?: { showBack?: boolean; isFinal?: boolean; specialAction?: () => void }) => {\r\n    const buttons = [\r\n      {\r\n        text: 'Lewati',\r\n        classes: 'shepherd-button-secondary text-gray-500',\r\n        action: async () => {\r\n          tour.cancel();\r\n        }\r\n      }\r\n    ];\r\n\r\n    if (options?.showBack) {\r\n      buttons.push({\r\n        text: 'Kembali',\r\n        classes: 'shepherd-button-secondary',\r\n        action: async () => {\r\n          tour.back();\r\n        }\r\n      });\r\n    }\r\n\r\n    buttons.push({\r\n      text: options?.isFinal ? 'Ke Tracking Dokumen' : 'Lanjut',\r\n      classes: 'shepherd-button-primary bg-green-600 text-white hover:bg-green-700',\r\n      action: async () => {\r\n        if (options?.specialAction) {\r\n          options.specialAction();\r\n        } else if (options?.isFinal) {\r\n          tour.complete();\r\n        } else {\r\n          tour.next();\r\n        }\r\n      }\r\n    });\r\n\r\n    return buttons;\r\n  };\r\n\r\n  tour.addStep({\r\n    id: 'settings-intro',\r\n    title: 'Master Status Tracking',\r\n    text: 'Di sini Anda bisa membuat, mengedit, atau mematikan status tracking yang tersedia.',\r\n    attachTo: { element: '[data-tour-id=\"tracking-settings-card\"]', on: 'bottom' },\r\n    buttons: buildButtons()\r\n  });\r\n\r\n  tour.addStep({\r\n    id: 'add-status',\r\n    title: 'Tambah Status Baru',\r\n    text: 'Klik \"Tambah Status\" bila status yang Anda perlukan belum ada di daftar.',\r\n    attachTo: { element: '[data-tour-id=\"tracking-add-button\"]', on: 'bottom' },\r\n    buttons: buildButtons({ showBack: true })\r\n  });\r\n\r\n  tour.addStep({\r\n    id: 'status-form',\r\n    title: 'Isi Detail Status',\r\n    text: 'Masukkan nama status, deskripsi, dan atur apakah status aktif sebelum disimpan.',\r\n    attachTo: { element: '[data-tour-id=\"tracking-status-form\"]', on: 'top' },\r\n    beforeShowPromise: ensureDialogOpen,\r\n    buttons: buildButtons({ showBack: true })\r\n  });\r\n\r\n  tour.addStep({\r\n    id: 'status-table',\r\n    title: 'Kelola Status yang Ada',\r\n    text: 'Gunakan tabel ini untuk melihat urutan tampil dan melakukan edit/hapus pada status yang sudah dibuat.',\r\n    attachTo: { element: '[data-tour-id=\"tracking-status-table\"]', on: 'top' },\r\n    buttons: buildButtons({ showBack: true })\r\n  });\r\n\r\n  tour.addStep({\r\n    id: 'go-to-tracking',\r\n    title: 'Lanjut ke Tracking Dokumen',\r\n    text: 'Setelah status tersedia, lanjutkan ke menu Tracking Dokumen untuk mencatat progres berkas.',\r\n    buttons: buildButtons({\r\n      showBack: true,\r\n      isFinal: true,\r\n      specialAction: () => {\r\n        sessionStorage.setItem('pending_tracking_doc_tour', 'true');\r\n        sessionStorage.removeItem('pending_tracking_settings_tour');\r\n        tour.complete();\r\n        navigate('/tracking');\r\n      }\r\n    })\r\n  });\r\n\r\n  tour.on('complete', () => {\r\n    sessionStorage.removeItem('pending_tracking_settings_tour');\r\n    trackingSettingsTourRef.current = null;\r\n  });\r\n\r\n  tour.on('cancel', () => {\r\n    sessionStorage.removeItem('pending_tracking_settings_tour');\r\n    trackingSettingsTourRef.current = null;\r\n  });\r\n\r\n  tour.start();\r\n  trackingSettingsTourRef.current = tour;\r\n}, [loading, isDialogOpen, navigate, toast]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && sessionStorage.getItem('pending_tracking_settings_tour') === 'true') {\r\n      startTrackingSettingsTour();\r\n    }\r\n  }, [loading, startTrackingSettingsTour]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (trackingSettingsTourRef.current) {\r\n        trackingSettingsTourRef.current.cancel();\r\n        trackingSettingsTourRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <PageHeader title=\"Konfigurasi Status Tracking\" />\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto\"></div>\r\n            <p className=\"mt-2 text-gray-600\">Memuat data...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4\">\r\n        <div data-tour-id=\"tracking-settings-header\" className=\"flex-1\">\r\n          <PageHeader title=\"Konfigurasi Status Tracking\" />\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={startTrackingSettingsTour}\r\n            className=\"border-green-200 text-green-700\"\r\n          >\r\n            <HelpCircle className=\"h-4 w-4 mr-2\" />\r\n            Mulai Tutorial\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => {\r\n              sessionStorage.setItem('pending_tracking_doc_tour', 'true');\r\n              navigate('/tracking');\r\n            }}\r\n          >\r\n            Pergi ke Tracking\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"mb-6\">\r\n        <Card data-tour-id=\"tracking-settings-card\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <CardTitle>Master Status Tracking</CardTitle>\r\n                <CardDescription>\r\n                  Kelola status tracking yang tersedia untuk admin pusat\r\n                </CardDescription>\r\n              </div>\r\n              <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n                <DialogTrigger asChild>\r\n                  <Button\r\n                    data-tour-id=\"tracking-add-button\"\r\n                    onClick={() => handleOpenDialog()}\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Tambah Status\r\n                  </Button>\r\n                </DialogTrigger>\r\n                <DialogContent className=\"sm:max-w-[425px]\" data-tour-id=\"tracking-status-form\">\r\n                  <DialogHeader>\r\n                    <DialogTitle>\r\n                      {editingStatus ? 'Edit Status Tracking' : 'Tambah Status Tracking'}\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                      {editingStatus \r\n                        ? 'Perbarui informasi status tracking' \r\n                        : 'Buat status tracking baru untuk admin pusat'\r\n                      }\r\n                    </DialogDescription>\r\n                  </DialogHeader>\r\n                  \r\n                  <div className=\"grid gap-4 py-4\">\r\n                    <div className=\"grid gap-2\">\r\n                      <Label htmlFor=\"status_name\">Nama Status</Label>\r\n                      <Input\r\n                        id=\"status_name\"\r\n                        value={formData.status_name}\r\n                        onChange={(e) => handleStatusNameChange(e.target.value)}\r\n                        placeholder=\"Contoh: Diterima di Pusat\"\r\n                      />\r\n                    </div>\r\n                    \r\n                    {/* Kode Status disembunyikan baik saat tambah maupun edit */}\r\n                    \r\n                    <div className=\"grid gap-2\">\r\n                      <Label htmlFor=\"description\">Deskripsi</Label>\r\n                      <Textarea\r\n                        id=\"description\"\r\n                        value={formData.description}\r\n                        onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                        placeholder=\"Deskripsi status tracking\"\r\n                        rows={3}\r\n                      />\r\n                    </div>\r\n                    \r\n                    <div className=\"grid gap-2\">\r\n                      <Label htmlFor=\"sort_order\">Urutan Tampil</Label>\r\n                      <Input\r\n                        id=\"sort_order\"\r\n                        type=\"number\"\r\n                        value={formData.sort_order}\r\n                        onChange={(e) => setFormData(prev => ({ ...prev, sort_order: parseInt(e.target.value) || 0 }))}\r\n                        placeholder=\"0\"\r\n                      />\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Switch\r\n                        id=\"is_active\"\r\n                        checked={formData.is_active}\r\n                        onCheckedChange={(checked) => setFormData(prev => ({ ...prev, is_active: checked }))}\r\n                      />\r\n                      <Label htmlFor=\"is_active\">Status Aktif</Label>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <DialogFooter>\r\n                    <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\r\n                      Batal\r\n                    </Button>\r\n                    <Button onClick={handleSubmit} disabled={submitting} className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                      {submitting ? 'Menyimpan...' : (editingStatus ? 'Perbarui' : 'Simpan')}\r\n                    </Button>\r\n                  </DialogFooter>\r\n                </DialogContent>\r\n              </Dialog>\r\n            </div>\r\n          </CardHeader>\r\n          \r\n          <CardContent>\r\n            <div className=\"rounded-md border\" data-tour-id=\"tracking-status-table\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>Status Tracking</TableHead>\r\n                    <TableHead>Deskripsi</TableHead>\r\n                    <TableHead>Urutan</TableHead>\r\n                    <TableHead>Status</TableHead>\r\n                    <TableHead className=\"text-right\">Aksi</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {trackingStatuses.map((status) => (\r\n                    <TableRow key={status.id}>\r\n                      <TableCell className=\"font-medium\">\r\n                        <div className=\"font-semibold text-gray-900\">{status.status_name}</div>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {status.description || '-'}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {status.sort_order}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge variant={status.is_active ? 'default' : 'secondary'} className={status.is_active ? 'bg-green-100 text-green-800 hover:bg-green-200' : ''}>\r\n                          {status.is_active ? 'Aktif' : 'Tidak Aktif'}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <div className=\"flex items-center justify-end space-x-2\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleOpenDialog(status)}\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <AlertDialog>\r\n                            <AlertDialogTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </AlertDialogTrigger>\r\n                            <AlertDialogContent>\r\n                              <AlertDialogHeader>\r\n                                <AlertDialogTitle>Hapus Status Tracking</AlertDialogTitle>\r\n                                <AlertDialogDescription>\r\n                                  Apakah Anda yakin ingin menghapus status \"{status.status_name}\"?\r\n                                  <br />\r\n                                  <strong>Perhatian:</strong> Status yang sedang digunakan dalam tracking tidak bisa dihapus.\r\n                                </AlertDialogDescription>\r\n                              </AlertDialogHeader>\r\n                              <AlertDialogFooter>\r\n                                <AlertDialogCancel>Batal</AlertDialogCancel>\r\n                                <AlertDialogAction\r\n                                  onClick={() => handleDelete(status)}\r\n                                  className=\"bg-red-600 hover:bg-red-700\"\r\n                                >\r\n                                  Hapus\r\n                                </AlertDialogAction>\r\n                              </AlertDialogFooter>\r\n                            </AlertDialogContent>\r\n                          </AlertDialog>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n            \r\n            {trackingStatuses.length === 0 && (\r\n              <div className=\"text-center py-8 text-gray-500\">\r\n                <ArrowUpDown className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n                <p>Belum ada status tracking</p>\r\n                <p className=\"text-sm\">Klik \"Tambah Status\" untuk membuat status pertama</p>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrackingStatusSettings;\r\n"],"names":["TrackingStatusSettings","user","token","useAuth","toast","useToast","navigate","useNavigate","trackingStatuses","setTrackingStatuses","useState","loading","setLoading","isDialogOpen","setIsDialogOpen","editingStatus","setEditingStatus","submitting","setSubmitting","trackingSettingsTourRef","useRef","formData","setFormData","useEffect","loadTrackingStatuses","response","apiGet","error","handleOpenDialog","status","handleSubmit","submitData","apiPut","apiPost","handleDelete","apiDelete","generateStatusCode","statusName","handleStatusNameChange","value","prev","startTrackingSettingsTour","useCallback","tour","Shepherd","ensureDialogOpen","resolve","buildButtons","options","buttons","jsxs","jsx","PageHeader","Button","HelpCircle","Card","CardHeader","CardTitle","CardDescription","Dialog","DialogTrigger","Plus","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","Input","e","Textarea","Switch","checked","DialogFooter","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Badge","Edit","AlertDialog","AlertDialogTrigger","Trash2","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","ArrowUpDown"],"mappings":"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"}