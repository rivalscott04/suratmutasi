{"version":3,"file":"Settings-DcArsX6C.js","sources":["../../src/components/MaintenanceToggle.tsx","../../src/pages/Settings.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Wrench, Clock, AlertTriangle, CheckCircle, XCircle } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { apiPost, apiGet } from '../lib/api';\r\n\r\ninterface MaintenanceStatus {\r\n  isMaintenanceMode: boolean;\r\n  message: string;\r\n  startTime?: string;\r\n  endTime?: string;\r\n}\r\n\r\ninterface MaintenanceHistory {\r\n  id: string;\r\n  isActive: boolean;\r\n  message: string;\r\n  startTime: string;\r\n  endTime?: string;\r\n  createdAt: string;\r\n  createdByUser?: {\r\n    full_name: string;\r\n    email: string;\r\n  };\r\n}\r\n\r\nconst MaintenanceToggle: React.FC = () => {\r\n  const { user, token } = useAuth();\r\n  const [maintenanceStatus, setMaintenanceStatus] = useState<MaintenanceStatus | null>(null);\r\n  const [history, setHistory] = useState<MaintenanceHistory[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [toggleForm, setToggleForm] = useState({\r\n    isActive: false,\r\n    message: '',\r\n    endTime: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      fetchMaintenanceStatus();\r\n      fetchHistory();\r\n    }\r\n  }, [token]);\r\n\r\n  const fetchMaintenanceStatus = async () => {\r\n    try {\r\n      const response = await apiGet('/api/maintenance/status', token);\r\n      setMaintenanceStatus(response);\r\n      setToggleForm(prev => ({\r\n        ...prev,\r\n        isActive: response.isMaintenanceMode,\r\n        message: response.message || ''\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error fetching maintenance status:', error);\r\n    }\r\n  };\r\n\r\n  const fetchHistory = async () => {\r\n    try {\r\n      const response = await apiGet('/api/maintenance/history', token);\r\n      setHistory(response.history || []);\r\n    } catch (error) {\r\n      console.error('Error fetching maintenance history:', error);\r\n    }\r\n  };\r\n\r\n  const handleToggle = async () => {\r\n    if (!token) return;\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      await apiPost('/api/maintenance/toggle', {\r\n        isActive: toggleForm.isActive,\r\n        message: toggleForm.message || 'Sistem sedang dalam mode maintenance',\r\n        endTime: toggleForm.endTime || null\r\n      }, token);\r\n      \r\n      await fetchMaintenanceStatus();\r\n      await fetchHistory();\r\n      \r\n      // Show success message with custom modal\r\n      const successMessage = `Maintenance mode ${toggleForm.isActive ? 'diaktifkan' : 'dinonaktifkan'} berhasil!`;\r\n      \r\n      // Create custom success modal\r\n      const modal = document.createElement('div');\r\n      modal.className = 'fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200';\r\n      modal.innerHTML = `\r\n        <div class=\"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200\">\r\n          <div class=\"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4\">\r\n            <svg class=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n            </svg>\r\n          </div>\r\n          <h2 class=\"text-xl font-bold mb-2 text-gray-900\">Berhasil!</h2>\r\n          <p class=\"text-gray-600 mb-6 text-center\">${successMessage}</p>\r\n          <button\r\n            class=\"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n            onclick=\"this.closest('.fixed').remove()\"\r\n          >\r\n            Tutup\r\n          </button>\r\n        </div>\r\n      `;\r\n      \r\n      document.body.appendChild(modal);\r\n      \r\n      // Auto remove after 3 seconds\r\n      setTimeout(() => {\r\n        if (modal.parentNode) {\r\n          modal.remove();\r\n        }\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error('Error toggling maintenance mode:', error);\r\n      \r\n      // Create custom error modal\r\n      const modal = document.createElement('div');\r\n      modal.className = 'fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200';\r\n      modal.innerHTML = `\r\n        <div class=\"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200\">\r\n          <div class=\"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4\">\r\n            <svg class=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n            </svg>\r\n          </div>\r\n          <h2 class=\"text-xl font-bold mb-2 text-gray-900\">Gagal!</h2>\r\n          <p class=\"text-gray-600 mb-6 text-center\">Gagal mengubah status maintenance mode. Silakan coba lagi.</p>\r\n          <button\r\n            class=\"w-full py-3 rounded-lg bg-red-600 hover:bg-red-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400\"\r\n            onclick=\"this.closest('.fixed').remove()\"\r\n          >\r\n            Tutup\r\n          </button>\r\n        </div>\r\n      `;\r\n      \r\n      document.body.appendChild(modal);\r\n      \r\n      // Auto remove after 5 seconds\r\n      setTimeout(() => {\r\n        if (modal.parentNode) {\r\n          modal.remove();\r\n        }\r\n      }, 5000);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Only show for superadmin\r\n  if (user?.role !== 'admin' || user?.office_id !== null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n      <div className=\"flex items-center gap-3 mb-6\">\r\n        <div className=\"p-2 bg-orange-100 rounded-lg\">\r\n          <Wrench className=\"w-5 h-5 text-orange-600\" />\r\n        </div>\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Maintenance Mode</h3>\r\n          <p className=\"text-sm text-gray-500\">Kelola status maintenance sistem</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Current Status */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center gap-2 mb-2\">\r\n          {maintenanceStatus?.isMaintenanceMode ? (\r\n            <>\r\n              <AlertTriangle className=\"w-4 h-4 text-red-500\" />\r\n              <span className=\"text-red-600 font-medium\">Maintenance Mode Aktif</span>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n              <span className=\"text-green-600 font-medium\">Sistem Normal</span>\r\n            </>\r\n          )}\r\n        </div>\r\n        \r\n        {maintenanceStatus?.message && (\r\n          <p className=\"text-gray-600 text-sm bg-gray-50 p-3 rounded-lg\">\r\n            {maintenanceStatus.message}\r\n          </p>\r\n        )}\r\n        \r\n        {maintenanceStatus?.startTime && (\r\n          <p className=\"text-gray-500 text-xs mt-2\">\r\n            Dimulai: {new Date(maintenanceStatus.startTime).toLocaleString('id-ID')}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Toggle Form */}\r\n      <div className=\"space-y-4 mb-6\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"isActive\"\r\n            checked={toggleForm.isActive}\r\n            onChange={(e) => setToggleForm(prev => ({ ...prev, isActive: e.target.checked }))}\r\n            className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\r\n          />\r\n          <label htmlFor=\"isActive\" className=\"text-sm font-medium text-gray-700\">\r\n            Aktifkan Maintenance Mode\r\n          </label>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Pesan Maintenance\r\n          </label>\r\n          <textarea\r\n            value={toggleForm.message}\r\n            onChange={(e) => setToggleForm(prev => ({ ...prev, message: e.target.value }))}\r\n            placeholder=\"Masukkan pesan untuk pengguna...\"\r\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500\"\r\n            rows={3}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Estimasi Selesai (Opsional)\r\n          </label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={toggleForm.endTime}\r\n            onChange={(e) => setToggleForm(prev => ({ ...prev, endTime: e.target.value }))}\r\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500\"\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleToggle}\r\n          disabled={isLoading}\r\n          className={`w-full py-3 px-4 rounded-lg font-semibold transition-colors ${\r\n            toggleForm.isActive\r\n              ? 'bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl'\r\n              : 'bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl'\r\n          } disabled:opacity-50 disabled:cursor-not-allowed`}\r\n        >\r\n          {isLoading ? (\r\n            'Memproses...'\r\n          ) : (\r\n            toggleForm.isActive ? 'Aktifkan Maintenance Mode' : 'Nonaktifkan Maintenance Mode'\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {/* History Toggle */}\r\n      <div className=\"border-t pt-4\">\r\n        <button\r\n          onClick={() => setShowHistory(!showHistory)}\r\n          className=\"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\r\n        >\r\n          <Clock className=\"w-4 h-4\" />\r\n          {showHistory ? 'Sembunyikan' : 'Tampilkan'} Riwayat Maintenance\r\n        </button>\r\n\r\n        {showHistory && (\r\n          <div className=\"mt-4 space-y-3 max-h-60 overflow-y-auto\">\r\n            {history.map((record) => (\r\n              <div key={record.id} className=\"bg-gray-50 p-3 rounded-lg\">\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                  {record.isActive ? (\r\n                    <AlertTriangle className=\"w-4 h-4 text-red-500\" />\r\n                  ) : (\r\n                    <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n                  )}\r\n                  <span className={`text-sm font-medium ${\r\n                    record.isActive ? 'text-red-600' : 'text-green-600'\r\n                  }`}>\r\n                    {record.isActive ? 'Diaktifkan' : 'Dinonaktifkan'}\r\n                  </span>\r\n                  <span className=\"text-xs text-gray-500\">\r\n                    {new Date(record.createdAt).toLocaleString('id-ID')}\r\n                  </span>\r\n                </div>\r\n                \r\n                {record.message && (\r\n                  <p className=\"text-sm text-gray-600 mb-1\">{record.message}</p>\r\n                )}\r\n                \r\n                {record.createdByUser && (\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Oleh: {record.createdByUser.full_name}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaintenanceToggle;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { Building, Users, Settings as SettingsIcon, Save, Upload, Download, Clipboard, Check, Plus, Edit, Crown, FileText, Trash2, FolderOpen, AlertTriangle, Wrench } from 'lucide-react';\r\nimport { apiGet, apiPost, apiPut, apiDelete } from '../lib/api';\r\nimport { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription, DialogClose } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogContent, AlertDialogHeader, AlertDialogTitle, AlertDialogDescription, AlertDialogFooter, AlertDialogAction } from '@/components/ui/alert-dialog';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport MaintenanceToggle from '../components/MaintenanceToggle';\r\n\r\nconst CopyableText: React.FC<{ text: string; label?: string; className?: string }> = ({ text, label = 'Teks', className }) => {\r\n  const [copied, setCopied] = useState(false);\r\n  const [copiedOpen, setCopiedOpen] = useState(false);\r\n  const handleCopy = async (e?: React.MouseEvent | React.KeyboardEvent) => {\r\n    e?.preventDefault?.();\r\n    e?.stopPropagation?.();\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n    } catch {\r\n      const textarea = document.createElement('textarea');\r\n      textarea.value = text;\r\n      textarea.style.position = 'fixed';\r\n      textarea.style.opacity = '0';\r\n      document.body.appendChild(textarea);\r\n      textarea.focus();\r\n      textarea.select();\r\n      try { document.execCommand('copy'); } catch {}\r\n      document.body.removeChild(textarea);\r\n    }\r\n    setCopied(true);\r\n    setCopiedOpen(true);\r\n    setTimeout(() => {\r\n      setCopied(false);\r\n      setCopiedOpen(false);\r\n    }, 1400);\r\n  };\r\n  return (\r\n    <>\r\n      <button\r\n        type=\"button\"\r\n        onClick={handleCopy}\r\n        onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') handleCopy(e); }}\r\n        className={`inline-flex items-center gap-1 cursor-pointer group text-left ${className || ''}`}\r\n        title={`Salin ${label}`}\r\n      >\r\n        <span>{text}</span>\r\n        {copied ? <Check className=\"w-4 h-4 text-green-600\" /> : <Clipboard className=\"w-4 h-4 text-gray-400 group-hover:text-green-600\" />}\r\n        <span aria-live=\"polite\" className=\"sr-only\">{copied ? `${label} disalin` : ''}</span>\r\n      </button>\r\n\r\n      <Dialog open={copiedOpen} onOpenChange={setCopiedOpen}>\r\n        <DialogContent className=\"max-w-sm min-w-[320px] px-4 py-3 pr-12 rounded-xl border shadow-lg\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"inline-flex h-6 w-6 items-center justify-center rounded-full bg-green-50 text-green-600 border border-green-500\">\r\n              <Check className=\"h-4 w-4\" />\r\n            </span>\r\n            <span className=\"text-sm font-semibold\">Berhasil menyalin {label}</span>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nconst EmployeesTable: React.FC<{ token: string | null }> = ({ token }) => {\r\n  const [employees, setEmployees] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [search, setSearch] = useState('');\r\n  const [debouncedSearch, setDebouncedSearch] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const pageSize = 20;\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const [editModalOpen, setEditModalOpen] = useState(false);\r\n  const [editData, setEditData] = useState<any | null>(null);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => setDebouncedSearch(search), 300);\r\n    return () => clearTimeout(handler);\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    setLoading(true);\r\n    apiGet('/api/employees', token)\r\n      .then(res => setEmployees(res.pegawai || []))\r\n      .catch(err => setError(err.message || 'Gagal mengambil data pegawai'))\r\n      .finally(() => setLoading(false));\r\n  }, [token]);\r\n\r\n  const filteredEmployees = employees.filter(emp =>\r\n    emp.nama?.toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n    emp.nip?.toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n    emp.unit_kerja?.toLowerCase().includes(debouncedSearch.toLowerCase())\r\n  );\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(filteredEmployees.length / pageSize);\r\n  const paginatedEmployees = filteredEmployees.slice((currentPage - 1) * pageSize, currentPage * pageSize);\r\n\r\n  // Windowing logic for page numbers\r\n  const getPageNumbers = () => {\r\n    const maxPagesToShow = 5;\r\n    if (totalPages <= maxPagesToShow) {\r\n      return Array.from({ length: totalPages }, (_, idx) => idx + 1);\r\n    }\r\n    let start = Math.max(1, currentPage - 2);\r\n    let end = Math.min(totalPages, currentPage + 2);\r\n    if (currentPage <= 3) {\r\n      end = maxPagesToShow;\r\n      start = 1;\r\n    } else if (currentPage >= totalPages - 2) {\r\n      end = totalPages;\r\n      start = totalPages - maxPagesToShow + 1;\r\n    }\r\n    return Array.from({ length: end - start + 1 }, (_, idx) => start + idx);\r\n  };\r\n  const pageNumbers = getPageNumbers();\r\n\r\n  const handlePageChange = (page: number) => {\r\n    if (page < 1 || page > totalPages) return;\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1); // Reset ke halaman 1 jika search berubah\r\n  }, [debouncedSearch]);\r\n\r\n  if (loading) return <div className=\"py-8 text-center\"><Skeleton className=\"h-8 w-1/2 mx-auto mb-4\" /><Skeleton className=\"h-10 w-full mb-2\" /><Skeleton className=\"h-10 w-full mb-2\" /><Skeleton className=\"h-10 w-full mb-2\" /></div>;\r\n  if (error) return <div className=\"py-8 text-center text-error\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Search */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <div className=\"flex-1\">\r\n          <Input\r\n            placeholder=\"Cari pegawai...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-full\"\r\n          />\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => setEditModalOpen(true)}\r\n            className=\"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-50\"\r\n          >\r\n            <Plus className=\"h-4 w-4\" />\r\n            Tambah Pegawai\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"border rounded-lg overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-900\">Nama</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-900\">NIP</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-900\">Unit Kerja</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-900\">Jabatan</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-900\">Pangkat/Gol</th>\r\n                <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-900\">Aksi</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200\">\r\n              {paginatedEmployees.map((employee) => (\r\n                <tr key={employee.id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-3 text-sm text-gray-900\"><CopyableText text={employee.nama} label=\"Nama\" /></td>\r\n                  <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n                    <CopyableText text={employee.nip} label=\"NIP\" className=\"font-mono\" />\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm text-gray-900\">{employee.unit_kerja}</td>\r\n                  <td className=\"px-4 py-3 text-sm text-gray-900\">{employee.jabatan}</td>\r\n                  <td className=\"px-4 py-3 text-sm text-gray-900\">{employee.golongan}</td>\r\n                  <td className=\"px-4 py-3 text-sm text-gray-900\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        setEditData(employee);\r\n                        setEditModalOpen(true);\r\n                      }}\r\n                      className=\"flex items-center gap-1\"\r\n                    >\r\n                      <Edit className=\"h-3 w-3\" />\r\n                      Edit\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"text-sm text-gray-700\">\r\n            Menampilkan {((currentPage - 1) * pageSize) + 1} sampai {Math.min(currentPage * pageSize, filteredEmployees.length)} dari {filteredEmployees.length} pegawai\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => handlePageChange(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n              className=\"border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800 disabled:border-gray-300 disabled:text-gray-400\"\r\n            >\r\n              Sebelumnya\r\n            </Button>\r\n            {pageNumbers.map((page) => (\r\n              <Button\r\n                key={page}\r\n                variant={currentPage === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => handlePageChange(page)}\r\n                className={currentPage === page ? \"bg-green-600 hover:bg-green-700 text-white\" : \"\"}\r\n              >\r\n                {page}\r\n              </Button>\r\n            ))}\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => handlePageChange(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n              className=\"border-green-600 text-green-600 hover:bg-green-50 disabled:border-gray-300 disabled:text-gray-400\"\r\n            >\r\n              Selanjutnya\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit Modal */}\r\n      <Dialog open={editModalOpen} onOpenChange={setEditModalOpen}>\r\n        <DialogContent className=\"max-w-2xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>{editData ? 'Edit Pegawai' : 'Tambah Pegawai Baru'}</DialogTitle>\r\n            <DialogDescription>\r\n              {editData ? 'Edit informasi pegawai' : 'Masukkan informasi pegawai baru'}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <form onSubmit={async (e) => {\r\n            e.preventDefault();\r\n            setSaving(true);\r\n            try {\r\n              const formData = new FormData(e.currentTarget);\r\n              const data = {\r\n                nama: formData.get('nama') as string,\r\n                unit_kerja: formData.get('unit_kerja') as string,\r\n                jabatan: formData.get('jabatan') as string,\r\n                golongan: formData.get('golongan') as string,\r\n              };\r\n\r\n              const isEdit = !!editData;\r\n              // Saat edit, nip input disabled sehingga tidak ikut di FormData\r\n              const nipForPath = isEdit\r\n                ? (editData?.nip as string | undefined)\r\n                : (formData.get('nip') as string | null) || undefined;\r\n\r\n              if (isEdit) {\r\n                // Pastikan ada NIP untuk path\r\n                if (!nipForPath) {\r\n                  throw new Error('NIP tidak ditemukan untuk update');\r\n                }\r\n                // Jangan kirim nip pada update (backend tidak mengubah nip)\r\n                await apiPut(`/api/employees/${nipForPath}`, data, token);\r\n                toast({\r\n                  title: 'Berhasil',\r\n                  description: 'Data pegawai berhasil diperbarui',\r\n                });\r\n              } else {\r\n                // Saat create, pastikan NIP ada\r\n                const nipCreate = (formData.get('nip') as string | null) || undefined;\r\n                await apiPost('/api/employees', { ...data, nip: nipCreate }, token);\r\n                toast({\r\n                  title: 'Berhasil',\r\n                  description: 'Pegawai baru berhasil ditambahkan',\r\n                });\r\n              }\r\n\r\n              // Refresh data\r\n              const res = await apiGet('/api/employees', token);\r\n              setEmployees(res.pegawai || []);\r\n              setEditModalOpen(false);\r\n              setEditData(null);\r\n            } catch (err: any) {\r\n              toast({\r\n                title: 'Gagal',\r\n                description: err.message || 'Terjadi kesalahan',\r\n                variant: 'destructive',\r\n              });\r\n            } finally {\r\n              setSaving(false);\r\n            }\r\n          }}>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label htmlFor=\"nama\">Nama Lengkap</Label>\r\n                <Input\r\n                  id=\"nama\"\r\n                  name=\"nama\"\r\n                  defaultValue={editData?.nama || ''}\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"nip\">NIP</Label>\r\n                <Input\r\n                  id=\"nip\"\r\n                  name=\"nip\"\r\n                  defaultValue={editData?.nip || ''}\r\n                  required\r\n                  pattern=\"[0-9]{18}\"\r\n                  title=\"NIP harus 18 digit angka\"\r\n                  disabled={!!editData}\r\n                  readOnly={!!editData}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"unit_kerja\">Unit Kerja</Label>\r\n                <Input\r\n                  id=\"unit_kerja\"\r\n                  name=\"unit_kerja\"\r\n                  defaultValue={editData?.unit_kerja || ''}\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"jabatan\">Jabatan</Label>\r\n                <Input\r\n                  id=\"jabatan\"\r\n                  name=\"jabatan\"\r\n                  defaultValue={editData?.jabatan || ''}\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label htmlFor=\"golongan\">Pangkat/Golongan</Label>\r\n                <Input\r\n                  id=\"golongan\"\r\n                  name=\"golongan\"\r\n                  defaultValue={editData?.golongan || ''}\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n            <DialogFooter className=\"mt-6\">\r\n              <DialogClose asChild>\r\n                              <Button \r\n                type=\"button\" \r\n                variant=\"outline\"\r\n                className=\"border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900\"\r\n              >\r\n                Batal\r\n              </Button>\r\n              </DialogClose>\r\n              <Button type=\"submit\" disabled={saving} className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                {saving ? 'Menyimpan...' : (editData ? 'Update' : 'Simpan')}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Settings = () => {\r\n  const { user, token } = useAuth();\r\n  const { toast } = useToast();\r\n  const [officeSettings, setOfficeSettings] = useState({\r\n    namakantor: '',\r\n    kabkota: '',\r\n    alamat: '',\r\n    telepon: '',\r\n    fax: '',\r\n    email: '',\r\n    website: ''\r\n  });\r\n  const [kanwilSettings, setKanwilSettings] = useState({\r\n    tingkat1: 'KEMENTERIAN AGAMA REPUBLIK INDONESIA',\r\n    tingkat2: 'KANTOR WILAYAH KEMENTERIAN AGAMA',\r\n    tingkat3: 'PROVINSI NUSA TENGGARA BARAT',\r\n    alamat: '',\r\n    telepon: '',\r\n    fax: '',\r\n    email: '',\r\n    website: ''\r\n  });\r\n  const [loadingOffice, setLoadingOffice] = useState(true);\r\n  const [errorOffice, setErrorOffice] = useState<string | null>(null);\r\n  const [officeId, setOfficeId] = useState<string | null>(null);\r\n  const [fieldError, setFieldError] = useState<string | null>(null);\r\n  const inputRefs = {\r\n    namakantor: React.useRef<HTMLInputElement>(null),\r\n    kabkota: React.useRef<HTMLInputElement>(null),\r\n    alamat: React.useRef<HTMLTextAreaElement>(null),\r\n    telepon: React.useRef<HTMLInputElement>(null),\r\n    email: React.useRef<HTMLInputElement>(null),\r\n    website: React.useRef<HTMLInputElement>(null),\r\n    fax: React.useRef<HTMLInputElement>(null),\r\n  };\r\n  const kanwilInputRefs = {\r\n    tingkat1: React.useRef<HTMLInputElement>(null),\r\n    tingkat2: React.useRef<HTMLInputElement>(null),\r\n    tingkat3: React.useRef<HTMLInputElement>(null),\r\n    alamat: React.useRef<HTMLTextAreaElement>(null),\r\n    telepon: React.useRef<HTMLInputElement>(null),\r\n    email: React.useRef<HTMLInputElement>(null),\r\n    website: React.useRef<HTMLInputElement>(null),\r\n    fax: React.useRef<HTMLInputElement>(null),\r\n  };\r\n  const [showOfficeModal, setShowOfficeModal] = useState(false);\r\n  const [officeModalSuccess, setOfficeModalSuccess] = useState<boolean | null>(null);\r\n  const [officeModalMessage, setOfficeModalMessage] = useState('');\r\n  const [showKanwilModal, setShowKanwilModal] = useState(false);\r\n  const [kanwilModalSuccess, setKanwilModalSuccess] = useState<boolean | null>(null);\r\n  const [kanwilModalMessage, setKanwilModalMessage] = useState('');\r\n\r\n  // Job Type Configuration state\r\n  const [jobConfigs, setJobConfigs] = useState<any[]>([]);\r\n  const [jobConfigLoading, setJobConfigLoading] = useState(true);\r\n  const [showJobConfigDialog, setShowJobConfigDialog] = useState(false);\r\n  const [editingJobConfig, setEditingJobConfig] = useState<any | null>(null);\r\n  const [jobConfigSaving, setJobConfigSaving] = useState(false);\r\n\r\n  // Job config form state\r\n  const [jobConfigForm, setJobConfigForm] = useState({\r\n    jenis_jabatan: '',\r\n    total_dokumen: 0,\r\n    required_files: [] as string[],\r\n    is_active: true\r\n  });\r\n\r\n  // Available file types\r\n  const availableFileTypes = [\r\n    { id: 'surat_pengantar', name: 'Surat Pengantar', category: 'Dokumen Pengantar' },\r\n    { id: 'surat_permohonan_dari_yang_bersangkutan', name: 'Surat Permohonan Dari Yang Bersangkutan', category: 'Dokumen Pengantar' },\r\n    { id: 'surat_keputusan_cpns', name: 'Surat Keputusan CPNS', category: 'Dokumen Kepegawaian' },\r\n    { id: 'surat_keputusan_pns', name: 'Surat Keputusan PNS', category: 'Dokumen Kepegawaian' },\r\n    { id: 'surat_keputusan_kenaikan_pangkat_terakhir', name: 'Surat Keputusan Kenaikan Pangkat Terakhir', category: 'Dokumen Kepegawaian' },\r\n    { id: 'surat_keputusan_jabatan_terakhir', name: 'Surat Keputusan Jabatan Terakhir', category: 'Dokumen Kepegawaian' },\r\n    { id: 'skp_2_tahun_terakhir', name: 'SKP 2 Tahun Terakhir', category: 'Dokumen Kepegawaian' },\r\n    { id: 'surat_keterangan_bebas_temuan_inspektorat', name: 'Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama', category: 'Dokumen Keterangan' },\r\n    { id: 'surat_keterangan_anjab_abk_instansi_asal', name: 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal', category: 'Dokumen Keterangan' },\r\n    { id: 'surat_keterangan_anjab_abk_instansi_penerima', name: 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima', category: 'Dokumen Keterangan' },\r\n    { id: 'surat_pernyataan_tidak_hukuman_disiplin', name: 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK', category: 'Dokumen Pernyataan' },\r\n    { id: 'surat_persetujuan_mutasi_asal', name: 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki', category: 'Dokumen Persetujuan' },\r\n    { id: 'surat_lolos_butuh_ppk', name: 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju', category: 'Dokumen Persetujuan' },\r\n    { id: 'peta_jabatan', name: 'Peta Jabatan', category: 'Dokumen Pendukung' },\r\n    { id: 'hasil_uji_kompetensi', name: 'Hasil Uji Kompetensi', category: 'Dokumen Pendukung' },\r\n    { id: 'hasil_evaluasi_pertimbangan_baperjakat', name: 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)', category: 'Dokumen Pendukung' },\r\n    { id: 'anjab_abk_instansi_asal', name: 'Anjab/Abk Instansi Asal', category: 'Dokumen Pendukung' },\r\n    { id: 'anjab_abk_instansi_penerima', name: 'Anjab/Abk Instansi Penerima', category: 'Dokumen Pendukung' },\r\n    { id: 'surat_keterangan_tidak_tugas_belajar', name: 'Surat Keterangan Tidak Sedang Tugas Belajar', category: 'Dokumen Keterangan' },\r\n    { id: 'sptjm_pimpinan_satker_asal', name: 'SPTJM Pimpinan Satker dari Asal', category: 'Dokumen Pernyataan' },\r\n    { id: 'sptjm_pimpinan_satker_penerima', name: 'SPTJM Pimpinan Satker dari Penerima', category: 'Dokumen Pernyataan' },\r\n    { id: 'surat_rekomendasi_instansi_pembina', name: 'Surat Rekomendasi Instansi Pembina', category: 'Dokumen Rekomendasi' }\r\n  ];\r\n\r\n  // Load admin wilayah configs from database - hanya jika benar-benar diperlukan\r\n  useEffect(() => {\r\n    // Hanya jalankan jika user dan token sudah tersedia\r\n    if (!user || !token) return;\r\n    \r\n    if (user.role === 'admin') {\r\n      // Superadmin can CRUD\r\n      fetchAdminWilayahConfigs();\r\n      fetchAvailableJobTypes();\r\n    } else if (user.role === 'admin_wilayah') {\r\n      // Admin wilayah can only view\r\n      fetchAdminWilayahConfigs();\r\n    }\r\n  }, [user?.role, token, user?.id]); // Tambah user.id untuk memastikan user sudah fully loaded\r\n\r\n  // Separate useEffect for job configs to avoid conflicts\r\n  useEffect(() => {\r\n    // Hanya jalankan jika user dan token sudah tersedia\r\n    if (!user || !token) return;\r\n    \r\n    if (user.role === 'admin') {\r\n      fetchJobConfigs();\r\n    }\r\n  }, [token, user?.role, user?.id]);\r\n\r\n  // Load office settings - hanya jika user dan token tersedia\r\n  useEffect(() => {\r\n    if (!user || !token) return;\r\n    \r\n    setLoadingOffice(true);\r\n    apiGet('/api/offices', token)\r\n      .then(res => {\r\n        let office = null;\r\n        if (user?.office_id) {\r\n          office = res.offices?.find((o: any) => o.id === user.office_id);\r\n        }\r\n        if (!office && user?.kabkota) {\r\n          office = res.offices?.find((o: any) => o.kabkota === user.kabkota);\r\n        }\r\n        // Hapus fallback ke kantor lain, biarkan kosong jika tidak ada yang cocok\r\n        if (office) {\r\n          setOfficeId(office.id);\r\n          setOfficeSettings({\r\n            namakantor: office.namakantor || office.name || '',\r\n            kabkota: office.kabkota || '',\r\n            alamat: office.alamat || office.address || '',\r\n            telepon: office.telepon || office.phone || '',\r\n            fax: office.fax || '',\r\n            email: office.email || '',\r\n            website: office.website || ''\r\n          });\r\n        } else {\r\n          setOfficeId(null);\r\n          setOfficeSettings({\r\n            namakantor: '',\r\n            kabkota: '',\r\n            alamat: '',\r\n            telepon: '',\r\n            fax: '',\r\n            email: '',\r\n            website: ''\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error loading office settings:', err);\r\n        setErrorOffice('Gagal mengambil data kantor');\r\n      })\r\n      .finally(() => setLoadingOffice(false));\r\n  }, [token, user?.id, user?.office_id, user?.kabkota]);\r\n\r\n  // Load Kanwil settings from localStorage\r\n  useEffect(() => {\r\n    const savedKanwilSettings = localStorage.getItem('kanwilSettings');\r\n    if (savedKanwilSettings) {\r\n      try {\r\n        const parsed = JSON.parse(savedKanwilSettings);\r\n        setKanwilSettings(prev => ({\r\n          ...prev,\r\n          tingkat1: parsed.tingkat1 || 'KEMENTERIAN AGAMA REPUBLIK INDONESIA',\r\n          tingkat2: parsed.tingkat2 || 'KANTOR WILAYAH KEMENTERIAN AGAMA',\r\n          tingkat3: parsed.tingkat3 || 'PROVINSI NUSA TENGGARA BARAT',\r\n          alamat: parsed.alamat || '',\r\n          telepon: parsed.telepon || '',\r\n          fax: parsed.fax || '',\r\n          email: parsed.email || '',\r\n          website: parsed.website || ''\r\n        }));\r\n      } catch (err) {\r\n        console.error('Error parsing kanwil settings:', err);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const fetchJobConfigs = async () => {\r\n    try {\r\n      setJobConfigLoading(true);\r\n      const response = await apiGet('/api/job-type-configurations', token);\r\n      if (response.success) {\r\n        setJobConfigs(response.data);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching job configs:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Gagal mengambil data konfigurasi jabatan\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setJobConfigLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveOfficeSettings = async () => {\r\n    setFieldError(null);\r\n    // Validasi field wajib\r\n    if (!officeSettings.alamat.trim()) {\r\n      setFieldError('alamat');\r\n      inputRefs.alamat.current?.focus();\r\n      toast({\r\n        title: 'Alamat wajib diisi.',\r\n        description: 'Silakan isi alamat kantor.',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n    // Email opsional, tapi jika diisi harus valid\r\n    if (officeSettings.email && !/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(officeSettings.email)) {\r\n      setFieldError('email');\r\n      inputRefs.email.current?.focus();\r\n      toast({\r\n        title: 'Format email tidak valid.',\r\n        description: 'Silakan isi email dengan format yang benar.',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      const response = await apiPut(`/api/offices/${officeId}`, {\r\n        alamat: officeSettings.alamat,\r\n        telepon: officeSettings.telepon,\r\n        fax: officeSettings.fax,\r\n        email: officeSettings.email,\r\n        website: officeSettings.website\r\n      }, token);\r\n      setOfficeModalSuccess(true);\r\n      setOfficeModalMessage('Pengaturan kantor berhasil disimpan!');\r\n      setShowOfficeModal(true);\r\n    } catch (err: any) {\r\n      setOfficeModalSuccess(false);\r\n      setOfficeModalMessage('Gagal menyimpan pengaturan kantor. Silakan coba lagi.');\r\n      setShowOfficeModal(true);\r\n    }\r\n  };\r\n\r\n  const handleSaveKanwilSettings = async () => {\r\n    setFieldError(null);\r\n    // Validasi field wajib untuk Kanwil\r\n    if (!kanwilSettings.alamat.trim()) {\r\n      setFieldError('alamat');\r\n      kanwilInputRefs.alamat.current?.focus();\r\n      toast({\r\n        title: 'Alamat Kanwil wajib diisi.',\r\n        description: 'Silakan isi alamat Kantor Wilayah.',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n    // Email opsional, tapi jika diisi harus valid\r\n    if (kanwilSettings.email && !/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(kanwilSettings.email)) {\r\n      setFieldError('email');\r\n      kanwilInputRefs.email.current?.focus();\r\n      toast({\r\n        title: 'Format email tidak valid.',\r\n        description: 'Silakan isi email Kanwil dengan format yang benar.',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      // Simpan pengaturan Kanwil ke localStorage (karena ini pengaturan khusus)\r\n      const kanwilData = {\r\n        tingkat1: kanwilSettings.tingkat1,\r\n        tingkat2: kanwilSettings.tingkat2,\r\n        tingkat3: kanwilSettings.tingkat3,\r\n        alamat: kanwilSettings.alamat,\r\n        telepon: kanwilSettings.telepon,\r\n        fax: kanwilSettings.fax,\r\n        email: kanwilSettings.email,\r\n        website: kanwilSettings.website\r\n      };\r\n      localStorage.setItem('kanwilSettings', JSON.stringify(kanwilData));\r\n      setKanwilModalSuccess(true);\r\n      setKanwilModalMessage('Pengaturan Kanwil berhasil disimpan! Data akan digunakan untuk template Kanwil.');\r\n      setShowKanwilModal(true);\r\n    } catch (err: any) {\r\n      setKanwilModalSuccess(false);\r\n      setKanwilModalMessage('Gagal menyimpan pengaturan Kanwil. Silakan coba lagi.');\r\n      setShowKanwilModal(true);\r\n    }\r\n  };\r\n\r\n  const handleExportData = () => {\r\n    // Implementasi export data\r\n    toast({\r\n      title: 'Fitur Export',\r\n      description: 'Fitur export data akan segera tersedia.',\r\n    });\r\n  };\r\n\r\n  const handleImportData = () => {\r\n    // Implementasi import data\r\n    toast({\r\n      title: 'Fitur Import',\r\n      description: 'Fitur import data akan segera tersedia.',\r\n    });\r\n  };\r\n\r\n  // Admin Wilayah Configuration state\r\n  const [adminWilayahConfigs, setAdminWilayahConfigs] = useState<any[]>([]);\r\n  const [adminWilayahConfigLoading, setAdminWilayahConfigLoading] = useState(true);\r\n  const [showAdminWilayahConfigDialog, setShowAdminWilayahConfigDialog] = useState(false);\r\n  const [editingAdminWilayahConfig, setEditingAdminWilayahConfig] = useState<any | null>(null);\r\n  const [adminWilayahConfigSaving, setAdminWilayahConfigSaving] = useState(false);\r\n  \r\n  // State untuk modal konfirmasi delete\r\n  const [showDeleteConfirmDialog, setShowDeleteConfirmDialog] = useState(false);\r\n  const [configToDelete, setConfigToDelete] = useState<any | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n\r\n  // Admin Wilayah config form state\r\n  const [adminWilayahConfigForm, setAdminWilayahConfigForm] = useState({\r\n    jenis_jabatan_id: '',\r\n    name: '',\r\n    description: '',\r\n    selectedFiles: {} as Record<string, boolean>,\r\n    selectedVariant: '6.1',\r\n    is_active: true\r\n  });\r\n\r\n  // Available file types for admin wilayah (hardcoded like JobTypeConfiguration)\r\n  const adminWilayahAvailableFileTypes = [\r\n    { id: 'surat_rekomendasi_kanwil', name: 'Surat Rekomendasi dari Instansi Pembina', category: 'Dokumen Instansi Pembina', is_required: true, description: 'Surat rekomendasi dari instansi pembina dengan pilihan varian 6.1-6.9' },\r\n    { id: 'surat_persetujuan_kepala_wilayah', name: 'Surat Persetujuan Kepala Wilayah', category: 'Dokumen Kanwil', is_required: true, description: 'Surat persetujuan dari Kepala Wilayah Kementerian Agama Provinsi' },\r\n    { id: 'surat_pengantar_permohonan_rekomendasi', name: 'Surat Pengantar Permohonan Rekomendasi', category: 'Dokumen Pengantar', is_required: true, description: 'Surat pengantar permohonan rekomendasi pindah tugas' },\r\n    { id: 'surat_pernyataan_tidak_tugas_belajar', name: 'Surat Pernyataan Tidak Sedang Menjalani Tugas Belajar atau Ikatan Dinas', category: 'Dokumen Pernyataan', is_required: true, description: 'Surat pernyataan tidak sedang menjalani tugas belajar atau ikatan dinas' },\r\n    { id: 'surat_pernyataan_tidak_hukuman_disiplin', name: 'Surat Pernyataan Tidak Sedang Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat', category: 'Dokumen Pernyataan', is_required: true, description: 'Surat pernyataan tidak sedang dijatuhi hukuman disiplin tingkat sedang atau berat' },\r\n    { id: 'surat_pernyataan_tidak_proses_pidana', name: 'Surat Pernyataan Tidak Sedang Menjalani Proses Pidana atau Pernah Dipidana Penjara', category: 'Dokumen Pernyataan', is_required: true, description: 'Surat pernyataan tidak sedang menjalani proses pidana atau pernah dipidana penjara' },\r\n    { id: 'surat_pernyataan_tanggung_jawab_mutlak', name: 'Surat Pernyataan Tanggung Jawab Mutlak (SPTJM)', category: 'Dokumen Pernyataan', is_required: true, description: 'Surat pernyataan tanggung jawab mutlak untuk pengajuan mutasi' },\r\n    { id: 'surat_keterangan_bebas_temuan_inspektorat', name: 'Surat Keterangan Bebas Temuan (SKBT) - Inspektorat', category: 'Dokumen Kanwil', is_required: true, description: 'SKBT diterbitkan Inspektorat Jenderal Kemenag' },\r\n    { id: 'hasil_evaluasi_pertimbangan_baperjakat', name: 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)', category: 'Dokumen Kanwil', is_required: true, description: 'Hasil evaluasi dan pertimbangan BAPERJAKAT dari Kanwil Provinsi' },\r\n    { id: 'surat_rekomendasi_kanwil_khusus', name: 'Surat Rekomendasi Khusus dari Kanwil (Khusus Penghulu)', category: 'Dokumen Keterangan', is_required: true, description: 'Surat rekomendasi khusus dari Kanwil Provinsi untuk jabatan Penghulu' },\r\n    { id: 'hasil_assessment', name: 'Hasil Assessment', category: 'Dokumen Kanwil', is_required: true, description: 'Dokumen hasil uji kompetensi/assessment dari Kanwil/otoritas terkait' }\r\n  ];\r\n\r\n  // Available job types for admin wilayah config\r\n  const [availableJobTypes, setAvailableJobTypes] = useState<any[]>([]);\r\n\r\n  const variantOptions = [\r\n    { value: '6.1', label: '6.1 - Permohonan Persetujuan/Rekomendasi Pengangkatan ke Dalam Jabatan Pengawas (Untuk Eselon)' },\r\n    { value: '6.2', label: '6.2 - Permohonan Pindah Tugas ke Dirjen Bimas Islam (Untuk Penghulu)' },\r\n    { value: '6.3', label: '6.3 - Permohonan Pindah Tugas ke Dirjen PENDIS (Untuk Guru, Pengawas, Kepala Madrasah)' },\r\n    { value: '6.4', label: '6.4 - Permohonan Pindah Tugas ke Kepala Biro SDM Sekjen Kemenag RI (Untuk Analis SDM dan Asesor)' },\r\n    { value: '6.5', label: '6.5 - Permohonan Pindah Tugas ke Kepala Biro Umum Sekjen Kemenag RI (Arsiparis, BARJAS)' },\r\n    { value: '6.6', label: '6.6 - Permohonan Pindah Tugas ke Kepala Biro Keuangan dan BMN Sekjen Kemenag RI (Untuk Analis Pengelolaan Keuangan APBN dan Pranata Keuangan APBN)' },\r\n    { value: '6.7', label: '6.7 - Permohonan Pindah Tugas ke Kepala Biro Perencanaan dan Penganggaran Sekjen Kemenag RI (Untuk Perencana)' },\r\n    { value: '6.8', label: '6.8 - Permohonan Pindah Tugas ke Kepala Biro Humas (Untuk Pranata Humas)' },\r\n    { value: '6.9', label: '6.9 - Permohonan Pindah Tugas ke Kepala BMP-PSDM Kemenag RI (Untuk Analis Kebijakan)' }\r\n  ];\r\n\r\n  // Job Configuration functions\r\n  const handleAddJobConfig = () => {\r\n    setJobConfigForm({\r\n      jenis_jabatan: '',\r\n      total_dokumen: 0,\r\n      required_files: [],\r\n      is_active: true\r\n    });\r\n    setEditingJobConfig(null);\r\n    setShowJobConfigDialog(true);\r\n  };\r\n\r\n  const handleEditJobConfig = (config: any) => {\r\n    setJobConfigForm({\r\n      jenis_jabatan: config.jenis_jabatan,\r\n      total_dokumen: config.required_files?.length || 0,\r\n      required_files: config.required_files || [],\r\n      is_active: config.is_active\r\n    });\r\n    setEditingJobConfig(config);\r\n    setShowJobConfigDialog(true);\r\n  };\r\n\r\n  const handleSaveJobConfig = async () => {\r\n    if (!jobConfigForm.jenis_jabatan.trim()) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Jenis jabatan wajib diisi\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (jobConfigForm.required_files.length === 0) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Pilih minimal satu dokumen yang diperlukan\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setJobConfigSaving(true);\r\n      const payload = {\r\n        jenis_jabatan: jobConfigForm.jenis_jabatan,\r\n        min_dokumen: jobConfigForm.required_files.length,\r\n        max_dokumen: jobConfigForm.required_files.length,\r\n        required_files: jobConfigForm.required_files,\r\n        is_active: jobConfigForm.is_active\r\n      };\r\n\r\n      if (editingJobConfig) {\r\n        await apiPut(`/api/job-type-configurations/${editingJobConfig.id}`, payload, token);\r\n        toast({\r\n          title: \"Sukses\",\r\n          description: \"Konfigurasi jabatan berhasil diperbarui\",\r\n        });\r\n      } else {\r\n        await apiPost('/api/job-type-configurations', payload, token);\r\n        toast({\r\n          title: \"Sukses\",\r\n          description: \"Konfigurasi jabatan berhasil ditambahkan\",\r\n        });\r\n      }\r\n\r\n      setShowJobConfigDialog(false);\r\n      // Refresh both job configs list and available job types for Admin Wilayah\r\n      await fetchJobConfigs();\r\n      await fetchAvailableJobTypes();\r\n    } catch (error: any) {\r\n      console.error('Error saving job config:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Gagal menyimpan konfigurasi jabatan\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setJobConfigSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteJobConfig = async (configId: number) => {\r\n    try {\r\n      await apiDelete(`/api/job-type-configurations/${configId}`, token);\r\n      toast({\r\n        title: \"Sukses\",\r\n        description: \"Konfigurasi jabatan berhasil dihapus\",\r\n      });\r\n      // Refresh lists after delete\r\n      await fetchJobConfigs();\r\n      await fetchAvailableJobTypes();\r\n    } catch (error: any) {\r\n      console.error('Error deleting job config:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Gagal menghapus konfigurasi jabatan\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFileTypeToggle = (fileTypeId: string) => {\r\n    setJobConfigForm(prev => {\r\n      const newRequiredFiles = prev.required_files.includes(fileTypeId)\r\n        ? prev.required_files.filter(id => id !== fileTypeId)\r\n        : [...prev.required_files, fileTypeId];\r\n      \r\n      return {\r\n        ...prev,\r\n        required_files: newRequiredFiles,\r\n        total_dokumen: newRequiredFiles.length\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    const allFileTypeIds = availableFileTypes.map(fileType => fileType.id);\r\n    setJobConfigForm(prev => ({\r\n      ...prev,\r\n      required_files: allFileTypeIds,\r\n      total_dokumen: allFileTypeIds.length\r\n    }));\r\n    toast({\r\n      title: \"Berhasil\",\r\n      description: \"Semua dokumen telah dipilih\",\r\n    });\r\n  };\r\n\r\n  const handleDeselectAll = () => {\r\n    setJobConfigForm(prev => ({\r\n      ...prev,\r\n      required_files: [],\r\n      total_dokumen: 0\r\n    }));\r\n    toast({\r\n      title: \"Berhasil\",\r\n      description: \"Semua dokumen telah dihapus dari pilihan\",\r\n    });\r\n  };\r\n\r\n  // Admin Wilayah Configuration functions\r\n  const handleAddAdminWilayahConfig = () => {\r\n    // Only superadmin can add configs\r\n    if (user?.role !== 'admin') {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Hanya superadmin yang dapat menambah konfigurasi\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setAdminWilayahConfigForm({\r\n      jenis_jabatan_id: '',\r\n      name: '',\r\n      description: '',\r\n      selectedFiles: {},\r\n      selectedVariant: '6.1',\r\n      is_active: true\r\n    });\r\n    setEditingAdminWilayahConfig(null);\r\n    setShowAdminWilayahConfigDialog(true);\r\n  };\r\n\r\n  const handleEditAdminWilayahConfig = (config: any) => {\r\n    // Only superadmin can edit configs\r\n    if (user?.role !== 'admin') {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Hanya superadmin yang dapat mengedit konfigurasi\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    const selectedFilesMap: Record<string, boolean> = {};\r\n    // Gunakan identifier file_type (bukan id DB) untuk mencentang checkbox yang tepat\r\n    if (Array.isArray(config.files)) {\r\n      config.files.forEach((file: any) => {\r\n        const key = file.file_type || file.id; // fallback untuk kompatibilitas lama\r\n        if (key) selectedFilesMap[String(key)] = true;\r\n      });\r\n    }\r\n    \r\n    setAdminWilayahConfigForm({\r\n      jenis_jabatan_id: config.jenis_jabatan_id.toString(), // Convert to string to match SelectItem value\r\n      name: config.name,\r\n      description: config.description,\r\n      selectedFiles: selectedFilesMap,\r\n      selectedVariant: '6.1', // Default value\r\n      is_active: config.is_active\r\n    });\r\n    setEditingAdminWilayahConfig(config);\r\n    setShowAdminWilayahConfigDialog(true);\r\n  };\r\n\r\n  const handleDeleteAdminWilayahConfig = async (config: any) => {\r\n    // Only superadmin can delete configs\r\n    if (user?.role !== 'admin') {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Hanya superadmin yang dapat menghapus konfigurasi\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Set config yang akan dihapus dan buka modal konfirmasi\r\n    setConfigToDelete(config);\r\n    setShowDeleteConfirmDialog(true);\r\n  };\r\n\r\n  const confirmDeleteAdminWilayahConfig = async () => {\r\n    if (!configToDelete) return;\r\n\r\n    try {\r\n      setIsDeleting(true);\r\n      console.log(' Deleting config:', configToDelete);\r\n      console.log(' Files to delete:', configToDelete.files);\r\n      \r\n      // Delete all file configs for this job type using Promise.all\r\n      const deletePromises = configToDelete.files.map(async (file: any) => {\r\n        console.log(` Deleting file config ID: ${file.id}, Type: ${file.file_type}`);\r\n        return apiDelete(`/api/admin-wilayah-file-config/${file.id}`, token);\r\n      });\r\n      \r\n      await Promise.all(deletePromises);\r\n\r\n      toast({\r\n        title: \"Berhasil\",\r\n        description: \"Konfigurasi admin wilayah berhasil dihapus\",\r\n      });\r\n      \r\n      // Tutup modal dan refresh data\r\n      setShowDeleteConfirmDialog(false);\r\n      setConfigToDelete(null);\r\n      fetchAdminWilayahConfigs(); // Refresh data from database\r\n    } catch (error: any) {\r\n      console.error(' Error deleting admin wilayah config:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Gagal menghapus konfigurasi admin wilayah\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  const cancelDeleteAdminWilayahConfig = () => {\r\n    if (isDeleting) return; // Mencegah cancel saat sedang menghapus\r\n    setShowDeleteConfirmDialog(false);\r\n    setConfigToDelete(null);\r\n  };\r\n\r\n  // Handle escape key untuk modal konfirmasi\r\n  useEffect(() => {\r\n    const handleEscape = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && showDeleteConfirmDialog && !isDeleting) {\r\n        cancelDeleteAdminWilayahConfig();\r\n      }\r\n    };\r\n\r\n    if (showDeleteConfirmDialog) {\r\n      document.addEventListener('keydown', handleEscape);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [showDeleteConfirmDialog, isDeleting]);\r\n\r\n\r\n  const handleAdminWilayahFileToggle = (fileId: string) => {\r\n    setAdminWilayahConfigForm(prev => ({\r\n      ...prev,\r\n      selectedFiles: {\r\n        ...prev.selectedFiles,\r\n        [fileId]: !prev.selectedFiles[fileId]\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleAdminWilayahVariantChange = (value: string) => {\r\n    setAdminWilayahConfigForm(prev => ({\r\n      ...prev,\r\n      selectedVariant: value\r\n    }));\r\n  };\r\n\r\n  const handleSaveAdminWilayahConfig = async () => {\r\n    // Auto-fill name/description to reduce inputs\r\n    const selectedJob = availableJobTypes.find(j => j.id.toString() === adminWilayahConfigForm.jenis_jabatan_id);\r\n    const autoName = selectedJob ? `Konfigurasi ${selectedJob.jenis_jabatan}` : 'Konfigurasi Admin Wilayah';\r\n    const autoDesc = selectedJob ? `Konfigurasi file wajib untuk jabatan ${selectedJob.jenis_jabatan}` : 'Konfigurasi file wajib Admin Wilayah';\r\n\r\n    if (!adminWilayahConfigForm.jenis_jabatan_id) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Jenis jabatan wajib dipilih\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Patch local state defaults (without forcing extra inputs)\r\n    if (!adminWilayahConfigForm.name?.trim()) {\r\n      setAdminWilayahConfigForm(prev => ({ ...prev, name: autoName }));\r\n    }\r\n    if (!adminWilayahConfigForm.description?.trim()) {\r\n      setAdminWilayahConfigForm(prev => ({ ...prev, description: autoDesc }));\r\n    }\r\n\r\n    const selectedFileList = adminWilayahAvailableFileTypes.filter(file => adminWilayahConfigForm.selectedFiles[file.id]);\r\n    \r\n    if (selectedFileList.length === 0) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Pilih minimal satu file yang required\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setAdminWilayahConfigSaving(true);\r\n\r\n      if (editingAdminWilayahConfig) {\r\n        // Update existing configs - delete old ones and create new ones\r\n        // First, delete all existing configs for this job type\r\n        const existingConfigs = adminWilayahConfigs.find(c => c.jenis_jabatan_id === parseInt(adminWilayahConfigForm.jenis_jabatan_id));\r\n        if (existingConfigs) {\r\n          console.log(' Updating configs, deleting old ones:', existingConfigs.files);\r\n          \r\n          const deletePromises = existingConfigs.files.map(async (file: any) => {\r\n            console.log(` Deleting old file config ID: ${file.id}, Type: ${file.file_type}`);\r\n            return apiDelete(`/api/admin-wilayah-file-config/${file.id}`, token);\r\n          });\r\n          \r\n          await Promise.all(deletePromises);\r\n        }\r\n\r\n        // Create new configs\r\n        for (const file of selectedFileList) {\r\n          await apiPost('/api/admin-wilayah-file-config', {\r\n            jenis_jabatan_id: parseInt(adminWilayahConfigForm.jenis_jabatan_id),\r\n            file_type: file.id,\r\n            display_name: file.name,\r\n            is_required: file.is_required,\r\n            description: file.description,\r\n            is_active: adminWilayahConfigForm.is_active\r\n          }, token);\r\n        }\r\n\r\n        toast({\r\n          title: \"Berhasil\",\r\n          description: \"Konfigurasi admin wilayah berhasil diperbarui\",\r\n        });\r\n      } else {\r\n        // Create new configs\r\n        for (const file of selectedFileList) {\r\n          await apiPost('/api/admin-wilayah-file-config', {\r\n            jenis_jabatan_id: parseInt(adminWilayahConfigForm.jenis_jabatan_id),\r\n            file_type: file.id,\r\n            display_name: file.name,\r\n            is_required: file.is_required,\r\n            description: file.description,\r\n            is_active: adminWilayahConfigForm.is_active\r\n          }, token);\r\n        }\r\n\r\n        toast({\r\n          title: \"Berhasil\",\r\n          description: \"Konfigurasi admin wilayah berhasil dibuat\",\r\n        });\r\n      }\r\n      \r\n      setShowAdminWilayahConfigDialog(false);\r\n      setEditingAdminWilayahConfig(null);\r\n      fetchAdminWilayahConfigs(); // Refresh data from database\r\n    } catch (error: any) {\r\n      console.error('Error saving admin wilayah config:', error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: error?.message || \"Gagal menyimpan konfigurasi admin wilayah\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setAdminWilayahConfigSaving(false);\r\n    }\r\n  };\r\n\r\n  const fetchAdminWilayahConfigs = async () => {\r\n    try {\r\n      setAdminWilayahConfigLoading(true);\r\n      const response = await apiGet('/api/admin-wilayah-file-config', token);\r\n      \r\n      console.log(' API Response:', response);\r\n      \r\n      if (response?.success && Array.isArray(response.data)) {\r\n        console.log(' Raw data from API:', response.data);\r\n        \r\n        // Transform API response to match frontend format\r\n        const transformedConfigs = response.data.map((config: any) => ({\r\n          id: config.id,\r\n          jenis_jabatan_id: config.jenis_jabatan_id,\r\n          name: config.jenis_jabatan?.jenis_jabatan || `Jabatan ${config.jenis_jabatan_id}`,\r\n          description: `Konfigurasi file wajib untuk jabatan ${config.jenis_jabatan?.jenis_jabatan || config.jenis_jabatan_id}`,\r\n          files: [{\r\n            id: config.id, //  Gunakan config.id untuk delete\r\n            file_type: config.file_type, //  Tambahkan field file_type\r\n            name: config.display_name,\r\n            description: config.description,\r\n            is_required: config.is_required,\r\n            is_active: config.is_active\r\n          }],\r\n          is_active: config.is_active,\r\n          created_at: config.created_at,\r\n          updated_at: config.updated_at\r\n        }));\r\n\r\n        console.log(' Transformed configs:', transformedConfigs);\r\n\r\n        // Group by jenis_jabatan_id\r\n        const groupedConfigs = transformedConfigs.reduce((acc: any[], config: any) => {\r\n          const existingConfig = acc.find(c => c.jenis_jabatan_id === config.jenis_jabatan_id);\r\n          if (existingConfig) {\r\n            existingConfig.files.push(...config.files);\r\n          } else {\r\n            acc.push(config);\r\n          }\r\n          return acc;\r\n        }, []);\r\n\r\n        console.log(' Grouped configs:', groupedConfigs);\r\n        setAdminWilayahConfigs(groupedConfigs);\r\n      } else {\r\n        // If API fails, set empty array instead of crashing\r\n        console.warn(' Admin wilayah config API response invalid:', response);\r\n        setAdminWilayahConfigs([]);\r\n      }\r\n          } catch (error: any) {\r\n        console.error(' Error fetching admin wilayah configs:', error);\r\n        // Don't show error toast, just set empty array to prevent crash\r\n        setAdminWilayahConfigs([]);\r\n      } finally {\r\n        setAdminWilayahConfigLoading(false);\r\n      }\r\n  };\r\n\r\n  const fetchAvailableJobTypes = async () => {\r\n    try {\r\n      const response = await apiGet('/api/admin-wilayah-file-config/available-job-types', token);\r\n      if (response?.success && Array.isArray(response.data)) {\r\n        setAvailableJobTypes(response.data);\r\n      } else {\r\n        // If API fails, set empty array instead of crashing\r\n        console.warn('Available job types API response invalid:', response);\r\n        setAvailableJobTypes([]);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching available job types:', error);\r\n      // Don't show error toast, just set empty array to prevent crash\r\n      setAvailableJobTypes([]);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return <div className=\"py-8 text-center\">Silakan login terlebih dahulu.</div>;\r\n  }\r\n\r\n  // Tambah loading state untuk mencegah render yang tidak perlu\r\n  if (!token) {\r\n    return <div className=\"py-8 text-center\">Memuat pengaturan...</div>;\r\n  }\r\n\r\n  const isAdmin = user?.role === 'admin';\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-8 px-4\">\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Pengaturan</h1>\r\n        <p className=\"text-gray-600\">\r\n          Kelola pengaturan kantor, pegawai, dan sistem aplikasi\r\n        </p>\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"office\" className=\"space-y-6\">\r\n        <TabsList className={`grid w-full ${isAdmin ? 'grid-cols-6' : 'grid-cols-5'}`}>\r\n          <TabsTrigger value=\"office\" className=\"flex items-center space-x-2\">\r\n            <Building className=\"h-4 w-4\" />\r\n            <span>Kantor</span>\r\n          </TabsTrigger>\r\n          {isAdmin && (\r\n            <TabsTrigger value=\"job-config\" className=\"flex items-center space-x-2\">\r\n              <FileText className=\"h-4 w-4\" />\r\n              <span>Konfigurasi Jabatan</span>\r\n            </TabsTrigger>\r\n          )}\r\n          {isAdmin && (\r\n            <TabsTrigger value=\"admin-wilayah-config\" className=\"flex items-center space-x-2\">\r\n              <FolderOpen className=\"h-4 w-4 text-gray-600\" />\r\n              <span>Konfigurasi Berkas Admin Wilayah</span>\r\n            </TabsTrigger>\r\n          )}\r\n          <TabsTrigger value=\"employees\" className=\"flex items-center space-x-2\">\r\n            <Users className=\"h-4 w-4\" />\r\n            <span>Pegawai</span>\r\n          </TabsTrigger>\r\n          {isAdmin && (\r\n            <TabsTrigger value=\"maintenance\" className=\"flex items-center space-x-2\">\r\n              <Wrench className=\"h-4 w-4\" />\r\n              <span>Maintenance</span>\r\n            </TabsTrigger>\r\n          )}\r\n          <TabsTrigger value=\"system\" className=\"flex items-center space-x-2\">\r\n            <SettingsIcon className=\"h-4 w-4\" />\r\n            <span>Sistem</span>\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"office\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Pengaturan Kantor</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {loadingOffice ? (\r\n                <div className=\"space-y-4\">\r\n                  <Skeleton className=\"h-6 w-1/3 mb-2\" />\r\n                  <Skeleton className=\"h-10 w-full mb-2\" />\r\n                  <Skeleton className=\"h-10 w-full mb-2\" />\r\n                  <Skeleton className=\"h-24 w-full mb-2\" />\r\n                  <Skeleton className=\"h-10 w-1/2 mb-2\" />\r\n                  <Skeleton className=\"h-10 w-1/2 mb-2\" />\r\n                  <Skeleton className=\"h-10 w-1/2 mb-2\" />\r\n                </div>\r\n              ) : errorOffice ? (\r\n                <div className=\"text-error\">{errorOffice}</div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <Label htmlFor=\"namakantor\">Nama Kantor</Label>\r\n                      <Input\r\n                        id=\"namakantor\"\r\n                        ref={inputRefs.namakantor}\r\n                        value={officeSettings.namakantor}\r\n                        readOnly\r\n                        disabled\r\n                        className={fieldError === 'namakantor' ? 'border-red-500' : ''}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Label htmlFor=\"kabkota\">Kabupaten/Kota</Label>\r\n                      <Input\r\n                        id=\"kabkota\"\r\n                        ref={inputRefs.kabkota}\r\n                        value={officeSettings.kabkota}\r\n                        readOnly\r\n                        disabled\r\n                        className={fieldError === 'kabkota' ? 'border-red-500' : ''}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label htmlFor=\"alamat\">Alamat</Label>\r\n                    <Textarea\r\n                      id=\"alamat\"\r\n                      ref={inputRefs.alamat}\r\n                      value={officeSettings.alamat}\r\n                      onChange={(e) => setOfficeSettings({\r\n                        ...officeSettings,\r\n                        alamat: e.target.value\r\n                      })}\r\n                      rows={3}\r\n                      className={fieldError === 'alamat' ? 'border-red-500' : ''}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <Label htmlFor=\"telepon\">Telepon</Label>\r\n                      <Input\r\n                        id=\"telepon\"\r\n                        ref={inputRefs.telepon}\r\n                        value={officeSettings.telepon}\r\n                        onChange={(e) => setOfficeSettings({\r\n                          ...officeSettings,\r\n                          telepon: e.target.value\r\n                        })}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Label htmlFor=\"fax\">Fax</Label>\r\n                      <Input\r\n                        id=\"fax\"\r\n                        value={officeSettings.fax}\r\n                        onChange={(e) => setOfficeSettings({\r\n                          ...officeSettings,\r\n                          fax: e.target.value\r\n                        })}\r\n                        ref={inputRefs.fax}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <Label htmlFor=\"email\">Email</Label>\r\n                      <Input\r\n                        id=\"email\"\r\n                        ref={inputRefs.email}\r\n                        type=\"email\"\r\n                        value={officeSettings.email}\r\n                        onChange={(e) => setOfficeSettings({\r\n                          ...officeSettings,\r\n                          email: e.target.value\r\n                        })}\r\n                        placeholder=\"Contoh: kantor@kemenag.go.id\"\r\n                        className={fieldError === 'email' ? 'border-red-500' : ''}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Label htmlFor=\"website\">Website</Label>\r\n                      <Input\r\n                        id=\"website\"\r\n                        ref={inputRefs.website}\r\n                        value={officeSettings.website}\r\n                        onChange={(e) => setOfficeSettings({\r\n                          ...officeSettings,\r\n                          website: e.target.value\r\n                        })}\r\n                        placeholder=\"Contoh: kemenag.go.id\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button onClick={handleSaveOfficeSettings} className=\"w-full bg-green-600 hover:bg-green-700 text-white\">\r\n                    <Save className=\"mr-2 h-4 w-4\" />\r\n                    Simpan Pengaturan Kantor\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {isAdmin && (\r\n          <TabsContent value=\"job-config\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <CardTitle>Konfigurasi Jabatan</CardTitle>\r\n                  <Button onClick={handleAddJobConfig} className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                    <Plus className=\"w-4 h-4 mr-2\" />\r\n                    Tambah Konfigurasi\r\n                  </Button>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                {jobConfigLoading ? (\r\n                  <div className=\"space-y-4\">\r\n                    <Skeleton className=\"h-6 w-1/3 mb-2\" />\r\n                    <Skeleton className=\"h-10 w-full mb-2\" />\r\n                    <Skeleton className=\"h-10 w-full mb-2\" />\r\n                    <Skeleton className=\"h-10 w-full mb-2\" />\r\n                  </div>\r\n                ) : jobConfigs.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Belum ada konfigurasi jabatan</h3>\r\n                    <p className=\"text-gray-500 mb-4\">Mulai dengan menambahkan konfigurasi jabatan pertama Anda.</p>\r\n                    <Button onClick={handleAddJobConfig} className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                      <Plus className=\"w-4 h-4 mr-2\" />\r\n                      Tambah Konfigurasi Pertama\r\n                    </Button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    {jobConfigs.map((config) => (\r\n                      <div key={config.id} className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\">\r\n                        <div className=\"flex justify-between items-start mb-3\">\r\n                          <div>\r\n                            <h3 className=\"font-medium text-gray-900\">{config.jenis_jabatan}</h3>\r\n                            <p className=\"text-sm text-gray-500\">\r\n                              {config.required_files?.length || 0} dokumen diperlukan\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Badge \r\n                              className={config.is_active \r\n                                ? \"bg-green-100 text-green-800 border-green-200 hover:bg-green-100\" \r\n                                : \"bg-red-100 text-red-800 border-red-200 hover:bg-red-100\"\r\n                              }\r\n                            >\r\n                              {config.is_active ? \"Aktif\" : \"Nonaktif\"}\r\n                            </Badge>\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleEditJobConfig(config)}\r\n                              className=\"border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800\"\r\n                            >\r\n                              <Edit className=\"w-4 h-4\" />\r\n                            </Button>\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleDeleteJobConfig(config.id)}\r\n                              className=\"text-red-600 hover:text-red-700\"\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                        {config.required_files && config.required_files.length > 0 && (\r\n                          <div className=\"flex flex-wrap gap-1\">\r\n                            {config.required_files.map((fileId: string) => {\r\n                              const fileType = availableFileTypes.find(ft => ft.id === fileId);\r\n                              return fileType ? (\r\n                                <Badge key={fileId} variant=\"outline\" className=\"text-xs\">\r\n                                  {fileType.name}\r\n                                </Badge>\r\n                              ) : null;\r\n                            })}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        )}\r\n\r\n        {isAdmin && (\r\n          <TabsContent value=\"admin-wilayah-config\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <CardTitle>Konfigurasi Berkas Admin Wilayah</CardTitle>\r\n                  {user?.role === 'admin' && (\r\n                    <Button onClick={handleAddAdminWilayahConfig} className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                      <Plus className=\"h-4 w-4 mr-2\" />\r\n                      Tambah Konfigurasi\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {adminWilayahConfigLoading ? (\r\n                  <div className=\"space-y-4\">\r\n                    <Skeleton className=\"h-6 w-1/3 mb-2\" />\r\n                    <Skeleton className=\"h-32 w-full mb-2\" />\r\n                    <Skeleton className=\"h-32 w-full mb-2\" />\r\n                  </div>\r\n                ) : adminWilayahConfigs.length === 0 ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <FolderOpen className=\"h-16 w-16 mx-auto text-gray-300 mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Belum ada konfigurasi</h3>\r\n                    <p className=\"text-gray-600 mb-4\">\r\n                      {user?.role === 'admin' \r\n                        ? 'Buat konfigurasi pertama untuk admin wilayah'\r\n                        : 'Belum ada konfigurasi yang dibuat oleh superadmin'\r\n                      }\r\n                    </p>\r\n                    {user?.role === 'admin' && (\r\n                      <Button onClick={handleAddAdminWilayahConfig} className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                        <Plus className=\"h-4 w-4 mr-2\" />\r\n                        Tambah Konfigurasi\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    {adminWilayahConfigs.map((config) => (\r\n                      <Card key={config.id} className=\"border-green-200\">\r\n                        <CardHeader>\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                              <CardTitle className=\"text-green-800\">{config.name}</CardTitle>\r\n                              <p className=\"text-sm text-gray-600 mt-1\">{config.description}</p>\r\n                              <p className=\"text-xs text-gray-500 mt-1\">\r\n                                {config.files.length} berkas diperlukan\r\n                              </p>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Badge className={config.is_active ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-800\"}>\r\n                                {config.is_active ? \"Aktif\" : \"Nonaktif\"}\r\n                              </Badge>\r\n                              {user?.role === 'admin' && (\r\n                                <>\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"outline\"\r\n                                    onClick={() => handleEditAdminWilayahConfig(config)}\r\n                                    className=\"text-green-600 border-green-200 hover:bg-green-50\"\r\n                                  >\r\n                                    <Edit className=\"h-4 w-4\" />\r\n                                  </Button>\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"outline\"\r\n                                    onClick={() => handleDeleteAdminWilayahConfig(config)}\r\n                                    className=\"text-red-600 border-red-200 hover:bg-red-50\"\r\n                                  >\r\n                                    <Trash2 className=\"h-4 w-4\" />\r\n                                  </Button>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                          <div className=\"flex flex-wrap gap-2\">\r\n                            {config.files.map((file: any) => (\r\n                              <Badge key={file.id} variant=\"outline\" className=\"text-xs\">\r\n                                {file.name}\r\n                              </Badge>\r\n                            ))}\r\n                          </div>\r\n                        </CardContent>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        )}\r\n\r\n        <TabsContent value=\"employees\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Kelola Pegawai</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <EmployeesTable token={token} />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        {isAdmin && (\r\n          <TabsContent value=\"maintenance\">\r\n            <MaintenanceToggle />\r\n          </TabsContent>\r\n        )}\r\n\r\n        <TabsContent value=\"system\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Pengaturan Sistem</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <Button \r\n                  onClick={handleExportData} \r\n                  variant=\"outline\" \r\n                  className=\"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800\"\r\n                >\r\n                  <Download className=\"h-4 w-4\" />\r\n                  Export Data\r\n                </Button>\r\n                <Button \r\n                  onClick={handleImportData} \r\n                  variant=\"outline\" \r\n                  className=\"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800\"\r\n                >\r\n                  <Upload className=\"h-4 w-4\" />\r\n                  Import Data\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      {/* Office Settings Modal */}\r\n      <AlertDialog open={showOfficeModal} onOpenChange={setShowOfficeModal}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>{officeModalSuccess ? 'Berhasil' : 'Gagal'}</AlertDialogTitle>\r\n            <AlertDialogDescription>{officeModalMessage}</AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogAction \r\n              onClick={() => setShowOfficeModal(false)}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              Tutup\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Kanwil Settings Modal */}\r\n      <AlertDialog open={showKanwilModal} onOpenChange={setShowKanwilModal}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>{kanwilModalSuccess ? 'Berhasil' : 'Gagal'}</AlertDialogTitle>\r\n            <AlertDialogDescription>{kanwilModalMessage}</AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogAction \r\n              onClick={() => setShowKanwilModal(false)}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              Tutup\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Job Configuration Dialog */}\r\n      <Dialog open={showJobConfigDialog} onOpenChange={setShowJobConfigDialog}>\r\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle>\r\n              {editingJobConfig ? 'Edit Konfigurasi Jabatan' : 'Tambah Konfigurasi Jabatan Baru'}\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              {editingJobConfig ? 'Edit konfigurasi jabatan yang sudah ada' : 'Buat konfigurasi jabatan baru dengan dokumen yang diperlukan'}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {/* Basic Info */}\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"jenis_jabatan\">Jenis Jabatan</Label>\r\n                <Input\r\n                  id=\"jenis_jabatan\"\r\n                  value={jobConfigForm.jenis_jabatan}\r\n                  onChange={(e) => setJobConfigForm({\r\n                    ...jobConfigForm,\r\n                    jenis_jabatan: e.target.value\r\n                  })}\r\n                  placeholder=\"Contoh: Kepala Seksi, Kepala Subbagian, dll\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <Switch\r\n                  id=\"is_active\"\r\n                  checked={jobConfigForm.is_active}\r\n                  onCheckedChange={(checked) => setJobConfigForm({\r\n                    ...jobConfigForm,\r\n                    is_active: checked\r\n                  })}\r\n                  className=\"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-200\"\r\n                />\r\n                <Label htmlFor=\"is_active\">Aktif</Label>\r\n              </div>\r\n            </div>\r\n\r\n            {/* File Types Selection */}\r\n            <div>\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <Label>Dokumen yang Diperlukan</Label>\r\n                <div className=\"flex gap-2\">\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handleSelectAll}\r\n                    className=\"border-green-600 text-green-600 hover:bg-green-50\"\r\n                  >\r\n                    Pilih Semua ({availableFileTypes.length})\r\n                  </Button>\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={handleDeselectAll}\r\n                    className=\"border-gray-600 text-gray-600 hover:bg-gray-50\"\r\n                  >\r\n                    Hapus Semua\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-2 space-y-4\">\r\n                {Object.entries(\r\n                  availableFileTypes.reduce((acc, fileType) => {\r\n                    if (!acc[fileType.category]) {\r\n                      acc[fileType.category] = [];\r\n                    }\r\n                    acc[fileType.category].push(fileType);\r\n                    return acc;\r\n                  }, {} as Record<string, typeof availableFileTypes>)\r\n                ).map(([category, fileTypes]) => (\r\n                  <div key={category} className=\"border rounded-lg p-4\">\r\n                    <h4 className=\"font-medium text-gray-900 mb-3\">{category}</h4>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                      {fileTypes.map((fileType) => (\r\n                        <div key={fileType.id} className=\"flex items-center space-x-2\">\r\n                          <Checkbox\r\n                            id={fileType.id}\r\n                            checked={jobConfigForm.required_files.includes(fileType.id)}\r\n                            onCheckedChange={() => handleFileTypeToggle(fileType.id)}\r\n                          />\r\n                          <Label htmlFor={fileType.id} className=\"text-sm cursor-pointer\">\r\n                            {fileType.name}\r\n                          </Label>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <div className=\"mt-3 text-sm text-gray-500\">\r\n                Total dokumen yang dipilih: {jobConfigForm.required_files.length} / {availableFileTypes.length}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowJobConfigDialog(false)}\r\n              className=\"border-gray-300 text-gray-700 hover:bg-gray-50\"\r\n            >\r\n              Batal\r\n            </Button>\r\n            <Button\r\n              onClick={handleSaveJobConfig}\r\n              disabled={jobConfigSaving}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              {jobConfigSaving ? 'Menyimpan...' : (editingJobConfig ? 'Update' : 'Simpan')}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Admin Wilayah Configuration Dialog */}\r\n      <Dialog open={showAdminWilayahConfigDialog} onOpenChange={setShowAdminWilayahConfigDialog}>\r\n        <DialogContent className=\"max-w-6xl max-h-[80vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle>\r\n              {editingAdminWilayahConfig ? 'Edit Konfigurasi Berkas Admin Wilayah' : 'Tambah Konfigurasi Berkas Admin Wilayah Baru'}\r\n            </DialogTitle>\r\n            <DialogDescription>\r\n              {editingAdminWilayahConfig \r\n                ? 'Edit konfigurasi berkas wajib untuk admin wilayah'\r\n                : 'Buat konfigurasi berkas wajib baru untuk admin wilayah'\r\n              }\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          <div className=\"space-y-6\">\r\n            {/* Active Status - dipindah ke atas */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Switch\r\n                id=\"admin-wilayah-is-active\"\r\n                checked={adminWilayahConfigForm.is_active}\r\n                onCheckedChange={(checked) => setAdminWilayahConfigForm({\r\n                  ...adminWilayahConfigForm,\r\n                  is_active: checked\r\n                })}\r\n                className=\"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-200\"\r\n              />\r\n              <Label htmlFor=\"admin-wilayah-is-active\">Aktif</Label>\r\n            </div>\r\n\r\n            {/* Nama Konfigurasi */}\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"admin-wilayah-config-name\">Nama Konfigurasi *</Label>\r\n              <Input\r\n                id=\"admin-wilayah-config-name\"\r\n                value={adminWilayahConfigForm.name}\r\n                onChange={(e) => setAdminWilayahConfigForm({\r\n                  ...adminWilayahConfigForm,\r\n                  name: e.target.value\r\n                })}\r\n                placeholder=\"Contoh: Penghulu, Kepala Kantor, Kepala Seksi\"\r\n              />\r\n            </div>\r\n\r\n            {/* File Selection dengan 2 kolom */}\r\n            <div>\r\n              <Label>Pilih Berkas Wajib Admin Wilayah</Label>\r\n              <div className=\"mt-2 space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  {adminWilayahAvailableFileTypes.map((file) => (\r\n                    <div\r\n                      key={file.id}\r\n                      className={`p-3 border rounded-lg transition-all duration-200 ${\r\n                        adminWilayahConfigForm.selectedFiles[file.id]\r\n                          ? 'border-green-200 bg-green-50'\r\n                          : 'border-gray-200 hover:border-green-300'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <Checkbox\r\n                          checked={adminWilayahConfigForm.selectedFiles[file.id] || false}\r\n                          onCheckedChange={() => handleAdminWilayahFileToggle(file.id)}\r\n                          className=\"mt-1\"\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-3 mb-1\">\r\n                            <h4 className=\"font-medium text-gray-900 text-sm\">{file.name}</h4>\r\n                            {file.is_required && (\r\n                              <Badge className=\"bg-red-100 text-red-800 border-red-200 text-xs\">Wajib</Badge>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-xs text-gray-600\">{file.description}</p>\r\n                          \r\n                          {/* Varian selector untuk file 6 */}\r\n                          {file.id === 'surat_rekomendasi_kanwil' && adminWilayahConfigForm.selectedFiles[file.id] && (\r\n                            <div className=\"mt-3\">\r\n                              <Label className=\"text-xs font-medium text-gray-700 mb-2 block\">\r\n                                Pilih Varian File 6:\r\n                              </Label>\r\n                              <Select \r\n                                value={adminWilayahConfigForm.selectedVariant} \r\n                                onValueChange={handleAdminWilayahVariantChange}\r\n                              >\r\n                                <SelectTrigger className=\"w-full focus:ring-green-500 focus:border-green-500\">\r\n                                  <SelectValue placeholder=\"Pilih varian 6.x...\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                  {variantOptions.map((option) => (\r\n                                    <SelectItem key={option.value} value={option.value}>\r\n                                      {option.label}\r\n                                    </SelectItem>\r\n                                  ))}\r\n                                </SelectContent>\r\n                              </Select>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Summary */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Ringkasan Konfigurasi</h4>\r\n              <div className=\"space-y-2 text-sm text-gray-600\">\r\n                <p>Total berkas yang dipilih: {Object.values(adminWilayahConfigForm.selectedFiles).filter(Boolean).length}</p>\r\n                <p>Berkas wajib: {adminWilayahAvailableFileTypes.filter(f => f.is_required && adminWilayahConfigForm.selectedFiles[f.id]).length}</p>\r\n                {adminWilayahConfigForm.selectedFiles['surat_rekomendasi_kanwil'] && (\r\n                  <p>Varian berkas 6: {adminWilayahConfigForm.selectedVariant}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"jenis-jabatan\">Jenis Jabatan</Label>\r\n                <Select \r\n                  value={adminWilayahConfigForm.jenis_jabatan_id} \r\n                  onValueChange={(value) => setAdminWilayahConfigForm(prev => ({ ...prev, jenis_jabatan_id: value }))}\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Pilih jenis jabatan\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {availableJobTypes.map((jobType) => (\r\n                      <SelectItem key={jobType.id} value={jobType.id.toString()}>\r\n                        {jobType.jenis_jabatan}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {/* Nama Konfigurasi dan Deskripsi disembunyikan untuk menyederhanakan input */}\r\n              {/*\r\n              <div>\r\n                <Label htmlFor=\"config-name\">Nama Konfigurasi</Label>\r\n                <Input\r\n                  id=\"config-name\"\r\n                  value={adminWilayahConfigForm.name}\r\n                  onChange={(e) => setAdminWilayahConfigForm(prev => ({ ...prev, name: e.target.value }))}\r\n                  placeholder=\"Contoh: Konfigurasi Guru\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"config-description\">Deskripsi</Label>\r\n                <Textarea\r\n                  id=\"config-description\"\r\n                  value={adminWilayahConfigForm.description}\r\n                  onChange={(e) => setAdminWilayahConfigForm(prev => ({ ...prev, description: e.target.value }))}\r\n                  placeholder=\"Deskripsi konfigurasi file wajib\"\r\n                  rows={3}\r\n                />\r\n              </div>\r\n              */}\r\n            </div>\r\n          </div>\r\n\r\n          <DialogFooter>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowAdminWilayahConfigDialog(false)}\r\n              className=\"border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900\"\r\n            >\r\n              Batal\r\n            </Button>\r\n            <Button\r\n              onClick={handleSaveAdminWilayahConfig}\r\n              disabled={adminWilayahConfigSaving}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              {adminWilayahConfigSaving ? 'Menyimpan...' : (editingAdminWilayahConfig ? 'Update' : 'Simpan')}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Modal Konfirmasi Delete */}\r\n      <Dialog \r\n        open={showDeleteConfirmDialog} \r\n        onOpenChange={(open) => {\r\n          // Mencegah modal tertutup saat sedang menghapus\r\n          if (!open && isDeleting) return;\r\n          setShowDeleteConfirmDialog(open);\r\n        }}\r\n      >\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-red-600\">Konfirmasi Penghapusan</DialogTitle>\r\n            <DialogDescription>\r\n              Apakah Anda yakin ingin menghapus konfigurasi berkas admin wilayah ini?\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          {configToDelete && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n                <h4 className=\"font-medium text-red-800 mb-2\">{configToDelete.name}</h4>\r\n                <p className=\"text-sm text-red-700 mb-2\">{configToDelete.description}</p>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {configToDelete.files.map((file: any) => (\r\n                    <Badge key={file.id} variant=\"outline\" className=\"text-xs border-red-200 text-red-700\">\r\n                      {file.name}\r\n                    </Badge>\r\n                  ))}\r\n                </div>\r\n                <p className=\"text-xs text-red-600 mt-2\">\r\n                  Total {configToDelete.files.length} berkas akan dihapus\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                <div className=\"flex items-start space-x-2\">\r\n                  <AlertTriangle className=\"h-4 w-4 text-yellow-600 mt-0.5\" />\r\n                  <div className=\"text-sm text-yellow-800\">\r\n                    <p className=\"font-medium\">Peringatan!</p>\r\n                    <p>Tindakan ini tidak dapat dibatalkan. Semua konfigurasi berkas untuk jenis jabatan ini akan dihapus secara permanen.</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <DialogFooter className=\"flex-col sm:flex-row gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={cancelDeleteAdminWilayahConfig}\r\n              disabled={isDeleting}\r\n              className=\"w-full sm:w-auto border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900\"\r\n            >\r\n              Batal\r\n            </Button>\r\n            <Button\r\n              onClick={confirmDeleteAdminWilayahConfig}\r\n              disabled={isDeleting}\r\n              variant=\"destructive\"\r\n              className=\"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white\"\r\n            >\r\n              {isDeleting ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  Menghapus...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                  Hapus Permanen\r\n                </>\r\n              )}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n"],"names":["MaintenanceToggle","user","token","useAuth","maintenanceStatus","setMaintenanceStatus","useState","history","setHistory","isLoading","setIsLoading","showHistory","setShowHistory","toggleForm","setToggleForm","useEffect","fetchMaintenanceStatus","fetchHistory","response","apiGet","prev","error","handleToggle","apiPost","successMessage","modal","jsxs","jsx","Wrench","Fragment","AlertTriangle","CheckCircle","e","Clock","record","CopyableText","text","label","className","copied","setCopied","copiedOpen","setCopiedOpen","handleCopy","_a","_b","textarea","Check","Clipboard","Dialog","DialogContent","EmployeesTable","employees","setEmployees","loading","setLoading","setError","search","setSearch","debouncedSearch","setDebouncedSearch","currentPage","setCurrentPage","pageSize","toast","useToast","editModalOpen","setEditModalOpen","editData","setEditData","saving","setSaving","handler","res","err","filteredEmployees","emp","_c","totalPages","paginatedEmployees","pageNumbers","_","idx","start","end","handlePageChange","page","Skeleton","Input","Button","Plus","employee","Edit","DialogHeader","DialogTitle","DialogDescription","formData","data","isEdit","nipForPath","apiPut","nipCreate","Label","DialogFooter","DialogClose","Settings","officeSettings","setOfficeSettings","kanwilSettings","setKanwilSettings","loadingOffice","setLoadingOffice","errorOffice","setErrorOffice","officeId","setOfficeId","fieldError","setFieldError","inputRefs","React","showOfficeModal","setShowOfficeModal","officeModalSuccess","setOfficeModalSuccess","officeModalMessage","setOfficeModalMessage","showKanwilModal","setShowKanwilModal","kanwilModalSuccess","setKanwilModalSuccess","kanwilModalMessage","setKanwilModalMessage","jobConfigs","setJobConfigs","jobConfigLoading","setJobConfigLoading","showJobConfigDialog","setShowJobConfigDialog","editingJobConfig","setEditingJobConfig","jobConfigSaving","setJobConfigSaving","jobConfigForm","setJobConfigForm","availableFileTypes","fetchAdminWilayahConfigs","fetchAvailableJobTypes","fetchJobConfigs","office","o","savedKanwilSettings","parsed","handleSaveOfficeSettings","handleExportData","handleImportData","adminWilayahConfigs","setAdminWilayahConfigs","adminWilayahConfigLoading","setAdminWilayahConfigLoading","showAdminWilayahConfigDialog","setShowAdminWilayahConfigDialog","editingAdminWilayahConfig","setEditingAdminWilayahConfig","adminWilayahConfigSaving","setAdminWilayahConfigSaving","showDeleteConfirmDialog","setShowDeleteConfirmDialog","configToDelete","setConfigToDelete","isDeleting","setIsDeleting","adminWilayahConfigForm","setAdminWilayahConfigForm","adminWilayahAvailableFileTypes","availableJobTypes","setAvailableJobTypes","variantOptions","handleAddJobConfig","handleEditJobConfig","config","handleSaveJobConfig","payload","handleDeleteJobConfig","configId","apiDelete","handleFileTypeToggle","fileTypeId","newRequiredFiles","id","handleSelectAll","allFileTypeIds","fileType","handleDeselectAll","handleAddAdminWilayahConfig","handleEditAdminWilayahConfig","selectedFilesMap","file","key","handleDeleteAdminWilayahConfig","confirmDeleteAdminWilayahConfig","deletePromises","cancelDeleteAdminWilayahConfig","handleEscape","event","handleAdminWilayahFileToggle","fileId","handleAdminWilayahVariantChange","value","handleSaveAdminWilayahConfig","selectedJob","j","autoName","autoDesc","selectedFileList","existingConfigs","c","transformedConfigs","groupedConfigs","acc","existingConfig","isAdmin","Tabs","TabsList","TabsTrigger","Building","FileText","FolderOpen","Users","SettingsIcon","TabsContent","Card","CardHeader","CardTitle","CardContent","Textarea","Save","Badge","Trash2","ft","Download","Upload","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogAction","Switch","checked","category","fileTypes","Checkbox","Select","SelectTrigger","SelectValue","SelectContent","option","SelectItem","f","jobType","open"],"mappings":"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"}