{"version":3,"file":"PengajuanFileUpload-BezV-Fsv.js","sources":["../../src/components/PengajuanFileUpload.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Upload, CheckCircle, X, FileText, Send, Loader2, AlertCircle, Eye, Download, Edit, Trash2 } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet, apiPost, apiPut } from '@/lib/api';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface PengajuanFile {\r\n  id: string;\r\n  file_type: string;\r\n  file_name: string;\r\n  file_size: number;\r\n  upload_status: string;\r\n  file_category?: string;\r\n  blobUrl?: string;\r\n}\r\n\r\ninterface PengajuanData {\r\n  id: string;\r\n  pegawai: {\r\n    nama: string;\r\n    jabatan: string;\r\n  };\r\n  jenis_jabatan: string;\r\n  jabatan_id?: number;\r\n  total_dokumen: number;\r\n  status: string;\r\n  files: PengajuanFile[];\r\n}\r\n\r\n// Normalize any text to a safe DOM id segment\r\nconst toSafeId = (raw: string): string => {\r\n  return String(raw)\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9_-]+/gi, '_')\r\n    .replace(/^_+|_+$/g, '');\r\n};\r\n\r\n// Helper function to map file types to display names\r\nconst getFileDisplayName = (fileType: string): string => {\r\n  const fileTypeMap: Record<string, string> = {\r\n    'surat_pengantar': 'Surat Pengantar',\r\n    'surat_permohonan_dari_yang_bersangkutan': 'Surat Permohonan Dari Yang Bersangkutan',\r\n    'surat_keputusan_cpns': 'Surat Keputusan CPNS',\r\n    'surat_keputusan_pns': 'Surat Keputusan PNS',\r\n    'surat_keputusan_kenaikan_pangkat_terakhir': 'Surat Keputusan Kenaikan Pangkat Terakhir',\r\n    'surat_keputusan_jabatan_terakhir': 'Surat Keputusan Jabatan Terakhir',\r\n    'skp_2_tahun_terakhir': 'SKP 2 Tahun Terakhir',\r\n    'surat_keterangan_bebas_temuan_inspektorat': 'Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama',\r\n    'surat_keterangan_anjab_abk_instansi_asal': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal',\r\n    'surat_keterangan_anjab_abk_instansi_penerima': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima',\r\n    'surat_pernyataan_tidak_hukuman_disiplin': 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK',\r\n    'surat_persetujuan_mutasi_asal': 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki',\r\n    'surat_lolos_butuh_ppk': 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju',\r\n    'peta_jabatan': 'Peta Jabatan',\r\n    'hasil_uji_kompetensi': 'Hasil Uji Kompetensi',\r\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)',\r\n    'anjab_abk_instansi_asal': 'Anjab/Abk Instansi Asal',\r\n    'anjab_abk_instansi_penerima': 'Anjab/Abk Instansi Penerima',\r\n    'surat_keterangan_tidak_tugas_belajar': 'Surat Keterangan Tidak Sedang Tugas Belajar',\r\n    'sptjm_pimpinan_satker_asal': 'SPTJM Pimpinan Satker dari Asal',\r\n    'sptjm_pimpinan_satker_penerima': 'SPTJM Pimpinan Satker dari Penerima',\r\n    'surat_rekomendasi_instansi_pembina': 'Surat Rekomendasi Instansi Pembina'\r\n  };\r\n  \r\n  return fileTypeMap[fileType] || fileType.replace(/_/g, ' ').toUpperCase();\r\n};\r\n\r\n// Helper function to get file category for grouping\r\nconst getFileCategory = (fileType: string): string => {\r\n  const categoryMap: Record<string, string> = {\r\n    'surat_pengantar': 'Dokumen Pengantar',\r\n    'surat_permohonan_dari_yang_bersangkutan': 'Dokumen Pengantar',\r\n    'surat_keputusan_cpns': 'Dokumen Kepegawaian',\r\n    'surat_keputusan_pns': 'Dokumen Kepegawaian',\r\n    'surat_keputusan_kenaikan_pangkat_terakhir': 'Dokumen Kepegawaian',\r\n    'surat_keputusan_jabatan_terakhir': 'Dokumen Kepegawaian',\r\n    'skp_2_tahun_terakhir': 'Dokumen Kepegawaian',\r\n    'surat_keterangan_bebas_temuan_inspektorat': 'Dokumen Keterangan',\r\n    'surat_keterangan_anjab_abk_instansi_asal': 'Dokumen Keterangan',\r\n    'surat_keterangan_anjab_abk_instansi_penerima': 'Dokumen Keterangan',\r\n    'surat_pernyataan_tidak_hukuman_disiplin': 'Dokumen Pernyataan',\r\n    'surat_persetujuan_mutasi_asal': 'Dokumen Persetujuan',\r\n    'surat_lolos_butuh_ppk': 'Dokumen Persetujuan',\r\n    'peta_jabatan': 'Dokumen Pendukung',\r\n    'hasil_uji_kompetensi': 'Dokumen Pendukung',\r\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Dokumen Pendukung',\r\n    'anjab_abk_instansi_asal': 'Dokumen Pendukung',\r\n    'anjab_abk_instansi_penerima': 'Dokumen Pendukung',\r\n    'surat_keterangan_tidak_tugas_belajar': 'Dokumen Keterangan',\r\n    'sptjm_pimpinan_satker_asal': 'Dokumen Pernyataan',\r\n    'sptjm_pimpinan_satker_penerima': 'Dokumen Pernyataan',\r\n    'surat_rekomendasi_instansi_pembina': 'Dokumen Rekomendasi'\r\n  };\r\n  \r\n  return categoryMap[fileType] || 'Dokumen Lainnya';\r\n};\r\n\r\n// Helper function untuk menampilkan nama jabatan\r\nconst getJabatanDisplayName = (jenisJabatan: string): string => {\r\n  const jabatanMap: Record<string, string> = {\r\n    'guru': 'Guru',\r\n    'eselon_iv': 'Eselon IV',\r\n    'fungsional': 'Fungsional',\r\n    'pelaksana': 'Pelaksana'\r\n  };\r\n  \r\n  return jabatanMap[jenisJabatan] || jenisJabatan;\r\n};\r\n\r\nconst PengajuanFileUpload: React.FC = () => {\r\n  const { pengajuanId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { token, user } = useAuth();\r\n  const { toast } = useToast();\r\n  const [pengajuan, setPengajuan] = useState<PengajuanData | null>(null);\r\n  const [requiredFiles, setRequiredFiles] = useState<string[]>([]);\r\n  const [uploadingStates, setUploadingStates] = useState<Record<string, boolean>>({});\r\n  const [uploadProgress, setUploadProgress] = useState<Record<string, number>>({});\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [showSubmitDialog, setShowSubmitDialog] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [previewFile, setPreviewFile] = useState<PengajuanFile | null>(null);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [replacingFile, setReplacingFile] = useState<string | null>(null);\r\n  \r\n  // Ref untuk file inputs\r\n  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({});\r\n\r\n  // Ambil data jabatan dari state navigation jika ada\r\n  const jabatanData = location.state?.jabatan;\r\n  const requiredFilesFromState = location.state?.requiredFiles;\r\n  \r\n  // State untuk menyimpan data job type configuration\r\n  const [jobTypeConfig, setJobTypeConfig] = useState<any>(null);\r\n  \r\n  // State untuk admin wilayah files (hanya untuk role kanwil)\r\n  const [adminWilayahFiles, setAdminWilayahFiles] = useState<any[]>([]);\r\n  const [adminWilayahRequiredFiles, setAdminWilayahRequiredFiles] = useState<any[]>([]);\r\n  const isKanwil = user?.role === 'kanwil';\r\n\r\n  useEffect(() => {\r\n    if (pengajuanId) {\r\n      fetchPengajuanData();\r\n    }\r\n  }, [pengajuanId]);\r\n\r\n  // Fetch admin wilayah config untuk kanwil (baik pengajuan baru maupun yang sudah ada)\r\n  useEffect(() => {\r\n    if (!isKanwil || !token) {\r\n      console.log('â­ï¸ Skipping admin wilayah config fetch:', { isKanwil, hasToken: !!token });\r\n      return;\r\n    }\r\n    \r\n    const fetchConfig = async () => {\r\n      console.log('ðŸ” Checking for jabatan data:', { jabatanData: jabatanData?.id, pengajuanJabatanId: pengajuan?.jabatan_id });\r\n      // Jika ada jabatanData dari state navigation (pengajuan baru)\r\n      if (jabatanData?.id) {\r\n        console.log('ðŸ“‹ Using jabatanData.id:', jabatanData.id);\r\n        await fetchAdminWilayahConfig(jabatanData.id);\r\n      }\r\n      // Jika ada pengajuan dengan jabatan_id (pengajuan yang sudah ada)\r\n      else if (pengajuan?.jabatan_id) {\r\n        console.log('ðŸ“‹ Using pengajuan.jabatan_id:', pengajuan.jabatan_id);\r\n        await fetchAdminWilayahConfig(pengajuan.jabatan_id);\r\n      } else {\r\n        console.log('âš ï¸ No jabatan_id found for admin wilayah config');\r\n      }\r\n    };\r\n    \r\n    fetchConfig();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isKanwil, jabatanData?.id, pengajuan?.jabatan_id, token]);\r\n\r\n  // Reset semua file input setiap kali komponen di-render\r\n  useEffect(() => {\r\n    const resetFileInputs = () => {\r\n      Object.values(fileInputRefs.current).forEach(input => {\r\n        if (input) {\r\n          input.value = '';\r\n        }\r\n      });\r\n    };\r\n    \r\n    // Reset setelah render\r\n    resetFileInputs();\r\n  });\r\n\r\n  const fetchPengajuanData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiGet(`/api/pengajuan/${pengajuanId}`, token);\r\n      if (response.success) {\r\n        setPengajuan(response.data.pengajuan);\r\n        \r\n        // Prioritas 1: Gunakan requiredFiles dari state navigation (jika ada)\r\n        if (requiredFilesFromState && requiredFilesFromState.length > 0) {\r\n          setRequiredFiles(requiredFilesFromState);\r\n          // Set job type config dari state navigation jika ada\r\n          if (jabatanData) {\r\n            setJobTypeConfig(jabatanData);\r\n          }\r\n        }\r\n        // Prioritas 2: Gunakan requiredFiles dari response API\r\n        else if (response.data.requiredFiles && response.data.requiredFiles.length > 0) {\r\n          setRequiredFiles(response.data.requiredFiles);\r\n        }\r\n        // Prioritas 3: Ambil dari job type configuration berdasarkan jabatan_id\r\n        else if (response.data.pengajuan.jabatan_id) {\r\n          try {\r\n            const jobTypeResponse = await apiGet(`/api/job-type-configurations/${response.data.pengajuan.jabatan_id}`, token);\r\n            if (jobTypeResponse.success && jobTypeResponse.data.required_files) {\r\n              // required_files sudah di-parse di backend\r\n              setRequiredFiles(jobTypeResponse.data.required_files);\r\n              setJobTypeConfig(jobTypeResponse.data);\r\n            } else {\r\n              // Jika tidak ada konfigurasi, tampilkan pesan error\r\n              setError('Konfigurasi dokumen untuk jabatan ini belum tersedia. Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan.');\r\n              setRequiredFiles([]);\r\n            }\r\n          } catch (jobTypeError) {\r\n            console.error('Error fetching job type configuration:', jobTypeError);\r\n            setError('Gagal mengambil konfigurasi dokumen. Silakan hubungi admin.');\r\n            setRequiredFiles([]);\r\n          }\r\n        } else {\r\n          // Jika tidak ada jabatan_id, tampilkan pesan error\r\n          setError('Jabatan belum dikonfigurasi. Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan.');\r\n          setRequiredFiles([]);\r\n        }\r\n        \r\n        // Jika role kanwil, fetch admin wilayah config juga\r\n        if (isKanwil && response.data.pengajuan.jabatan_id) {\r\n          await fetchAdminWilayahConfig(response.data.pengajuan.jabatan_id);\r\n        }\r\n      } else {\r\n        setError(response.message || 'Gagal mengambil data pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching pengajuan data:', error);\r\n      setError('Terjadi kesalahan saat mengambil data pengajuan');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch admin wilayah file configuration (hanya untuk role kanwil)\r\n  const fetchAdminWilayahConfig = async (jabatanId: number) => {\r\n    try {\r\n      console.log('ðŸ” Fetching admin wilayah config for jabatan_id:', jabatanId);\r\n      const response = await apiGet(`/api/admin-wilayah-file-config/job-type/${jabatanId}`, token);\r\n      console.log('ðŸ” Admin wilayah config response:', response);\r\n      if (response.success && Array.isArray(response.data)) {\r\n        console.log('âœ… Setting admin wilayah required files:', response.data);\r\n        setAdminWilayahRequiredFiles(response.data);\r\n      } else {\r\n        console.log('âš ï¸ Admin wilayah config not found or empty for jabatan_id:', jabatanId);\r\n        setAdminWilayahRequiredFiles([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Error fetching admin wilayah config:', error);\r\n      // Tidak set error karena ini opsional untuk kanwil\r\n      setAdminWilayahRequiredFiles([]);\r\n    }\r\n  };\r\n\r\n\r\n  const handleFileUpload = async (fileType: string, file: File) => {\r\n    // Validasi: Pastikan file yang diupload sesuai dengan jabatan pengajuan\r\n    if (!pengajuan) {\r\n      const errorMessage = 'Data pengajuan tidak ditemukan. Silakan refresh halaman.';\r\n      setError(errorMessage);\r\n      toast({\r\n        title: 'Error',\r\n        description: errorMessage,\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Cek apakah fileType ada di requiredFiles untuk jabatan pengajuan saat ini\r\n    const isAdminWilayahFile = adminWilayahRequiredFiles.some(f => f.file_type === fileType);\r\n    const isKabupatenFile = requiredFiles.includes(fileType);\r\n    \r\n    if (!isKabupatenFile && !isAdminWilayahFile) {\r\n      const currentJabatan = pengajuan.jenis_jabatan || 'tidak diketahui';\r\n      const errorMessage = `File \"${getFileDisplayName(fileType)}\" tidak sesuai dengan jabatan pengajuan saat ini.\\n\\n` +\r\n        `â€¢ Jabatan pengajuan: ${getJabatanDisplayName(currentJabatan)}\\n` +\r\n        `â€¢ File yang diupload: ${getFileDisplayName(fileType)}\\n\\n` +\r\n        `Silakan pastikan Anda mengupload file yang sesuai dengan jabatan pengajuan.`;\r\n      \r\n      setError(errorMessage);\r\n      toast({\r\n        title: 'Jabatan Tidak Sesuai',\r\n        description: `File \"${getFileDisplayName(fileType)}\" tidak sesuai dengan jabatan pengajuan \"${getJabatanDisplayName(currentJabatan)}\". Silakan upload file yang sesuai dengan jabatan pengajuan.`,\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Validasi tipe file\r\n    if (file.type !== 'application/pdf' && !file.name.toLowerCase().endsWith('.pdf')) {\r\n      const errorMessage = 'Hanya file PDF yang diizinkan untuk diupload.';\r\n      setError(errorMessage);\r\n      toast({\r\n        title: 'Format File Tidak Valid',\r\n        description: errorMessage,\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Validasi ukuran file: default 500KB, khusus SKP 2 Tahun Terakhir 1.7MB\r\n    const maxSize = fileType === 'skp_2_tahun_terakhir' ? Math.floor(1.7 * 1024 * 1024) : 500 * 1024;\r\n    if (file.size > maxSize) {\r\n      const humanMax = fileType === 'skp_2_tahun_terakhir' ? '1.7MB' : '500KB';\r\n      const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);\r\n      const errorMessage = `File terlalu besar. Maksimal ${humanMax}. Ukuran file saat ini: ${fileSizeMB}MB`;\r\n      setError(errorMessage);\r\n      toast({\r\n        title: 'Ukuran File Terlalu Besar',\r\n        description: errorMessage,\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    setUploadingStates(prev => ({ ...prev, [fileType]: true }));\r\n    setUploadProgress(prev => ({ ...prev, [fileType]: 0 }));\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('file_type', fileType);\r\n    \r\n    // Tentukan file_category: jika fileType ada di adminWilayahRequiredFiles, maka 'admin_wilayah', jika tidak 'kabupaten'\r\n    formData.append('file_category', isAdminWilayahFile ? 'admin_wilayah' : 'kabupaten');\r\n\r\n    try {\r\n      // Simulate upload progress\r\n      const progressInterval = setInterval(() => {\r\n        setUploadProgress(prev => ({\r\n          ...prev,\r\n          [fileType]: Math.min(prev[fileType] + 10, 90)\r\n        }));\r\n      }, 200);\r\n\r\n      const response = await fetch(`/api/pengajuan/${pengajuanId}/upload`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      clearInterval(progressInterval);\r\n      setUploadProgress(prev => ({ ...prev, [fileType]: 100 }));\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        if (result.success) {\r\n          // Refresh data setelah upload berhasil\r\n          await fetchPengajuanData();\r\n          setError(null);\r\n          \r\n          // Tampilkan toast success\r\n          toast({\r\n            title: 'Upload Berhasil',\r\n            description: `File ${getFileDisplayName(fileType)} berhasil diupload`,\r\n            variant: 'default',\r\n          });\r\n          \r\n          // Reset file input setelah upload berhasil menggunakan ref\r\n          const fileInput = fileInputRefs.current[fileType];\r\n          if (fileInput) {\r\n            fileInput.value = '';\r\n          }\r\n        } else {\r\n          const errorMessage = result.message || 'Gagal upload file';\r\n          setError(errorMessage);\r\n          toast({\r\n            title: 'Upload Gagal',\r\n            description: errorMessage,\r\n            variant: 'destructive',\r\n          });\r\n        }\r\n      } else {\r\n        // Parse error response dari backend\r\n        let errorMessage = 'Gagal upload file';\r\n        try {\r\n          const errorData = await response.json();\r\n          errorMessage = errorData.message || errorData.error || `Error ${response.status}: ${response.statusText}`;\r\n        } catch (parseError) {\r\n          // Jika response bukan JSON, gunakan status text\r\n          if (response.status === 413) {\r\n            errorMessage = 'File terlalu besar. Untuk SKP 2 Tahun Terakhir maksimal 1.7MB, file lain maksimal 500KB.';\r\n          } else if (response.status === 400) {\r\n            errorMessage = 'Format file tidak valid atau file terlalu besar.';\r\n          } else {\r\n            errorMessage = `Error ${response.status}: ${response.statusText}`;\r\n          }\r\n        }\r\n        \r\n        setError(errorMessage);\r\n        toast({\r\n          title: 'Upload Gagal',\r\n          description: errorMessage,\r\n          variant: 'destructive',\r\n        });\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error uploading file:', error);\r\n      const errorMessage = error?.message || 'Terjadi kesalahan saat upload file. Silakan coba lagi.';\r\n      setError(errorMessage);\r\n      toast({\r\n        title: 'Upload Gagal',\r\n        description: errorMessage,\r\n        variant: 'destructive',\r\n      });\r\n    } finally {\r\n      setUploadingStates(prev => ({ ...prev, [fileType]: false }));\r\n      setReplacingFile(null);\r\n      // Reset file input di finally untuk memastikan selalu ter-reset menggunakan ref\r\n      const fileInput = fileInputRefs.current[fileType];\r\n      if (fileInput) {\r\n        fileInput.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmitPengajuan = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      \r\n      // Jika role kanwil, gunakan endpoint submit-kanwil\r\n      const endpoint = isKanwil \r\n        ? `/api/pengajuan/${pengajuanId}/submit-kanwil`\r\n        : `/api/pengajuan/${pengajuanId}/submit`;\r\n      const method = isKanwil ? apiPost : apiPut;\r\n      \r\n      const response = await method(endpoint, { catatan: '' }, token);\r\n      if (response.success) {\r\n        setShowSuccessModal(true);\r\n      } else {\r\n        setError(response.message || 'Gagal submit pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat submit pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n      setShowSubmitDialog(false);\r\n    }\r\n  };\r\n\r\n  const handlePreviewFile = async (file: PengajuanFile) => {\r\n    try {\r\n      // Fetch file dengan token authorization\r\n      const response = await fetch(`/api/pengajuan/files/${file.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Gagal mengambil file');\r\n      }\r\n      \r\n      // Convert ke blob\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      \r\n      // Set preview file dengan blob URL\r\n      setPreviewFile({\r\n        ...file,\r\n        blobUrl: blobUrl\r\n      });\r\n      setShowPreview(true);\r\n    } catch (error) {\r\n      console.error('Error previewing file:', error);\r\n      setError('Gagal preview file. Silakan coba lagi.');\r\n    }\r\n  };\r\n\r\n  const handleDownloadFile = (file: PengajuanFile) => {\r\n    window.open(`/api/pengajuan/files/${file.id}`, '_blank');\r\n  };\r\n\r\n  const handleReplaceFile = (fileType: string) => {\r\n    setReplacingFile(fileType);\r\n  };\r\n\r\n  const isAllFilesUploaded = () => {\r\n    const kabupatenFilesUploaded = requiredFiles.every(fileType => {\r\n      return pengajuan?.files.some(f => f.file_type === fileType && (!f.file_category || f.file_category === 'kabupaten'));\r\n    });\r\n    \r\n    // Jika role kanwil, cek juga admin wilayah files\r\n    if (isKanwil && adminWilayahRequiredFiles.length > 0) {\r\n      const adminWilayahFilesUploaded = adminWilayahRequiredFiles.every((config: any) => {\r\n        return pengajuan?.files.some(f => f.file_type === config.file_type && f.file_category === 'admin_wilayah');\r\n      });\r\n      return kabupatenFilesUploaded && adminWilayahFilesUploaded;\r\n    }\r\n    \r\n    return kabupatenFilesUploaded;\r\n  };\r\n\r\n  const getFileStatus = (fileType: string, fileCategory?: string) => {\r\n    if (fileCategory) {\r\n      return pengajuan?.files.some(f => f.file_type === fileType && f.file_category === fileCategory) ? 'uploaded' : 'pending';\r\n    }\r\n    return pengajuan?.files.some(f => f.file_type === fileType && (!f.file_category || f.file_category === 'kabupaten')) ? 'uploaded' : 'pending';\r\n  };\r\n\r\n  const getFileSize = (bytes: number) => {\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  // Group files by category\r\n  const groupedFiles = requiredFiles.reduce((acc, fileType) => {\r\n    const category = getFileCategory(fileType);\r\n    if (!acc[category]) {\r\n      acc[category] = [];\r\n    }\r\n    acc[category].push(fileType);\r\n    return acc;\r\n  }, {} as Record<string, string[]>);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <Card>\r\n          <CardContent className=\"flex items-center justify-center py-12\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-green-600\" />\r\n            <span className=\"ml-2\">Memuat data pengajuan...</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!pengajuan) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <Card>\r\n          <CardContent className=\"flex items-center justify-center py-12\">\r\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\r\n            <span className=\"ml-2 text-red-600\">Pengajuan tidak ditemukan</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Upload Berkas Pengajuan Mutasi PNS</CardTitle>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {pengajuan.pegawai.nama} - {pengajuan.pegawai.jabatan}\r\n          </div>\r\n          <div className=\"text-sm text-gray-500\">\r\n            Jenis Jabatan: {getJabatanDisplayName(pengajuan.jenis_jabatan)}\r\n          </div>\r\n          <div className=\"text-sm text-gray-500\">\r\n            Total Dokumen: {jobTypeConfig ? jobTypeConfig.max_dokumen : requiredFiles.length} surat\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* File Upload Sections - Use Tabs for Kanwil, regular layout for others */}\r\n          {requiredFiles.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-gray-500 mb-2\">Tidak ada dokumen yang diperlukan</p>\r\n              <p className=\"text-sm text-gray-400\">Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan</p>\r\n            </div>\r\n          ) : isKanwil && adminWilayahRequiredFiles.length > 0 ? (\r\n            // Tab layout untuk kanwil (jika ada admin wilayah files)\r\n            <Tabs defaultValue=\"kabupaten\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2 mb-6\">\r\n                <TabsTrigger value=\"kabupaten\" className=\"flex items-center gap-2\">\r\n                  <FileText className=\"h-4 w-4\" />\r\n                  Dokumen Kabupaten/Kota\r\n                  <Badge variant=\"secondary\" className=\"ml-2\">\r\n                    {requiredFiles.length}\r\n                  </Badge>\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"admin_wilayah\" className=\"flex items-center gap-2\">\r\n                  <FileText className=\"h-4 w-4\" />\r\n                  Dokumen Admin Wilayah\r\n                  <Badge variant=\"secondary\" className=\"ml-2 bg-purple-100 text-purple-800\">\r\n                    {adminWilayahRequiredFiles.length}\r\n                  </Badge>\r\n                </TabsTrigger>\r\n              </TabsList>\r\n              \r\n              {/* Tab Content: Dokumen Kabupaten/Kota */}\r\n              <TabsContent value=\"kabupaten\" className=\"space-y-6\">\r\n                {Object.entries(groupedFiles).map(([category, fileTypes]) => (\r\n                  <div key={category} className=\"mb-8\">\r\n                    <h3 className=\"text-lg font-semibold mb-4 text-gray-800 border-b pb-2\">\r\n                      {category}\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      {fileTypes.map((fileType) => {\r\n                  const status = getFileStatus(fileType);\r\n                  const isUploading = uploadingStates[fileType];\r\n                  const progress = uploadProgress[fileType];\r\n                  const uploadedFile = pengajuan.files.find(f => f.file_type === fileType);\r\n                  const isReplacing = replacingFile === fileType;\r\n\r\n                  return (\r\n                    <div key={fileType} className=\"border rounded-lg p-4\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"font-medium text-sm leading-tight\">{getFileDisplayName(fileType)}</h4>\r\n                          <p className=\"text-xs text-gray-600 mt-1\">\r\n                            Upload file PDF (maks. {fileType === 'skp_2_tahun_terakhir' ? '1.7MB' : '500KB'})\r\n                          </p>\r\n                        </div>\r\n                        <Badge \r\n                          variant={status === 'uploaded' ? 'secondary' : 'secondary'}\r\n                          className={status === 'uploaded' ? 'bg-green-600 text-white hover:bg-green-700' : ''}\r\n                        >\r\n                          {status === 'uploaded' ? (\r\n                            <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                          ) : (\r\n                            <FileText className=\"h-3 w-3 mr-1\" />\r\n                          )}\r\n                          {status === 'uploaded' ? 'Uploaded' : 'Pending'}\r\n                        </Badge>\r\n                      </div>\r\n\r\n                      {status === 'uploaded' && uploadedFile && !isReplacing ? (\r\n                        <div className=\"space-y-3\">\r\n                          <div className=\"text-sm text-green-600\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <CheckCircle className=\"h-4 w-4\" />\r\n                              <span className=\"truncate\">{uploadedFile.file_name}</span>\r\n                              <span className=\"text-gray-500 text-xs\">({getFileSize(uploadedFile.file_size)})</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-2 flex-wrap\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handlePreviewFile(uploadedFile)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Eye className=\"h-3 w-3\" />\r\n                              Preview\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDownloadFile(uploadedFile)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Download className=\"h-3 w-3\" />\r\n                              Download\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleReplaceFile(fileType)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Edit className=\"h-3 w-3\" />\r\n                              Ganti File\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div>\r\n                          <input\r\n                            ref={(el) => fileInputRefs.current[fileType] = el}\r\n                            type=\"file\"\r\n                            accept=\".pdf\"\r\n                            onChange={(e) => {\r\n                              const file = e.target.files?.[0];\r\n                              if (file) {\r\n                                handleFileUpload(fileType, file);\r\n                                // Reset file input setelah file dipilih\r\n                                e.target.value = '';\r\n                              }\r\n                            }}\r\n                            disabled={isUploading}\r\n                            className=\"hidden\"\r\n                            id={`file-${toSafeId(fileType)}`}\r\n                          />\r\n                          <label\r\n                            htmlFor={`file-${toSafeId(fileType)}`}\r\n                            className=\"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50\"\r\n                          >\r\n                            <Upload className=\"h-4 w-4 mr-2\" />\r\n                            {isUploading ? 'Uploading...' : isReplacing ? 'Pilih File Baru' : 'Pilih File'}\r\n                          </label>\r\n                          {isReplacing && (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"ghost\"\r\n                              onClick={() => setReplacingFile(null)}\r\n                              className=\"ml-2 text-gray-500\"\r\n                            >\r\n                              <X className=\"h-3 w-3 mr-1\" />\r\n                              Batal\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {isUploading && (\r\n                        <div className=\"mt-2\">\r\n                          <Progress value={progress} className=\"h-2\" />\r\n                          <p className=\"text-xs text-gray-500 mt-1\">{progress}% uploaded</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n                ))}\r\n              </TabsContent>\r\n              \r\n              {/* Tab Content: Dokumen Admin Wilayah */}\r\n              <TabsContent value=\"admin_wilayah\" className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  {adminWilayahRequiredFiles.map((config: any) => {\r\n                    const fileType = config.file_type;\r\n                  const status = getFileStatus(fileType, 'admin_wilayah');\r\n                  const isUploading = uploadingStates[fileType];\r\n                  const progress = uploadProgress[fileType];\r\n                  const uploadedFile = pengajuan.files.find(f => f.file_type === fileType && f.file_category === 'admin_wilayah');\r\n                  const isReplacing = replacingFile === fileType;\r\n\r\n                  return (\r\n                    <div key={fileType} className=\"border rounded-lg p-4 border-purple-300\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"font-medium text-sm leading-tight\">{config.display_name || fileType}</h4>\r\n                          {config.description && (\r\n                            <p className=\"text-xs text-gray-600 mt-1\">{config.description}</p>\r\n                          )}\r\n                          <p className=\"text-xs text-gray-600 mt-1\">\r\n                            Upload file PDF (maks. 500KB)\r\n                          </p>\r\n                        </div>\r\n                        <Badge \r\n                          variant={status === 'uploaded' ? 'secondary' : 'secondary'}\r\n                          className={status === 'uploaded' ? 'bg-purple-600 text-white hover:bg-purple-700' : 'bg-purple-100 text-purple-800'}\r\n                        >\r\n                          {status === 'uploaded' ? (\r\n                            <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                          ) : (\r\n                            <FileText className=\"h-3 w-3 mr-1\" />\r\n                          )}\r\n                          {status === 'uploaded' ? 'Uploaded' : 'Pending'}\r\n                        </Badge>\r\n                      </div>\r\n\r\n                      {status === 'uploaded' && uploadedFile && !isReplacing ? (\r\n                        <div className=\"space-y-3\">\r\n                          <div className=\"text-sm text-purple-600\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <CheckCircle className=\"h-4 w-4\" />\r\n                              <span className=\"truncate\">{uploadedFile.file_name}</span>\r\n                              <span className=\"text-gray-500 text-xs\">({getFileSize(uploadedFile.file_size)})</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-2 flex-wrap\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handlePreviewFile(uploadedFile)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Eye className=\"h-3 w-3\" />\r\n                              Preview\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDownloadFile(uploadedFile)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Download className=\"h-3 w-3\" />\r\n                              Download\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleReplaceFile(fileType)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Edit className=\"h-3 w-3\" />\r\n                              Ganti File\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div>\r\n                          <input\r\n                            ref={(el) => fileInputRefs.current[fileType] = el}\r\n                            type=\"file\"\r\n                            accept=\".pdf\"\r\n                            onChange={(e) => {\r\n                              const file = e.target.files?.[0];\r\n                              if (file) {\r\n                                handleFileUpload(fileType, file);\r\n                                e.target.value = '';\r\n                              }\r\n                            }}\r\n                            disabled={isUploading}\r\n                            className=\"hidden\"\r\n                            id={`file-aw-${toSafeId(fileType)}`}\r\n                          />\r\n                          <label\r\n                            htmlFor={`file-aw-${toSafeId(fileType)}`}\r\n                            className=\"cursor-pointer inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-white hover:bg-purple-50 disabled:opacity-50\"\r\n                          >\r\n                            <Upload className=\"h-4 w-4 mr-2\" />\r\n                            {isUploading ? 'Uploading...' : isReplacing ? 'Pilih File Baru' : 'Pilih File'}\r\n                          </label>\r\n                          {isReplacing && (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"ghost\"\r\n                              onClick={() => setReplacingFile(null)}\r\n                              className=\"ml-2 text-gray-500\"\r\n                            >\r\n                              <X className=\"h-3 w-3 mr-1\" />\r\n                              Batal\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {isUploading && (\r\n                        <div className=\"mt-2\">\r\n                          <Progress value={progress} className=\"h-2\" />\r\n                          <p className=\"text-xs text-gray-500 mt-1\">{progress}% uploaded</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                  })}\r\n                </div>\r\n              </TabsContent>\r\n            </Tabs>\r\n          ) : (\r\n            // Regular layout untuk role non-kanwil atau kanwil tanpa admin wilayah files\r\n            Object.entries(groupedFiles).map(([category, fileTypes]) => (\r\n              <div key={category} className=\"mb-8\">\r\n                <h3 className=\"text-lg font-semibold mb-4 text-gray-800 border-b pb-2\">\r\n                  {category}\r\n                </h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  {fileTypes.map((fileType) => {\r\n                    const status = getFileStatus(fileType);\r\n                    const isUploading = uploadingStates[fileType];\r\n                    const progress = uploadProgress[fileType];\r\n                    const uploadedFile = pengajuan.files.find(f => f.file_type === fileType);\r\n                    const isReplacing = replacingFile === fileType;\r\n\r\n                    return (\r\n                      <div key={fileType} className=\"border rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"font-medium text-sm leading-tight\">{getFileDisplayName(fileType)}</h4>\r\n                            <p className=\"text-xs text-gray-600 mt-1\">\r\n                              Upload file PDF (maks. {fileType === 'skp_2_tahun_terakhir' ? '1.7MB' : '500KB'})\r\n                            </p>\r\n                          </div>\r\n                          <Badge \r\n                            variant={status === 'uploaded' ? 'secondary' : 'secondary'}\r\n                            className={status === 'uploaded' ? 'bg-green-600 text-white hover:bg-green-700' : ''}\r\n                          >\r\n                            {status === 'uploaded' ? (\r\n                              <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                            ) : (\r\n                              <FileText className=\"h-3 w-3 mr-1\" />\r\n                            )}\r\n                            {status === 'uploaded' ? 'Uploaded' : 'Pending'}\r\n                          </Badge>\r\n                        </div>\r\n\r\n                        {status === 'uploaded' && uploadedFile && !isReplacing ? (\r\n                          <div className=\"space-y-3\">\r\n                            <div className=\"text-sm text-green-600\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <CheckCircle className=\"h-4 w-4\" />\r\n                                <span className=\"truncate\">{uploadedFile.file_name}</span>\r\n                                <span className=\"text-gray-500 text-xs\">({getFileSize(uploadedFile.file_size)})</span>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2 flex-wrap\">\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handlePreviewFile(uploadedFile)}\r\n                                className=\"flex items-center gap-1\"\r\n                              >\r\n                                <Eye className=\"h-3 w-3\" />\r\n                                Preview\r\n                              </Button>\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handleDownloadFile(uploadedFile)}\r\n                                className=\"flex items-center gap-1\"\r\n                              >\r\n                                <Download className=\"h-3 w-3\" />\r\n                                Download\r\n                              </Button>\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handleReplaceFile(fileType)}\r\n                                className=\"flex items-center gap-1\"\r\n                              >\r\n                                <Edit className=\"h-3 w-3\" />\r\n                                Ganti File\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <div>\r\n                            <input\r\n                              ref={(el) => fileInputRefs.current[fileType] = el}\r\n                              type=\"file\"\r\n                              accept=\".pdf\"\r\n                              onChange={(e) => {\r\n                                const file = e.target.files?.[0];\r\n                                if (file) {\r\n                                  handleFileUpload(fileType, file);\r\n                                  e.target.value = '';\r\n                                }\r\n                              }}\r\n                              disabled={isUploading}\r\n                              className=\"hidden\"\r\n                              id={`file-${toSafeId(fileType)}`}\r\n                            />\r\n                            <label\r\n                              htmlFor={`file-${toSafeId(fileType)}`}\r\n                              className=\"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50\"\r\n                            >\r\n                              <Upload className=\"h-4 w-4 mr-2\" />\r\n                              {isUploading ? 'Uploading...' : isReplacing ? 'Pilih File Baru' : 'Pilih File'}\r\n                            </label>\r\n                            {isReplacing && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => setReplacingFile(null)}\r\n                                className=\"ml-2 text-gray-500\"\r\n                              >\r\n                                <X className=\"h-3 w-3 mr-1\" />\r\n                                Batal\r\n                              </Button>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n\r\n                        {isUploading && (\r\n                          <div className=\"mt-2\">\r\n                            <Progress value={progress} className=\"h-2\" />\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{progress}% uploaded</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n\r\n          {requiredFiles.length > 0 && (\r\n            <div className=\"mt-8 pt-6 border-t\">\r\n              <Button\r\n                onClick={() => setShowSubmitDialog(true)}\r\n                disabled={!isAllFilesUploaded() || submitting}\r\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\r\n                size=\"lg\"\r\n              >\r\n                <Send className=\"h-4 w-4 mr-2\" />\r\n                Submit Pengajuan\r\n              </Button>\r\n              {!isAllFilesUploaded() && (\r\n                <p className=\"text-sm text-gray-500 mt-2 text-center\">\r\n                  Semua berkas harus diupload sebelum dapat submit\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Submit Confirmation Dialog */}\r\n      <AlertDialog open={showSubmitDialog} onOpenChange={setShowSubmitDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Submit Pengajuan</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Apakah Anda yakin ingin submit pengajuan ini? Setelah disubmit, pengajuan tidak dapat diedit lagi dan akan diproses oleh admin.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={submitting}>Batal</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleSubmitPengajuan}\r\n              disabled={submitting}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              {submitting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin text-green-600\" />\r\n                  Submitting...\r\n                </>\r\n              ) : (\r\n                'Submit Pengajuan'\r\n              )}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Success Modal */}\r\n      <Dialog open={showSuccessModal} onOpenChange={setShowSuccessModal}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Pengajuan Berhasil!</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"text-center py-6\">\r\n            <CheckCircle className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\r\n            <p className=\"text-lg font-medium mb-2\">\r\n              Pengajuan untuk {pengajuan.pegawai.nama} berhasil disubmit\r\n            </p>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              {isKanwil \r\n                ? 'Pengajuan akan diproses oleh superadmin. Anda akan mendapat notifikasi ketika status berubah.'\r\n                : 'Pengajuan akan diproses oleh admin. Anda akan mendapat notifikasi ketika status berubah.'}\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                onClick={() => navigate('/dashboard')}\r\n                className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\r\n              >\r\n                Kembali ke Dashboard\r\n              </Button>\r\n              <Button\r\n                onClick={() => navigate('/pengajuan/select')}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                Buat Pengajuan Baru\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Preview Modal */}\r\n      <Dialog open={showPreview} onOpenChange={(open) => {\r\n        setShowPreview(open);\r\n        // Cleanup blob URL when modal closes\r\n        if (!open && previewFile?.blobUrl) {\r\n          URL.revokeObjectURL(previewFile.blobUrl);\r\n        }\r\n      }}>\r\n        <DialogContent className=\"max-w-4xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center justify-between\">\r\n              <span>Preview File: {previewFile?.file_name}</span>\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"mt-4\">\r\n            {previewFile && (\r\n              <div className=\"border rounded-lg overflow-hidden bg-white\">\r\n                <div className=\"bg-green-600 text-white px-4 py-2 flex items-center justify-between\">\r\n                  <span className=\"font-medium\">{previewFile.file_name}</span>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => setShowPreview(false)}\r\n                    className=\"text-white hover:bg-green-700\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n                <iframe\r\n                  src={previewFile.blobUrl || `/api/pengajuan/files/${previewFile.id}`}\r\n                  className=\"w-full h-96 border-0\"\r\n                  title=\"File Preview\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PengajuanFileUpload; "],"names":["toSafeId","raw","getFileDisplayName","fileType","getFileCategory","getJabatanDisplayName","jenisJabatan","PengajuanFileUpload","pengajuanId","useParams","navigate","useNavigate","location","useLocation","token","user","useAuth","toast","useToast","pengajuan","setPengajuan","useState","requiredFiles","setRequiredFiles","uploadingStates","setUploadingStates","uploadProgress","setUploadProgress","showSuccessModal","setShowSuccessModal","showSubmitDialog","setShowSubmitDialog","loading","setLoading","error","setError","submitting","setSubmitting","previewFile","setPreviewFile","showPreview","setShowPreview","replacingFile","setReplacingFile","fileInputRefs","useRef","jabatanData","_a","requiredFilesFromState","_b","jobTypeConfig","setJobTypeConfig","adminWilayahRequiredFiles","setAdminWilayahRequiredFiles","isKanwil","useEffect","fetchPengajuanData","fetchAdminWilayahConfig","input","response","apiGet","jobTypeResponse","jobTypeError","jabatanId","handleFileUpload","file","errorMessage","isAdminWilayahFile","f","currentJabatan","maxSize","humanMax","fileSizeMB","prev","formData","progressInterval","result","fileInput","errorData","handleSubmitPengajuan","endpoint","apiPost","apiPut","handlePreviewFile","blob","blobUrl","handleDownloadFile","handleReplaceFile","isAllFilesUploaded","kabupatenFilesUploaded","adminWilayahFilesUploaded","config","getFileStatus","fileCategory","getFileSize","bytes","sizes","i","groupedFiles","acc","category","jsx","Card","jsxs","CardContent","Loader2","CardHeader","CardTitle","FileText","Tabs","TabsList","TabsTrigger","Badge","TabsContent","fileTypes","status","isUploading","progress","uploadedFile","isReplacing","CheckCircle","Button","Eye","Download","Edit","el","e","Upload","X","Progress","Send","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Fragment","Dialog","DialogContent","DialogHeader","DialogTitle","open","AlertCircle"],"mappings":"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"}