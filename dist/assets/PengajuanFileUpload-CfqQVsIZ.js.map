{"version":3,"file":"PengajuanFileUpload-CfqQVsIZ.js","sources":["../../src/components/PengajuanFileUpload.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Upload, CheckCircle, X, FileText, Send, Loader2, AlertCircle, Eye, Download, Edit, Trash2 } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet, apiPost, apiPut } from '@/lib/api';\r\n\r\ninterface PengajuanFile {\r\n  id: string;\r\n  file_type: string;\r\n  file_name: string;\r\n  file_size: number;\r\n  upload_status: string;\r\n  blobUrl?: string;\r\n}\r\n\r\ninterface PengajuanData {\r\n  id: string;\r\n  pegawai: {\r\n    nama: string;\r\n    jabatan: string;\r\n  };\r\n  jenis_jabatan: string;\r\n  jabatan_id?: number;\r\n  total_dokumen: number;\r\n  status: string;\r\n  files: PengajuanFile[];\r\n}\r\n\r\n// Normalize any text to a safe DOM id segment\r\nconst toSafeId = (raw: string): string => {\r\n  return String(raw)\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9_-]+/gi, '_')\r\n    .replace(/^_+|_+$/g, '');\r\n};\r\n\r\n// Helper function to map file types to display names\r\nconst getFileDisplayName = (fileType: string): string => {\r\n  const fileTypeMap: Record<string, string> = {\r\n    'surat_pengantar': 'Surat Pengantar',\r\n    'surat_permohonan_dari_yang_bersangkutan': 'Surat Permohonan Dari Yang Bersangkutan',\r\n    'surat_keputusan_cpns': 'Surat Keputusan CPNS',\r\n    'surat_keputusan_pns': 'Surat Keputusan PNS',\r\n    'surat_keputusan_kenaikan_pangkat_terakhir': 'Surat Keputusan Kenaikan Pangkat Terakhir',\r\n    'surat_keputusan_jabatan_terakhir': 'Surat Keputusan Jabatan Terakhir',\r\n    'skp_2_tahun_terakhir': 'SKP 2 Tahun Terakhir',\r\n    'surat_keterangan_bebas_temuan_inspektorat': 'Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama',\r\n    'surat_keterangan_anjab_abk_instansi_asal': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal',\r\n    'surat_keterangan_anjab_abk_instansi_penerima': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima',\r\n    'surat_pernyataan_tidak_hukuman_disiplin': 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK',\r\n    'surat_persetujuan_mutasi_asal': 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki',\r\n    'surat_lolos_butuh_ppk': 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju',\r\n    'peta_jabatan': 'Peta Jabatan',\r\n    'hasil_uji_kompetensi': 'Hasil Uji Kompetensi',\r\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)',\r\n    'anjab_abk_instansi_asal': 'Anjab/Abk Instansi Asal',\r\n    'anjab_abk_instansi_penerima': 'Anjab/Abk Instansi Penerima',\r\n    'surat_keterangan_tidak_tugas_belajar': 'Surat Keterangan Tidak Sedang Tugas Belajar',\r\n    'sptjm_pimpinan_satker_asal': 'SPTJM Pimpinan Satker dari Asal',\r\n    'sptjm_pimpinan_satker_penerima': 'SPTJM Pimpinan Satker dari Penerima',\r\n    'surat_rekomendasi_instansi_pembina': 'Surat Rekomendasi Instansi Pembina'\r\n  };\r\n  \r\n  return fileTypeMap[fileType] || fileType.replace(/_/g, ' ').toUpperCase();\r\n};\r\n\r\n// Helper function to get file category for grouping\r\nconst getFileCategory = (fileType: string): string => {\r\n  const categoryMap: Record<string, string> = {\r\n    'surat_pengantar': 'Dokumen Pengantar',\r\n    'surat_permohonan_dari_yang_bersangkutan': 'Dokumen Pengantar',\r\n    'surat_keputusan_cpns': 'Dokumen Kepegawaian',\r\n    'surat_keputusan_pns': 'Dokumen Kepegawaian',\r\n    'surat_keputusan_kenaikan_pangkat_terakhir': 'Dokumen Kepegawaian',\r\n    'surat_keputusan_jabatan_terakhir': 'Dokumen Kepegawaian',\r\n    'skp_2_tahun_terakhir': 'Dokumen Kepegawaian',\r\n    'surat_keterangan_bebas_temuan_inspektorat': 'Dokumen Keterangan',\r\n    'surat_keterangan_anjab_abk_instansi_asal': 'Dokumen Keterangan',\r\n    'surat_keterangan_anjab_abk_instansi_penerima': 'Dokumen Keterangan',\r\n    'surat_pernyataan_tidak_hukuman_disiplin': 'Dokumen Pernyataan',\r\n    'surat_persetujuan_mutasi_asal': 'Dokumen Persetujuan',\r\n    'surat_lolos_butuh_ppk': 'Dokumen Persetujuan',\r\n    'peta_jabatan': 'Dokumen Pendukung',\r\n    'hasil_uji_kompetensi': 'Dokumen Pendukung',\r\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Dokumen Pendukung',\r\n    'anjab_abk_instansi_asal': 'Dokumen Pendukung',\r\n    'anjab_abk_instansi_penerima': 'Dokumen Pendukung',\r\n    'surat_keterangan_tidak_tugas_belajar': 'Dokumen Keterangan',\r\n    'sptjm_pimpinan_satker_asal': 'Dokumen Pernyataan',\r\n    'sptjm_pimpinan_satker_penerima': 'Dokumen Pernyataan',\r\n    'surat_rekomendasi_instansi_pembina': 'Dokumen Rekomendasi'\r\n  };\r\n  \r\n  return categoryMap[fileType] || 'Dokumen Lainnya';\r\n};\r\n\r\n// Helper function untuk menampilkan nama jabatan\r\nconst getJabatanDisplayName = (jenisJabatan: string): string => {\r\n  const jabatanMap: Record<string, string> = {\r\n    'guru': 'Guru',\r\n    'eselon_iv': 'Eselon IV',\r\n    'fungsional': 'Fungsional',\r\n    'pelaksana': 'Pelaksana'\r\n  };\r\n  \r\n  return jabatanMap[jenisJabatan] || jenisJabatan;\r\n};\r\n\r\nconst PengajuanFileUpload: React.FC = () => {\r\n  const { pengajuanId } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { token } = useAuth();\r\n  const [pengajuan, setPengajuan] = useState<PengajuanData | null>(null);\r\n  const [requiredFiles, setRequiredFiles] = useState<string[]>([]);\r\n  const [uploadingStates, setUploadingStates] = useState<Record<string, boolean>>({});\r\n  const [uploadProgress, setUploadProgress] = useState<Record<string, number>>({});\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [showSubmitDialog, setShowSubmitDialog] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [previewFile, setPreviewFile] = useState<PengajuanFile | null>(null);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [replacingFile, setReplacingFile] = useState<string | null>(null);\r\n  \r\n  // Ref untuk file inputs\r\n  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({});\r\n\r\n  // Ambil data jabatan dari state navigation jika ada\r\n  const jabatanData = location.state?.jabatan;\r\n  const requiredFilesFromState = location.state?.requiredFiles;\r\n  \r\n  // State untuk menyimpan data job type configuration\r\n  const [jobTypeConfig, setJobTypeConfig] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    if (pengajuanId) {\r\n      fetchPengajuanData();\r\n    }\r\n  }, [pengajuanId]);\r\n\r\n  // Reset semua file input setiap kali komponen di-render\r\n  useEffect(() => {\r\n    const resetFileInputs = () => {\r\n      Object.values(fileInputRefs.current).forEach(input => {\r\n        if (input) {\r\n          input.value = '';\r\n        }\r\n      });\r\n    };\r\n    \r\n    // Reset setelah render\r\n    resetFileInputs();\r\n  });\r\n\r\n  const fetchPengajuanData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiGet(`/api/pengajuan/${pengajuanId}`, token);\r\n      if (response.success) {\r\n        setPengajuan(response.data.pengajuan);\r\n        \r\n        // Prioritas 1: Gunakan requiredFiles dari state navigation (jika ada)\r\n        if (requiredFilesFromState && requiredFilesFromState.length > 0) {\r\n          setRequiredFiles(requiredFilesFromState);\r\n          // Set job type config dari state navigation jika ada\r\n          if (jabatanData) {\r\n            setJobTypeConfig(jabatanData);\r\n          }\r\n        }\r\n        // Prioritas 2: Gunakan requiredFiles dari response API\r\n        else if (response.data.requiredFiles && response.data.requiredFiles.length > 0) {\r\n          setRequiredFiles(response.data.requiredFiles);\r\n        }\r\n        // Prioritas 3: Ambil dari job type configuration berdasarkan jabatan_id\r\n        else if (response.data.pengajuan.jabatan_id) {\r\n          try {\r\n            const jobTypeResponse = await apiGet(`/api/job-type-configurations/${response.data.pengajuan.jabatan_id}`, token);\r\n            if (jobTypeResponse.success && jobTypeResponse.data.required_files) {\r\n              // required_files sudah di-parse di backend\r\n              setRequiredFiles(jobTypeResponse.data.required_files);\r\n              setJobTypeConfig(jobTypeResponse.data);\r\n            } else {\r\n              // Jika tidak ada konfigurasi, tampilkan pesan error\r\n              setError('Konfigurasi dokumen untuk jabatan ini belum tersedia. Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan.');\r\n              setRequiredFiles([]);\r\n            }\r\n          } catch (jobTypeError) {\r\n            console.error('Error fetching job type configuration:', jobTypeError);\r\n            setError('Gagal mengambil konfigurasi dokumen. Silakan hubungi admin.');\r\n            setRequiredFiles([]);\r\n          }\r\n        } else {\r\n          // Jika tidak ada jabatan_id, tampilkan pesan error\r\n          setError('Jabatan belum dikonfigurasi. Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan.');\r\n          setRequiredFiles([]);\r\n        }\r\n      } else {\r\n        setError(response.message || 'Gagal mengambil data pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching pengajuan data:', error);\r\n      setError('Terjadi kesalahan saat mengambil data pengajuan');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  const handleFileUpload = async (fileType: string, file: File) => {\r\n    // Validasi ukuran file: default 500KB, khusus SKP 2 Tahun Terakhir 1.6MB\r\n    const maxSize = fileType === 'skp_2_tahun_terakhir' ? Math.floor(1.6 * 1024 * 1024) : 500 * 1024;\r\n    if (file.size > maxSize) {\r\n      const humanMax = fileType === 'skp_2_tahun_terakhir' ? '1.6MB' : '500KB';\r\n      setError(`File terlalu besar. Maksimal ${humanMax}. Ukuran file: ${(file.size / 1024).toFixed(1)}KB`);\r\n      return;\r\n    }\r\n\r\n    setUploadingStates(prev => ({ ...prev, [fileType]: true }));\r\n    setUploadProgress(prev => ({ ...prev, [fileType]: 0 }));\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('file_type', fileType);\r\n\r\n    try {\r\n      // Simulate upload progress\r\n      const progressInterval = setInterval(() => {\r\n        setUploadProgress(prev => ({\r\n          ...prev,\r\n          [fileType]: Math.min(prev[fileType] + 10, 90)\r\n        }));\r\n      }, 200);\r\n\r\n      const response = await fetch(`/api/pengajuan/${pengajuanId}/upload`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      clearInterval(progressInterval);\r\n      setUploadProgress(prev => ({ ...prev, [fileType]: 100 }));\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        if (result.success) {\r\n          // Refresh data setelah upload berhasil\r\n          await fetchPengajuanData();\r\n          setError(null);\r\n          // Reset file input setelah upload berhasil menggunakan ref\r\n          const fileInput = fileInputRefs.current[fileType];\r\n          if (fileInput) {\r\n            fileInput.value = '';\r\n          }\r\n        } else {\r\n          setError(result.message || 'Gagal upload file');\r\n        }\r\n      } else {\r\n        setError('Gagal upload file');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading file:', error);\r\n      setError('Terjadi kesalahan saat upload file');\r\n    } finally {\r\n      setUploadingStates(prev => ({ ...prev, [fileType]: false }));\r\n      setReplacingFile(null);\r\n      // Reset file input di finally untuk memastikan selalu ter-reset menggunakan ref\r\n      const fileInput = fileInputRefs.current[fileType];\r\n      if (fileInput) {\r\n        fileInput.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmitPengajuan = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = await apiPut(`/api/pengajuan/${pengajuanId}/submit`, { catatan: '' }, token);\r\n      if (response.success) {\r\n        setShowSuccessModal(true);\r\n      } else {\r\n        setError(response.message || 'Gagal submit pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat submit pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n      setShowSubmitDialog(false);\r\n    }\r\n  };\r\n\r\n  const handlePreviewFile = async (file: PengajuanFile) => {\r\n    try {\r\n      // Fetch file dengan token authorization\r\n      const response = await fetch(`/api/pengajuan/files/${file.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Gagal mengambil file');\r\n      }\r\n      \r\n      // Convert ke blob\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      \r\n      // Set preview file dengan blob URL\r\n      setPreviewFile({\r\n        ...file,\r\n        blobUrl: blobUrl\r\n      });\r\n      setShowPreview(true);\r\n    } catch (error) {\r\n      console.error('Error previewing file:', error);\r\n      setError('Gagal preview file. Silakan coba lagi.');\r\n    }\r\n  };\r\n\r\n  const handleDownloadFile = (file: PengajuanFile) => {\r\n    window.open(`/api/pengajuan/files/${file.id}`, '_blank');\r\n  };\r\n\r\n  const handleReplaceFile = (fileType: string) => {\r\n    setReplacingFile(fileType);\r\n  };\r\n\r\n  const isAllFilesUploaded = () => {\r\n    return requiredFiles.every(fileType => {\r\n      return pengajuan?.files.some(f => f.file_type === fileType);\r\n    });\r\n  };\r\n\r\n  const getFileStatus = (fileType: string) => {\r\n    return pengajuan?.files.some(f => f.file_type === fileType) ? 'uploaded' : 'pending';\r\n  };\r\n\r\n  const getFileSize = (bytes: number) => {\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  // Group files by category\r\n  const groupedFiles = requiredFiles.reduce((acc, fileType) => {\r\n    const category = getFileCategory(fileType);\r\n    if (!acc[category]) {\r\n      acc[category] = [];\r\n    }\r\n    acc[category].push(fileType);\r\n    return acc;\r\n  }, {} as Record<string, string[]>);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <Card>\r\n          <CardContent className=\"flex items-center justify-center py-12\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-green-600\" />\r\n            <span className=\"ml-2\">Memuat data pengajuan...</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!pengajuan) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <Card>\r\n          <CardContent className=\"flex items-center justify-center py-12\">\r\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\r\n            <span className=\"ml-2 text-red-600\">Pengajuan tidak ditemukan</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Upload Berkas Pengajuan Mutasi PNS</CardTitle>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {pengajuan.pegawai.nama} - {pengajuan.pegawai.jabatan}\r\n          </div>\r\n          <div className=\"text-sm text-gray-500\">\r\n            Jenis Jabatan: {getJabatanDisplayName(pengajuan.jenis_jabatan)}\r\n          </div>\r\n          <div className=\"text-sm text-gray-500\">\r\n            Total Dokumen: {jobTypeConfig ? jobTypeConfig.max_dokumen : requiredFiles.length} surat\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* File Upload Sections by Category */}\r\n          {requiredFiles.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-gray-500 mb-2\">Tidak ada dokumen yang diperlukan</p>\r\n              <p className=\"text-sm text-gray-400\">Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan</p>\r\n            </div>\r\n          ) : (\r\n            Object.entries(groupedFiles).map(([category, fileTypes]) => (\r\n            <div key={category} className=\"mb-8\">\r\n              <h3 className=\"text-lg font-semibold mb-4 text-gray-800 border-b pb-2\">\r\n                {category}\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                {fileTypes.map((fileType) => {\r\n                  const status = getFileStatus(fileType);\r\n                  const isUploading = uploadingStates[fileType];\r\n                  const progress = uploadProgress[fileType];\r\n                  const uploadedFile = pengajuan.files.find(f => f.file_type === fileType);\r\n                  const isReplacing = replacingFile === fileType;\r\n\r\n                  return (\r\n                    <div key={fileType} className=\"border rounded-lg p-4\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"font-medium text-sm leading-tight\">{getFileDisplayName(fileType)}</h4>\r\n                          <p className=\"text-xs text-gray-600 mt-1\">\r\n                            Upload file PDF (maks. {fileType === 'skp_2_tahun_terakhir' ? '1.6MB' : '500KB'})\r\n                          </p>\r\n                        </div>\r\n                        <Badge \r\n                          variant={status === 'uploaded' ? 'secondary' : 'secondary'}\r\n                          className={status === 'uploaded' ? 'bg-green-600 text-white hover:bg-green-700' : ''}\r\n                        >\r\n                          {status === 'uploaded' ? (\r\n                            <CheckCircle className=\"h-3 w-3 mr-1\" />\r\n                          ) : (\r\n                            <FileText className=\"h-3 w-3 mr-1\" />\r\n                          )}\r\n                          {status === 'uploaded' ? 'Uploaded' : 'Pending'}\r\n                        </Badge>\r\n                      </div>\r\n\r\n                      {status === 'uploaded' && uploadedFile && !isReplacing ? (\r\n                        <div className=\"space-y-3\">\r\n                          <div className=\"text-sm text-green-600\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <CheckCircle className=\"h-4 w-4\" />\r\n                              <span className=\"truncate\">{uploadedFile.file_name}</span>\r\n                              <span className=\"text-gray-500 text-xs\">({getFileSize(uploadedFile.file_size)})</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-2 flex-wrap\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handlePreviewFile(uploadedFile)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Eye className=\"h-3 w-3\" />\r\n                              Preview\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleDownloadFile(uploadedFile)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Download className=\"h-3 w-3\" />\r\n                              Download\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleReplaceFile(fileType)}\r\n                              className=\"flex items-center gap-1\"\r\n                            >\r\n                              <Edit className=\"h-3 w-3\" />\r\n                              Ganti File\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div>\r\n                          <input\r\n                            ref={(el) => fileInputRefs.current[fileType] = el}\r\n                            type=\"file\"\r\n                            accept=\".pdf\"\r\n                            onChange={(e) => {\r\n                              const file = e.target.files?.[0];\r\n                              if (file) {\r\n                                handleFileUpload(fileType, file);\r\n                                // Reset file input setelah file dipilih\r\n                                e.target.value = '';\r\n                              }\r\n                            }}\r\n                            disabled={isUploading}\r\n                            className=\"hidden\"\r\n                            id={`file-${toSafeId(fileType)}`}\r\n                          />\r\n                          <label\r\n                            htmlFor={`file-${toSafeId(fileType)}`}\r\n                            className=\"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50\"\r\n                          >\r\n                            <Upload className=\"h-4 w-4 mr-2\" />\r\n                            {isUploading ? 'Uploading...' : isReplacing ? 'Pilih File Baru' : 'Pilih File'}\r\n                          </label>\r\n                          {isReplacing && (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"ghost\"\r\n                              onClick={() => setReplacingFile(null)}\r\n                              className=\"ml-2 text-gray-500\"\r\n                            >\r\n                              <X className=\"h-3 w-3 mr-1\" />\r\n                              Batal\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {isUploading && (\r\n                        <div className=\"mt-2\">\r\n                          <Progress value={progress} className=\"h-2\" />\r\n                          <p className=\"text-xs text-gray-500 mt-1\">{progress}% uploaded</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          ))\r\n          )}\r\n\r\n          {requiredFiles.length > 0 && (\r\n            <div className=\"mt-8 pt-6 border-t\">\r\n              <Button\r\n                onClick={() => setShowSubmitDialog(true)}\r\n                disabled={!isAllFilesUploaded() || submitting}\r\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\r\n                size=\"lg\"\r\n              >\r\n                <Send className=\"h-4 w-4 mr-2\" />\r\n                Submit Pengajuan\r\n              </Button>\r\n              {!isAllFilesUploaded() && (\r\n                <p className=\"text-sm text-gray-500 mt-2 text-center\">\r\n                  Semua berkas harus diupload sebelum dapat submit\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Submit Confirmation Dialog */}\r\n      <AlertDialog open={showSubmitDialog} onOpenChange={setShowSubmitDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Submit Pengajuan</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Apakah Anda yakin ingin submit pengajuan ini? Setelah disubmit, pengajuan tidak dapat diedit lagi dan akan diproses oleh admin.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={submitting}>Batal</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleSubmitPengajuan}\r\n              disabled={submitting}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n            >\r\n              {submitting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin text-green-600\" />\r\n                  Submitting...\r\n                </>\r\n              ) : (\r\n                'Submit Pengajuan'\r\n              )}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Success Modal */}\r\n      <Dialog open={showSuccessModal} onOpenChange={setShowSuccessModal}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Pengajuan Berhasil!</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"text-center py-6\">\r\n            <CheckCircle className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\r\n            <p className=\"text-lg font-medium mb-2\">\r\n              Pengajuan untuk {pengajuan.pegawai.nama} berhasil disubmit\r\n            </p>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              Pengajuan akan diproses oleh admin. Anda akan mendapat notifikasi ketika status berubah.\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                onClick={() => navigate('/dashboard')}\r\n                className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\r\n              >\r\n                Kembali ke Dashboard\r\n              </Button>\r\n              <Button\r\n                onClick={() => navigate('/pengajuan/select')}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                Buat Pengajuan Baru\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Preview Modal */}\r\n      <Dialog open={showPreview} onOpenChange={(open) => {\r\n        setShowPreview(open);\r\n        // Cleanup blob URL when modal closes\r\n        if (!open && previewFile?.blobUrl) {\r\n          URL.revokeObjectURL(previewFile.blobUrl);\r\n        }\r\n      }}>\r\n        <DialogContent className=\"max-w-4xl\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center justify-between\">\r\n              <span>Preview File: {previewFile?.file_name}</span>\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"mt-4\">\r\n            {previewFile && (\r\n              <div className=\"border rounded-lg overflow-hidden bg-white\">\r\n                <div className=\"bg-green-600 text-white px-4 py-2 flex items-center justify-between\">\r\n                  <span className=\"font-medium\">{previewFile.file_name}</span>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => setShowPreview(false)}\r\n                    className=\"text-white hover:bg-green-700\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n                <iframe\r\n                  src={previewFile.blobUrl || `/api/pengajuan/files/${previewFile.id}`}\r\n                  className=\"w-full h-96 border-0\"\r\n                  title=\"File Preview\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PengajuanFileUpload; "],"names":["toSafeId","raw","getFileDisplayName","fileType","getFileCategory","getJabatanDisplayName","jenisJabatan","PengajuanFileUpload","pengajuanId","useParams","navigate","useNavigate","location","useLocation","token","useAuth","pengajuan","setPengajuan","useState","requiredFiles","setRequiredFiles","uploadingStates","setUploadingStates","uploadProgress","setUploadProgress","showSuccessModal","setShowSuccessModal","showSubmitDialog","setShowSubmitDialog","loading","setLoading","error","setError","submitting","setSubmitting","previewFile","setPreviewFile","showPreview","setShowPreview","replacingFile","setReplacingFile","fileInputRefs","useRef","jabatanData","_a","requiredFilesFromState","_b","jobTypeConfig","setJobTypeConfig","useEffect","fetchPengajuanData","input","response","apiGet","jobTypeResponse","jobTypeError","handleFileUpload","file","maxSize","prev","formData","progressInterval","result","fileInput","handleSubmitPengajuan","apiPut","handlePreviewFile","blob","blobUrl","handleDownloadFile","handleReplaceFile","isAllFilesUploaded","f","getFileStatus","getFileSize","bytes","sizes","i","groupedFiles","acc","category","jsx","Card","jsxs","CardContent","Loader2","CardHeader","CardTitle","FileText","fileTypes","status","isUploading","progress","uploadedFile","isReplacing","Badge","CheckCircle","Button","Eye","Download","Edit","el","e","Upload","X","Progress","Send","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Fragment","Dialog","DialogContent","DialogHeader","DialogTitle","open","AlertCircle"],"mappings":"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"}