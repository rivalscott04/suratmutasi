import{j as e,V as v,X as p,Y as f}from"./ui-vendor-DiY4nm-6.js";import{r as l}from"./react-vendor-C8WR5ETM.js";import{a as g,I as b,b as j}from"./index-9P-lsB0e.js";import{L as C}from"./label-OXHhtbJU.js";import{C as I,c as S}from"./card-Cu65o8DU.js";const k=()=>{const[n,d]=l.useState(""),[o,s]=l.useState([]),[x,a]=l.useState(!1),[c,r]=l.useState(null);return l.useEffect(()=>{if(!n.trim()){s([]);return}a(!0),r(null);const m=setTimeout(()=>{const u=localStorage.getItem("token");g(`/api/employees/search?q=${encodeURIComponent(n)}`,u).then(i=>s(i.pegawai||i.employees||[])).catch(()=>r("Gagal mencari pegawai")).finally(()=>a(!1))},300);return()=>clearTimeout(m)},[n]),{searchTerm:n,setSearchTerm:d,results:o,isLoading:x,error:c}},G=({label:n,placeholder:d,onSelect:o,selectedPegawai:s})=>{const[x,a]=l.useState(!1),{searchTerm:c,setSearchTerm:r,results:m,isLoading:u}=k(),i=t=>{r(t),s&&o(void 0),a(t.length>0)},N=t=>{o(t),r(""),a(!1),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},h=()=>{o(void 0),r(""),a(!1)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:n}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(b,{placeholder:d,value:c,onChange:t=>i(t.target.value),className:"pl-10",onFocus:()=>a(c.length>0),disabled:!1}),s&&e.jsx("button",{type:"button",onClick:h,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500 hover:text-red-700 transition-colors",tabIndex:-1,children:e.jsx(p,{className:"h-4 w-4"})})]}),x&&!s&&m.length>0&&e.jsx(I,{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-auto",children:e.jsx(S,{className:"p-0",children:u?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mx-auto"})}):m.length>0?e.jsx("div",{className:"divide-y",children:m.map(t=>e.jsx("div",{className:"p-3 hover:bg-muted cursor-pointer transition-colors",onClick:()=>N(t),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nama}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.nip}),e.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.jsx(j,{variant:"outline",className:"text-xs",children:t.pangkat_gol||t.golongan})}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.jabatan})]})]})},t.id||t.nip))}):c.length>0?e.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"Tidak ada hasil ditemukan"}):null})})]}),s&&e.jsxs("div",{className:"flex items-center space-x-2 mt-2 bg-muted rounded p-2",children:[e.jsx(f,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-sm",children:s.nama}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.nip}),e.jsx(j,{variant:"outline",className:"text-xs",children:s.pangkat_gol||s.golongan}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.jabatan}),e.jsx("button",{type:"button",onClick:h,className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(p,{className:"h-4 w-4"})})]})]})};export{G as P};
//# sourceMappingURL=PegawaiSearchInput-CY27sHZY.js.map
