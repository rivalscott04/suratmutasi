const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DfpLl3Cw.js","assets/ui-vendor-BRlRFmw_.js","assets/react-vendor-C8WR5ETM.js","assets/card-BmM5i0dP.js","assets/table-DCeOkDsl.js","assets/xlsx-DjuO7_Ju.js","assets/Settings-CiTLtYqM.js","assets/label-BO8wXWIX.js","assets/tabs-4r43AmuN.js","assets/checkbox-D6vBpva9.js","assets/switch-8CJL86hM.js","assets/select-BbDMtCcZ.js","assets/alert-dialog-tyR3jLPB.js","assets/TemplateSelection-DWK3z-4Z.js","assets/TemplateForm-C0iHQFwq.js","assets/PegawaiSearchInput-Cy9AV5j-.js","assets/Template9-CJmxITrN.js","assets/SuratPreviewContainer-C92mhkru.js","assets/NotFound-C4_C9EaD.js","assets/Index-Db8eN-p0.js","assets/LetterDetail-a4qhZ1Yk.js","assets/Letters-BKhFdl8o.js","assets/accordion-Dred4G3C.js","assets/LetterPrintPreview-BgrxQlc8.js","assets/Users-D82Bl77C.js","assets/PengajuanSelect-D5iiKWDK.js","assets/PengajuanFileUpload-B0t6QCk4.js","assets/progress-BkVMxgol.js","assets/PengajuanIndex-sTOTG9kS.js","assets/PengajuanDetail-BaciXX6g.js","assets/PengajuanEdit-Bd035RIf.js","assets/JobTypeConfiguration-Dw2Q-ij4.js","assets/AdminWilayahDashboard-CySVeIJS.js","assets/AdminWilayahUploadPage-Cd02Fdpt.js","assets/SKForm-CiAPVlBr.js"])))=>i.map(i=>d[i]);
var bn=Object.defineProperty;var At=t=>{throw TypeError(t)};var jn=(t,e,s)=>e in t?bn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var _t=(t,e,s)=>jn(t,typeof e!="symbol"?e+"":e,s),it=(t,e,s)=>e.has(t)||At("Cannot "+s);var c=(t,e,s)=>(it(t,e,"read from private field"),s?s.call(t):e.get(t)),S=(t,e,s)=>e.has(t)?At("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),v=(t,e,s,a)=>(it(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),D=(t,e,s)=>(it(t,e,"access private method"),s);var Ke=(t,e,s,a)=>({set _(r){v(t,e,r,s)},get _(){return c(t,e,a)}});import{c as rs,a as is,u as os,j as n,A as wn,P as Xe,b as me,d as Sn,D as Nn,C as En,R as kn,e as Cn,f as Tn,t as Pn,g as An,h as vt,S as _n,i as ls,k as In,l as cs,m as On,n as ds,I as us,o as hs,p as fs,q as Rn,r as ms,s as Ln,L as ps,v as xs,w as Dn,T as Mn,O as gs,x as ys,y as vs,X as bt,z as bs,B as js,E as Fn,F as Un,G as qn,H as ft,U as Ie,J as $e,K as It,M as Ot,N as Qn,Q as zn,V as Kn,W as $n,Y as Rt,Z as Vn,_ as Hn,$ as Lt,a0 as ot,a1 as Gn,a2 as Bn,a3 as Wn,a4 as ws,a5 as Ss,a6 as Ns,a7 as Es,a8 as ks,a9 as Cs,aa as Jn,ab as Yn}from"./ui-vendor-BRlRFmw_.js";import{a as Xn,r as o,u as Zn,L as lt,B as ea,d as ta,e as sa,f as I,N as qe}from"./react-vendor-C8WR5ETM.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Ts,Dt=Xn;Ts=Dt.createRoot,Dt.hydrateRoot;const na="modulepreload",aa=function(t){return"/FE/"+t},Mt={},R=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),l=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=Promise.allSettled(s.map(d=>{if(d=aa(d),d in Mt)return;Mt[d]=!0;const m=d.endsWith(".css"),h=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":na,m||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),m)return new Promise((y,C)=>{f.addEventListener("load",y),f.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return r.then(u=>{for(const l of u||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var[Ze,ii]=rs("Tooltip",[is]),jt=is(),Ps="TooltipProvider",ra=700,Ft="tooltip.open",[ia,As]=Ze(Ps),_s=t=>{const{__scopeTooltip:e,delayDuration:s=ra,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:i}=t,u=o.useRef(!0),l=o.useRef(!1),d=o.useRef(0);return o.useEffect(()=>{const m=d.current;return()=>window.clearTimeout(m)},[]),n.jsx(ia,{scope:e,isOpenDelayedRef:u,delayDuration:s,onOpen:o.useCallback(()=>{window.clearTimeout(d.current),u.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>u.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback(m=>{l.current=m},[]),disableHoverableContent:r,children:i})};_s.displayName=Ps;var Is="Tooltip",[oi,et]=Ze(Is),mt="TooltipTrigger",oa=o.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,r=et(mt,s),i=As(mt,s),u=jt(s),l=o.useRef(null),d=os(e,l,r.onTriggerChange),m=o.useRef(!1),h=o.useRef(!1),f=o.useCallback(()=>m.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(wn,{asChild:!0,...u,children:n.jsx(Xe.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:d,onPointerMove:me(t.onPointerMove,y=>{y.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{r.open&&r.onClose(),m.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{m.current||r.onOpen()}),onBlur:me(t.onBlur,r.onClose),onClick:me(t.onClick,r.onClose)})})});oa.displayName=mt;var la="TooltipPortal",[li,ca]=Ze(la,{forceMount:void 0}),Pe="TooltipContent",Os=o.forwardRef((t,e)=>{const s=ca(Pe,t.__scopeTooltip),{forceMount:a=s.forceMount,side:r="top",...i}=t,u=et(Pe,t.__scopeTooltip);return n.jsx(Sn,{present:a||u.open,children:u.disableHoverableContent?n.jsx(Rs,{side:r,...i,ref:e}):n.jsx(da,{side:r,...i,ref:e})})}),da=o.forwardRef((t,e)=>{const s=et(Pe,t.__scopeTooltip),a=As(Pe,t.__scopeTooltip),r=o.useRef(null),i=os(e,r),[u,l]=o.useState(null),{trigger:d,onClose:m}=s,h=r.current,{onPointerInTransitChange:f}=a,y=o.useCallback(()=>{l(null),f(!1)},[f]),C=o.useCallback((E,b)=>{const j=E.currentTarget,k={x:E.clientX,y:E.clientY},T=pa(k,j.getBoundingClientRect()),g=xa(k,T),p=ga(b.getBoundingClientRect()),w=va([...g,...p]);l(w),f(!0)},[f]);return o.useEffect(()=>()=>y(),[y]),o.useEffect(()=>{if(d&&h){const E=j=>C(j,h),b=j=>C(j,d);return d.addEventListener("pointerleave",E),h.addEventListener("pointerleave",b),()=>{d.removeEventListener("pointerleave",E),h.removeEventListener("pointerleave",b)}}},[d,h,C,y]),o.useEffect(()=>{if(u){const E=b=>{const j=b.target,k={x:b.clientX,y:b.clientY},T=(d==null?void 0:d.contains(j))||(h==null?void 0:h.contains(j)),g=!ya(k,u);T?y():g&&(y(),m())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[d,h,u,m,y]),n.jsx(Rs,{...t,ref:i})}),[ua,ha]=Ze(Is,{isInside:!1}),fa=Tn("TooltipContent"),Rs=o.forwardRef((t,e)=>{const{__scopeTooltip:s,children:a,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:u,...l}=t,d=et(Pe,s),m=jt(s),{onClose:h}=d;return o.useEffect(()=>(document.addEventListener(Ft,h),()=>document.removeEventListener(Ft,h)),[h]),o.useEffect(()=>{if(d.trigger){const f=y=>{const C=y.target;C!=null&&C.contains(d.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,h]),n.jsx(Nn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:n.jsxs(En,{"data-state":d.stateAttribute,...m,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(fa,{children:a}),n.jsx(ua,{scope:s,isInside:!0,children:n.jsx(kn,{id:d.contentId,role:"tooltip",children:r||a})})]})})});Os.displayName=Pe;var Ls="TooltipArrow",ma=o.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,r=jt(s);return ha(Ls,s).isInside?null:n.jsx(Cn,{...r,...a,ref:e})});ma.displayName=Ls;function pa(t,e){const s=Math.abs(e.top-t.y),a=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(s,a,r,i)){case i:return"left";case r:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function xa(t,e,s=5){const a=[];switch(e){case"top":a.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":a.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":a.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":a.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return a}function ga(t){const{top:e,right:s,bottom:a,left:r}=t;return[{x:r,y:e},{x:s,y:e},{x:s,y:a},{x:r,y:a}]}function ya(t,e){const{x:s,y:a}=t;let r=!1;for(let i=0,u=e.length-1;i<e.length;u=i++){const l=e[i],d=e[u],m=l.x,h=l.y,f=d.x,y=d.y;h>a!=y>a&&s<(f-m)*(a-h)/(y-h)+m&&(r=!r)}return r}function va(t){const e=t.slice();return e.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),ba(e)}function ba(t){if(t.length<=1)return t.slice();const e=[];for(let a=0;a<t.length;a++){const r=t[a];for(;e.length>=2;){const i=e[e.length-1],u=e[e.length-2];if((i.x-u.x)*(r.y-u.y)>=(i.y-u.y)*(r.x-u.x))e.pop();else break}e.push(r)}e.pop();const s=[];for(let a=t.length-1;a>=0;a--){const r=t[a];for(;s.length>=2;){const i=s[s.length-1],u=s[s.length-2];if((i.x-u.x)*(r.y-u.y)>=(i.y-u.y)*(r.x-u.x))s.pop();else break}s.push(r)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var ja=_s,Ds=Os;function N(...t){return Pn(An(t))}function ci(t){return`/FE${t}`}function di(t){if(!t)return"";const e=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let s,a,r;return/\d{4}-\d{2}-\d{2}/.test(t)?([r,a,s]=t.split("-"),`${parseInt(s,10)} ${e[parseInt(a,10)]} ${r}`):/\d{2}-\d{2}-\d{4}/.test(t)?([s,a,r]=t.split("-"),`${parseInt(s,10)} ${e[parseInt(a,10)]} ${r}`):t}function ui(t){return t?t.toLowerCase().replace(/^(kota|kabupaten)/,e=>e.charAt(0).toUpperCase()+e.slice(1)).replace(/(^| )([a-z])/g,e=>e.toUpperCase()):""}const wa=ja,Sa=o.forwardRef(({className:t,sideOffset:e=4,...s},a)=>n.jsx(Ds,{ref:a,sideOffset:e,className:N("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Sa.displayName=Ds.displayName;var tt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},st=typeof window>"u"||"Deno"in globalThis;function z(){}function Na(t,e){return typeof t=="function"?t(e):t}function Ea(t){return typeof t=="number"&&t>=0&&t!==1/0}function ka(t,e){return Math.max(t+(e||0)-Date.now(),0)}function pt(t,e){return typeof t=="function"?t(e):t}function Ca(t,e){return typeof t=="function"?t(e):t}function Ut(t,e){const{type:s="all",exact:a,fetchStatus:r,predicate:i,queryKey:u,stale:l}=t;if(u){if(a){if(e.queryHash!==wt(u,e.options))return!1}else if(!Me(e.queryKey,u))return!1}if(s!=="all"){const d=e.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function qt(t,e){const{exact:s,status:a,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(De(e.options.mutationKey)!==De(i))return!1}else if(!Me(e.options.mutationKey,i))return!1}return!(a&&e.state.status!==a||r&&!r(e))}function wt(t,e){return((e==null?void 0:e.queryKeyHashFn)||De)(t)}function De(t){return JSON.stringify(t,(e,s)=>xt(s)?Object.keys(s).sort().reduce((a,r)=>(a[r]=s[r],a),{}):s)}function Me(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>Me(t[s],e[s])):!1}function Ms(t,e){if(t===e)return t;const s=Qt(t)&&Qt(e);if(s||xt(t)&&xt(e)){const a=s?t:Object.keys(t),r=a.length,i=s?e:Object.keys(e),u=i.length,l=s?[]:{},d=new Set(a);let m=0;for(let h=0;h<u;h++){const f=s?h:i[h];(!s&&d.has(f)||s)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,m++):(l[f]=Ms(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&m++)}return r===u&&m===r?t:l}return e}function Qt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function xt(t){if(!zt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!zt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function zt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ta(t){return new Promise(e=>{setTimeout(e,t)})}function Pa(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Ms(t,e):e}function Aa(t,e,s=0){const a=[...t,e];return s&&a.length>s?a.slice(1):a}function _a(t,e,s=0){const a=[e,...t];return s&&a.length>s?a.slice(0,-1):a}var St=Symbol();function Fs(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===St?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var oe,ee,be,Yt,Ia=(Yt=class extends tt{constructor(){super();S(this,oe);S(this,ee);S(this,be);v(this,be,e=>{if(!st&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){c(this,ee)||this.setEventListener(c(this,be))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,ee))==null||e.call(this),v(this,ee,void 0))}setEventListener(e){var s;v(this,be,e),(s=c(this,ee))==null||s.call(this),v(this,ee,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){c(this,oe)!==e&&(v(this,oe,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof c(this,oe)=="boolean"?c(this,oe):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},oe=new WeakMap,ee=new WeakMap,be=new WeakMap,Yt),Us=new Ia,je,te,we,Xt,Oa=(Xt=class extends tt{constructor(){super();S(this,je,!0);S(this,te);S(this,we);v(this,we,e=>{if(!st&&window.addEventListener){const s=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){c(this,te)||this.setEventListener(c(this,we))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,te))==null||e.call(this),v(this,te,void 0))}setEventListener(e){var s;v(this,we,e),(s=c(this,te))==null||s.call(this),v(this,te,e(this.setOnline.bind(this)))}setOnline(e){c(this,je)!==e&&(v(this,je,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return c(this,je)}},je=new WeakMap,te=new WeakMap,we=new WeakMap,Xt),Je=new Oa;function Ra(){let t,e;const s=new Promise((r,i)=>{t=r,e=i});s.status="pending",s.catch(()=>{});function a(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{a({status:"fulfilled",value:r}),t(r)},s.reject=r=>{a({status:"rejected",reason:r}),e(r)},s}function La(t){return Math.min(1e3*2**t,3e4)}function qs(t){return(t??"online")==="online"?Je.isOnline():!0}var gt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Qs(t){let e=!1,s=0,a;const r=Ra(),i=()=>r.status!=="pending",u=b=>{var j;if(!i()){const k=new gt(b);y(k),(j=t.onCancel)==null||j.call(t,k)}},l=()=>{e=!0},d=()=>{e=!1},m=()=>Us.isFocused()&&(t.networkMode==="always"||Je.isOnline())&&t.canRun(),h=()=>qs(t.networkMode)&&t.canRun(),f=b=>{i()||(a==null||a(),r.resolve(b))},y=b=>{i()||(a==null||a(),r.reject(b))},C=()=>new Promise(b=>{var j;a=k=>{(i()||m())&&b(k)},(j=t.onPause)==null||j.call(t)}).then(()=>{var b;a=void 0,i()||(b=t.onContinue)==null||b.call(t)}),E=()=>{if(i())return;let b;const j=s===0?t.initialPromise:void 0;try{b=j??t.fn()}catch(k){b=Promise.reject(k)}Promise.resolve(b).then(f).catch(k=>{var P;if(i())return;const T=t.retry??(st?0:3),g=t.retryDelay??La,p=typeof g=="function"?g(s,k):g,w=T===!0||typeof T=="number"&&s<T||typeof T=="function"&&T(s,k);if(e||!w){y(k);return}s++,(P=t.onFail)==null||P.call(t,s,k),Ta(p).then(()=>m()?void 0:C()).then(()=>{e?y(k):E()})})};return{promise:r,status:()=>r.status,cancel:u,continue:()=>(a==null||a(),r),cancelRetry:l,continueRetry:d,canStart:h,start:()=>(h()?E():C().then(E),r)}}var Da=t=>setTimeout(t,0);function Ma(){let t=[],e=0,s=l=>{l()},a=l=>{l()},r=Da;const i=l=>{e?t.push(l):r(()=>{s(l)})},u=()=>{const l=t;t=[],l.length&&r(()=>{a(()=>{l.forEach(d=>{s(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||u()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{r=l}}}var F=Ma(),le,Zt,zs=(Zt=class{constructor(){S(this,le)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ea(this.gcTime)&&v(this,le,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(st?1/0:5*60*1e3))}clearGcTimeout(){c(this,le)&&(clearTimeout(c(this,le)),v(this,le,void 0))}},le=new WeakMap,Zt),Se,Ne,Q,ce,L,Fe,de,K,Y,es,Fa=(es=class extends zs{constructor(e){super();S(this,K);S(this,Se);S(this,Ne);S(this,Q);S(this,ce);S(this,L);S(this,Fe);S(this,de);v(this,de,!1),v(this,Fe,e.defaultOptions),this.setOptions(e.options),this.observers=[],v(this,ce,e.client),v(this,Q,c(this,ce).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,v(this,Se,qa(this.options)),this.state=e.state??c(this,Se),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,L))==null?void 0:e.promise}setOptions(e){this.options={...c(this,Fe),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,Q).remove(this)}setData(e,s){const a=Pa(this.state.data,e,this.options);return D(this,K,Y).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(e,s){D(this,K,Y).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var a,r;const s=(a=c(this,L))==null?void 0:a.promise;return(r=c(this,L))==null||r.cancel(e),s?s.then(z).catch(z):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Se))}isActive(){return this.observers.some(e=>Ca(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===St||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>pt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ka(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,L))==null||s.continue()}onOnline(){var s;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,L))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,Q).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(c(this,L)&&(c(this,de)?c(this,L).cancel({revert:!0}):c(this,L).cancelRetry()),this.scheduleGc()),c(this,Q).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||D(this,K,Y).call(this,{type:"invalidate"})}async fetch(e,s){var d,m,h,f,y,C,E,b,j,k,T,g;if(this.state.fetchStatus!=="idle"&&((d=c(this,L))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,L))return c(this,L).continueRetry(),c(this,L).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(w=>w.options.queryFn);p&&this.setOptions(p.options)}const a=new AbortController,r=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(v(this,de,!0),a.signal)})},i=()=>{const p=Fs(this.options,s),P=(()=>{const U={client:c(this,ce),queryKey:this.queryKey,meta:this.meta};return r(U),U})();return v(this,de,!1),this.options.persister?this.options.persister(p,P,this):p(P)},l=(()=>{const p={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:c(this,ce),state:this.state,fetchFn:i};return r(p),p})();(m=this.options.behavior)==null||m.onFetch(l,this),v(this,Ne,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&D(this,K,Y).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),v(this,L,Qs({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:p=>{p instanceof gt&&p.revert&&this.setState({...c(this,Ne),fetchStatus:"idle"}),a.abort()},onFail:(p,w)=>{D(this,K,Y).call(this,{type:"failed",failureCount:p,error:w})},onPause:()=>{D(this,K,Y).call(this,{type:"pause"})},onContinue:()=>{D(this,K,Y).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const p=await c(this,L).start();if(p===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(p),(C=(y=c(this,Q).config).onSuccess)==null||C.call(y,p,this),(b=(E=c(this,Q).config).onSettled)==null||b.call(E,p,this.state.error,this),p}catch(p){if(p instanceof gt){if(p.silent)return c(this,L).promise;if(p.revert){if(this.state.data===void 0)throw p;return this.state.data}}throw D(this,K,Y).call(this,{type:"error",error:p}),(k=(j=c(this,Q).config).onError)==null||k.call(j,p,this),(g=(T=c(this,Q).config).onSettled)==null||g.call(T,this.state.data,p,this),p}finally{this.scheduleGc()}}},Se=new WeakMap,Ne=new WeakMap,Q=new WeakMap,ce=new WeakMap,L=new WeakMap,Fe=new WeakMap,de=new WeakMap,K=new WeakSet,Y=function(e){const s=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Ua(a.data,this.options),fetchMeta:e.meta??null};case"success":const r={...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return v(this,Ne,e.manual?r:void 0),r;case"error":const i=e.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=s(this.state),F.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),c(this,Q).notify({query:this,type:"updated",action:e})})},es);function Ua(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qs(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function qa(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,a=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var B,ts,Qa=(ts=class extends tt{constructor(e={}){super();S(this,B);this.config=e,v(this,B,new Map)}build(e,s,a){const r=s.queryKey,i=s.queryHash??wt(r,s);let u=this.get(i);return u||(u=new Fa({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(r)}),this.add(u)),u}add(e){c(this,B).has(e.queryHash)||(c(this,B).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=c(this,B).get(e.queryHash);s&&(e.destroy(),s===e&&c(this,B).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,B).get(e)}getAll(){return[...c(this,B).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Ut(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>Ut(e,a)):s}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){F.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},B=new WeakMap,ts),W,M,ue,J,Z,ss,za=(ss=class extends zs{constructor(e){super();S(this,J);S(this,W);S(this,M);S(this,ue);this.mutationId=e.mutationId,v(this,M,e.mutationCache),v(this,W,[]),this.state=e.state||Ka(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,W).includes(e)||(c(this,W).push(e),this.clearGcTimeout(),c(this,M).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){v(this,W,c(this,W).filter(s=>s!==e)),this.scheduleGc(),c(this,M).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,W).length||(this.state.status==="pending"?this.scheduleGc():c(this,M).remove(this))}continue(){var e;return((e=c(this,ue))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,u,l,d,m,h,f,y,C,E,b,j,k,T,g,p,w,P,U,V;const s=()=>{D(this,J,Z).call(this,{type:"continue"})};v(this,ue,Qs({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,H)=>{D(this,J,Z).call(this,{type:"failed",failureCount:_,error:H})},onPause:()=>{D(this,J,Z).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,M).canRun(this)}));const a=this.state.status==="pending",r=!c(this,ue).canStart();try{if(a)s();else{D(this,J,Z).call(this,{type:"pending",variables:e,isPaused:r}),await((u=(i=c(this,M).config).onMutate)==null?void 0:u.call(i,e,this));const H=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,e));H!==this.state.context&&D(this,J,Z).call(this,{type:"pending",context:H,variables:e,isPaused:r})}const _=await c(this,ue).start();return await((h=(m=c(this,M).config).onSuccess)==null?void 0:h.call(m,_,e,this.state.context,this)),await((y=(f=this.options).onSuccess)==null?void 0:y.call(f,_,e,this.state.context)),await((E=(C=c(this,M).config).onSettled)==null?void 0:E.call(C,_,null,this.state.variables,this.state.context,this)),await((j=(b=this.options).onSettled)==null?void 0:j.call(b,_,null,e,this.state.context)),D(this,J,Z).call(this,{type:"success",data:_}),_}catch(_){try{throw await((T=(k=c(this,M).config).onError)==null?void 0:T.call(k,_,e,this.state.context,this)),await((p=(g=this.options).onError)==null?void 0:p.call(g,_,e,this.state.context)),await((P=(w=c(this,M).config).onSettled)==null?void 0:P.call(w,void 0,_,this.state.variables,this.state.context,this)),await((V=(U=this.options).onSettled)==null?void 0:V.call(U,void 0,_,e,this.state.context)),_}finally{D(this,J,Z).call(this,{type:"error",error:_})}}finally{c(this,M).runNext(this)}}},W=new WeakMap,M=new WeakMap,ue=new WeakMap,J=new WeakSet,Z=function(e){const s=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),F.batch(()=>{c(this,W).forEach(a=>{a.onMutationUpdate(e)}),c(this,M).notify({mutation:this,type:"updated",action:e})})},ss);function Ka(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var X,$,Ue,ns,$a=(ns=class extends tt{constructor(e={}){super();S(this,X);S(this,$);S(this,Ue);this.config=e,v(this,X,new Set),v(this,$,new Map),v(this,Ue,0)}build(e,s,a){const r=new za({mutationCache:this,mutationId:++Ke(this,Ue)._,options:e.defaultMutationOptions(s),state:a});return this.add(r),r}add(e){c(this,X).add(e);const s=Ve(e);if(typeof s=="string"){const a=c(this,$).get(s);a?a.push(e):c(this,$).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,X).delete(e)){const s=Ve(e);if(typeof s=="string"){const a=c(this,$).get(s);if(a)if(a.length>1){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}else a[0]===e&&c(this,$).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Ve(e);if(typeof s=="string"){const a=c(this,$).get(s),r=a==null?void 0:a.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var a;const s=Ve(e);if(typeof s=="string"){const r=(a=c(this,$).get(s))==null?void 0:a.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){F.batch(()=>{c(this,X).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,X).clear(),c(this,$).clear()})}getAll(){return Array.from(c(this,X))}find(e){const s={exact:!0,...e};return this.getAll().find(a=>qt(s,a))}findAll(e={}){return this.getAll().filter(s=>qt(e,s))}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return F.batch(()=>Promise.all(e.map(s=>s.continue().catch(z))))}},X=new WeakMap,$=new WeakMap,Ue=new WeakMap,ns);function Ve(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Kt(t){return{onFetch:(e,s)=>{var h,f,y,C,E;const a=e.options,r=(y=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:y.direction,i=((C=e.state.data)==null?void 0:C.pages)||[],u=((E=e.state.data)==null?void 0:E.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const m=async()=>{let b=!1;const j=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},k=Fs(e.options,e.fetchOptions),T=async(g,p,w)=>{if(b)return Promise.reject();if(p==null&&g.pages.length)return Promise.resolve(g);const U=(()=>{const he={client:e.client,queryKey:e.queryKey,pageParam:p,direction:w?"backward":"forward",meta:e.options.meta};return j(he),he})(),V=await k(U),{maxPages:_}=e.options,H=w?_a:Aa;return{pages:H(g.pages,V,_),pageParams:H(g.pageParams,p,_)}};if(r&&i.length){const g=r==="backward",p=g?Va:$t,w={pages:i,pageParams:u},P=p(a,w);l=await T(w,P,g)}else{const g=t??i.length;do{const p=d===0?u[0]??a.initialPageParam:$t(a,l);if(d>0&&p==null)break;l=await T(l,p),d++}while(d<g)}return l};e.options.persister?e.fetchFn=()=>{var b,j;return(j=(b=e.options).persister)==null?void 0:j.call(b,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=m}}}function $t(t,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,s[a],s):void 0}function Va(t,{pages:e,pageParams:s}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,s[0],s):void 0}var A,se,ne,Ee,ke,ae,Ce,Te,as,Ha=(as=class{constructor(t={}){S(this,A);S(this,se);S(this,ne);S(this,Ee);S(this,ke);S(this,ae);S(this,Ce);S(this,Te);v(this,A,t.queryCache||new Qa),v(this,se,t.mutationCache||new $a),v(this,ne,t.defaultOptions||{}),v(this,Ee,new Map),v(this,ke,new Map),v(this,ae,0)}mount(){Ke(this,ae)._++,c(this,ae)===1&&(v(this,Ce,Us.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onFocus())})),v(this,Te,Je.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onOnline())})))}unmount(){var t,e;Ke(this,ae)._--,c(this,ae)===0&&((t=c(this,Ce))==null||t.call(this),v(this,Ce,void 0),(e=c(this,Te))==null||e.call(this),v(this,Te,void 0))}isFetching(t){return c(this,A).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,se).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,A).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=c(this,A).build(this,e),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(pt(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return c(this,A).findAll(t).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(t,e,s){const a=this.defaultQueryOptions({queryKey:t}),r=c(this,A).get(a.queryHash),i=r==null?void 0:r.state.data,u=Na(e,i);if(u!==void 0)return c(this,A).build(this,a).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return F.batch(()=>c(this,A).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,A).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=c(this,A);F.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=c(this,A);return F.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},a=F.batch(()=>c(this,A).findAll(t).map(r=>r.cancel(s)));return Promise.all(a).then(z).catch(z)}invalidateQueries(t,e={}){return F.batch(()=>(c(this,A).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},a=F.batch(()=>c(this,A).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,s);return s.throwOnError||(i=i.catch(z)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(z)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=c(this,A).build(this,e);return s.isStaleByTime(pt(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(z).catch(z)}fetchInfiniteQuery(t){return t.behavior=Kt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(z).catch(z)}ensureInfiniteQueryData(t){return t.behavior=Kt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Je.isOnline()?c(this,se).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,A)}getMutationCache(){return c(this,se)}getDefaultOptions(){return c(this,ne)}setDefaultOptions(t){v(this,ne,t)}setQueryDefaults(t,e){c(this,Ee).set(De(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,Ee).values()],s={};return e.forEach(a=>{Me(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,e){c(this,ke).set(De(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,ke).values()],s={};return e.forEach(a=>{Me(t,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,ne).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=wt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===St&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,ne).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,A).clear(),c(this,se).clear()}},A=new WeakMap,se=new WeakMap,ne=new WeakMap,Ee=new WeakMap,ke=new WeakMap,ae=new WeakMap,Ce=new WeakMap,Te=new WeakMap,as),Ga=o.createContext(void 0),Ba=({client:t,children:e})=>(o.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(Ga.Provider,{value:t,children:e}));const yt=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:3001":"";async function nt(t,e,s={}){const{data:a,token:r,headers:i={}}=s,u=yt()+e,l={method:t,headers:{...i},credentials:"include"};r&&(l.headers={...l.headers,Authorization:`Bearer ${r}`}),a&&(typeof FormData<"u"&&a instanceof FormData?l.body=a:(l.headers={"Content-Type":"application/json",...l.headers},l.body=JSON.stringify(a)));let d=await fetch(u,l),m=d.headers.get("content-type"),h;if(m&&m.includes("application/json")?h=await d.json():h=await d.text(),(d.status===401||d.status===403)&&e!=="/api/auth/refresh"&&e!=="/api/auth/me"&&!e.includes("/api/auth/"))try{await new Promise(y=>setTimeout(y,100));const f=await fetch(yt()+"/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const y=await f.json();if(y.token){if(localStorage.setItem("token",y.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(y.token),l.headers={...l.headers,Authorization:`Bearer ${y.token}`},d=await fetch(u,l),m=d.headers.get("content-type"),m&&m.includes("application/json")?h=await d.json():h=await d.text(),!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}}throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error("Sesi berakhir, silakan login kembali")}catch(f){const y=f instanceof Error?f.message:"Sesi berakhir, silakan login kembali";throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error(y)}if(!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}const Ye=(t,e,s)=>nt("GET",t,{token:e,headers:s}),ct=(t,e,s,a)=>nt("POST",t,{data:e,token:s,headers:a}),hi=(t,e,s,a)=>nt("PUT",t,{data:e,token:s,headers:a}),fi=(t,e,s)=>nt("DELETE",t,{token:e,headers:s}),mi=async(t,e,s,a,r)=>{const i=new FormData;i.append("file",s);const u=r==="admin_wilayah"?"/api/admin-wilayah":"/api",l=`${u}/pengajuan/${t}/files/${e}/replace`,d=yt()+l;console.log("🔍 Debug API replace file:",{pengajuanId:t,fileId:e,fileName:s.name,userRole:r,baseUrl:u,url:l,fullUrl:d,token:a?"exists":"missing"});const m=await fetch(d,{method:"PUT",headers:{Authorization:`Bearer ${a}`},body:i});console.log("🔍 Response status:",m.status),console.log("🔍 Response ok:",m.ok);const h=await m.json();if(console.log("🔍 Response data:",h),!m.ok)throw new Error(h.message||"Gagal mengganti file");return h},Ks=o.createContext({}),Wa=({children:t})=>{const[e,s]=o.useState(null),[a,r]=o.useState(null),[i,u]=o.useState(null),[l,d]=o.useState(null),[m,h]=o.useState(!0);o.useEffect(()=>(window.dispatchTokenUpdate=g=>{u(g),localStorage.setItem("token",g)},()=>{delete window.dispatchTokenUpdate}),[]),o.useEffect(()=>{const g=localStorage.getItem("token"),p=localStorage.getItem("originalToken"),w=localStorage.getItem("originalUser");if(g){if(u(g),p&&w)try{d(p),r(JSON.parse(w))}catch(P){console.error("Error parsing stored original user:",P),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}Ye("/api/auth/me",g).then(P=>{s(P.user),!a&&!w&&r(P.user)}).catch(P=>{var U,V;console.error("Error fetching user:",P),((U=P.message)!=null&&U.includes("Sesi berakhir")||(V=P.message)!=null&&V.includes("Unauthorized"))&&y()}).finally(()=>h(!1))}else h(!1)},[]);const f=async(g,p)=>{h(!0);try{const w=await ct("/api/auth/login",{email:g,password:p});u(w.token),s(w.user),r(w.user),d(null),localStorage.setItem("token",w.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}finally{h(!1)}},y=()=>{u(null),s(null),r(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")},C=async()=>{if(i){h(!0);try{const g=await Ye("/api/auth/me",i);s(g.user)}finally{h(!1)}}},E=g=>{u(g),localStorage.setItem("token",g)},b=async g=>{if(!i||!T)throw new Error("Only admin kanwil can impersonate");h(!0);try{l||(d(i),localStorage.setItem("originalToken",i)),a||(r(e),localStorage.setItem("originalUser",JSON.stringify(e)));const p=await ct("/api/auth/impersonate",{userId:g},i);u(p.token),s(p.user),localStorage.setItem("token",p.token),console.log("Impersonation started:",p.impersonation)}finally{h(!1)}},j=async()=>{if(!i||!(e!=null&&e.impersonating)&&!l){console.log("No impersonation to stop:",{hasToken:!!i,userImpersonating:e==null?void 0:e.impersonating,hasOriginalToken:!!l});return}h(!0);try{console.log("Stopping impersonation...");const g=await ct("/api/auth/stop-impersonate",{},i);u(g.token),s(g.user),d(null),localStorage.setItem("token",g.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),console.log("Impersonation stopped successfully")}catch(g){console.error("Error stopping impersonation:",g),l&&a&&(console.log("Using fallback restore"),u(l),s(a),d(null),localStorage.setItem("token",l),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"))}finally{h(!1)}},k=!!l||!!(e!=null&&e.impersonating),T=(e==null?void 0:e.role)==="admin"&&(e==null?void 0:e.office_id)===null;return n.jsx(Ks.Provider,{value:{user:e,originalUser:a,token:i,loading:m,login:f,logout:y,refreshUser:C,isAuthenticated:!!e&&!!i,isImpersonating:k,isAdminKanwil:T,impersonateUser:b,stopImpersonating:j,updateToken:E},children:t})},re=()=>o.useContext(Ks),Ja=vt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=o.forwardRef(({className:t,variant:e,size:s,asChild:a=!1,...r},i)=>{const u=a?_n:"button";return n.jsx(u,{className:N(Ja({variant:e,size:s,className:t})),ref:i,...r})});q.displayName="Button";const Ya=Dn,Xa=Mn,Za=o.forwardRef(({className:t,inset:e,children:s,...a},r)=>n.jsxs(ls,{ref:r,className:N("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...a,children:[s,n.jsx(In,{className:"ml-auto h-4 w-4"})]}));Za.displayName=ls.displayName;const er=o.forwardRef(({className:t,...e},s)=>n.jsx(cs,{ref:s,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));er.displayName=cs.displayName;const $s=o.forwardRef(({className:t,sideOffset:e=4,...s},a)=>n.jsx(On,{children:n.jsx(ds,{ref:a,sideOffset:e,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));$s.displayName=ds.displayName;const He=o.forwardRef(({className:t,inset:e,...s},a)=>n.jsx(us,{ref:a,className:N("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...s}));He.displayName=us.displayName;const tr=o.forwardRef(({className:t,children:e,checked:s,...a},r)=>n.jsxs(hs,{ref:r,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...a,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(fs,{children:n.jsx(Rn,{className:"h-4 w-4"})})}),e]}));tr.displayName=hs.displayName;const sr=o.forwardRef(({className:t,children:e,...s},a)=>n.jsxs(ms,{ref:a,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(fs,{children:n.jsx(Ln,{className:"h-2 w-2 fill-current"})})}),e]}));sr.displayName=ms.displayName;const Vs=o.forwardRef(({className:t,inset:e,...s},a)=>n.jsx(ps,{ref:a,className:N("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));Vs.displayName=ps.displayName;const Ge=o.forwardRef(({className:t,...e},s)=>n.jsx(xs,{ref:s,className:N("-mx-1 my-1 h-px bg-muted",t),...e}));Ge.displayName=xs.displayName;const Oe=Fn,nr=Un,pi=vs,Hs=o.forwardRef(({className:t,...e},s)=>n.jsx(gs,{ref:s,className:N("fixed inset-0 z-[9999] bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 duration-200",t),...e}));Hs.displayName=gs.displayName;const xe=o.forwardRef(({className:t,children:e,...s},a)=>n.jsxs(nr,{children:[n.jsx(Hs,{}),n.jsxs(ys,{ref:a,className:N("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(vs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(bt,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xe.displayName=ys.displayName;const ge=({className:t,...e})=>n.jsx("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ge.displayName="DialogHeader";const ar=({className:t,...e})=>n.jsx("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ar.displayName="DialogFooter";const ye=o.forwardRef(({className:t,...e},s)=>n.jsx(bs,{ref:s,className:N("text-lg font-semibold leading-none tracking-tight",t),...e}));ye.displayName=bs.displayName;const ve=o.forwardRef(({className:t,...e},s)=>n.jsx(js,{ref:s,className:N("text-sm text-muted-foreground",t),...e}));ve.displayName=js.displayName;var Gs={exports:{}},Bs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=o;function rr(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:rr,or=Ae.useState,lr=Ae.useEffect,cr=Ae.useLayoutEffect,dr=Ae.useDebugValue;function ur(t,e){var s=e(),a=or({inst:{value:s,getSnapshot:e}}),r=a[0].inst,i=a[1];return cr(function(){r.value=s,r.getSnapshot=e,dt(r)&&i({inst:r})},[t,s,e]),lr(function(){return dt(r)&&i({inst:r}),t(function(){dt(r)&&i({inst:r})})},[t]),dr(s),s}function dt(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ir(t,s)}catch{return!0}}function hr(t,e){return e()}var fr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hr:ur;Bs.useSyncExternalStore=Ae.useSyncExternalStore!==void 0?Ae.useSyncExternalStore:fr;Gs.exports=Bs;var mr=Gs.exports;function pr(){return mr.useSyncExternalStore(xr,()=>!0,()=>!1)}function xr(){return()=>{}}var Nt="Avatar",[gr,xi]=rs(Nt),[yr,Ws]=gr(Nt),Js=o.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[r,i]=o.useState("idle");return n.jsx(yr,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:n.jsx(Xe.span,{...a,ref:e})})});Js.displayName=Nt;var Ys="AvatarImage",Xs=o.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:r=()=>{},...i}=t,u=Ws(Ys,s),l=vr(a,i),d=qn(m=>{r(m),u.onImageLoadingStatusChange(m)});return ft(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?n.jsx(Xe.img,{...i,ref:e,src:a}):null});Xs.displayName=Ys;var Zs="AvatarFallback",en=o.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...r}=t,i=Ws(Zs,s),[u,l]=o.useState(a===void 0);return o.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(d)}},[a]),u&&i.imageLoadingStatus!=="loaded"?n.jsx(Xe.span,{...r,ref:e}):null});en.displayName=Zs;function Vt(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function vr(t,{referrerPolicy:e,crossOrigin:s}){const a=pr(),r=o.useRef(null),i=a?(r.current||(r.current=new window.Image),r.current):null,[u,l]=o.useState(()=>Vt(i,t));return ft(()=>{l(Vt(i,t))},[i,t]),ft(()=>{const d=f=>()=>{l(f)};if(!i)return;const m=d("loaded"),h=d("error");return i.addEventListener("load",m),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",m),i.removeEventListener("error",h)}},[i,s,e]),u}var tn=Js,sn=Xs,nn=en;const an=o.forwardRef(({className:t,...e},s)=>n.jsx(tn,{ref:s,className:N("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));an.displayName=tn.displayName;const br=o.forwardRef(({className:t,...e},s)=>n.jsx(sn,{ref:s,className:N("aspect-square h-full w-full",t),...e}));br.displayName=sn.displayName;const rn=o.forwardRef(({className:t,...e},s)=>n.jsx(nn,{ref:s,className:N("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));rn.displayName=nn.displayName;const on=o.forwardRef(({className:t,type:e,...s},a)=>n.jsx("input",{type:e,className:N("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s}));on.displayName="Input";const jr=vt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ht({className:t,variant:e,...s}){return n.jsx("div",{className:N(jr({variant:e}),t),...s})}const wr=1,Sr=1e6;let ut=0;function Nr(){return ut=(ut+1)%Number.MAX_SAFE_INTEGER,ut.toString()}const ht=new Map,Gt=t=>{if(ht.has(t))return;const e=setTimeout(()=>{ht.delete(t),Le({type:"REMOVE_TOAST",toastId:t})},Sr);ht.set(t,e)},Er=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,wr)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?Gt(s):t.toasts.forEach(a=>{Gt(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},Be=[];let We={toasts:[]};function Le(t){We=Er(We,t),Be.forEach(e=>{e(We)})}function kr({...t}){const e=Nr(),s=r=>Le({type:"UPDATE_TOAST",toast:{...r,id:e}}),a=()=>Le({type:"DISMISS_TOAST",toastId:e});return Le({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||a()}}}),{id:e,dismiss:a,update:s}}function ln(){const[t,e]=o.useState(We);return o.useEffect(()=>(Be.push(e),()=>{const s=Be.indexOf(e);s>-1&&Be.splice(s,1)}),[t]),{...t,toast:kr,dismiss:s=>Le({type:"DISMISS_TOAST",toastId:s})}}const Cr=()=>{const{user:t,originalUser:e,isImpersonating:s,impersonateUser:a,stopImpersonating:r,logout:i,token:u,loading:l,isAdminKanwil:d}=re(),{toast:m}=ln(),h=Zn(),[f,y]=o.useState(!1),[C,E]=o.useState(!1),[b,j]=o.useState(!1),[k,T]=o.useState(!1),[g,p]=o.useState(!1),[w,P]=o.useState(""),[U,V]=o.useState([]),[_,H]=o.useState(!1),[he,_e]=o.useState(!1),[at,mn]=o.useState(""),Et=(()=>{const x=s?(e==null?void 0:e.role)==="admin":(t==null?void 0:t.role)==="admin",G=(t==null?void 0:t.role)==="admin_wilayah",ze=(t==null?void 0:t.role)==="user";t==null||t.role;const fe=[{name:"Dashboard",href:"/dashboard",icon:Lt},{name:"Template Generator",href:"/generator",icon:ot},{name:"Riwayat Surat",href:"/letters",icon:ot},{name:"Data Pengajuan",href:"/pengajuan",icon:Gn}];return(ze||x)&&fe.splice(2,0,{name:"SK Generator",href:"/generator/sk",icon:ot}),x&&fe.push({name:"Management User",href:"/users",icon:Bn}),G&&(fe[0]={name:"Dashboard Admin Wilayah",href:"/admin-wilayah/dashboard",icon:Lt},fe.splice(1,1)),fe.push({name:"Settings",href:"/settings",icon:Wn}),fe})();o.useEffect(()=>{he&&d&&pn()},[he,d]);const pn=async()=>{if(u){H(!0);try{console.log(" Fetching users for impersonation...");const x=await Ye("/api/users",u);console.log(" Raw users response:",x);const G=x.users.filter(ze=>ze.id!==(e==null?void 0:e.id)&&ze.role!=="admin");console.log("✅ Filtered users:",G),V(G)}catch(x){console.error("❌ Failed to fetch users:",x),V([])}finally{H(!1)}}},kt=x=>x==="/letters"?h.pathname.startsWith("/letters"):x==="/pengajuan"?h.pathname.startsWith("/pengajuan"):h.pathname===x,Ct=()=>{E(!0),y(!1)},xn=()=>{i(),E(!1)},Tt=()=>{_e(!0),y(!1)},gn=x=>{P(x),_e(!1),j(!0)},Pt=U.filter(x=>x.full_name.toLowerCase().includes(at.toLowerCase())||x.email.toLowerCase().includes(at.toLowerCase())),yn=async()=>{if(w)try{await a(w),j(!1),P("")}catch(x){console.error("Failed to impersonate user:",x),m({title:"Error",description:"Gagal impersonate user. Coba lagi.",variant:"destructive",duration:3e3})}},rt=()=>{T(!0),y(!1)},vn=async()=>{try{await r(),T(!1),p(!0),setTimeout(()=>{p(!1)},3e3)}catch(x){console.error("Failed to stop impersonating:",x),m({title:"Error",description:"Gagal menghentikan impersonate. Coba lagi.",variant:"destructive",duration:3e3})}};return n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs(lt,{to:"/dashboard",className:"flex items-center space-x-3",children:[n.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Kementerian Agama",className:"h-8 w-8",onError:x=>{console.error("Logo Kemenag not found"),x.currentTarget.style.display="none"}}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("h1",{className:"text-lg font-semibold text-green-700",children:"Si Imut"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Sistem Informasi Mutasi"})]})]})}),s&&n.jsxs("div",{className:"hidden md:flex items-center bg-blue-50 border border-blue-200 rounded-lg px-3 py-1",children:[n.jsx(Ie,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Impersonating: ",t==null?void 0:t.full_name]}),n.jsx(q,{variant:"ghost",size:"sm",onClick:rt,className:"ml-2 h-6 px-2 text-blue-600 hover:text-blue-700",children:n.jsx($e,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"hidden md:flex items-center space-x-8",children:Et.map(x=>{const G=x.icon;return n.jsxs(lt,{to:x.href,className:N("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",kt(x.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),children:[n.jsx(G,{className:"h-4 w-4"}),n.jsx("span",{children:x.name})]},x.name)})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(Ya,{children:[n.jsx(Xa,{asChild:!0,children:n.jsx(q,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:n.jsx(an,{className:"h-8 w-8",children:n.jsx(rn,{className:"bg-green-100 text-green-700",children:l?n.jsx("span",{className:"animate-pulse w-6 h-6 block bg-green-200 rounded-full mx-auto"}):t!=null&&t.full_name?t.full_name.split(" ").map(x=>x[0]).join("").toUpperCase():"?"})})})}),n.jsxs($s,{className:"w-64",align:"end",children:[n.jsx(Vs,{className:"font-normal",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("p",{className:"text-sm font-semibold leading-none",children:t==null?void 0:t.full_name}),n.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t==null?void 0:t.email}),d?n.jsx("p",{className:"text-xs leading-none text-blue-600 font-medium",children:"👑 Admin Kanwil (All Access)"}):n.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Role: ",t==null?void 0:t.role]}),(t==null?void 0:t.office_id)&&!d&&n.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Office ID: ",t.office_id]}),s&&n.jsxs("p",{className:"text-xs leading-none text-blue-600",children:["Impersonating as ",t==null?void 0:t.full_name]})]})}),n.jsx(Ge,{}),s&&n.jsxs(n.Fragment,{children:[n.jsxs(He,{onClick:rt,className:"text-blue-600",children:[n.jsx($e,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Stop Impersonating"})]}),n.jsx(Ge,{})]}),d&&!s&&n.jsxs(n.Fragment,{children:[n.jsxs(He,{onClick:Tt,className:"text-blue-600",children:[n.jsx(It,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsx(Ge,{})]}),n.jsxs(He,{onClick:Ct,className:"text-red-600",children:[n.jsx(Ot,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Logout"})]})]})]}),n.jsx(q,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>y(!f),children:f?n.jsx(bt,{className:"h-5 w-5"}):n.jsx(Qn,{className:"h-5 w-5"})})]})]}),f&&n.jsx("div",{className:"md:hidden",children:n.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[Et.map(x=>{const G=x.icon;return n.jsxs(lt,{to:x.href,className:N("flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium",kt(x.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),onClick:()=>y(!1),children:[n.jsx(G,{className:"h-5 w-5"}),n.jsx("span",{children:x.name})]},x.name)}),s&&n.jsxs("button",{onClick:rt,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx($e,{className:"h-5 w-5"}),n.jsx("span",{children:"Stop Impersonating"})]}),d&&!s&&n.jsxs("button",{onClick:Tt,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(It,{className:"h-5 w-5"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsxs("button",{onClick:Ct,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 w-full",children:[n.jsx(Ot,{className:"h-5 w-5"}),n.jsx("span",{children:"Logout"})]})]})})]})}),n.jsx(Oe,{open:C,onOpenChange:E,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"w-5 h-5 text-orange-500"}),"Konfirmasi Logout"]}),n.jsx(ve,{children:"Apakah Anda yakin ingin keluar dari sistem? Anda perlu login kembali untuk mengakses aplikasi."})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>E(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:xn,className:"bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]})}),n.jsx(Oe,{open:he,onOpenChange:_e,children:n.jsxs(xe,{className:"sm:max-w-lg",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Ie,{className:"w-5 h-5 text-blue-500"}),"Pilih User untuk Impersonate"]}),n.jsx(ve,{children:"Pilih user yang ingin Anda impersonate dari daftar di bawah ini."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx(on,{placeholder:"Cari user...",value:at,onChange:x=>mn(x.target.value),className:"pl-10"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:_?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx($n,{className:"w-6 h-6 animate-spin mr-2"}),n.jsx("span",{className:"text-sm text-gray-500",children:"Loading users..."})]}):U.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang tersedia untuk impersonation"}):Pt.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang cocok dengan pencarian"}):n.jsx("div",{className:"divide-y",children:Pt.map(x=>n.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>gn(x.id),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Rt,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:x.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:x.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Ht,{variant:"outline",className:"text-xs",children:x.role}),n.jsx("span",{className:"text-xs text-gray-500",children:x.office_id||"No Office"})]})]})]})},x.id))})})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx(q,{onClick:()=>_e(!1),variant:"outline",children:"Batal"})})]})}),n.jsx(Oe,{open:b,onOpenChange:j,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Ie,{className:"w-5 h-5 text-blue-500"}),"Impersonate User"]}),n.jsx(ve,{children:"Konfirmasi untuk impersonate user yang dipilih."})]}),n.jsxs("div",{className:"space-y-4",children:[w&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Rt,{className:"w-4 h-4 text-blue-600"})}),n.jsx("div",{className:"flex-1",children:(()=>{const x=U.find(G=>G.id===w);return x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-sm",children:x.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:x.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Ht,{variant:"outline",className:"text-xs",children:x.role}),n.jsx("span",{className:"text-xs text-gray-500",children:x.office_id||"No Office"})]})]}):n.jsx("div",{className:"text-sm text-gray-500",children:"User tidak ditemukan"})})()})]})}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsxs(q,{onClick:()=>{j(!1),_e(!0)},variant:"outline",className:"w-full",children:[n.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Pilih User Lain"]})})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>j(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:yn,disabled:!w,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Impersonate"})]})]})}),n.jsx(Oe,{open:k,onOpenChange:T,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx($e,{className:"w-5 h-5 text-blue-500"}),"Stop Impersonating"]}),n.jsxs(ve,{children:["Anda sedang mengakses sistem sebagai ",n.jsx("strong",{children:t==null?void 0:t.full_name}),". Apakah Anda yakin ingin kembali ke akun admin Anda?"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Setelah stop impersonate, Anda akan kembali ke akun: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>T(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:vn,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Ya, Stop Impersonating"})]})]})}),n.jsx(Oe,{open:g,onOpenChange:p,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Hn,{className:"w-5 h-5 text-green-500"}),"Stop Impersonating Berhasil"]}),n.jsx(ve,{children:"Anda telah berhasil kembali ke akun admin Anda."})]}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"w-4 h-4 text-green-600 mr-2"}),n.jsxs("span",{className:"text-sm text-green-700",children:["Sekarang Anda mengakses sistem sebagai: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(q,{onClick:()=>p(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"OK"})})]})})]})};function ie({className:t,...e}){return n.jsx("div",{className:N("animate-pulse rounded-md bg-muted",t),...e})}const Tr=Jn,cn=o.forwardRef(({className:t,...e},s)=>n.jsx(ws,{ref:s,className:N("fixed top-0 z-[99999] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));cn.displayName=ws.displayName;const Pr=vt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dn=o.forwardRef(({className:t,variant:e,...s},a)=>n.jsx(Ss,{ref:a,className:N(Pr({variant:e}),t),...s}));dn.displayName=Ss.displayName;const Ar=o.forwardRef(({className:t,...e},s)=>n.jsx(Ns,{ref:s,className:N("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Ar.displayName=Ns.displayName;const un=o.forwardRef(({className:t,...e},s)=>n.jsx(Es,{ref:s,className:N("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(bt,{className:"h-4 w-4"})}));un.displayName=Es.displayName;const hn=o.forwardRef(({className:t,...e},s)=>n.jsx(ks,{ref:s,className:N("text-sm font-semibold",t),...e}));hn.displayName=ks.displayName;const fn=o.forwardRef(({className:t,...e},s)=>n.jsx(Cs,{ref:s,className:N("text-sm opacity-90",t),...e}));fn.displayName=Cs.displayName;function Bt(){const{toasts:t}=ln();return n.jsxs(Tr,{children:[t.map(function({id:e,title:s,description:a,action:r,...i}){return n.jsxs(dn,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(hn,{children:s}),a&&n.jsx(fn,{children:a})]}),r,n.jsx(un,{})]},e)}),n.jsx(cn,{})]})}const Qe=({children:t})=>{const{user:e,token:s,refreshUser:a}=re(),[r,i]=o.useState(!1),[u,l]=o.useState([]);return o.useState(""),o.useState(!1),o.useState(null),o.useEffect(()=>{e&&!e.office_id?(i(!0),s&&Ye("/api/offices",s).then(d=>l(d.offices||[]))):i(!1)},[e,s]),!e&&s?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"h-16 bg-white border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ie,{className:"h-8 w-8 rounded"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ie,{className:"h-4 w-32"}),n.jsx(ie,{className:"h-3 w-24"})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx(ie,{className:"h-8 w-8 rounded-full"})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(ie,{className:"h-8 w-48"}),n.jsx(ie,{className:"h-32 w-full"}),n.jsx(ie,{className:"h-32 w-full"})]})}),n.jsx(Bt,{})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Cr,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),n.jsx(Bt,{})]})};class _r extends o.Component{constructor(){super(...arguments);_t(this,"state",{hasError:!1})}static getDerivedStateFromError(s){return s.message.includes("403")||s.message.includes("Forbidden")?(window.showSessionExpiredModal&&window.showSessionExpiredModal(),{hasError:!1}):{hasError:!0,error:s}}componentDidCatch(s,a){if(console.error("ErrorBoundary caught an error:",s,a),s.message.includes("403")||s.message.includes("Forbidden")){window.showSessionExpiredModal&&window.showSessionExpiredModal();return}}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:n.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Terjadi Kesalahan"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maaf, terjadi kesalahan yang tidak terduga. Silakan coba refresh halaman atau hubungi administrator."}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>window.location.reload(),children:"Refresh Halaman"})})]})})}):this.props.children}}const Ir=o.lazy(()=>R(()=>import("./Dashboard-DfpLl3Cw.js"),__vite__mapDeps([0,1,2,3,4,5]))),Or=o.lazy(()=>R(()=>import("./Settings-CiTLtYqM.js"),__vite__mapDeps([6,1,2,3,7,8,9,10,11,12]))),Rr=o.lazy(()=>R(()=>import("./TemplateSelection-DWK3z-4Z.js"),__vite__mapDeps([13,1,2,3]))),Lr=o.lazy(()=>R(()=>import("./TemplateForm-C0iHQFwq.js"),__vite__mapDeps([14,1,2,7,11,15,3,16,17]))),Dr=o.lazy(()=>R(()=>import("./NotFound-C4_C9EaD.js"),__vite__mapDeps([18,1,2]))),Mr=o.lazy(()=>R(()=>import("./Index-Db8eN-p0.js"),__vite__mapDeps([19,1,2,7,3]))),Fr=o.lazy(()=>R(()=>import("./LetterDetail-a4qhZ1Yk.js"),__vite__mapDeps([20,1,2,3,16,4,17]))),Ur=o.lazy(()=>R(()=>import("./Letters-BKhFdl8o.js"),__vite__mapDeps([21,1,2,3,4,16,22,11,15,7]))),qr=o.lazy(()=>R(()=>import("./LetterPrintPreview-BgrxQlc8.js"),__vite__mapDeps([23,1,2,16]))),Qr=o.lazy(()=>R(()=>import("./Users-D82Bl77C.js"),__vite__mapDeps([24,1,2,7,11,4,12,3]))),zr=o.lazy(()=>R(()=>import("./PengajuanSelect-D5iiKWDK.js"),__vite__mapDeps([25,1,2,3,9,4]))),Kr=o.lazy(()=>R(()=>import("./PengajuanFileUpload-B0t6QCk4.js"),__vite__mapDeps([26,1,2,3,27,12]))),$r=o.lazy(()=>R(()=>import("./PengajuanIndex-sTOTG9kS.js"),__vite__mapDeps([28,1,2,3,11,4,22,12]))),Vr=o.lazy(()=>R(()=>import("./PengajuanDetail-BaciXX6g.js"),__vite__mapDeps([29,1,2,3,8,27,22,12,7,10]))),Hr=o.lazy(()=>R(()=>import("./PengajuanEdit-Bd035RIf.js"),__vite__mapDeps([30,1,2,3,7,12]))),Gr=o.lazy(()=>R(()=>import("./JobTypeConfiguration-Dw2Q-ij4.js"),__vite__mapDeps([31,1,2,3,7,9,10]))),Br=o.lazy(()=>R(()=>import("./AdminWilayahDashboard-CySVeIJS.js"),__vite__mapDeps([32,1,2,3,27,11,5]))),Wr=o.lazy(()=>R(()=>import("./AdminWilayahUploadPage-Cd02Fdpt.js"),__vite__mapDeps([33,1,2,3,11,12]))),Jr=o.lazy(()=>R(()=>import("./SKForm-CiAPVlBr.js"),__vite__mapDeps([34,1,2,15,7,3]))),O=()=>n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),Yr=new Ha,pe=({children:t})=>{const{user:e,loading:s}=re();return s?null:e?n.jsx(Qe,{children:t}):n.jsx(qe,{to:"/",replace:!0})},Wt=({children:t})=>{const{user:e,loading:s}=re();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"?n.jsx(qe,{to:"/dashboard",replace:!0}):n.jsx(Qe,{children:t})},Re=({children:t})=>{const{user:e,loading:s}=re();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"&&e.role!=="operator"&&e.role!=="admin_wilayah"?n.jsx(qe,{to:"/dashboard",replace:!0}):n.jsx(Qe,{children:t})},Xr=({children:t})=>{const{user:e,loading:s}=re();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"&&e.role!=="user"?n.jsx(qe,{to:"/dashboard",replace:!0}):n.jsx(Qe,{children:t})},Jt=({children:t})=>{const{user:e,loading:s}=re();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin_wilayah"?n.jsx(qe,{to:"/dashboard",replace:!0}):n.jsx(Qe,{children:t})},Zr=()=>n.jsxs(sa,{children:[n.jsx(I,{path:"/",element:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Mr,{})})}),n.jsx(I,{path:"/dashboard",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Ir,{})})})}),n.jsx(I,{path:"/generator",element:n.jsx(Re,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Rr,{})})})}),n.jsx(I,{path:"/generator/create/:templateId",element:n.jsx(Re,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Lr,{})})})}),n.jsx(I,{path:"/generator/sk",element:n.jsx(Xr,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Jr,{})})})}),n.jsx(I,{path:"/users",element:n.jsx(Wt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Qr,{})})})}),n.jsx(I,{path:"/settings",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Or,{})})})}),n.jsx(I,{path:"/letters/:id",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Fr,{})})})}),n.jsx(I,{path:"/letters",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Ur,{})})})}),n.jsx(I,{path:"/letters/:id/preview",element:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(qr,{})})}),n.jsx(I,{path:"/pengajuan",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx($r,{})})})}),n.jsx(I,{path:"/pengajuan/select",element:n.jsx(Re,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(zr,{})})})}),n.jsx(I,{path:"/pengajuan/:pengajuanId",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Vr,{})})})}),n.jsx(I,{path:"/pengajuan/:pengajuanId/upload",element:n.jsx(Re,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Kr,{})})})}),n.jsx(I,{path:"/pengajuan/:pengajuanId/edit",element:n.jsx(Re,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Hr,{})})})}),n.jsx(I,{path:"/job-type-configuration",element:n.jsx(Wt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Gr,{})})})}),n.jsx(I,{path:"/admin-wilayah/dashboard",element:n.jsx(Jt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Br,{})})})}),n.jsx(I,{path:"/admin-wilayah/upload/:pengajuanId",element:n.jsx(Jt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Wr,{})})})}),n.jsx(I,{path:"*",element:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Dr,{})})})]}),ei=()=>{const[t,e]=o.useState(!1),s=ta(),{logout:a}=re();return o.useEffect(()=>{window.showSessionExpiredModal=()=>{const l=window.location.pathname;l==="/"||l==="/login"||e(!0)},window.dispatchTokenUpdate=l=>{localStorage.setItem("token",l)};const r=l=>{var d,m;if(l.error&&typeof l.error=="object"){const h=l.error;if(h.status===403||(d=h.message)!=null&&d.includes("403")||(m=h.message)!=null&&m.includes("Forbidden")){l.preventDefault();const f=window.location.pathname;!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},i=l=>{var d,m;if(l.reason&&typeof l.reason=="object"){const h=l.reason;if(h.status===403||(d=h.message)!=null&&d.includes("403")||(m=h.message)!=null&&m.includes("Forbidden")){l.preventDefault();const f=window.location.pathname;!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},u=window.fetch;return window.fetch=async(...l)=>{try{const d=await u(...l);if(d.status===403&&!(typeof l[0]=="string"?l[0]:l[0].url).includes("/api/auth/")){const h=window.location.pathname;return!(h==="/"||h==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Response(JSON.stringify({success:!1,message:"Sesi berakhir, silakan login kembali"}),{status:403,headers:{"Content-Type":"application/json"}})}return d}catch(d){throw d}},window.addEventListener("error",r),window.addEventListener("unhandledrejection",i),()=>{window.removeEventListener("error",r),window.removeEventListener("unhandledrejection",i),window.fetch=u,delete window.showSessionExpiredModal,delete window.dispatchTokenUpdate}},[]),n.jsx(Ba,{client:Yr,children:n.jsxs(wa,{children:[t&&n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200",children:[n.jsx(Yn,{className:"w-16 h-16 text-yellow-500 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"Sesi Berakhir"}),n.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Sesi Anda telah habis. Silakan login kembali untuk melanjutkan."}),n.jsx("button",{className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{try{localStorage.removeItem("token")}catch{}try{a()}catch{}e(!1);try{window.location.assign("/")}catch{s("/",{replace:!0})}},children:"Login Ulang"})]})}),n.jsx(Wa,{children:n.jsx(Zr,{})})]})})},ti=()=>n.jsx(_r,{children:n.jsx(ea,{basename:"/FE",children:n.jsx(ei,{})})});{const t=(...e)=>{};console.log=t,console.debug=t,console.info=t,console.warn=t}Ts(document.getElementById("root")).render(n.jsx(ti,{}));export{q as B,Oe as D,on as I,ie as S,Ye as a,Ht as b,ln as c,xe as d,ge as e,ye as f,ve as g,ar as h,hi as i,ct as j,pi as k,fi as l,N as m,ci as n,di as o,ui as p,Ya as q,Xa as r,$s as s,kr as t,re as u,He as v,mi as w,Ja as x};
//# sourceMappingURL=index-De5wDLsd.js.map
