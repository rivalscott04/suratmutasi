import{j as e,H as D,K as b,N as E,al as U,aE as $,av as H,G as B,E as V,bc as G,a5 as J}from"./ui-vendor-e65TVV2G.js";import{r as t,g as L,d as O}from"./react-vendor-C8WR5ETM.js";import{C as m,a as h,b as o,c as x}from"./card-Cn5ZAoHG.js";import{b as i,B as y,D as Z,e as z,f as X,g as Q,h as Y}from"./index-DMfYXVru.js";import{P as ee}from"./progress-B6f2wJJu.js";import{C}from"./checkbox-BIoALTUh.js";import"./data-vendor-DtxkLsA5.js";const ae=({pengajuanId:_,jenisJabatanId:r,onFilesUploaded:l})=>{const[g,v]=t.useState([]),[j,P]=t.useState([]),[n,c]=t.useState("");t.useState({});const[M,N]=t.useState(!1),[p,w]=t.useState(!1),[S,R]=t.useState({});t.useEffect(()=>{v([{id:1,jenis_jabatan_id:r,file_type:"surat_pernyataan_persetujuan",display_name:"Surat Pernyataan Persetujuan dari Kepala Wilayah Kementerian Agama Provinsi",is_required:!0,description:"Surat pernyataan persetujuan dari kepala wilayah",is_active:!0},{id:2,jenis_jabatan_id:r,file_type:"surat_pernyataan_tidak_tugas_belajar",display_name:"Surat Pernyataan Tidak Sedang Menjalani Tugas Belajar atau Ikatan Dinas",is_required:!0,description:"Surat pernyataan tidak sedang menjalani tugas belajar",is_active:!0},{id:3,jenis_jabatan_id:r,file_type:"surat_pernyataan_tidak_hukuman_disiplin",display_name:"Surat Pernyataan Tidak Sedang Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat",is_required:!0,description:"Surat pernyataan tidak sedang dijatuhi hukuman disiplin",is_active:!0},{id:4,jenis_jabatan_id:r,file_type:"surat_pernyataan_tidak_proses_pidana",display_name:"Surat Pernyataan Tidak Sedang Menjalani Proses Pidana atau Pernah Dipidana Penjara",is_required:!0,description:"Surat pernyataan tidak sedang menjalani proses pidana",is_active:!0},{id:5,jenis_jabatan_id:r,file_type:"surat_pernyataan_tanggung_jawab_mutlak",display_name:"Surat Pernyataan Tanggung Jawab Mutlak (SPTJM)",is_required:!0,description:"Surat pernyataan tanggung jawab mutlak",is_active:!0},{id:6,jenis_jabatan_id:r,file_type:"surat_pengantar_permohonan_rekomendasi",display_name:"Surat Pengantar Permohonan Rekomendasi Pindah Tugas",is_required:!0,description:"Surat pengantar permohonan rekomendasi (pilih varian)",is_active:!0},{id:7,jenis_jabatan_id:r,file_type:"surat_pengantar_permohonan_sk",display_name:"Surat Pengantar Permohonan Penerbitan SK Pindah Tugas kepada Kepala Biro SDM Sekjen Kemenag RI",is_required:!0,description:"Surat pengantar permohonan penerbitan SK (untuk JFT Madya)",is_active:!0}])},[r]);const q=[{value:"6.1",label:"6.1 - Permohonan Persetujuan/Rekomendasi Pengangkatan ke Dalam Jabatan Pengawas (Untuk Eselon)"},{value:"6.2",label:"6.2 - Permohonan Pindah Tugas ke Dirjen Bimas Islam (Untuk Penyuluh Agama Islam)"},{value:"6.3",label:"6.3 - Permohonan Pindah Tugas ke Dirjen PENDIS (Untuk Guru, Pengawas, Kepala Madrasah)"},{value:"6.4",label:"6.4 - Permohonan Pindah Tugas ke Kepala Biro SDM Sekjen Kemenag RI (Untuk Analis SDM dan Asesor)"},{value:"6.5",label:"6.5 - Permohonan Pindah Tugas ke Kepala Biro Umum Sekjen Kemenag RI (Arsiparis, BARJAS)"},{value:"6.6",label:"6.6 - Permohonan Pindah Tugas ke Kepala Biro Keuangan dan BMN Sekjen Kemenag RI (Untuk Analis Pengelolaan Keuangan APBN dan Pranata Keuangan APBN)"},{value:"6.7",label:"6.7 - Permohonan Pindah Tugas ke Kepala Biro Perencanaan dan Penganggaran Sekjen Kemenag RI (Untuk Perencana)"},{value:"6.8",label:"6.8 - Permohonan Pindah Tugas ke Kepala Biro Humas (Untuk Pranata Humas)"},{value:"6.9",label:"6.9 - Permohonan Pindah Tugas ke Kepala BMP-PSDM Kemenag RI (Untuk Analis Kebijakan)"}],u=a=>{const s=j.find(d=>d.file_type===a);return s?s.upload_status:"not_uploaded"},f=()=>g.filter(s=>s.is_required).map(s=>s.file_type).every(s=>{const d=j.find(k=>k.file_type===s);return d&&d.upload_status==="verified"}),K=()=>{const a=g.filter(d=>d.is_required);return a.filter(d=>{const k=j.find(I=>I.file_type===d.file_type);return k&&k.upload_status==="verified"}).length/a.length*100},W=async()=>{w(!0);try{await new Promise(a=>setTimeout(a,2e3)),N(!1)}catch(a){console.error("Submit failed:",a)}finally{w(!1)}},A=(a,s)=>{R(d=>({...d,[a]:s}))},T=a=>{switch(u(a)){case"verified":return e.jsx(i,{className:"bg-green-600 text-white",children:"Verified"});case"rejected":return e.jsx(i,{className:"bg-red-600 text-white",children:"Rejected"});case"pending":return e.jsx(i,{className:"bg-yellow-600 text-white",children:"Pending"});default:return e.jsx(i,{className:"bg-gray-600 text-white",children:"Not Uploaded"})}},F=a=>{switch(u(a)){case"verified":return e.jsx(D,{className:"h-5 w-5 text-green-600"});case"rejected":return e.jsx(H,{className:"h-5 w-5 text-red-600"});case"pending":return e.jsx(U,{className:"h-5 w-5 text-yellow-600"});default:return e.jsx(b,{className:"h-5 w-5 text-gray-400"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{className:"bg-green-50 border-green-200",children:[e.jsx(h,{children:e.jsxs(o,{className:"text-green-800 flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Progress Upload File Admin Wilayah"]})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Kelengkapan File: ",Math.round(K()),"%"]}),e.jsx(i,{className:f()?"bg-green-600":"bg-yellow-600",children:f()?"Lengkap":"Belum Lengkap"})]}),e.jsx(ee,{value:K(),className:"h-2 [&>div]:bg-green-600"}),e.jsxs("p",{className:"text-sm text-green-600",children:[j.filter(a=>a.upload_status==="verified").length," dari ",g.filter(a=>a.is_required).length," file wajib telah diupload"]})]})})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsxs(o,{className:"text-gray-800 flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Section A: Berkas Kab/Kota"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"File yang sudah diupload oleh kabupaten/kota (read-only)"})]}),e.jsx(x,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-600 italic",children:'Berkas kabupaten/kota akan ditampilkan di sini setelah status pengajuan "Disetujui"'})})})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsxs(o,{className:"text-green-800 flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Section B: File Wajib Kanwil"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Checklist file wajib yang harus diupload oleh admin wilayah"})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:g.filter(a=>a.file_type!=="surat_pengantar_permohonan_rekomendasi").map(a=>e.jsx("div",{className:`p-4 border rounded-lg transition-all duration-200 ${u(a.file_type)==="verified"?"border-green-200 bg-green-50":u(a.file_type)==="rejected"?"border-red-200 bg-red-50":u(a.file_type)==="pending"?"border-yellow-200 bg-yellow-50":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{checked:S[a.file_type]||!1,onCheckedChange:s=>A(a.file_type,s),className:"mt-1"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[F(a.file_type),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.display_name}),a.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.is_required&&e.jsx(i,{className:"bg-red-100 text-red-800 border-red-200",children:"Wajib"}),T(a.file_type)]})]})})]})},a.id))})})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsxs(o,{className:"text-blue-800 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Section C: File Khusus (Varian 6.x)"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pilih varian sesuai jenis jabatan dan checklist file yang diperlukan"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Pilih Varian:"}),e.jsxs("select",{value:n,onChange:a=>c(a.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Pilih varian 6.x..."}),q.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),n&&e.jsx("div",{className:`p-4 border rounded-lg transition-all duration-200 ${u(`surat_pengantar_permohonan_rekomendasi_${n}`)==="verified"?"border-green-200 bg-green-50":u(`surat_pengantar_permohonan_rekomendasi_${n}`)==="rejected"?"border-red-200 bg-red-50":u(`surat_pengantar_permohonan_rekomendasi_${n}`)==="pending"?"border-yellow-200 bg-yellow-50":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{checked:S[`surat_pengantar_permohonan_rekomendasi_${n}`]||!1,onCheckedChange:a=>A(`surat_pengantar_permohonan_rekomendasi_${n}`,a),className:"mt-1"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[F(`surat_pengantar_permohonan_rekomendasi_${n}`),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:["Surat Pengantar Permohonan Rekomendasi - Varian ",n]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["File untuk varian ",n]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"bg-red-100 text-red-800 border-red-200",children:"Wajib"}),T(`surat_pengantar_permohonan_rekomendasi_${n}`)]})]})})]})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(y,{onClick:()=>N(!0),disabled:!f()||p,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3",size:"lg",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),p?"Mengirim...":"Kirim untuk Review"]})}),e.jsx(Z,{open:M,onOpenChange:N,children:e.jsxs(z,{className:"max-w-md",children:[e.jsxs(X,{children:[e.jsx(Q,{className:"text-green-800",children:"Konfirmasi Kirim untuk Review"}),e.jsx(Y,{children:"Apakah Anda yakin ingin mengirim pengajuan ini untuk review? Pastikan semua file wajib telah diupload dan diverifikasi."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(y,{variant:"outline",onClick:()=>N(!1),disabled:p,children:"Batal"}),e.jsx(y,{onClick:W,disabled:p,className:"bg-green-600 hover:bg-green-700 text-white",children:p?"Mengirim...":"Kirim untuk Review"})]})]})})]})},ce=()=>{const{pengajuanId:_}=L(),r=O(),[l,g]=t.useState(null),[v,j]=t.useState(!0);t.useEffect(()=>{g({id:_||"p001",pegawai:{nama:"Ahmad Supriadi",nip:"198501152010011001",jabatan:"Guru Madrasah Aliyah",kantor:"Kantor Kementerian Agama Kabupaten Bandung"},jenis_jabatan:"Guru",status:"approved",created_at:"2024-01-10T08:00:00Z",updated_at:"2024-01-15T10:30:00Z"}),j(!1)},[_]);const P=c=>new Date(c).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=c=>{switch(c){case"approved":return e.jsx(i,{className:"bg-green-600 text-white",children:"Disetujui"});case"admin_wilayah_upload":return e.jsx(i,{className:"bg-blue-600 text-white",children:"Upload Admin Wilayah"});case"admin_wilayah_review":return e.jsx(i,{className:"bg-yellow-600 text-white",children:"Review Admin Wilayah"});case"final_ready_for_sk":return e.jsx(i,{className:"bg-purple-600 text-white",children:"Siap SK"});default:return e.jsx(i,{className:"bg-gray-600 text-white",children:c})}};return v?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):l?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(y,{variant:"outline",onClick:()=>r("/admin-wilayah/dashboard"),className:"border-green-200 text-green-700 hover:bg-green-50",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload File Admin Wilayah"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Upload file tambahan untuk pengajuan mutasi pegawai"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"bg-green-100 text-green-800",children:"Admin Wilayah"}),n(l.status)]})]}),e.jsxs(m,{className:"border-green-200 bg-green-50",children:[e.jsx(h,{children:e.jsxs(o,{className:"text-green-800 flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Informasi Pengajuan"]})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:l.pegawai.nama}),e.jsxs("p",{className:"text-sm text-gray-600",children:["NIP: ",l.pegawai.nip]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:l.pegawai.jabatan}),e.jsx("p",{className:"text-sm text-gray-600",children:l.pegawai.kantor})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Jenis Jabatan"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.jenis_jabatan})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Tanggal Pengajuan"}),e.jsx("p",{className:"text-sm text-gray-600",children:P(l.created_at)})]})]})]})]})})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(o,{className:"text-green-800",children:"Upload File Admin Wilayah"})}),e.jsx(x,{children:e.jsx(ae,{pengajuanId:l.id,jenisJabatanId:1,onFilesUploaded:c=>{console.log("Files uploaded:",c)}})})]}),e.jsxs(m,{className:"border-blue-200 bg-blue-50",children:[e.jsx(h,{children:e.jsx(o,{className:"text-blue-800",children:"Panduan Upload File"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Section A:"})," Berkas Kab/Kota - File yang sudah diupload oleh kabupaten/kota (read-only)"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Section B:"})," File Wajib Kanwil - File wajib yang harus diupload (1-5, 7)"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Section C:"})," File Khusus - Pilih varian 6.x sesuai jenis jabatan"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full mt-2 flex-shrink-0"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Catatan:"})," Semua file wajib harus diupload dan diverifikasi sebelum dapat mengirim untuk review"]})]})]})})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsx(o,{className:"text-green-800",children:"Daftar File Wajib"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"File Wajib (1-5, 7):"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsx("li",{children:"1. Surat Pernyataan Persetujuan dari Kepala Wilayah"}),e.jsx("li",{children:"2. Surat Pernyataan Tidak Sedang Menjalani Tugas Belajar"}),e.jsx("li",{children:"3. Surat Pernyataan Tidak Sedang Dijatuhi Hukuman Disiplin"}),e.jsx("li",{children:"4. Surat Pernyataan Tidak Sedang Menjalani Proses Pidana"}),e.jsx("li",{children:"5. Surat Pernyataan Tanggung Jawab Mutlak (SPTJM)"}),e.jsx("li",{children:"7. Surat Pengantar Permohonan Penerbitan SK"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"File Khusus (6.x):"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[e.jsx("li",{children:"6.1 - Untuk Eselon (Jabatan Pengawas)"}),e.jsx("li",{children:"6.2 - Untuk Penyuluh Agama Islam"}),e.jsx("li",{children:"6.3 - Untuk Guru, Pengawas, Kepala Madrasah"}),e.jsx("li",{children:"6.4 - Untuk Analis SDM dan Asesor"}),e.jsx("li",{children:"6.5 - Untuk Arsiparis, BARJAS"}),e.jsx("li",{children:"6.6 - Untuk Analis Pengelolaan Keuangan APBN"}),e.jsx("li",{children:"6.7 - Untuk Perencana"}),e.jsx("li",{children:"6.8 - Untuk Pranata Humas"}),e.jsx("li",{children:"6.9 - Untuk Analis Kebijakan"})]})]})]})})})]})]})}):e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Pengajuan Tidak Ditemukan"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Pengajuan yang Anda cari tidak ditemukan atau tidak memiliki akses."}),e.jsxs(y,{onClick:()=>r("/admin-wilayah/dashboard"),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Kembali ke Dashboard"]})]})})})};export{ce as default};
//# sourceMappingURL=AdminWilayahUploadPage-i22_2iof.js.map
