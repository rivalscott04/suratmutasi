import{j as e,aj as Ta,a1 as He,ak as ze,K as Ba,$ as Fa,al as Ia,am as le,an as Te,ao as De,ah as Ma,a2 as Ra,Q as qa,q as Ye,ap as Ja}from"./ui-vendor-XUDKdrve.js";import{r as n,c as y}from"./react-vendor-C8WR5ETM.js";import{u as ua,c as ga,a as Y,S as b,I as v,B as m,b as U,D as de,d as oe,e as pe,f as fe,g as be,h as ke,i as Be,j as ye,k as Oa,l as Ee}from"./index-WIUaKMpU.js";import{C as $,a as V,b as H,c as z}from"./card-Be_nlSiO.js";import{L as j}from"./label-r4nEwlvC.js";import{T as Wa,a as La,b as te,c as re,d as Ga}from"./tabs-BKiXk3mK.js";import{C as Qe}from"./checkbox-NUt00XCG.js";import{S as Xe}from"./switch-BpDUl5M2.js";import{S as Ze,a as ea,b as aa,c as sa,d as ia}from"./select-4auSsVRB.js";import{A as na,a as ta,b as ra,c as la,d as da,e as oa,f as ca}from"./alert-dialog-C7_FctTB.js";const ma=({text:i,label:c="Teks",className:l})=>{const[u,_]=n.useState(!1),[Q,M]=n.useState(!1),B=async p=>{var A,L;(A=p==null?void 0:p.preventDefault)==null||A.call(p),(L=p==null?void 0:p.stopPropagation)==null||L.call(p);try{await navigator.clipboard.writeText(i)}catch{const g=document.createElement("textarea");g.value=i,g.style.position="fixed",g.style.opacity="0",document.body.appendChild(g),g.focus(),g.select();try{document.execCommand("copy")}catch{}document.body.removeChild(g)}_(!0),M(!0),setTimeout(()=>{_(!1),M(!1)},1400)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:B,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&B(p)},className:`inline-flex items-center gap-1 cursor-pointer group text-left ${l||""}`,title:`Salin ${c}`,children:[e.jsx("span",{children:i}),u?e.jsx(Ye,{className:"w-4 h-4 text-green-600"}):e.jsx(Ja,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600"}),e.jsx("span",{"aria-live":"polite",className:"sr-only",children:u?`${c} disalin`:""})]}),e.jsx(de,{open:Q,onOpenChange:M,children:e.jsx(oe,{className:"max-w-sm min-w-[320px] px-4 py-3 pr-12 rounded-xl border shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-green-50 text-green-600 border border-green-500",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-semibold",children:["Berhasil menyalin ",c]})]})})})]})},Ua=({token:i})=>{const[c,l]=n.useState([]),[u,_]=n.useState(!0),[Q,M]=n.useState(null),[B,p]=n.useState(""),[A,L]=n.useState(""),[g,X]=n.useState(1),C=20;ua();const{toast:R}=ga(),[w,G]=n.useState(!1),[d,ce]=n.useState(null),[Z,me]=n.useState(!1);n.useEffect(()=>{const t=setTimeout(()=>L(B),300);return()=>clearTimeout(t)},[B]),n.useEffect(()=>{i&&(_(!0),Y("/api/employees",i).then(t=>l(t.pegawai||[])).catch(t=>M(t.message||"Gagal mengambil data pegawai")).finally(()=>_(!1)))},[i]);const q=c.filter(t=>{var f,P,K;return((f=t.nama)==null?void 0:f.toLowerCase().includes(A.toLowerCase()))||((P=t.nip)==null?void 0:P.toLowerCase().includes(A.toLowerCase()))||((K=t.unit_kerja)==null?void 0:K.toLowerCase().includes(A.toLowerCase()))}),S=Math.ceil(q.length/C),ue=q.slice((g-1)*C,g*C),Ie=(()=>{if(S<=5)return Array.from({length:S},(K,D)=>D+1);let f=Math.max(1,g-2),P=Math.min(S,g+2);return g<=3?(P=5,f=1):g>=S-2&&(P=S,f=S-5+1),Array.from({length:P-f+1},(K,D)=>f+D)})(),ee=t=>{t<1||t>S||X(t)};return n.useEffect(()=>{X(1)},[A]),u?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(b,{className:"h-8 w-1/2 mx-auto mb-4"}),e.jsx(b,{className:"h-10 w-full mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"})]}):Q?e.jsx("div",{className:"py-8 text-center text-error",children:Q}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(v,{placeholder:"Cari pegawai...",value:B,onChange:t=>p(t.target.value),className:"w-full"})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(m,{variant:"outline",onClick:()=>G(!0),className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-50",children:[e.jsx(le,{className:"h-4 w-4"}),"Tambah Pegawai"]})})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"NIP"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Unit Kerja"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Jabatan"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Pangkat/Gol"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ue.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(ma,{text:t.nama,label:"Nama"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(ma,{text:t.nip,label:"NIP",className:"font-mono"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.unit_kerja}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.jabatan}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.golongan}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>{ce(t),G(!0)},className:"flex items-center gap-1",children:[e.jsx(Te,{className:"h-3 w-3"}),"Edit"]})})]},t.id))})]})})}),S>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",(g-1)*C+1," sampai ",Math.min(g*C,q.length)," dari ",q.length," pegawai"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>ee(g-1),disabled:g===1,className:"border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800 disabled:border-gray-300 disabled:text-gray-400",children:"Sebelumnya"}),Ie.map(t=>e.jsx(m,{variant:g===t?"default":"outline",size:"sm",onClick:()=>ee(t),className:g===t?"bg-green-600 hover:bg-green-700 text-white":"",children:t},t)),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>ee(g+1),disabled:g===S,className:"border-green-600 text-green-600 hover:bg-green-50 disabled:border-gray-300 disabled:text-gray-400",children:"Selanjutnya"})]})]}),e.jsx(de,{open:w,onOpenChange:G,children:e.jsxs(oe,{className:"max-w-2xl",children:[e.jsxs(pe,{children:[e.jsx(fe,{children:d?"Edit Pegawai":"Tambah Pegawai Baru"}),e.jsx(be,{children:d?"Edit informasi pegawai":"Masukkan informasi pegawai baru"})]}),e.jsxs("form",{onSubmit:async t=>{t.preventDefault(),me(!0);try{const f=new FormData(t.currentTarget),P={nama:f.get("nama"),unit_kerja:f.get("unit_kerja"),jabatan:f.get("jabatan"),golongan:f.get("golongan")},K=!!d,D=K?d==null?void 0:d.nip:f.get("nip")||void 0;if(K){if(!D)throw new Error("NIP tidak ditemukan untuk update");await Be(`/api/employees/${D}`,P,i),R({title:"Berhasil",description:"Data pegawai berhasil diperbarui"})}else{const J=f.get("nip")||void 0;await ye("/api/employees",{...P,nip:J},i),R({title:"Berhasil",description:"Pegawai baru berhasil ditambahkan"})}const ve=await Y("/api/employees",i);l(ve.pegawai||[]),G(!1),ce(null)}catch(f){R({title:"Gagal",description:f.message||"Terjadi kesalahan",variant:"destructive"})}finally{me(!1)}},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"nama",children:"Nama Lengkap"}),e.jsx(v,{id:"nama",name:"nama",defaultValue:(d==null?void 0:d.nama)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"nip",children:"NIP"}),e.jsx(v,{id:"nip",name:"nip",defaultValue:(d==null?void 0:d.nip)||"",required:!0,pattern:"[0-9]{18}",title:"NIP harus 18 digit angka",disabled:!!d,readOnly:!!d})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"unit_kerja",children:"Unit Kerja"}),e.jsx(v,{id:"unit_kerja",name:"unit_kerja",defaultValue:(d==null?void 0:d.unit_kerja)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"jabatan",children:"Jabatan"}),e.jsx(v,{id:"jabatan",name:"jabatan",defaultValue:(d==null?void 0:d.jabatan)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"golongan",children:"Pangkat/Golongan"}),e.jsx(v,{id:"golongan",name:"golongan",defaultValue:(d==null?void 0:d.golongan)||"",required:!0})]})]}),e.jsxs(ke,{className:"mt-6",children:[e.jsx(Oa,{asChild:!0,children:e.jsx(m,{type:"button",variant:"outline",className:"border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900",children:"Batal"})}),e.jsx(m,{type:"submit",disabled:Z,className:"bg-green-600 hover:bg-green-700 text-white",children:Z?"Menyimpan...":d?"Update":"Simpan"})]})]})]})})]})},ss=()=>{const{user:i,token:c}=ua(),{toast:l}=ga(),[u,_]=n.useState({namakantor:"",kabkota:"",alamat:"",telepon:"",fax:"",email:"",website:""}),[Q,M]=n.useState({tingkat1:"KEMENTERIAN AGAMA REPUBLIK INDONESIA",tingkat2:"KANTOR WILAYAH KEMENTERIAN AGAMA",tingkat3:"PROVINSI NUSA TENGGARA BARAT",alamat:"",telepon:"",fax:"",email:"",website:""}),[B,p]=n.useState(!0),[A,L]=n.useState(null),[g,X]=n.useState(null),[C,R]=n.useState(null),w={namakantor:y.useRef(null),kabkota:y.useRef(null),alamat:y.useRef(null),telepon:y.useRef(null),email:y.useRef(null),website:y.useRef(null),fax:y.useRef(null)};y.useRef(null),y.useRef(null),y.useRef(null),y.useRef(null),y.useRef(null),y.useRef(null),y.useRef(null),y.useRef(null);const[G,d]=n.useState(!1),[ce,Z]=n.useState(null),[me,q]=n.useState(""),[S,ue]=n.useState(!1),[Fe,Ie]=n.useState(null),[ee,t]=n.useState(""),[f,P]=n.useState([]),[K,D]=n.useState(!0),[ve,J]=n.useState(!1),[ae,Me]=n.useState(null),[Re,qe]=n.useState(!1),[N,O]=n.useState({jenis_jabatan:"",total_dokumen:0,required_files:[],is_active:!0}),se=[{id:"surat_pengantar",name:"Surat Pengantar",category:"Dokumen Pengantar"},{id:"surat_permohonan_dari_yang_bersangkutan",name:"Surat Permohonan Dari Yang Bersangkutan",category:"Dokumen Pengantar"},{id:"surat_keputusan_cpns",name:"Surat Keputusan CPNS",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_pns",name:"Surat Keputusan PNS",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_kenaikan_pangkat_terakhir",name:"Surat Keputusan Kenaikan Pangkat Terakhir",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_jabatan_terakhir",name:"Surat Keputusan Jabatan Terakhir",category:"Dokumen Kepegawaian"},{id:"skp_2_tahun_terakhir",name:"SKP 2 Tahun Terakhir",category:"Dokumen Kepegawaian"},{id:"surat_keterangan_bebas_temuan_inspektorat",name:"Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama",category:"Dokumen Keterangan"},{id:"surat_keterangan_anjab_abk_instansi_asal",name:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal",category:"Dokumen Keterangan"},{id:"surat_keterangan_anjab_abk_instansi_penerima",name:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima",category:"Dokumen Keterangan"},{id:"surat_pernyataan_tidak_hukuman_disiplin",name:"Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK",category:"Dokumen Pernyataan"},{id:"surat_persetujuan_mutasi_asal",name:"Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki",category:"Dokumen Persetujuan"},{id:"surat_lolos_butuh_ppk",name:"Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju",category:"Dokumen Persetujuan"},{id:"peta_jabatan",name:"Peta Jabatan",category:"Dokumen Pendukung"},{id:"hasil_uji_kompetensi",name:"Hasil Uji Kompetensi",category:"Dokumen Pendukung"},{id:"hasil_evaluasi_pertimbangan_baperjakat",name:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",category:"Dokumen Pendukung"},{id:"anjab_abk_instansi_asal",name:"Anjab/Abk Instansi Asal",category:"Dokumen Pendukung"},{id:"anjab_abk_instansi_penerima",name:"Anjab/Abk Instansi Penerima",category:"Dokumen Pendukung"},{id:"surat_keterangan_tidak_tugas_belajar",name:"Surat Keterangan Tidak Sedang Tugas Belajar",category:"Dokumen Keterangan"},{id:"sptjm_pimpinan_satker_asal",name:"SPTJM Pimpinan Satker dari Asal",category:"Dokumen Pernyataan"},{id:"sptjm_pimpinan_satker_penerima",name:"SPTJM Pimpinan Satker dari Penerima",category:"Dokumen Pernyataan"},{id:"surat_rekomendasi_instansi_pembina",name:"Surat Rekomendasi Instansi Pembina",category:"Dokumen Rekomendasi"}];n.useEffect(()=>{!i||!c||(i.role==="admin"?(je(),Ea()):i.role==="admin_wilayah"&&je())},[i==null?void 0:i.role,c,i==null?void 0:i.id]),n.useEffect(()=>{!i||!c||i.role==="admin"&&_e()},[c,i==null?void 0:i.role,i==null?void 0:i.id]),n.useEffect(()=>{!i||!c||(p(!0),Y("/api/offices",c).then(a=>{var o,r;let s=null;i!=null&&i.office_id&&(s=(o=a.offices)==null?void 0:o.find(k=>k.id===i.office_id)),!s&&(i!=null&&i.kabkota)&&(s=(r=a.offices)==null?void 0:r.find(k=>k.kabkota===i.kabkota)),s?(X(s.id),_({namakantor:s.namakantor||s.name||"",kabkota:s.kabkota||"",alamat:s.alamat||s.address||"",telepon:s.telepon||s.phone||"",fax:s.fax||"",email:s.email||"",website:s.website||""})):(X(null),_({namakantor:"",kabkota:"",alamat:"",telepon:"",fax:"",email:"",website:""}))}).catch(a=>{console.error("Error loading office settings:",a),L("Gagal mengambil data kantor")}).finally(()=>p(!1)))},[c,i==null?void 0:i.id,i==null?void 0:i.office_id,i==null?void 0:i.kabkota]),n.useEffect(()=>{const a=localStorage.getItem("kanwilSettings");if(a)try{const s=JSON.parse(a);M(o=>({...o,tingkat1:s.tingkat1||"KEMENTERIAN AGAMA REPUBLIK INDONESIA",tingkat2:s.tingkat2||"KANTOR WILAYAH KEMENTERIAN AGAMA",tingkat3:s.tingkat3||"PROVINSI NUSA TENGGARA BARAT",alamat:s.alamat||"",telepon:s.telepon||"",fax:s.fax||"",email:s.email||"",website:s.website||""}))}catch(s){console.error("Error parsing kanwil settings:",s)}},[]);const _e=async()=>{try{D(!0);const a=await Y("/api/job-type-configurations",c);a.success&&P(a.data)}catch(a){console.error("Error fetching job configs:",a),l({title:"Error",description:"Gagal mengambil data konfigurasi jabatan",variant:"destructive"})}finally{D(!1)}},ha=async()=>{var a,s;if(R(null),!u.alamat.trim()){R("alamat"),(a=w.alamat.current)==null||a.focus(),l({title:"Alamat wajib diisi.",description:"Silakan isi alamat kantor.",variant:"destructive"});return}if(u.email&&!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(u.email)){R("email"),(s=w.email.current)==null||s.focus(),l({title:"Format email tidak valid.",description:"Silakan isi email dengan format yang benar.",variant:"destructive"});return}try{const o=await Be(`/api/offices/${g}`,{alamat:u.alamat,telepon:u.telepon,fax:u.fax,email:u.email,website:u.website},c);Z(!0),q("Pengaturan kantor berhasil disimpan!"),d(!0)}catch{Z(!1),q("Gagal menyimpan pengaturan kantor. Silakan coba lagi."),d(!0)}},xa=()=>{l({title:"Fitur Export",description:"Fitur export data akan segera tersedia."})},ja=()=>{l({title:"Fitur Import",description:"Fitur import data akan segera tersedia."})},[Ne,we]=n.useState([]),[pa,Je]=n.useState(!0),[fa,ie]=n.useState(!1),[ge,Se]=n.useState(null),[Oe,We]=n.useState(!1),[he,xe]=n.useState(!1),[E,Pe]=n.useState(null),[W,Le]=n.useState(!1),[h,T]=n.useState({jenis_jabatan_id:"",name:"",description:"",selectedFiles:{},selectedVariant:"6.1",is_active:!0}),Ae=[{id:"surat_rekomendasi_kanwil",name:"Surat Rekomendasi dari Instansi Pembina",category:"Dokumen Instansi Pembina",is_required:!0,description:"Surat rekomendasi dari instansi pembina dengan pilihan varian 6.1-6.9"},{id:"surat_persetujuan_kepala_wilayah",name:"Surat Persetujuan Kepala Wilayah",category:"Dokumen Kanwil",is_required:!0,description:"Surat persetujuan dari Kepala Wilayah Kementerian Agama Provinsi"},{id:"surat_pengantar_permohonan_rekomendasi",name:"Surat Pengantar Permohonan Rekomendasi",category:"Dokumen Pengantar",is_required:!0,description:"Surat pengantar permohonan rekomendasi pindah tugas"},{id:"surat_pernyataan_tidak_tugas_belajar",name:"Surat Pernyataan Tidak Sedang Menjalani Tugas Belajar atau Ikatan Dinas",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tidak sedang menjalani tugas belajar atau ikatan dinas"},{id:"surat_pernyataan_tidak_hukuman_disiplin",name:"Surat Pernyataan Tidak Sedang Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tidak sedang dijatuhi hukuman disiplin tingkat sedang atau berat"},{id:"surat_pernyataan_tidak_proses_pidana",name:"Surat Pernyataan Tidak Sedang Menjalani Proses Pidana atau Pernah Dipidana Penjara",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tidak sedang menjalani proses pidana atau pernah dipidana penjara"},{id:"surat_pernyataan_tanggung_jawab_mutlak",name:"Surat Pernyataan Tanggung Jawab Mutlak (SPTJM)",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tanggung jawab mutlak untuk pengajuan mutasi"},{id:"surat_keterangan_bebas_temuan_inspektorat",name:"Surat Keterangan Bebas Temuan (SKBT) - Inspektorat",category:"Dokumen Kanwil",is_required:!0,description:"SKBT diterbitkan Inspektorat Jenderal Kemenag"},{id:"hasil_evaluasi_pertimbangan_baperjakat",name:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",category:"Dokumen Kanwil",is_required:!0,description:"Hasil evaluasi dan pertimbangan BAPERJAKAT dari Kanwil Provinsi"},{id:"surat_rekomendasi_kanwil_khusus",name:"Surat Rekomendasi Khusus dari Kanwil (Khusus Penghulu)",category:"Dokumen Keterangan",is_required:!0,description:"Surat rekomendasi khusus dari Kanwil Provinsi untuk jabatan Penghulu"},{id:"hasil_assessment",name:"Hasil Assessment",category:"Dokumen Kanwil",is_required:!0,description:"Dokumen hasil uji kompetensi/assessment dari Kanwil/otoritas terkait"}],[Ge,Ce]=n.useState([]),ba=[{value:"6.1",label:"6.1 - Permohonan Persetujuan/Rekomendasi Pengangkatan ke Dalam Jabatan Pengawas (Untuk Eselon)"},{value:"6.2",label:"6.2 - Permohonan Pindah Tugas ke Dirjen Bimas Islam (Untuk Penghulu)"},{value:"6.3",label:"6.3 - Permohonan Pindah Tugas ke Dirjen PENDIS (Untuk Guru, Pengawas, Kepala Madrasah)"},{value:"6.4",label:"6.4 - Permohonan Pindah Tugas ke Kepala Biro SDM Sekjen Kemenag RI (Untuk Analis SDM dan Asesor)"},{value:"6.5",label:"6.5 - Permohonan Pindah Tugas ke Kepala Biro Umum Sekjen Kemenag RI (Arsiparis, BARJAS)"},{value:"6.6",label:"6.6 - Permohonan Pindah Tugas ke Kepala Biro Keuangan dan BMN Sekjen Kemenag RI (Untuk Analis Pengelolaan Keuangan APBN dan Pranata Keuangan APBN)"},{value:"6.7",label:"6.7 - Permohonan Pindah Tugas ke Kepala Biro Perencanaan dan Penganggaran Sekjen Kemenag RI (Untuk Perencana)"},{value:"6.8",label:"6.8 - Permohonan Pindah Tugas ke Kepala Biro Humas (Untuk Pranata Humas)"},{value:"6.9",label:"6.9 - Permohonan Pindah Tugas ke Kepala BMP-PSDM Kemenag RI (Untuk Analis Kebijakan)"}],Ue=()=>{O({jenis_jabatan:"",total_dokumen:0,required_files:[],is_active:!0}),Me(null),J(!0)},ka=a=>{var s;O({jenis_jabatan:a.jenis_jabatan,total_dokumen:((s=a.required_files)==null?void 0:s.length)||0,required_files:a.required_files||[],is_active:a.is_active}),Me(a),J(!0)},ya=async()=>{if(!N.jenis_jabatan.trim()){l({title:"Error",description:"Jenis jabatan wajib diisi",variant:"destructive"});return}if(N.required_files.length===0){l({title:"Error",description:"Pilih minimal satu dokumen yang diperlukan",variant:"destructive"});return}try{qe(!0);const a={jenis_jabatan:N.jenis_jabatan,min_dokumen:N.required_files.length,max_dokumen:N.required_files.length,required_files:N.required_files,is_active:N.is_active};ae?(await Be(`/api/job-type-configurations/${ae.id}`,a,c),l({title:"Sukses",description:"Konfigurasi jabatan berhasil diperbarui"})):(await ye("/api/job-type-configurations",a,c),l({title:"Sukses",description:"Konfigurasi jabatan berhasil ditambahkan"})),J(!1),_e()}catch(a){console.error("Error saving job config:",a),l({title:"Error",description:"Gagal menyimpan konfigurasi jabatan",variant:"destructive"})}finally{qe(!1)}},va=async a=>{try{await Ee(`/api/job-type-configurations/${a}`,c),l({title:"Sukses",description:"Konfigurasi jabatan berhasil dihapus"}),_e()}catch(s){console.error("Error deleting job config:",s),l({title:"Error",description:"Gagal menghapus konfigurasi jabatan",variant:"destructive"})}},_a=a=>{O(s=>{const o=s.required_files.includes(a)?s.required_files.filter(r=>r!==a):[...s.required_files,a];return{...s,required_files:o,total_dokumen:o.length}})},Na=()=>{const a=se.map(s=>s.id);O(s=>({...s,required_files:a,total_dokumen:a.length})),l({title:"Berhasil",description:"Semua dokumen telah dipilih"})},wa=()=>{O(a=>({...a,required_files:[],total_dokumen:0})),l({title:"Berhasil",description:"Semua dokumen telah dihapus dari pilihan"})},$e=()=>{if((i==null?void 0:i.role)!=="admin"){l({title:"Error",description:"Hanya superadmin yang dapat menambah konfigurasi",variant:"destructive"});return}T({jenis_jabatan_id:"",name:"",description:"",selectedFiles:{},selectedVariant:"6.1",is_active:!0}),Se(null),ie(!0)},Sa=a=>{if((i==null?void 0:i.role)!=="admin"){l({title:"Error",description:"Hanya superadmin yang dapat mengedit konfigurasi",variant:"destructive"});return}const s={};Array.isArray(a.files)&&a.files.forEach(o=>{const r=o.file_type||o.id;r&&(s[String(r)]=!0)}),T({jenis_jabatan_id:a.jenis_jabatan_id.toString(),name:a.name,description:a.description,selectedFiles:s,selectedVariant:"6.1",is_active:a.is_active}),Se(a),ie(!0)},Pa=async a=>{if((i==null?void 0:i.role)!=="admin"){l({title:"Error",description:"Hanya superadmin yang dapat menghapus konfigurasi",variant:"destructive"});return}Pe(a),xe(!0)},Aa=async()=>{if(E)try{Le(!0),console.log("ðŸ—‘ï¸ Deleting config:",E),console.log("ðŸ“ Files to delete:",E.files);const a=E.files.map(async s=>(console.log(`ðŸ—‘ï¸ Deleting file config ID: ${s.id}, Type: ${s.file_type}`),Ee(`/api/admin-wilayah-file-config/${s.id}`,c)));await Promise.all(a),l({title:"Berhasil",description:"Konfigurasi admin wilayah berhasil dihapus"}),xe(!1),Pe(null),je()}catch(a){console.error("âŒ Error deleting admin wilayah config:",a),l({title:"Error",description:"Gagal menghapus konfigurasi admin wilayah",variant:"destructive"})}finally{Le(!1)}},Ve=()=>{W||(xe(!1),Pe(null))};n.useEffect(()=>{const a=s=>{s.key==="Escape"&&he&&!W&&Ve()};return he&&document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[he,W]);const Ca=a=>{T(s=>({...s,selectedFiles:{...s.selectedFiles,[a]:!s.selectedFiles[a]}}))},Ka=a=>{T(s=>({...s,selectedVariant:a}))},Da=async()=>{var k,F;const a=Ge.find(x=>x.id.toString()===h.jenis_jabatan_id),s=a?`Konfigurasi ${a.jenis_jabatan}`:"Konfigurasi Admin Wilayah",o=a?`Konfigurasi file wajib untuk jabatan ${a.jenis_jabatan}`:"Konfigurasi file wajib Admin Wilayah";if(!h.jenis_jabatan_id){l({title:"Error",description:"Jenis jabatan wajib dipilih",variant:"destructive"});return}(k=h.name)!=null&&k.trim()||T(x=>({...x,name:s})),(F=h.description)!=null&&F.trim()||T(x=>({...x,description:o}));const r=Ae.filter(x=>h.selectedFiles[x.id]);if(r.length===0){l({title:"Error",description:"Pilih minimal satu file yang required",variant:"destructive"});return}try{if(We(!0),ge){const x=Ne.find(I=>I.jenis_jabatan_id===parseInt(h.jenis_jabatan_id));if(x){console.log("ðŸ”„ Updating configs, deleting old ones:",x.files);const I=x.files.map(async Ke=>(console.log(`ðŸ—‘ï¸ Deleting old file config ID: ${Ke.id}, Type: ${Ke.file_type}`),Ee(`/api/admin-wilayah-file-config/${Ke.id}`,c)));await Promise.all(I)}for(const I of r)await ye("/api/admin-wilayah-file-config",{jenis_jabatan_id:parseInt(h.jenis_jabatan_id),file_type:I.id,display_name:I.name,is_required:I.is_required,description:I.description,is_active:h.is_active},c);l({title:"Berhasil",description:"Konfigurasi admin wilayah berhasil diperbarui"})}else{for(const x of r)await ye("/api/admin-wilayah-file-config",{jenis_jabatan_id:parseInt(h.jenis_jabatan_id),file_type:x.id,display_name:x.name,is_required:x.is_required,description:x.description,is_active:h.is_active},c);l({title:"Berhasil",description:"Konfigurasi admin wilayah berhasil dibuat"})}ie(!1),Se(null),je()}catch(x){console.error("Error saving admin wilayah config:",x),l({title:"Error",description:(x==null?void 0:x.message)||"Gagal menyimpan konfigurasi admin wilayah",variant:"destructive"})}finally{We(!1)}},je=async()=>{try{Je(!0);const a=await Y("/api/admin-wilayah-file-config",c);if(console.log("ðŸ“¡ API Response:",a),a!=null&&a.success&&Array.isArray(a.data)){console.log("ðŸ“Š Raw data from API:",a.data);const s=a.data.map(r=>{var k,F;return{id:r.id,jenis_jabatan_id:r.jenis_jabatan_id,name:((k=r.jenis_jabatan)==null?void 0:k.jenis_jabatan)||`Jabatan ${r.jenis_jabatan_id}`,description:`Konfigurasi file wajib untuk jabatan ${((F=r.jenis_jabatan)==null?void 0:F.jenis_jabatan)||r.jenis_jabatan_id}`,files:[{id:r.id,file_type:r.file_type,name:r.display_name,description:r.description,is_required:r.is_required,is_active:r.is_active}],is_active:r.is_active,created_at:r.created_at,updated_at:r.updated_at}});console.log("ðŸ”„ Transformed configs:",s);const o=s.reduce((r,k)=>{const F=r.find(x=>x.jenis_jabatan_id===k.jenis_jabatan_id);return F?F.files.push(...k.files):r.push(k),r},[]);console.log("ðŸ“¦ Grouped configs:",o),we(o)}else console.warn("âŒ Admin wilayah config API response invalid:",a),we([])}catch(a){console.error("âŒ Error fetching admin wilayah configs:",a),we([])}finally{Je(!1)}},Ea=async()=>{try{const a=await Y("/api/admin-wilayah-file-config/available-job-types",c);a!=null&&a.success&&Array.isArray(a.data)?Ce(a.data):(console.warn("Available job types API response invalid:",a),Ce([]))}catch(a){console.error("Error fetching available job types:",a),Ce([])}};if(!i)return e.jsx("div",{className:"py-8 text-center",children:"Silakan login terlebih dahulu."});if(!c)return e.jsx("div",{className:"py-8 text-center",children:"Memuat pengaturan..."});const ne=(i==null?void 0:i.role)==="admin";return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Pengaturan"}),e.jsx("p",{className:"text-gray-600",children:"Kelola pengaturan kantor, pegawai, dan sistem aplikasi"})]}),e.jsxs(Wa,{defaultValue:"office",className:"space-y-6",children:[e.jsxs(La,{className:`grid w-full ${ne?"grid-cols-5":"grid-cols-4"}`,children:[e.jsxs(te,{value:"office",className:"flex items-center space-x-2",children:[e.jsx(Ta,{className:"h-4 w-4"}),e.jsx("span",{children:"Kantor"})]}),ne&&e.jsxs(te,{value:"job-config",className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{children:"Konfigurasi Jabatan"})]}),ne&&e.jsxs(te,{value:"admin-wilayah-config",className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{children:"Konfigurasi Berkas Admin Wilayah"})]}),e.jsxs(te,{value:"employees",className:"flex items-center space-x-2",children:[e.jsx(Ba,{className:"h-4 w-4"}),e.jsx("span",{children:"Pegawai"})]}),e.jsxs(te,{value:"system",className:"flex items-center space-x-2",children:[e.jsx(Fa,{className:"h-4 w-4"}),e.jsx("span",{children:"Sistem"})]})]}),e.jsx(re,{value:"office",children:e.jsxs($,{children:[e.jsx(V,{children:e.jsx(H,{children:"Pengaturan Kantor"})}),e.jsx(z,{className:"space-y-4",children:B?e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"h-6 w-1/3 mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"}),e.jsx(b,{className:"h-24 w-full mb-2"}),e.jsx(b,{className:"h-10 w-1/2 mb-2"}),e.jsx(b,{className:"h-10 w-1/2 mb-2"}),e.jsx(b,{className:"h-10 w-1/2 mb-2"})]}):A?e.jsx("div",{className:"text-error",children:A}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"namakantor",children:"Nama Kantor"}),e.jsx(v,{id:"namakantor",ref:w.namakantor,value:u.namakantor,readOnly:!0,disabled:!0,className:C==="namakantor"?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"kabkota",children:"Kabupaten/Kota"}),e.jsx(v,{id:"kabkota",ref:w.kabkota,value:u.kabkota,readOnly:!0,disabled:!0,className:C==="kabkota"?"border-red-500":""})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"alamat",children:"Alamat"}),e.jsx(Ga,{id:"alamat",ref:w.alamat,value:u.alamat,onChange:a=>_({...u,alamat:a.target.value}),rows:3,className:C==="alamat"?"border-red-500":""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"telepon",children:"Telepon"}),e.jsx(v,{id:"telepon",ref:w.telepon,value:u.telepon,onChange:a=>_({...u,telepon:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"fax",children:"Fax"}),e.jsx(v,{id:"fax",value:u.fax,onChange:a=>_({...u,fax:a.target.value}),ref:w.fax})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(v,{id:"email",ref:w.email,type:"email",value:u.email,onChange:a=>_({...u,email:a.target.value}),placeholder:"Contoh: kantor@kemenag.go.id",className:C==="email"?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"website",children:"Website"}),e.jsx(v,{id:"website",ref:w.website,value:u.website,onChange:a=>_({...u,website:a.target.value}),placeholder:"Contoh: kemenag.go.id"})]})]}),e.jsxs(m,{onClick:ha,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ia,{className:"mr-2 h-4 w-4"}),"Simpan Pengaturan Kantor"]})]})})]})}),ne&&e.jsx(re,{value:"job-config",children:e.jsxs($,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(H,{children:"Konfigurasi Jabatan"}),e.jsxs(m,{onClick:Ue,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Tambah Konfigurasi"]})]})}),e.jsx(z,{className:"space-y-4",children:K?e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"h-6 w-1/3 mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"}),e.jsx(b,{className:"h-10 w-full mb-2"})]}):f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(He,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada konfigurasi jabatan"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Mulai dengan menambahkan konfigurasi jabatan pertama Anda."}),e.jsxs(m,{onClick:Ue,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Tambah Konfigurasi Pertama"]})]}):e.jsx("div",{className:"space-y-4",children:f.map(a=>{var s;return e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.jenis_jabatan}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((s=a.required_files)==null?void 0:s.length)||0," dokumen diperlukan"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:a.is_active?"bg-green-100 text-green-800 border-green-200 hover:bg-green-100":"bg-red-100 text-red-800 border-red-200 hover:bg-red-100",children:a.is_active?"Aktif":"Nonaktif"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>ka(a),className:"border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>va(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(De,{className:"w-4 h-4"})})]})]}),a.required_files&&a.required_files.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.required_files.map(o=>{const r=se.find(k=>k.id===o);return r?e.jsx(U,{variant:"outline",className:"text-xs",children:r.name},o):null})})]},a.id)})})})]})}),ne&&e.jsx(re,{value:"admin-wilayah-config",children:e.jsxs($,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(H,{children:"Konfigurasi Berkas Admin Wilayah"}),(i==null?void 0:i.role)==="admin"&&e.jsxs(m,{onClick:$e,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Tambah Konfigurasi"]})]})}),e.jsx(z,{children:pa?e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"h-6 w-1/3 mb-2"}),e.jsx(b,{className:"h-32 w-full mb-2"}),e.jsx(b,{className:"h-32 w-full mb-2"})]}):Ne.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada konfigurasi"}),e.jsx("p",{className:"text-gray-600 mb-4",children:(i==null?void 0:i.role)==="admin"?"Buat konfigurasi pertama untuk admin wilayah":"Belum ada konfigurasi yang dibuat oleh superadmin"}),(i==null?void 0:i.role)==="admin"&&e.jsxs(m,{onClick:$e,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Tambah Konfigurasi"]})]}):e.jsx("div",{className:"space-y-4",children:Ne.map(a=>e.jsxs($,{className:"border-green-200",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-green-800",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.files.length," berkas diperlukan"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:a.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:a.is_active?"Aktif":"Nonaktif"}),(i==null?void 0:i.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"sm",variant:"outline",onClick:()=>Sa(a),className:"text-green-600 border-green-200 hover:bg-green-50",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>Pa(a),className:"text-red-600 border-red-200 hover:bg-red-50",children:e.jsx(De,{className:"h-4 w-4"})})]})]})]})}),e.jsx(z,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:a.files.map(s=>e.jsx(U,{variant:"outline",className:"text-xs",children:s.name},s.id))})})]},a.id))})})]})}),e.jsx(re,{value:"employees",children:e.jsxs($,{children:[e.jsx(V,{children:e.jsx(H,{children:"Kelola Pegawai"})}),e.jsx(z,{children:e.jsx(Ua,{token:c})})]})}),e.jsx(re,{value:"system",children:e.jsxs($,{children:[e.jsx(V,{children:e.jsx(H,{children:"Pengaturan Sistem"})}),e.jsx(z,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(m,{onClick:xa,variant:"outline",className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800",children:[e.jsx(Ma,{className:"h-4 w-4"}),"Export Data"]}),e.jsxs(m,{onClick:ja,variant:"outline",className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800",children:[e.jsx(Ra,{className:"h-4 w-4"}),"Import Data"]})]})})]})})]}),e.jsx(na,{open:G,onOpenChange:d,children:e.jsxs(ta,{children:[e.jsxs(ra,{children:[e.jsx(la,{children:ce?"Berhasil":"Gagal"}),e.jsx(da,{children:me})]}),e.jsx(oa,{children:e.jsx(ca,{onClick:()=>d(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"Tutup"})})]})}),e.jsx(na,{open:S,onOpenChange:ue,children:e.jsxs(ta,{children:[e.jsxs(ra,{children:[e.jsx(la,{children:Fe?"Berhasil":"Gagal"}),e.jsx(da,{children:ee})]}),e.jsx(oa,{children:e.jsx(ca,{onClick:()=>ue(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"Tutup"})})]})}),e.jsx(de,{open:ve,onOpenChange:J,children:e.jsxs(oe,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(fe,{children:ae?"Edit Konfigurasi Jabatan":"Tambah Konfigurasi Jabatan Baru"}),e.jsx(be,{children:ae?"Edit konfigurasi jabatan yang sudah ada":"Buat konfigurasi jabatan baru dengan dokumen yang diperlukan"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"jenis_jabatan",children:"Jenis Jabatan"}),e.jsx(v,{id:"jenis_jabatan",value:N.jenis_jabatan,onChange:a=>O({...N,jenis_jabatan:a.target.value}),placeholder:"Contoh: Kepala Seksi, Kepala Subbagian, dll"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{id:"is_active",checked:N.is_active,onCheckedChange:a=>O({...N,is_active:a}),className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-200"}),e.jsx(j,{htmlFor:"is_active",children:"Aktif"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(j,{children:"Dokumen yang Diperlukan"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:Na,className:"border-green-600 text-green-600 hover:bg-green-50",children:["Pilih Semua (",se.length,")"]}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:wa,className:"border-gray-600 text-gray-600 hover:bg-gray-50",children:"Hapus Semua"})]})]}),e.jsx("div",{className:"mt-2 space-y-4",children:Object.entries(se.reduce((a,s)=>(a[s.category]||(a[s.category]=[]),a[s.category].push(s),a),{})).map(([a,s])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:a}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(o=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:o.id,checked:N.required_files.includes(o.id),onCheckedChange:()=>_a(o.id)}),e.jsx(j,{htmlFor:o.id,className:"text-sm cursor-pointer",children:o.name})]},o.id))})]},a))}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Total dokumen yang dipilih: ",N.required_files.length," / ",se.length]})]})]}),e.jsxs(ke,{children:[e.jsx(m,{variant:"outline",onClick:()=>J(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Batal"}),e.jsx(m,{onClick:ya,disabled:Re,className:"bg-green-600 hover:bg-green-700 text-white",children:Re?"Menyimpan...":ae?"Update":"Simpan"})]})]})}),e.jsx(de,{open:fa,onOpenChange:ie,children:e.jsxs(oe,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(fe,{children:ge?"Edit Konfigurasi Berkas Admin Wilayah":"Tambah Konfigurasi Berkas Admin Wilayah Baru"}),e.jsx(be,{children:ge?"Edit konfigurasi berkas wajib untuk admin wilayah":"Buat konfigurasi berkas wajib baru untuk admin wilayah"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{id:"admin-wilayah-is-active",checked:h.is_active,onCheckedChange:a=>T({...h,is_active:a}),className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-200"}),e.jsx(j,{htmlFor:"admin-wilayah-is-active",children:"Aktif"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"admin-wilayah-config-name",children:"Nama Konfigurasi *"}),e.jsx(v,{id:"admin-wilayah-config-name",value:h.name,onChange:a=>T({...h,name:a.target.value}),placeholder:"Contoh: Penghulu, Kepala Kantor, Kepala Seksi"})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Pilih Berkas Wajib Admin Wilayah"}),e.jsx("div",{className:"mt-2 space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ae.map(a=>e.jsx("div",{className:`p-3 border rounded-lg transition-all duration-200 ${h.selectedFiles[a.id]?"border-green-200 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qe,{checked:h.selectedFiles[a.id]||!1,onCheckedChange:()=>Ca(a.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:a.name}),a.is_required&&e.jsx(U,{className:"bg-red-100 text-red-800 border-red-200 text-xs",children:"Wajib"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:a.description}),a.id==="surat_rekomendasi_kanwil"&&h.selectedFiles[a.id]&&e.jsxs("div",{className:"mt-3",children:[e.jsx(j,{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Pilih Varian File 6:"}),e.jsxs(Ze,{value:h.selectedVariant,onValueChange:Ka,children:[e.jsx(ea,{className:"w-full focus:ring-green-500 focus:border-green-500",children:e.jsx(aa,{placeholder:"Pilih varian 6.x..."})}),e.jsx(sa,{children:ba.map(s=>e.jsx(ia,{value:s.value,children:s.label},s.value))})]})]})]})]})},a.id))})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ringkasan Konfigurasi"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:["Total berkas yang dipilih: ",Object.values(h.selectedFiles).filter(Boolean).length]}),e.jsxs("p",{children:["Berkas wajib: ",Ae.filter(a=>a.is_required&&h.selectedFiles[a.id]).length]}),h.selectedFiles.surat_rekomendasi_kanwil&&e.jsxs("p",{children:["Varian berkas 6: ",h.selectedVariant]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(j,{htmlFor:"jenis-jabatan",children:"Jenis Jabatan"}),e.jsxs(Ze,{value:h.jenis_jabatan_id,onValueChange:a=>T(s=>({...s,jenis_jabatan_id:a})),children:[e.jsx(ea,{children:e.jsx(aa,{placeholder:"Pilih jenis jabatan"})}),e.jsx(sa,{children:Ge.map(a=>e.jsx(ia,{value:a.id.toString(),children:a.jenis_jabatan},a.id))})]})]})})]}),e.jsxs(ke,{children:[e.jsx(m,{variant:"outline",onClick:()=>ie(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900",children:"Batal"}),e.jsx(m,{onClick:Da,disabled:Oe,className:"bg-green-600 hover:bg-green-700 text-white",children:Oe?"Menyimpan...":ge?"Update":"Simpan"})]})]})}),e.jsx(de,{open:he,onOpenChange:a=>{!a&&W||xe(a)},children:e.jsxs(oe,{className:"sm:max-w-md",children:[e.jsxs(pe,{children:[e.jsx(fe,{className:"text-red-600",children:"Konfirmasi Penghapusan"}),e.jsx(be,{children:"Apakah Anda yakin ingin menghapus konfigurasi berkas admin wilayah ini?"})]}),E&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:E.name}),e.jsx("p",{className:"text-sm text-red-700 mb-2",children:E.description}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.files.map(a=>e.jsx(U,{variant:"outline",className:"text-xs border-red-200 text-red-700",children:a.name},a.id))}),e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Total ",E.files.length," berkas akan dihapus"]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(qa,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Peringatan!"}),e.jsx("p",{children:"Tindakan ini tidak dapat dibatalkan. Semua konfigurasi berkas untuk jenis jabatan ini akan dihapus secara permanen."})]})]})})]}),e.jsxs(ke,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(m,{variant:"outline",onClick:Ve,disabled:W,className:"w-full sm:w-auto border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900",children:"Batal"}),e.jsx(m,{onClick:Aa,disabled:W,variant:"destructive",className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:W?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menghapus..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Hapus Permanen"]})})]})]})})]})};export{ss as default};
//# sourceMappingURL=Settings-TqRpfdcA.js.map
