import{j as e,V as N,X as f,Y as j}from"./ui-vendor-Bk6Wi0va.js";import{r as l}from"./react-vendor-C8WR5ETM.js";import{a as g,I as b,b as v}from"./index-C8QR7mAl.js";import{L as C}from"./label-BTN2qwnz.js";import{C as I,c as S}from"./card-DGWpsVST.js";const k=()=>{const[a,u]=l.useState(""),[o,t]=l.useState([]),[h,n]=l.useState(!1),[c,r]=l.useState(null);return l.useEffect(()=>{if(!a.trim()){t([]);return}n(!0),r(null);const m=setTimeout(()=>{const p=localStorage.getItem("token");g(`/api/employees/search?q=${encodeURIComponent(a)}`,p).then(x=>{const i=x.pegawai||x.employees||[];console.log(`ðŸ” Frontend search "${a}": received ${i.length} results`),console.log("ðŸ“‹ First 5 results:",i.slice(0,5).map(d=>({nip:d.nip,nama:d.nama}))),t(i)}).catch(()=>r("Gagal mencari pegawai")).finally(()=>n(!1))},300);return()=>clearTimeout(m)},[a]),{searchTerm:a,setSearchTerm:u,results:o,isLoading:h,error:c}},F=({label:a,placeholder:u,onSelect:o,selectedPegawai:t})=>{const[h,n]=l.useState(!1),{searchTerm:c,setSearchTerm:r,results:m,isLoading:p}=k(),x=s=>{r(s),t&&o(void 0),n(s.length>0)},i=s=>{o(s),r(""),n(!1),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},d=()=>{o(void 0),r(""),n(!1)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:a}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(b,{placeholder:u,value:c,onChange:s=>x(s.target.value),className:"pl-10",onFocus:()=>n(c.length>0),disabled:!1}),t&&e.jsx("button",{type:"button",onClick:d,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500 hover:text-red-700 transition-colors",tabIndex:-1,children:e.jsx(f,{className:"h-4 w-4"})})]}),h&&!t&&m.length>0&&e.jsx(I,{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-auto",children:e.jsx(S,{className:"p-0",children:p?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mx-auto"})}):m.length>0?e.jsx("div",{className:"divide-y",children:m.map(s=>e.jsx("div",{className:"p-3 hover:bg-muted cursor-pointer transition-colors",onClick:()=>i(s),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:s.nama}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.nip}),e.jsx("div",{className:"flex items-center space-x-2 mt-1",children:e.jsx(v,{variant:"outline",className:"text-xs",children:s.pangkat_gol||s.golongan})}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.jabatan})]})]})},s.id||s.nip))}):c.length>0?e.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"Tidak ada hasil ditemukan"}):null})})]}),t&&e.jsxs("div",{className:"flex items-center space-x-2 mt-2 bg-muted rounded p-2",children:[e.jsx(j,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium text-sm",children:t.nama}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.nip}),e.jsx(v,{variant:"outline",className:"text-xs",children:t.pangkat_gol||t.golongan}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.jabatan}),e.jsx("button",{type:"button",onClick:d,className:"ml-auto text-red-500 hover:text-red-700",children:e.jsx(f,{className:"h-4 w-4"})})]})]})};export{F as P};
//# sourceMappingURL=PegawaiSearchInput-CoZbg2Dz.js.map
