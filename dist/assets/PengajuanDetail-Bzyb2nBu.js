import{j as e,B as g,al as Oe,G as ze,E as He,K as R,ag as oe,au as Je,ai as Ve,a5 as Ye,H as K,av as me,aw as qe,ah as We,ar as ue,a4 as Xe}from"./ui-vendor-e65TVV2G.js";import{g as Qe,d as Ze,r as i}from"./react-vendor-C8WR5ETM.js";import{C as x,c as j,a as w,b as _}from"./card-Bbhzjo2s.js";import{u as ea,a as pe,B as o,b as S,D as M,e as I,f as G,g as U,j as B,m as aa}from"./index-C1PTHzut.js";import{A as O,a as z,b as H,c as J,d as V,e as Y,g as he,f as q}from"./alert-dialog-PUkMYhj3.js";import{T as ge}from"./textarea-DJWIl6L5.js";import{L as sa}from"./label-B45rXNTt.js";import{S as ta}from"./switch-lwLUW2kk.js";import"./data-vendor-DtxkLsA5.js";const pa=()=>{const{pengajuanId:h}=Qe(),b=Ze(),{user:n,token:p,isAuthenticated:W}=ea(),[s,X]=i.useState(null),[xe,Q]=i.useState(!0),[Z,r]=i.useState(null),[m,je]=i.useState(null),[be,ee]=i.useState(!1),[fe,D]=i.useState(!1),[ve,P]=i.useState(!1),[ke,v]=i.useState(!1),[Ne,E]=i.useState(!1),[ye,f]=i.useState(!1),[we,A]=i.useState(""),[ae,se]=i.useState(""),[F,te]=i.useState(""),[l,u]=i.useState(!1),[ne,ie]=i.useState(null),[re,_e]=i.useState(!1);i.useEffect(()=>{if(!W){b("/");return}h&&C()},[W,b,h]),i.useEffect(()=>{const a=()=>{const t=window.pageYOffset||document.documentElement.scrollTop;_e(t>50)};return a(),window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[]);const C=async()=>{try{Q(!0);const a=await pe(`/api/pengajuan/${h}`,p);a.success?X(a.data.pengajuan):r(a.message||"Gagal mengambil data pengajuan")}catch(a){console.error("Error fetching pengajuan data:",a),r("Terjadi kesalahan saat mengambil data pengajuan")}finally{Q(!1)}},Se=async()=>{try{u(!0);const a=await B(`/api/pengajuan/${h}/approve`,{catatan:ae},p);a.success?(A("Pengajuan berhasil disetujui!"),f(!0),D(!1),se(""),await C()):r(a.message||"Gagal approve pengajuan")}catch(a){console.error("Error approving pengajuan:",a),r("Terjadi kesalahan saat approve pengajuan")}finally{u(!1)}},De=async()=>{try{u(!0);const a=await B(`/api/pengajuan/${h}/reject`,{rejection_reason:F},p);a.success?(A("Pengajuan berhasil ditolak!"),f(!0),P(!1),te(""),await C()):r(a.message||"Gagal reject pengajuan")}catch(a){console.error("Error rejecting pengajuan:",a),r("Terjadi kesalahan saat reject pengajuan")}finally{u(!1)}},Pe=async()=>{try{u(!0);const a=await B(`/api/pengajuan/${h}/resubmit`,{},p);a.success?(A("Pengajuan berhasil diajukan ulang!"),f(!0),await C()):r(a.message||"Gagal resubmit pengajuan")}catch(a){console.error("Error resubmitting pengajuan:",a),r("Terjadi kesalahan saat resubmit pengajuan")}finally{u(!1)}},Ae=async()=>{try{u(!0);const a=await aa(`/api/pengajuan/${h}`,p);a.success?(A("Pengajuan berhasil dihapus!"),f(!0),v(!1),setTimeout(()=>{b("/pengajuan")},2e3)):(r(a.message||"Gagal menghapus pengajuan"),v(!1))}catch(a){console.error("Error deleting pengajuan:",a),r("Terjadi kesalahan saat menghapus pengajuan"),v(!1)}finally{u(!1)}},Ce=a=>{const t={draft:{label:"Draft",className:"bg-gray-100 text-gray-800",icon:Xe},submitted:{label:"Diajukan",className:"bg-blue-100 text-blue-800",icon:R},approved:{label:"Disetujui",className:"bg-green-100 text-green-800",icon:K},rejected:{label:"Ditolak",className:"bg-red-100 text-red-800",icon:me}},c=t[a]||t.draft,d=c.icon;return e.jsxs(S,{className:c.className,children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),c.label]})},Te=a=>({guru:"Guru",eselon_iv:"Eselon IV",fungsional:"Fungsional",pelaksana:"Pelaksana"})[a]||a,le=a=>({surat_pengantar:"Surat Pengantar",surat_permohonan_dari_yang_bersangkutan:"Surat Permohonan Dari Yang Bersangkutan",surat_keputusan_cpns:"Surat Keputusan CPNS",surat_keputusan_pns:"Surat Keputusan PNS",surat_keputusan_kenaikan_pangkat_terakhir:"Surat Keputusan Kenaikan Pangkat Terakhir",surat_keputusan_jabatan_terakhir:"Surat Keputusan Jabatan Terakhir",skp_2_tahun_terakhir:"SKP 2 Tahun Terakhir",surat_keterangan_bebas_temuan_inspektorat:"Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama",surat_keterangan_anjab_abk_instansi_asal:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal",surat_keterangan_anjab_abk_instansi_penerima:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima",surat_pernyataan_tidak_hukuman_disiplin:"Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK",surat_persetujuan_mutasi_asal:"Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki",surat_lolos_butuh_ppk:"Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju",peta_jabatan:"Peta Jabatan",hasil_uji_kompetensi:"Hasil Uji Kompetensi",hasil_evaluasi_pertimbangan_baperjakat:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",anjab_abk_instansi_asal:"Anjab/Abk Instansi Asal",anjab_abk_instansi_penerima:"Anjab/Abk Instansi Penerima",surat_keterangan_tidak_tugas_belajar:"Surat Keterangan Tidak Sedang Tugas Belajar",sptjm_pimpinan_satker_asal:"SPTJM Pimpinan Satker dari Asal",sptjm_pimpinan_satker_penerima:"SPTJM Pimpinan Satker dari Penerima",surat_rekomendasi_instansi_pembina:"Surat Rekomendasi Instansi Pembina"})[a]||a.replace(/_/g," ").toUpperCase(),$e=async(a,t,c)=>{try{console.log("ðŸ” Debug handleVerifyFile:",{fileId:a,verificationStatus:t,notes:c,token:p}),ie(a);const d={verification_status:t,verification_notes:c};console.log("ðŸ“¤ Request data:",d);const y=await B(`/api/pengajuan/files/${a}/verify`,d,p);console.log("ðŸ“¥ Response:",y),y.success?X($=>$&&{...$,files:$.files.map(L=>L.id===a?{...L,verification_status:t,verified_by:(n==null?void 0:n.email)||(n==null?void 0:n.id),verified_at:new Date().toISOString()}:L)}):r(y.message||"Gagal verifikasi file")}catch(d){console.error("âŒ Error verifying file:",d),r("Terjadi kesalahan saat verifikasi file")}finally{ie(null)}},Be=async()=>{try{u(!0);const a=await pe(`/api/pengajuan/${h}/print-report`,p);a.success?Ee(a.data):r(a.message||"Gagal generate laporan")}catch(a){console.error("Error generating print report:",a),r("Terjadi kesalahan saat generate laporan")}finally{u(!1),E(!1)}},Ee=a=>{const t=window.open("","_blank");if(!t)return;const c=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Laporan Pengajuan - ${a.pegawai.nama}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info { margin-bottom: 20px; }
          .info table { width: 100%; border-collapse: collapse; }
          .info td { padding: 5px; }
          .info td:first-child { font-weight: bold; width: 150px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; font-family: Arial, sans-serif; font-size: 10pt; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f2f2f2; font-weight: bold; }
          .checkbox { width: 20px; height: 20px; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h2>LAPORAN PENGAJUAN JABATAN</h2>
        </div>
        
        <div class="info">
          <table>
            <tr><td>Nama</td><td>: ${a.pegawai.nama}</td></tr>
            <tr><td>NIP</td><td>: ${a.pegawai.nip}</td></tr>
            <tr><td>Jabatan</td><td>: ${a.pegawai.jabatan}</td></tr>
            <tr><td>Status</td><td>: ${a.pengajuan.status}</td></tr>
            <tr><td>Tanggal Approval</td><td>: ${new Date(a.pengajuan.approved_at).toLocaleDateString("id-ID")}</td></tr>
          </table>
        </div>

        <table>
          <thead>
            <tr>
              <th>No</th>
              <th>Nama Berkas</th>
              <th>Ada Berkas</th>
            </tr>
          </thead>
          <tbody>
            ${a.files.map((d,y)=>`
              <tr>
                <td>${y+1}</td>
                <td>${le(d.file_type)}</td>
                <td>
                  <input type="checkbox" class="checkbox" ${d.verification_status==="approved"?"checked":""} disabled>
                </td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        <!-- Verification Footer -->
        <div style="margin-top: 40px; padding: 15px; border-top: 2px solid #ddd; text-align: center; font-size: 10pt; color: #666;">
          <div style="margin-bottom: 8px; font-weight: bold;">
            âœ“ Dokumen ini telah diverifikasi dan disetujui oleh Admin Kanwil
          </div>
          <div style="font-size: 9pt;">
            Tanggal Approval: ${a.approved_at?new Date(a.approved_at).toLocaleDateString("id-ID"):new Date().toLocaleDateString("id-ID")}
          </div>
          <div style="font-size: 8pt; margin-top: 5px;">
            Sistem Informasi Generator Surat - Kementerian Agama
          </div>
        </div>
      </body>
      </html>
    `;t.document.write(c),t.document.close(),t.print()},T=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Fe=a=>{const c=["Bytes","KB","MB","GB"],d=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,d)).toFixed(2))+" "+c[d]},Le=async a=>{try{const t=await fetch(`/api/pengajuan/files/${a.id}`,{headers:{Authorization:`Bearer ${p}`}});if(!t.ok)throw new Error("Gagal mengambil file");const c=await t.blob(),d=URL.createObjectURL(c);je({...a,blobUrl:d}),ee(!0)}catch(t){console.error("Error previewing file:",t),r("Gagal preview file. Silakan coba lagi.")}},Re=a=>{window.open(`/api/pengajuan/files/${a.id}`,"_blank")},k=(n==null?void 0:n.role)==="admin",ce=((s==null?void 0:s.status)==="draft"||(s==null?void 0:s.status)==="rejected")&&(k||(s==null?void 0:s.created_by)===(n==null?void 0:n.id))&&(n==null?void 0:n.role)!=="user",Ke=(s==null?void 0:s.status)==="draft"&&(n==null?void 0:n.role)!=="user",Me=k&&(s==null?void 0:s.status)==="submitted",Ie=k&&(s==null?void 0:s.status)==="submitted",Ge=(s==null?void 0:s.status)==="rejected"&&(n==null?void 0:n.role)!=="user",N=(s==null?void 0:s.files.every(a=>s.status==="submitted"?a.verification_status==="approved"||a.verification_status==="pending":a.verification_status==="approved"))??!1,de=(s==null?void 0:s.files.some(a=>a.verification_status==="rejected"))??!1,Ue=!de;return xe?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(x,{children:e.jsxs(j,{className:"flex items-center justify-center py-12",children:[e.jsx(g,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{children:"Memuat detail pengajuan..."})]})})}):s?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .sidebar-scroll::-webkit-scrollbar {
            width: 8px;
          }
          .sidebar-scroll::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 4px;
          }
          .sidebar-scroll::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 4px;
          }
          .sidebar-scroll::-webkit-scrollbar-thumb:hover {
            background: #64748b;
          }
        `}}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(o,{variant:"outline",onClick:()=>b("/pengajuan"),className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),"Kembali ke Data Pengajuan"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Detail Pengajuan"}),e.jsxs("p",{className:"text-gray-600",children:["ID: ",s.id]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:Ce(s.status)})]}),Z&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600",children:Z})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(x,{children:[e.jsx(w,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"Informasi Pegawai"]})}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("p",{className:"text-gray-900 text-base",children:s.pegawai.nama})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"NIP"}),e.jsx("p",{className:"text-gray-900 text-base",children:s.pegawai.nip})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Jabatan Saat Ini"}),e.jsx("p",{className:"text-gray-900 text-base",children:s.pegawai.jabatan})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Jenis Jabatan Target"}),e.jsx(S,{variant:"outline",className:"text-sm",children:Te(s.jenis_jabatan)})]})]})})]}),e.jsxs(x,{children:[e.jsx(w,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Dokumen yang Diupload",e.jsxs(S,{variant:"outline",className:"ml-2",children:[s.files.length," / ",s.total_dokumen]}),k&&s.status==="submitted"&&e.jsx(S,{variant:N?"default":"destructive",className:`ml-2 ${N?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N?"Semua Dokumen Sesuai":"Ada Dokumen Tidak Sesuai"})]})}),e.jsx(j,{children:s.files.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Belum ada dokumen yang diupload"}),ce&&e.jsxs(o,{onClick:()=>b(s.status==="draft"?`/pengajuan/${s.id}/upload`:`/pengajuan/${s.id}/edit`),className:"mt-4 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),s.status==="draft"?"Upload Dokumen":"Perbaiki Dokumen"]})]}):e.jsx("div",{className:"space-y-4",children:s.files.map(a=>e.jsx("div",{className:"p-6 border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-medium text-base",children:le(a.file_type)}),e.jsx("p",{className:"text-sm text-gray-600",children:a.file_name}),e.jsx("p",{className:"text-xs text-gray-500",children:Fe(a.file_size)}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs(S,{variant:a.verification_status==="approved"?"default":"destructive",className:`transition-all duration-500 ease-in-out transform ${a.verification_status==="approved"?"bg-green-100 text-green-800":a.verification_status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[a.verification_status==="approved"?"Sesuai":a.verification_status==="rejected"?"Tidak Sesuai":"Belum Diverifikasi",a.verified_by&&` - ${a.verified_by}`]}),a.verification_notes&&e.jsx("p",{className:"text-xs text-gray-600",children:a.verification_notes})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[k&&(s.status==="submitted"||s.status==="rejected")&&e.jsx("div",{className:"flex items-center gap-3 mr-3",children:ne===a.id?e.jsx(g,{className:"h-4 w-4 animate-spin text-gray-500"}):e.jsxs("div",{className:"flex items-center gap-3 transition-all duration-500 ease-in-out",children:[e.jsx("div",{className:"relative transform transition-all duration-500 ease-in-out hover:scale-105 active:scale-95",children:e.jsx(ta,{id:`verify-${a.id}`,checked:a.verification_status==="approved",onCheckedChange:t=>{const c=t?"approved":"rejected";$e(a.id,c)},disabled:ne===a.id,className:`transition-all duration-500 ease-in-out transform ${a.verification_status==="approved"?"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600":"data-[state=unchecked]:bg-red-600 data-[state=unchecked]:border-red-600"}`})}),e.jsx(sa,{htmlFor:`verify-${a.id}`,className:`text-sm font-medium cursor-pointer transition-all duration-500 ease-in-out transform hover:scale-105 ${a.verification_status==="approved"?"text-green-700":a.verification_status==="rejected"?"text-red-700":"text-gray-700"}`,children:a.verification_status==="approved"?"Sesuai":a.verification_status==="rejected"?"Tidak Sesuai":"Belum Diverifikasi"})]})}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>Le(a),className:"px-3 py-2",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Preview"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>Re(a),className:"px-3 py-2",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})},a.id))})})]})]}),e.jsxs("div",{className:`space-y-6 transition-all duration-300 ${re?"lg:sticky lg:top-6 lg:z-40 lg:self-start sidebar-scroll":""}`,style:re?{position:"sticky",top:"80px",zIndex:40,maxHeight:"calc(100vh - 120px)",overflowY:"scroll",paddingRight:"12px"}:{},children:[e.jsxs(x,{children:[e.jsx(w,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-5 w-5"}),"Timeline Status"]})}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Dibuat"}),e.jsx("p",{className:"text-sm text-gray-600",children:T(s.created_at)})]})]}),s.status!=="draft"&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Diajukan"}),e.jsx("p",{className:"text-sm text-gray-600",children:T(s.updated_at)})]})]}),s.status==="approved"&&s.approved_at&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Disetujui"}),e.jsx("p",{className:"text-sm text-gray-600",children:T(s.approved_at)}),s.approved_by&&e.jsxs("p",{className:"text-xs text-gray-500",children:["oleh ",s.approved_by]})]})]}),s.status==="rejected"&&s.rejected_at&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Ditolak"}),e.jsx("p",{className:"text-sm text-gray-600",children:T(s.rejected_at)}),s.rejected_by&&e.jsxs("p",{className:"text-xs text-gray-500",children:["oleh ",s.rejected_by]})]})]})]})})]}),(s.catatan||s.rejection_reason)&&e.jsxs(x,{children:[e.jsx(w,{children:e.jsx(_,{children:"Catatan"})}),e.jsxs(j,{children:[s.catatan&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Catatan Persetujuan:"}),e.jsx("p",{className:"text-sm text-gray-900 bg-green-50 p-4 rounded-lg leading-relaxed",children:s.catatan})]}),s.rejection_reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Alasan Penolakan:"}),e.jsx("p",{className:"text-sm text-gray-900 bg-red-50 p-4 rounded-lg leading-relaxed",children:s.rejection_reason})]})]})]}),e.jsxs(x,{children:[e.jsx(w,{children:e.jsx(_,{children:"Aksi"})}),e.jsxs(j,{className:"space-y-3",children:[Me&&N&&e.jsxs(o,{onClick:()=>D(!0),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Setujui"]}),Ie&&(de||!N)&&e.jsxs(o,{onClick:()=>P(!0),variant:"destructive",className:"w-full",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Tolak"]}),Ge&&e.jsx(o,{onClick:Pe,disabled:l||!Ue,className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white",children:l?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Memproses..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Ajukan Ulang"]})}),ce&&e.jsxs(o,{onClick:()=>b(s.status==="draft"?`/pengajuan/${s.id}/upload`:`/pengajuan/${s.id}/edit`),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),s.status==="draft"?"Upload Dokumen":"Perbaiki Dokumen"]}),Ke&&e.jsxs(o,{onClick:()=>v(!0),variant:"destructive",className:"w-full",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Hapus Pengajuan"]}),s.status==="approved"&&e.jsxs(o,{onClick:()=>E(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Cetak Laporan"]})]})]})]})]}),e.jsx(M,{open:fe,onOpenChange:D,children:e.jsxs(I,{children:[e.jsx(G,{children:e.jsx(U,{children:"Setujui Pengajuan"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catatan (Opsional)"}),e.jsx(ge,{value:ae,onChange:a=>se(a.target.value),placeholder:"Masukkan catatan persetujuan...",rows:3,className:"min-h-[80px]"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{onClick:()=>D(!1),variant:"outline",className:"flex-1",disabled:l,children:"Batal"}),e.jsx(o,{onClick:Se,disabled:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:l?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Memproses..."]}):"Setujui"})]})]})]})}),e.jsx(O,{open:ke,onOpenChange:v,children:e.jsxs(z,{children:[e.jsxs(H,{children:[e.jsx(J,{children:"Hapus Pengajuan"}),e.jsx(V,{children:"Apakah Anda yakin ingin menghapus pengajuan ini? Tindakan ini tidak dapat dibatalkan dan semua file yang diupload akan dihapus secara permanen."})]}),e.jsxs(Y,{children:[e.jsx(he,{disabled:l,children:"Batal"}),e.jsx(q,{onClick:Ae,disabled:l,className:"bg-red-600 hover:bg-red-700 text-white",children:l?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Menghapus..."]}):"Hapus Pengajuan"})]})]})}),e.jsx(O,{open:Ne,onOpenChange:E,children:e.jsxs(z,{children:[e.jsxs(H,{children:[e.jsx(J,{children:"Cetak Laporan"}),e.jsx(V,{children:"Apakah Anda yakin ingin mencetak laporan pengajuan ini? Laporan akan dibuka di tab baru untuk dicetak."})]}),e.jsxs(Y,{children:[e.jsx(he,{disabled:l,children:"Batal"}),e.jsx(q,{onClick:Be,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white",children:l?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Menyiapkan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Cetak Laporan"]})})]})]})}),e.jsx(M,{open:ve,onOpenChange:P,children:e.jsxs(I,{children:[e.jsx(G,{children:e.jsx(U,{children:"Tolak Pengajuan"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Alasan Penolakan *"}),e.jsx(ge,{value:F,onChange:a=>te(a.target.value),placeholder:"Masukkan alasan penolakan...",rows:3,required:!0,className:"min-h-[80px]"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{onClick:()=>P(!1),variant:"outline",className:"flex-1",disabled:l,children:"Batal"}),e.jsx(o,{onClick:De,disabled:l||!F.trim(),variant:"destructive",className:"flex-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),"Memproses..."]}):"Tolak"})]})]})]})}),e.jsx(M,{open:be,onOpenChange:a=>{ee(a),!a&&(m!=null&&m.blobUrl)&&URL.revokeObjectURL(m.blobUrl)},children:e.jsxs(I,{className:"max-w-4xl",children:[e.jsx(G,{children:e.jsxs(U,{children:["Preview File: ",m==null?void 0:m.file_name]})}),e.jsx("div",{className:"mt-4",children:m&&e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[e.jsx("div",{className:"bg-green-600 text-white px-4 py-2 flex items-center justify-between",children:e.jsx("span",{className:"font-medium",children:m.file_name})}),e.jsx("iframe",{src:m.blobUrl||`/api/pengajuan/files/${m.id}`,className:"w-full h-96 border-0",title:"File Preview"})]})})]})}),e.jsx(O,{open:ye,onOpenChange:f,children:e.jsxs(z,{children:[e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),"Berhasil!"]}),e.jsx(V,{className:"text-green-700",children:we})]}),e.jsx(Y,{children:e.jsx(q,{onClick:()=>f(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"OK"})})]})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(x,{children:e.jsxs(j,{className:"flex items-center justify-center py-12",children:[e.jsx(Oe,{className:"h-8 w-8 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-600",children:"Pengajuan tidak ditemukan"})]})})})};export{pa as default};
//# sourceMappingURL=PengajuanDetail-Bzyb2nBu.js.map
