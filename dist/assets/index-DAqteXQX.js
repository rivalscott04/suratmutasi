const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DE480iPw.js","assets/ui-vendor-wOlhVLNZ.js","assets/react-vendor-C8WR5ETM.js","assets/card-C3GmQWLE.js","assets/table-BPpA1Ak5.js","assets/xlsx-DjuO7_Ju.js","assets/Settings-BSfsskfK.js","assets/label-DmSQYHaa.js","assets/textarea-C-Mca7ao.js","assets/checkbox-DXsVcMGY.js","assets/switch-B7grbS5m.js","assets/select-GfKyJr-w.js","assets/alert-dialog-DUvtYTum.js","assets/TemplateSelection-DsUizaVa.js","assets/TemplateForm-LkOKVjOJ.js","assets/PegawaiSearchInput-D4r2MCFd.js","assets/Template9-6y9lf9NO.js","assets/SuratPreviewContainer-3XBtznzI.js","assets/NotFound-BoxbWDCq.js","assets/Index-D-OpCNAT.js","assets/LetterDetail-C3UxWh-6.js","assets/Letters-LFba02F6.js","assets/accordion-CwTSKArm.js","assets/LetterPrintPreview-BssrIqcP.js","assets/Users-it1aaw-r.js","assets/PengajuanSelect-BsqZ7JGK.js","assets/PengajuanFileUpload-HTvz-BRa.js","assets/progress-DWyhIiUi.js","assets/PengajuanIndex-C9mvlwa_.js","assets/PengajuanDetail-CNAA9Qql.js","assets/PengajuanEdit-DkTqYIm6.js","assets/JobTypeConfiguration-BcpDa841.js","assets/AdminWilayahDashboard-C07N6ceQ.js","assets/AdminWilayahUploadPage-DAd_QeRo.js","assets/SKForm-CoeqQ_7p.js"])))=>i.map(i=>d[i]);
var vn=Object.defineProperty;var Tt=t=>{throw TypeError(t)};var bn=(t,e,s)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Pt=(t,e,s)=>bn(t,typeof e!="symbol"?e+"":e,s),rt=(t,e,s)=>e.has(t)||Tt("Cannot "+s);var c=(t,e,s)=>(rt(t,e,"read from private field"),s?s.call(t):e.get(t)),w=(t,e,s)=>e.has(t)?Tt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),b=(t,e,s,a)=>(rt(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),D=(t,e,s)=>(rt(t,e,"access private method"),s);var ze=(t,e,s,a)=>({set _(r){b(t,e,r,s)},get _(){return c(t,e,a)}});import{c as rs,a as is,u as os,j as n,A as jn,P as Ye,b as me,d as wn,D as Sn,C as Nn,R as En,e as kn,f as Cn,t as Tn,g as Pn,h as gt,S as An,i as ls,k as _n,l as cs,m as In,n as ds,I as us,o as hs,p as fs,q as On,r as ms,s as Rn,L as ps,v as xs,w as Ln,T as Dn,O as gs,x as ys,y as vs,X as yt,z as bs,B as js,E as Mn,F as Fn,G as Un,H as ht,U as _e,J as Ke,K as At,M as _t,N as qn,Q as Qn,V as zn,W as Kn,Y as It,Z as Vn,_ as Hn,$ as Ot,a0 as it,a1 as Rt,a2 as $n,a3 as Bn,a4 as ws,a5 as Ss,a6 as Ns,a7 as Es,a8 as ks,a9 as Cs,aa as Gn,ab as Wn}from"./ui-vendor-wOlhVLNZ.js";import{a as Jn,r as o,u as Yn,L as ot,B as Xn,d as Zn,e as ea,f as I,N as Ue}from"./react-vendor-C8WR5ETM.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Ts,Lt=Jn;Ts=Lt.createRoot,Lt.hydrateRoot;const ta="modulepreload",sa=function(t){return"/FE/"+t},Dt={},R=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),l=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=Promise.allSettled(s.map(d=>{if(d=sa(d),d in Dt)return;Dt[d]=!0;const p=d.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":ta,p||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),p)return new Promise((y,E)=>{f.addEventListener("load",y),f.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return r.then(u=>{for(const l of u||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var[Xe,ri]=rs("Tooltip",[is]),vt=is(),Ps="TooltipProvider",na=700,Mt="tooltip.open",[aa,As]=Xe(Ps),_s=t=>{const{__scopeTooltip:e,delayDuration:s=na,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:i}=t,u=o.useRef(!0),l=o.useRef(!1),d=o.useRef(0);return o.useEffect(()=>{const p=d.current;return()=>window.clearTimeout(p)},[]),n.jsx(aa,{scope:e,isOpenDelayedRef:u,delayDuration:s,onOpen:o.useCallback(()=>{window.clearTimeout(d.current),u.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>u.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback(p=>{l.current=p},[]),disableHoverableContent:r,children:i})};_s.displayName=Ps;var Is="Tooltip",[ii,Ze]=Xe(Is),ft="TooltipTrigger",ra=o.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,r=Ze(ft,s),i=As(ft,s),u=vt(s),l=o.useRef(null),d=os(e,l,r.onTriggerChange),p=o.useRef(!1),h=o.useRef(!1),f=o.useCallback(()=>p.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(jn,{asChild:!0,...u,children:n.jsx(Ye.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:d,onPointerMove:me(t.onPointerMove,y=>{y.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{r.open&&r.onClose(),p.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{p.current||r.onOpen()}),onBlur:me(t.onBlur,r.onClose),onClick:me(t.onClick,r.onClose)})})});ra.displayName=ft;var ia="TooltipPortal",[oi,oa]=Xe(ia,{forceMount:void 0}),Pe="TooltipContent",Os=o.forwardRef((t,e)=>{const s=oa(Pe,t.__scopeTooltip),{forceMount:a=s.forceMount,side:r="top",...i}=t,u=Ze(Pe,t.__scopeTooltip);return n.jsx(wn,{present:a||u.open,children:u.disableHoverableContent?n.jsx(Rs,{side:r,...i,ref:e}):n.jsx(la,{side:r,...i,ref:e})})}),la=o.forwardRef((t,e)=>{const s=Ze(Pe,t.__scopeTooltip),a=As(Pe,t.__scopeTooltip),r=o.useRef(null),i=os(e,r),[u,l]=o.useState(null),{trigger:d,onClose:p}=s,h=r.current,{onPointerInTransitChange:f}=a,y=o.useCallback(()=>{l(null),f(!1)},[f]),E=o.useCallback((C,v)=>{const S=C.currentTarget,j={x:C.clientX,y:C.clientY},P=fa(j,S.getBoundingClientRect()),x=ma(j,P),m=pa(v.getBoundingClientRect()),k=ga([...x,...m]);l(k),f(!0)},[f]);return o.useEffect(()=>()=>y(),[y]),o.useEffect(()=>{if(d&&h){const C=S=>E(S,h),v=S=>E(S,d);return d.addEventListener("pointerleave",C),h.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",C),h.removeEventListener("pointerleave",v)}}},[d,h,E,y]),o.useEffect(()=>{if(u){const C=v=>{const S=v.target,j={x:v.clientX,y:v.clientY},P=(d==null?void 0:d.contains(S))||(h==null?void 0:h.contains(S)),x=!xa(j,u);P?y():x&&(y(),p())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[d,h,u,p,y]),n.jsx(Rs,{...t,ref:i})}),[ca,da]=Xe(Is,{isInside:!1}),ua=Cn("TooltipContent"),Rs=o.forwardRef((t,e)=>{const{__scopeTooltip:s,children:a,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:u,...l}=t,d=Ze(Pe,s),p=vt(s),{onClose:h}=d;return o.useEffect(()=>(document.addEventListener(Mt,h),()=>document.removeEventListener(Mt,h)),[h]),o.useEffect(()=>{if(d.trigger){const f=y=>{const E=y.target;E!=null&&E.contains(d.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,h]),n.jsx(Sn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:n.jsxs(Nn,{"data-state":d.stateAttribute,...p,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(ua,{children:a}),n.jsx(ca,{scope:s,isInside:!0,children:n.jsx(En,{id:d.contentId,role:"tooltip",children:r||a})})]})})});Os.displayName=Pe;var Ls="TooltipArrow",ha=o.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,r=vt(s);return da(Ls,s).isInside?null:n.jsx(kn,{...r,...a,ref:e})});ha.displayName=Ls;function fa(t,e){const s=Math.abs(e.top-t.y),a=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(s,a,r,i)){case i:return"left";case r:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function ma(t,e,s=5){const a=[];switch(e){case"top":a.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":a.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":a.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":a.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return a}function pa(t){const{top:e,right:s,bottom:a,left:r}=t;return[{x:r,y:e},{x:s,y:e},{x:s,y:a},{x:r,y:a}]}function xa(t,e){const{x:s,y:a}=t;let r=!1;for(let i=0,u=e.length-1;i<e.length;u=i++){const l=e[i],d=e[u],p=l.x,h=l.y,f=d.x,y=d.y;h>a!=y>a&&s<(f-p)*(a-h)/(y-h)+p&&(r=!r)}return r}function ga(t){const e=t.slice();return e.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),ya(e)}function ya(t){if(t.length<=1)return t.slice();const e=[];for(let a=0;a<t.length;a++){const r=t[a];for(;e.length>=2;){const i=e[e.length-1],u=e[e.length-2];if((i.x-u.x)*(r.y-u.y)>=(i.y-u.y)*(r.x-u.x))e.pop();else break}e.push(r)}e.pop();const s=[];for(let a=t.length-1;a>=0;a--){const r=t[a];for(;s.length>=2;){const i=s[s.length-1],u=s[s.length-2];if((i.x-u.x)*(r.y-u.y)>=(i.y-u.y)*(r.x-u.x))s.pop();else break}s.push(r)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var va=_s,Ds=Os;function N(...t){return Tn(Pn(t))}function li(t){return`/FE${t}`}function ci(t){if(!t)return"";const e=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let s,a,r;return/\d{4}-\d{2}-\d{2}/.test(t)?([r,a,s]=t.split("-"),`${parseInt(s,10)} ${e[parseInt(a,10)]} ${r}`):/\d{2}-\d{2}-\d{4}/.test(t)?([s,a,r]=t.split("-"),`${parseInt(s,10)} ${e[parseInt(a,10)]} ${r}`):t}function di(t){return t?t.toLowerCase().replace(/^(kota|kabupaten)/,e=>e.charAt(0).toUpperCase()+e.slice(1)).replace(/(^| )([a-z])/g,e=>e.toUpperCase()):""}const ba=va,ja=o.forwardRef(({className:t,sideOffset:e=4,...s},a)=>n.jsx(Ds,{ref:a,sideOffset:e,className:N("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));ja.displayName=Ds.displayName;var et=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tt=typeof window>"u"||"Deno"in globalThis;function K(){}function wa(t,e){return typeof t=="function"?t(e):t}function Sa(t){return typeof t=="number"&&t>=0&&t!==1/0}function Na(t,e){return Math.max(t+(e||0)-Date.now(),0)}function mt(t,e){return typeof t=="function"?t(e):t}function Ea(t,e){return typeof t=="function"?t(e):t}function Ft(t,e){const{type:s="all",exact:a,fetchStatus:r,predicate:i,queryKey:u,stale:l}=t;if(u){if(a){if(e.queryHash!==bt(u,e.options))return!1}else if(!De(e.queryKey,u))return!1}if(s!=="all"){const d=e.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function Ut(t,e){const{exact:s,status:a,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(Le(e.options.mutationKey)!==Le(i))return!1}else if(!De(e.options.mutationKey,i))return!1}return!(a&&e.state.status!==a||r&&!r(e))}function bt(t,e){return((e==null?void 0:e.queryKeyHashFn)||Le)(t)}function Le(t){return JSON.stringify(t,(e,s)=>pt(s)?Object.keys(s).sort().reduce((a,r)=>(a[r]=s[r],a),{}):s)}function De(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>De(t[s],e[s])):!1}function Ms(t,e){if(t===e)return t;const s=qt(t)&&qt(e);if(s||pt(t)&&pt(e)){const a=s?t:Object.keys(t),r=a.length,i=s?e:Object.keys(e),u=i.length,l=s?[]:{},d=new Set(a);let p=0;for(let h=0;h<u;h++){const f=s?h:i[h];(!s&&d.has(f)||s)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,p++):(l[f]=Ms(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&p++)}return r===u&&p===r?t:l}return e}function qt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function pt(t){if(!Qt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Qt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Qt(t){return Object.prototype.toString.call(t)==="[object Object]"}function ka(t){return new Promise(e=>{setTimeout(e,t)})}function Ca(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Ms(t,e):e}function Ta(t,e,s=0){const a=[...t,e];return s&&a.length>s?a.slice(1):a}function Pa(t,e,s=0){const a=[e,...t];return s&&a.length>s?a.slice(0,-1):a}var jt=Symbol();function Fs(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===jt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var le,te,be,Yt,Aa=(Yt=class extends et{constructor(){super();w(this,le);w(this,te);w(this,be);b(this,be,e=>{if(!tt&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){c(this,te)||this.setEventListener(c(this,be))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,te))==null||e.call(this),b(this,te,void 0))}setEventListener(e){var s;b(this,be,e),(s=c(this,te))==null||s.call(this),b(this,te,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){c(this,le)!==e&&(b(this,le,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof c(this,le)=="boolean"?c(this,le):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},le=new WeakMap,te=new WeakMap,be=new WeakMap,Yt),Us=new Aa,je,se,we,Xt,_a=(Xt=class extends et{constructor(){super();w(this,je,!0);w(this,se);w(this,we);b(this,we,e=>{if(!tt&&window.addEventListener){const s=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){c(this,se)||this.setEventListener(c(this,we))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,se))==null||e.call(this),b(this,se,void 0))}setEventListener(e){var s;b(this,we,e),(s=c(this,se))==null||s.call(this),b(this,se,e(this.setOnline.bind(this)))}setOnline(e){c(this,je)!==e&&(b(this,je,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return c(this,je)}},je=new WeakMap,se=new WeakMap,we=new WeakMap,Xt),We=new _a;function Ia(){let t,e;const s=new Promise((r,i)=>{t=r,e=i});s.status="pending",s.catch(()=>{});function a(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{a({status:"fulfilled",value:r}),t(r)},s.reject=r=>{a({status:"rejected",reason:r}),e(r)},s}function Oa(t){return Math.min(1e3*2**t,3e4)}function qs(t){return(t??"online")==="online"?We.isOnline():!0}var xt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Qs(t){let e=!1,s=0,a;const r=Ia(),i=()=>r.status!=="pending",u=v=>{var S;if(!i()){const j=new xt(v);y(j),(S=t.onCancel)==null||S.call(t,j)}},l=()=>{e=!0},d=()=>{e=!1},p=()=>Us.isFocused()&&(t.networkMode==="always"||We.isOnline())&&t.canRun(),h=()=>qs(t.networkMode)&&t.canRun(),f=v=>{i()||(a==null||a(),r.resolve(v))},y=v=>{i()||(a==null||a(),r.reject(v))},E=()=>new Promise(v=>{var S;a=j=>{(i()||p())&&v(j)},(S=t.onPause)==null||S.call(t)}).then(()=>{var v;a=void 0,i()||(v=t.onContinue)==null||v.call(t)}),C=()=>{if(i())return;let v;const S=s===0?t.initialPromise:void 0;try{v=S??t.fn()}catch(j){v=Promise.reject(j)}Promise.resolve(v).then(f).catch(j=>{var T;if(i())return;const P=t.retry??(tt?0:3),x=t.retryDelay??Oa,m=typeof x=="function"?x(s,j):x,k=P===!0||typeof P=="number"&&s<P||typeof P=="function"&&P(s,j);if(e||!k){y(j);return}s++,(T=t.onFail)==null||T.call(t,s,j),ka(m).then(()=>p()?void 0:E()).then(()=>{e?y(j):C()})})};return{promise:r,status:()=>r.status,cancel:u,continue:()=>(a==null||a(),r),cancelRetry:l,continueRetry:d,canStart:h,start:()=>(h()?C():E().then(C),r)}}var Ra=t=>setTimeout(t,0);function La(){let t=[],e=0,s=l=>{l()},a=l=>{l()},r=Ra;const i=l=>{e?t.push(l):r(()=>{s(l)})},u=()=>{const l=t;t=[],l.length&&r(()=>{a(()=>{l.forEach(d=>{s(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||u()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{r=l}}}var F=La(),ce,Zt,zs=(Zt=class{constructor(){w(this,ce)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sa(this.gcTime)&&b(this,ce,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tt?1/0:5*60*1e3))}clearGcTimeout(){c(this,ce)&&(clearTimeout(c(this,ce)),b(this,ce,void 0))}},ce=new WeakMap,Zt),Se,Ne,Q,de,L,Me,ue,V,Y,es,Da=(es=class extends zs{constructor(e){super();w(this,V);w(this,Se);w(this,Ne);w(this,Q);w(this,de);w(this,L);w(this,Me);w(this,ue);b(this,ue,!1),b(this,Me,e.defaultOptions),this.setOptions(e.options),this.observers=[],b(this,de,e.client),b(this,Q,c(this,de).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,b(this,Se,Fa(this.options)),this.state=e.state??c(this,Se),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,L))==null?void 0:e.promise}setOptions(e){this.options={...c(this,Me),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,Q).remove(this)}setData(e,s){const a=Ca(this.state.data,e,this.options);return D(this,V,Y).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(e,s){D(this,V,Y).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var a,r;const s=(a=c(this,L))==null?void 0:a.promise;return(r=c(this,L))==null||r.cancel(e),s?s.then(K).catch(K):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Se))}isActive(){return this.observers.some(e=>Ea(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>mt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Na(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,L))==null||s.continue()}onOnline(){var s;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,L))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,Q).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(c(this,L)&&(c(this,ue)?c(this,L).cancel({revert:!0}):c(this,L).cancelRetry()),this.scheduleGc()),c(this,Q).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||D(this,V,Y).call(this,{type:"invalidate"})}async fetch(e,s){var d,p,h,f,y,E,C,v,S,j,P,x;if(this.state.fetchStatus!=="idle"&&((d=c(this,L))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,L))return c(this,L).continueRetry(),c(this,L).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(k=>k.options.queryFn);m&&this.setOptions(m.options)}const a=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(b(this,ue,!0),a.signal)})},i=()=>{const m=Fs(this.options,s),T=(()=>{const U={client:c(this,de),queryKey:this.queryKey,meta:this.meta};return r(U),U})();return b(this,ue,!1),this.options.persister?this.options.persister(m,T,this):m(T)},l=(()=>{const m={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:c(this,de),state:this.state,fetchFn:i};return r(m),m})();(p=this.options.behavior)==null||p.onFetch(l,this),b(this,Ne,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&D(this,V,Y).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),b(this,L,Qs({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:m=>{m instanceof xt&&m.revert&&this.setState({...c(this,Ne),fetchStatus:"idle"}),a.abort()},onFail:(m,k)=>{D(this,V,Y).call(this,{type:"failed",failureCount:m,error:k})},onPause:()=>{D(this,V,Y).call(this,{type:"pause"})},onContinue:()=>{D(this,V,Y).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const m=await c(this,L).start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),(E=(y=c(this,Q).config).onSuccess)==null||E.call(y,m,this),(v=(C=c(this,Q).config).onSettled)==null||v.call(C,m,this.state.error,this),m}catch(m){if(m instanceof xt){if(m.silent)return c(this,L).promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw D(this,V,Y).call(this,{type:"error",error:m}),(j=(S=c(this,Q).config).onError)==null||j.call(S,m,this),(x=(P=c(this,Q).config).onSettled)==null||x.call(P,this.state.data,m,this),m}finally{this.scheduleGc()}}},Se=new WeakMap,Ne=new WeakMap,Q=new WeakMap,de=new WeakMap,L=new WeakMap,Me=new WeakMap,ue=new WeakMap,V=new WeakSet,Y=function(e){const s=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Ma(a.data,this.options),fetchMeta:e.meta??null};case"success":const r={...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return b(this,Ne,e.manual?r:void 0),r;case"error":const i=e.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=s(this.state),F.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),c(this,Q).notify({query:this,type:"updated",action:e})})},es);function Ma(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qs(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Fa(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,a=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var B,ts,Ua=(ts=class extends et{constructor(e={}){super();w(this,B);this.config=e,b(this,B,new Map)}build(e,s,a){const r=s.queryKey,i=s.queryHash??bt(r,s);let u=this.get(i);return u||(u=new Da({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(r)}),this.add(u)),u}add(e){c(this,B).has(e.queryHash)||(c(this,B).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=c(this,B).get(e.queryHash);s&&(e.destroy(),s===e&&c(this,B).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,B).get(e)}getAll(){return[...c(this,B).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Ft(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>Ft(e,a)):s}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){F.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},B=new WeakMap,ts),G,M,he,W,ee,ss,qa=(ss=class extends zs{constructor(e){super();w(this,W);w(this,G);w(this,M);w(this,he);this.mutationId=e.mutationId,b(this,M,e.mutationCache),b(this,G,[]),this.state=e.state||Qa(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,G).includes(e)||(c(this,G).push(e),this.clearGcTimeout(),c(this,M).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){b(this,G,c(this,G).filter(s=>s!==e)),this.scheduleGc(),c(this,M).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,G).length||(this.state.status==="pending"?this.scheduleGc():c(this,M).remove(this))}continue(){var e;return((e=c(this,he))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,u,l,d,p,h,f,y,E,C,v,S,j,P,x,m,k,T,U,J;const s=()=>{D(this,W,ee).call(this,{type:"continue"})};b(this,he,Qs({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(_,z)=>{D(this,W,ee).call(this,{type:"failed",failureCount:_,error:z})},onPause:()=>{D(this,W,ee).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,M).canRun(this)}));const a=this.state.status==="pending",r=!c(this,he).canStart();try{if(a)s();else{D(this,W,ee).call(this,{type:"pending",variables:e,isPaused:r}),await((u=(i=c(this,M).config).onMutate)==null?void 0:u.call(i,e,this));const z=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,e));z!==this.state.context&&D(this,W,ee).call(this,{type:"pending",context:z,variables:e,isPaused:r})}const _=await c(this,he).start();return await((h=(p=c(this,M).config).onSuccess)==null?void 0:h.call(p,_,e,this.state.context,this)),await((y=(f=this.options).onSuccess)==null?void 0:y.call(f,_,e,this.state.context)),await((C=(E=c(this,M).config).onSettled)==null?void 0:C.call(E,_,null,this.state.variables,this.state.context,this)),await((S=(v=this.options).onSettled)==null?void 0:S.call(v,_,null,e,this.state.context)),D(this,W,ee).call(this,{type:"success",data:_}),_}catch(_){try{throw await((P=(j=c(this,M).config).onError)==null?void 0:P.call(j,_,e,this.state.context,this)),await((m=(x=this.options).onError)==null?void 0:m.call(x,_,e,this.state.context)),await((T=(k=c(this,M).config).onSettled)==null?void 0:T.call(k,void 0,_,this.state.variables,this.state.context,this)),await((J=(U=this.options).onSettled)==null?void 0:J.call(U,void 0,_,e,this.state.context)),_}finally{D(this,W,ee).call(this,{type:"error",error:_})}}finally{c(this,M).runNext(this)}}},G=new WeakMap,M=new WeakMap,he=new WeakMap,W=new WeakSet,ee=function(e){const s=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),F.batch(()=>{c(this,G).forEach(a=>{a.onMutationUpdate(e)}),c(this,M).notify({mutation:this,type:"updated",action:e})})},ss);function Qa(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var X,H,Fe,ns,za=(ns=class extends et{constructor(e={}){super();w(this,X);w(this,H);w(this,Fe);this.config=e,b(this,X,new Set),b(this,H,new Map),b(this,Fe,0)}build(e,s,a){const r=new qa({mutationCache:this,mutationId:++ze(this,Fe)._,options:e.defaultMutationOptions(s),state:a});return this.add(r),r}add(e){c(this,X).add(e);const s=Ve(e);if(typeof s=="string"){const a=c(this,H).get(s);a?a.push(e):c(this,H).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,X).delete(e)){const s=Ve(e);if(typeof s=="string"){const a=c(this,H).get(s);if(a)if(a.length>1){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}else a[0]===e&&c(this,H).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Ve(e);if(typeof s=="string"){const a=c(this,H).get(s),r=a==null?void 0:a.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var a;const s=Ve(e);if(typeof s=="string"){const r=(a=c(this,H).get(s))==null?void 0:a.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){F.batch(()=>{c(this,X).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,X).clear(),c(this,H).clear()})}getAll(){return Array.from(c(this,X))}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Ut(s,a))}findAll(e={}){return this.getAll().filter(s=>Ut(e,s))}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return F.batch(()=>Promise.all(e.map(s=>s.continue().catch(K))))}},X=new WeakMap,H=new WeakMap,Fe=new WeakMap,ns);function Ve(t){var e;return(e=t.options.scope)==null?void 0:e.id}function zt(t){return{onFetch:(e,s)=>{var h,f,y,E,C;const a=e.options,r=(y=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:y.direction,i=((E=e.state.data)==null?void 0:E.pages)||[],u=((C=e.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const p=async()=>{let v=!1;const S=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},j=Fs(e.options,e.fetchOptions),P=async(x,m,k)=>{if(v)return Promise.reject();if(m==null&&x.pages.length)return Promise.resolve(x);const U=(()=>{const Z={client:e.client,queryKey:e.queryKey,pageParam:m,direction:k?"backward":"forward",meta:e.options.meta};return S(Z),Z})(),J=await j(U),{maxPages:_}=e.options,z=k?Pa:Ta;return{pages:z(x.pages,J,_),pageParams:z(x.pageParams,m,_)}};if(r&&i.length){const x=r==="backward",m=x?Ka:Kt,k={pages:i,pageParams:u},T=m(a,k);l=await P(k,T,x)}else{const x=t??i.length;do{const m=d===0?u[0]??a.initialPageParam:Kt(a,l);if(d>0&&m==null)break;l=await P(l,m),d++}while(d<x)}return l};e.options.persister?e.fetchFn=()=>{var v,S;return(S=(v=e.options).persister)==null?void 0:S.call(v,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=p}}}function Kt(t,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,s[a],s):void 0}function Ka(t,{pages:e,pageParams:s}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,s[0],s):void 0}var A,ne,ae,Ee,ke,re,Ce,Te,as,Va=(as=class{constructor(t={}){w(this,A);w(this,ne);w(this,ae);w(this,Ee);w(this,ke);w(this,re);w(this,Ce);w(this,Te);b(this,A,t.queryCache||new Ua),b(this,ne,t.mutationCache||new za),b(this,ae,t.defaultOptions||{}),b(this,Ee,new Map),b(this,ke,new Map),b(this,re,0)}mount(){ze(this,re)._++,c(this,re)===1&&(b(this,Ce,Us.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onFocus())})),b(this,Te,We.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onOnline())})))}unmount(){var t,e;ze(this,re)._--,c(this,re)===0&&((t=c(this,Ce))==null||t.call(this),b(this,Ce,void 0),(e=c(this,Te))==null||e.call(this),b(this,Te,void 0))}isFetching(t){return c(this,A).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,ne).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,A).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=c(this,A).build(this,e),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(mt(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return c(this,A).findAll(t).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(t,e,s){const a=this.defaultQueryOptions({queryKey:t}),r=c(this,A).get(a.queryHash),i=r==null?void 0:r.state.data,u=wa(e,i);if(u!==void 0)return c(this,A).build(this,a).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return F.batch(()=>c(this,A).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,A).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=c(this,A);F.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=c(this,A);return F.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},a=F.batch(()=>c(this,A).findAll(t).map(r=>r.cancel(s)));return Promise.all(a).then(K).catch(K)}invalidateQueries(t,e={}){return F.batch(()=>(c(this,A).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},a=F.batch(()=>c(this,A).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,s);return s.throwOnError||(i=i.catch(K)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(K)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=c(this,A).build(this,e);return s.isStaleByTime(mt(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(K).catch(K)}fetchInfiniteQuery(t){return t.behavior=zt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(K).catch(K)}ensureInfiniteQueryData(t){return t.behavior=zt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return We.isOnline()?c(this,ne).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,A)}getMutationCache(){return c(this,ne)}getDefaultOptions(){return c(this,ae)}setDefaultOptions(t){b(this,ae,t)}setQueryDefaults(t,e){c(this,Ee).set(Le(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,Ee).values()],s={};return e.forEach(a=>{De(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,e){c(this,ke).set(Le(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,ke).values()],s={};return e.forEach(a=>{De(t,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,ae).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=bt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===jt&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,ae).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,A).clear(),c(this,ne).clear()}},A=new WeakMap,ne=new WeakMap,ae=new WeakMap,Ee=new WeakMap,ke=new WeakMap,re=new WeakMap,Ce=new WeakMap,Te=new WeakMap,as),Ha=o.createContext(void 0),$a=({client:t,children:e})=>(o.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(Ha.Provider,{value:t,children:e}));const Vt=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:3001":"";async function st(t,e,s={}){const{data:a,token:r,headers:i={}}=s,u=Vt()+e,l={method:t,headers:{...i},credentials:"include"};r&&(l.headers={...l.headers,Authorization:`Bearer ${r}`}),a&&(typeof FormData<"u"&&a instanceof FormData?l.body=a:(l.headers={"Content-Type":"application/json",...l.headers},l.body=JSON.stringify(a)));let d=await fetch(u,l),p=d.headers.get("content-type"),h;if(p&&p.includes("application/json")?h=await d.json():h=await d.text(),(d.status===401||d.status===403)&&e!=="/api/auth/refresh"&&e!=="/api/auth/me"&&!e.includes("/api/auth/"))try{await new Promise(y=>setTimeout(y,100));const f=await fetch(Vt()+"/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const y=await f.json();if(y.token){if(localStorage.setItem("token",y.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(y.token),l.headers={...l.headers,Authorization:`Bearer ${y.token}`},d=await fetch(u,l),p=d.headers.get("content-type"),p&&p.includes("application/json")?h=await d.json():h=await d.text(),!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}}throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error("Sesi berakhir, silakan login kembali")}catch(f){const y=f instanceof Error?f.message:"Sesi berakhir, silakan login kembali";throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error(y)}if(!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}const Je=(t,e,s)=>st("GET",t,{token:e,headers:s}),lt=(t,e,s,a)=>st("POST",t,{data:e,token:s,headers:a}),ui=(t,e,s,a)=>st("PUT",t,{data:e,token:s,headers:a}),hi=(t,e,s)=>st("DELETE",t,{token:e,headers:s}),Ks=o.createContext({}),Ba=({children:t})=>{const[e,s]=o.useState(null),[a,r]=o.useState(null),[i,u]=o.useState(null),[l,d]=o.useState(null),[p,h]=o.useState(!0);o.useEffect(()=>(window.dispatchTokenUpdate=x=>{u(x),localStorage.setItem("token",x)},()=>{delete window.dispatchTokenUpdate}),[]),o.useEffect(()=>{const x=localStorage.getItem("token"),m=localStorage.getItem("originalToken"),k=localStorage.getItem("originalUser");if(x){if(u(x),m&&k)try{d(m),r(JSON.parse(k))}catch(T){console.error("Error parsing stored original user:",T),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}Je("/api/auth/me",x).then(T=>{s(T.user),!a&&!k&&r(T.user)}).catch(T=>{var U,J;console.error("Error fetching user:",T),((U=T.message)!=null&&U.includes("Sesi berakhir")||(J=T.message)!=null&&J.includes("Unauthorized"))&&y()}).finally(()=>h(!1))}else h(!1)},[]);const f=async(x,m)=>{h(!0);try{const k=await lt("/api/auth/login",{email:x,password:m});u(k.token),s(k.user),r(k.user),d(null),localStorage.setItem("token",k.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}finally{h(!1)}},y=()=>{u(null),s(null),r(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")},E=async()=>{if(i){h(!0);try{const x=await Je("/api/auth/me",i);s(x.user)}finally{h(!1)}}},C=x=>{u(x),localStorage.setItem("token",x)},v=async x=>{if(!i||!P)throw new Error("Only admin kanwil can impersonate");h(!0);try{l||(d(i),localStorage.setItem("originalToken",i)),a||(r(e),localStorage.setItem("originalUser",JSON.stringify(e)));const m=await lt("/api/auth/impersonate",{userId:x},i);u(m.token),s(m.user),localStorage.setItem("token",m.token),console.log("Impersonation started:",m.impersonation)}finally{h(!1)}},S=async()=>{if(!i||!(e!=null&&e.impersonating)&&!l){console.log("No impersonation to stop:",{hasToken:!!i,userImpersonating:e==null?void 0:e.impersonating,hasOriginalToken:!!l});return}h(!0);try{console.log("Stopping impersonation...");const x=await lt("/api/auth/stop-impersonate",{},i);u(x.token),s(x.user),d(null),localStorage.setItem("token",x.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),console.log("Impersonation stopped successfully")}catch(x){console.error("Error stopping impersonation:",x),l&&a&&(console.log("Using fallback restore"),u(l),s(a),d(null),localStorage.setItem("token",l),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"))}finally{h(!1)}},j=!!l||!!(e!=null&&e.impersonating),P=(e==null?void 0:e.role)==="admin"&&(e==null?void 0:e.office_id)===null;return n.jsx(Ks.Provider,{value:{user:e,originalUser:a,token:i,loading:p,login:f,logout:y,refreshUser:E,isAuthenticated:!!e&&!!i,isImpersonating:j,isAdminKanwil:P,impersonateUser:v,stopImpersonating:S,updateToken:C},children:t})},ie=()=>o.useContext(Ks),Ga=gt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=o.forwardRef(({className:t,variant:e,size:s,asChild:a=!1,...r},i)=>{const u=a?An:"button";return n.jsx(u,{className:N(Ga({variant:e,size:s,className:t})),ref:i,...r})});q.displayName="Button";const Wa=Ln,Ja=Dn,Ya=o.forwardRef(({className:t,inset:e,children:s,...a},r)=>n.jsxs(ls,{ref:r,className:N("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...a,children:[s,n.jsx(_n,{className:"ml-auto h-4 w-4"})]}));Ya.displayName=ls.displayName;const Xa=o.forwardRef(({className:t,...e},s)=>n.jsx(cs,{ref:s,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Xa.displayName=cs.displayName;const Vs=o.forwardRef(({className:t,sideOffset:e=4,...s},a)=>n.jsx(In,{children:n.jsx(ds,{ref:a,sideOffset:e,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Vs.displayName=ds.displayName;const He=o.forwardRef(({className:t,inset:e,...s},a)=>n.jsx(us,{ref:a,className:N("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...s}));He.displayName=us.displayName;const Za=o.forwardRef(({className:t,children:e,checked:s,...a},r)=>n.jsxs(hs,{ref:r,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...a,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(fs,{children:n.jsx(On,{className:"h-4 w-4"})})}),e]}));Za.displayName=hs.displayName;const er=o.forwardRef(({className:t,children:e,...s},a)=>n.jsxs(ms,{ref:a,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(fs,{children:n.jsx(Rn,{className:"h-2 w-2 fill-current"})})}),e]}));er.displayName=ms.displayName;const Hs=o.forwardRef(({className:t,inset:e,...s},a)=>n.jsx(ps,{ref:a,className:N("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));Hs.displayName=ps.displayName;const $e=o.forwardRef(({className:t,...e},s)=>n.jsx(xs,{ref:s,className:N("-mx-1 my-1 h-px bg-muted",t),...e}));$e.displayName=xs.displayName;const Ie=Mn,tr=Fn,fi=vs,$s=o.forwardRef(({className:t,...e},s)=>n.jsx(gs,{ref:s,className:N("fixed inset-0 z-[9999] bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 duration-200",t),...e}));$s.displayName=gs.displayName;const xe=o.forwardRef(({className:t,children:e,...s},a)=>n.jsxs(tr,{children:[n.jsx($s,{}),n.jsxs(ys,{ref:a,className:N("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(vs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(yt,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xe.displayName=ys.displayName;const ge=({className:t,...e})=>n.jsx("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ge.displayName="DialogHeader";const sr=({className:t,...e})=>n.jsx("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});sr.displayName="DialogFooter";const ye=o.forwardRef(({className:t,...e},s)=>n.jsx(bs,{ref:s,className:N("text-lg font-semibold leading-none tracking-tight",t),...e}));ye.displayName=bs.displayName;const ve=o.forwardRef(({className:t,...e},s)=>n.jsx(js,{ref:s,className:N("text-sm text-muted-foreground",t),...e}));ve.displayName=js.displayName;var Bs={exports:{}},Gs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=o;function nr(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:nr,rr=Ae.useState,ir=Ae.useEffect,or=Ae.useLayoutEffect,lr=Ae.useDebugValue;function cr(t,e){var s=e(),a=rr({inst:{value:s,getSnapshot:e}}),r=a[0].inst,i=a[1];return or(function(){r.value=s,r.getSnapshot=e,ct(r)&&i({inst:r})},[t,s,e]),ir(function(){return ct(r)&&i({inst:r}),t(function(){ct(r)&&i({inst:r})})},[t]),lr(s),s}function ct(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ar(t,s)}catch{return!0}}function dr(t,e){return e()}var ur=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dr:cr;Gs.useSyncExternalStore=Ae.useSyncExternalStore!==void 0?Ae.useSyncExternalStore:ur;Bs.exports=Gs;var hr=Bs.exports;function fr(){return hr.useSyncExternalStore(mr,()=>!0,()=>!1)}function mr(){return()=>{}}var wt="Avatar",[pr,mi]=rs(wt),[xr,Ws]=pr(wt),Js=o.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[r,i]=o.useState("idle");return n.jsx(xr,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:n.jsx(Ye.span,{...a,ref:e})})});Js.displayName=wt;var Ys="AvatarImage",Xs=o.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:r=()=>{},...i}=t,u=Ws(Ys,s),l=gr(a,i),d=Un(p=>{r(p),u.onImageLoadingStatusChange(p)});return ht(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?n.jsx(Ye.img,{...i,ref:e,src:a}):null});Xs.displayName=Ys;var Zs="AvatarFallback",en=o.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...r}=t,i=Ws(Zs,s),[u,l]=o.useState(a===void 0);return o.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(d)}},[a]),u&&i.imageLoadingStatus!=="loaded"?n.jsx(Ye.span,{...r,ref:e}):null});en.displayName=Zs;function Ht(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function gr(t,{referrerPolicy:e,crossOrigin:s}){const a=fr(),r=o.useRef(null),i=a?(r.current||(r.current=new window.Image),r.current):null,[u,l]=o.useState(()=>Ht(i,t));return ht(()=>{l(Ht(i,t))},[i,t]),ht(()=>{const d=f=>()=>{l(f)};if(!i)return;const p=d("loaded"),h=d("error");return i.addEventListener("load",p),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",p),i.removeEventListener("error",h)}},[i,s,e]),u}var tn=Js,sn=Xs,nn=en;const an=o.forwardRef(({className:t,...e},s)=>n.jsx(tn,{ref:s,className:N("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));an.displayName=tn.displayName;const yr=o.forwardRef(({className:t,...e},s)=>n.jsx(sn,{ref:s,className:N("aspect-square h-full w-full",t),...e}));yr.displayName=sn.displayName;const rn=o.forwardRef(({className:t,...e},s)=>n.jsx(nn,{ref:s,className:N("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));rn.displayName=nn.displayName;const on=o.forwardRef(({className:t,type:e,...s},a)=>n.jsx("input",{type:e,className:N("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s}));on.displayName="Input";const vr=gt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $t({className:t,variant:e,...s}){return n.jsx("div",{className:N(vr({variant:e}),t),...s})}const br=()=>{const{user:t,originalUser:e,isImpersonating:s,impersonateUser:a,stopImpersonating:r,logout:i,token:u,loading:l,isAdminKanwil:d}=ie(),p=Yn(),[h,f]=o.useState(!1),[y,E]=o.useState(!1),[C,v]=o.useState(!1),[S,j]=o.useState(!1),[P,x]=o.useState(!1),[m,k]=o.useState(""),[T,U]=o.useState([]),[J,_]=o.useState(!1),[z,Z]=o.useState(!1),[nt,fn]=o.useState(""),St=(()=>{const g=s?(e==null?void 0:e.role)==="admin":(t==null?void 0:t.role)==="admin",$=(t==null?void 0:t.role)==="admin_wilayah",Qe=(t==null?void 0:t.role)==="user";t==null||t.role;const fe=[{name:"Dashboard",href:"/dashboard",icon:Ot},{name:"Template Generator",href:"/generator",icon:it},{name:"Riwayat Surat",href:"/letters",icon:it},{name:"Data Pengajuan",href:"/pengajuan",icon:Rt}];return(Qe||g)&&fe.splice(2,0,{name:"SK Generator",href:"/generator/sk",icon:it}),g&&fe.push({name:"Management User",href:"/users",icon:$n}),$&&(fe.unshift({name:"Dashboard Admin Wilayah",href:"/admin-wilayah/dashboard",icon:Ot}),fe.push({name:"Upload File",href:"/admin-wilayah/dashboard",icon:Rt})),fe.push({name:"Settings",href:"/settings",icon:Bn}),fe})();o.useEffect(()=>{z&&d&&mn()},[z,d]);const mn=async()=>{if(u){_(!0);try{console.log(" Fetching users for impersonation...");const g=await Je("/api/users",u);console.log(" Raw users response:",g);const $=g.users.filter(Qe=>Qe.id!==(e==null?void 0:e.id)&&Qe.role!=="admin");console.log(" Filtered users:",$),U($)}catch(g){console.error(" Failed to fetch users:",g),U([])}finally{_(!1)}}},Nt=g=>g==="/letters"?p.pathname.startsWith("/letters"):g==="/pengajuan"?p.pathname.startsWith("/pengajuan"):p.pathname===g,Et=()=>{E(!0),f(!1)},pn=()=>{i(),E(!1)},kt=()=>{Z(!0),f(!1)},xn=g=>{k(g),Z(!1),v(!0)},Ct=T.filter(g=>g.full_name.toLowerCase().includes(nt.toLowerCase())||g.email.toLowerCase().includes(nt.toLowerCase())),gn=async()=>{if(m)try{await a(m),v(!1),k("")}catch(g){console.error("Failed to impersonate user:",g),alert("Failed to impersonate user. Please try again.")}},at=()=>{j(!0),f(!1)},yn=async()=>{try{await r(),j(!1),x(!0),setTimeout(()=>{x(!1)},3e3)}catch(g){console.error("Failed to stop impersonating:",g),alert("Failed to stop impersonating. Please try again.")}};return n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs(ot,{to:"/dashboard",className:"flex items-center space-x-3",children:[n.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Kementerian Agama",className:"h-8 w-8",onError:g=>{console.error("Logo Kemenag not found"),g.currentTarget.style.display="none"}}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("h1",{className:"text-lg font-semibold text-green-700",children:"Si Imut"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Sistem Informasi Mutasi"})]})]})}),s&&n.jsxs("div",{className:"hidden md:flex items-center bg-blue-50 border border-blue-200 rounded-lg px-3 py-1",children:[n.jsx(_e,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Impersonating: ",t==null?void 0:t.full_name]}),n.jsx(q,{variant:"ghost",size:"sm",onClick:at,className:"ml-2 h-6 px-2 text-blue-600 hover:text-blue-700",children:n.jsx(Ke,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"hidden md:flex items-center space-x-8",children:St.map(g=>{const $=g.icon;return n.jsxs(ot,{to:g.href,className:N("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",Nt(g.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),children:[n.jsx($,{className:"h-4 w-4"}),n.jsx("span",{children:g.name})]},g.name)})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(Wa,{children:[n.jsx(Ja,{asChild:!0,children:n.jsx(q,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:n.jsx(an,{className:"h-8 w-8",children:n.jsx(rn,{className:"bg-green-100 text-green-700",children:l?n.jsx("span",{className:"animate-pulse w-6 h-6 block bg-green-200 rounded-full mx-auto"}):t!=null&&t.full_name?t.full_name.split(" ").map(g=>g[0]).join("").toUpperCase():"?"})})})}),n.jsxs(Vs,{className:"w-64",align:"end",children:[n.jsx(Hs,{className:"font-normal",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("p",{className:"text-sm font-semibold leading-none",children:t==null?void 0:t.full_name}),n.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t==null?void 0:t.email}),d?n.jsx("p",{className:"text-xs leading-none text-blue-600 font-medium",children:" Admin Kanwil (All Access)"}):n.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Role: ",t==null?void 0:t.role]}),(t==null?void 0:t.office_id)&&!d&&n.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Office ID: ",t.office_id]}),s&&n.jsxs("p",{className:"text-xs leading-none text-blue-600",children:["Impersonating as ",t==null?void 0:t.full_name]})]})}),n.jsx($e,{}),s&&n.jsxs(n.Fragment,{children:[n.jsxs(He,{onClick:at,className:"text-blue-600",children:[n.jsx(Ke,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Stop Impersonating"})]}),n.jsx($e,{})]}),d&&!s&&n.jsxs(n.Fragment,{children:[n.jsxs(He,{onClick:kt,className:"text-blue-600",children:[n.jsx(At,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsx($e,{})]}),n.jsxs(He,{onClick:Et,className:"text-red-600",children:[n.jsx(_t,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Logout"})]})]})]}),n.jsx(q,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>f(!h),children:h?n.jsx(yt,{className:"h-5 w-5"}):n.jsx(qn,{className:"h-5 w-5"})})]})]}),h&&n.jsx("div",{className:"md:hidden",children:n.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[St.map(g=>{const $=g.icon;return n.jsxs(ot,{to:g.href,className:N("flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium",Nt(g.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),onClick:()=>f(!1),children:[n.jsx($,{className:"h-5 w-5"}),n.jsx("span",{children:g.name})]},g.name)}),s&&n.jsxs("button",{onClick:at,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(Ke,{className:"h-5 w-5"}),n.jsx("span",{children:"Stop Impersonating"})]}),d&&!s&&n.jsxs("button",{onClick:kt,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(At,{className:"h-5 w-5"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsxs("button",{onClick:Et,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 w-full",children:[n.jsx(_t,{className:"h-5 w-5"}),n.jsx("span",{children:"Logout"})]})]})})]})}),n.jsx(Ie,{open:y,onOpenChange:E,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Qn,{className:"w-5 h-5 text-orange-500"}),"Konfirmasi Logout"]}),n.jsx(ve,{children:"Apakah Anda yakin ingin keluar dari sistem? Anda perlu login kembali untuk mengakses aplikasi."})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>E(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:pn,className:"bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]})}),n.jsx(Ie,{open:z,onOpenChange:Z,children:n.jsxs(xe,{className:"sm:max-w-lg",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(_e,{className:"w-5 h-5 text-blue-500"}),"Pilih User untuk Impersonate"]}),n.jsx(ve,{children:"Pilih user yang ingin Anda impersonate dari daftar di bawah ini."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx(on,{placeholder:"Cari user...",value:nt,onChange:g=>fn(g.target.value),className:"pl-10"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:J?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(Kn,{className:"w-6 h-6 animate-spin mr-2"}),n.jsx("span",{className:"text-sm text-gray-500",children:"Loading users..."})]}):T.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang tersedia untuk impersonation"}):Ct.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang cocok dengan pencarian"}):n.jsx("div",{className:"divide-y",children:Ct.map(g=>n.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>xn(g.id),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(It,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:g.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:g.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx($t,{variant:"outline",className:"text-xs",children:g.role}),n.jsx("span",{className:"text-xs text-gray-500",children:g.office_id||"No Office"})]})]})]})},g.id))})})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx(q,{onClick:()=>Z(!1),variant:"outline",children:"Batal"})})]})}),n.jsx(Ie,{open:C,onOpenChange:v,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(_e,{className:"w-5 h-5 text-blue-500"}),"Impersonate User"]}),n.jsx(ve,{children:"Konfirmasi untuk impersonate user yang dipilih."})]}),n.jsxs("div",{className:"space-y-4",children:[m&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(It,{className:"w-4 h-4 text-blue-600"})}),n.jsx("div",{className:"flex-1",children:(()=>{const g=T.find($=>$.id===m);return g?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-sm",children:g.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:g.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx($t,{variant:"outline",className:"text-xs",children:g.role}),n.jsx("span",{className:"text-xs text-gray-500",children:g.office_id||"No Office"})]})]}):n.jsx("div",{className:"text-sm text-gray-500",children:"User tidak ditemukan"})})()})]})}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsxs(q,{onClick:()=>{v(!1),Z(!0)},variant:"outline",className:"w-full",children:[n.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Pilih User Lain"]})})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>v(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:gn,disabled:!m,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Impersonate"})]})]})}),n.jsx(Ie,{open:S,onOpenChange:j,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Ke,{className:"w-5 h-5 text-blue-500"}),"Stop Impersonating"]}),n.jsxs(ve,{children:["Anda sedang mengakses sistem sebagai ",n.jsx("strong",{children:t==null?void 0:t.full_name}),". Apakah Anda yakin ingin kembali ke akun admin Anda?"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(_e,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Setelah stop impersonate, Anda akan kembali ke akun: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>j(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:yn,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Ya, Stop Impersonating"})]})]})}),n.jsx(Ie,{open:P,onOpenChange:x,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Hn,{className:"w-5 h-5 text-green-500"}),"Stop Impersonating Berhasil"]}),n.jsx(ve,{children:"Anda telah berhasil kembali ke akun admin Anda."})]}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(_e,{className:"w-4 h-4 text-green-600 mr-2"}),n.jsxs("span",{className:"text-sm text-green-700",children:["Sekarang Anda mengakses sistem sebagai: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(q,{onClick:()=>x(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"OK"})})]})})]})};function oe({className:t,...e}){return n.jsx("div",{className:N("animate-pulse rounded-md bg-muted",t),...e})}const jr=1,wr=1e6;let dt=0;function Sr(){return dt=(dt+1)%Number.MAX_SAFE_INTEGER,dt.toString()}const ut=new Map,Bt=t=>{if(ut.has(t))return;const e=setTimeout(()=>{ut.delete(t),Re({type:"REMOVE_TOAST",toastId:t})},wr);ut.set(t,e)},Nr=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,jr)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?Bt(s):t.toasts.forEach(a=>{Bt(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},Be=[];let Ge={toasts:[]};function Re(t){Ge=Nr(Ge,t),Be.forEach(e=>{e(Ge)})}function Er({...t}){const e=Sr(),s=r=>Re({type:"UPDATE_TOAST",toast:{...r,id:e}}),a=()=>Re({type:"DISMISS_TOAST",toastId:e});return Re({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||a()}}}),{id:e,dismiss:a,update:s}}function kr(){const[t,e]=o.useState(Ge);return o.useEffect(()=>(Be.push(e),()=>{const s=Be.indexOf(e);s>-1&&Be.splice(s,1)}),[t]),{...t,toast:Er,dismiss:s=>Re({type:"DISMISS_TOAST",toastId:s})}}const Cr=Gn,ln=o.forwardRef(({className:t,...e},s)=>n.jsx(ws,{ref:s,className:N("fixed top-0 z-[10000] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));ln.displayName=ws.displayName;const Tr=gt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cn=o.forwardRef(({className:t,variant:e,...s},a)=>n.jsx(Ss,{ref:a,className:N(Tr({variant:e}),t),...s}));cn.displayName=Ss.displayName;const Pr=o.forwardRef(({className:t,...e},s)=>n.jsx(Ns,{ref:s,className:N("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Pr.displayName=Ns.displayName;const dn=o.forwardRef(({className:t,...e},s)=>n.jsx(Es,{ref:s,className:N("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(yt,{className:"h-4 w-4"})}));dn.displayName=Es.displayName;const un=o.forwardRef(({className:t,...e},s)=>n.jsx(ks,{ref:s,className:N("text-sm font-semibold",t),...e}));un.displayName=ks.displayName;const hn=o.forwardRef(({className:t,...e},s)=>n.jsx(Cs,{ref:s,className:N("text-sm opacity-90",t),...e}));hn.displayName=Cs.displayName;function Gt(){const{toasts:t}=kr();return n.jsxs(Cr,{children:[t.map(function({id:e,title:s,description:a,action:r,...i}){return n.jsxs(cn,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(un,{children:s}),a&&n.jsx(hn,{children:a})]}),r,n.jsx(dn,{})]},e)}),n.jsx(ln,{})]})}const qe=({children:t})=>{const{user:e,token:s,refreshUser:a}=ie(),[r,i]=o.useState(!1),[u,l]=o.useState([]);return o.useState(""),o.useState(!1),o.useState(null),o.useEffect(()=>{e&&!e.office_id?(i(!0),s&&Je("/api/offices",s).then(d=>l(d.offices||[]))):i(!1)},[e,s]),!e&&s?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"h-16 bg-white border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(oe,{className:"h-8 w-8 rounded"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(oe,{className:"h-4 w-32"}),n.jsx(oe,{className:"h-3 w-24"})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx(oe,{className:"h-8 w-8 rounded-full"})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(oe,{className:"h-8 w-48"}),n.jsx(oe,{className:"h-32 w-full"}),n.jsx(oe,{className:"h-32 w-full"})]})}),n.jsx(Gt,{})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(br,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),n.jsx(Gt,{})]})};class Ar extends o.Component{constructor(){super(...arguments);Pt(this,"state",{hasError:!1})}static getDerivedStateFromError(s){return s.message.includes("403")||s.message.includes("Forbidden")?(window.showSessionExpiredModal&&window.showSessionExpiredModal(),{hasError:!1}):{hasError:!0,error:s}}componentDidCatch(s,a){if(console.error("ErrorBoundary caught an error:",s,a),s.message.includes("403")||s.message.includes("Forbidden")){window.showSessionExpiredModal&&window.showSessionExpiredModal();return}}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:n.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Terjadi Kesalahan"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maaf, terjadi kesalahan yang tidak terduga. Silakan coba refresh halaman atau hubungi administrator."}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>window.location.reload(),children:"Refresh Halaman"})})]})})}):this.props.children}}const _r=o.lazy(()=>R(()=>import("./Dashboard-DE480iPw.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ir=o.lazy(()=>R(()=>import("./Settings-BSfsskfK.js"),__vite__mapDeps([6,1,2,3,7,8,9,10,11,12]))),Or=o.lazy(()=>R(()=>import("./TemplateSelection-DsUizaVa.js"),__vite__mapDeps([13,1,2,3]))),Rr=o.lazy(()=>R(()=>import("./TemplateForm-LkOKVjOJ.js"),__vite__mapDeps([14,1,2,7,11,15,3,16,17]))),Lr=o.lazy(()=>R(()=>import("./NotFound-BoxbWDCq.js"),__vite__mapDeps([18,1,2]))),Dr=o.lazy(()=>R(()=>import("./Index-D-OpCNAT.js"),__vite__mapDeps([19,1,2,7,3]))),Mr=o.lazy(()=>R(()=>import("./LetterDetail-C3UxWh-6.js"),__vite__mapDeps([20,1,2,3,16,4,17]))),Fr=o.lazy(()=>R(()=>import("./Letters-LFba02F6.js"),__vite__mapDeps([21,1,2,3,4,16,22,11,15,7]))),Ur=o.lazy(()=>R(()=>import("./LetterPrintPreview-BssrIqcP.js"),__vite__mapDeps([23,1,2,16]))),qr=o.lazy(()=>R(()=>import("./Users-it1aaw-r.js"),__vite__mapDeps([24,1,2,7,11,4,12,3]))),Qr=o.lazy(()=>R(()=>import("./PengajuanSelect-BsqZ7JGK.js"),__vite__mapDeps([25,1,2,3,9,4]))),zr=o.lazy(()=>R(()=>import("./PengajuanFileUpload-HTvz-BRa.js"),__vite__mapDeps([26,1,2,3,27,12]))),Kr=o.lazy(()=>R(()=>import("./PengajuanIndex-C9mvlwa_.js"),__vite__mapDeps([28,1,2,3,11,4,22,12]))),Vr=o.lazy(()=>R(()=>import("./PengajuanDetail-CNAA9Qql.js"),__vite__mapDeps([29,1,2,3,12,8,7,10]))),Hr=o.lazy(()=>R(()=>import("./PengajuanEdit-DkTqYIm6.js"),__vite__mapDeps([30,1,2,3,7,12]))),$r=o.lazy(()=>R(()=>import("./JobTypeConfiguration-BcpDa841.js"),__vite__mapDeps([31,1,2,3,7,9,10]))),Br=o.lazy(()=>R(()=>import("./AdminWilayahDashboard-C07N6ceQ.js"),__vite__mapDeps([32,1,2,3,27,11,5]))),Gr=o.lazy(()=>R(()=>import("./AdminWilayahUploadPage-DAd_QeRo.js"),__vite__mapDeps([33,1,2,3,11,12]))),Wr=o.lazy(()=>R(()=>import("./SKForm-CoeqQ_7p.js"),__vite__mapDeps([34,1,2,15,7,3]))),O=()=>n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),Jr=new Va,pe=({children:t})=>{const{user:e,loading:s}=ie();return s?null:e?n.jsx(qe,{children:t}):n.jsx(Ue,{to:"/",replace:!0})},Wt=({children:t})=>{const{user:e,loading:s}=ie();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"?n.jsx(Ue,{to:"/dashboard",replace:!0}):n.jsx(qe,{children:t})},Oe=({children:t})=>{const{user:e,loading:s}=ie();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"&&e.role!=="operator"&&e.role!=="admin_wilayah"?n.jsx(Ue,{to:"/dashboard",replace:!0}):n.jsx(qe,{children:t})},Yr=({children:t})=>{const{user:e,loading:s}=ie();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"&&e.role!=="user"?n.jsx(Ue,{to:"/dashboard",replace:!0}):n.jsx(qe,{children:t})},Jt=({children:t})=>{const{user:e,loading:s}=ie();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin_wilayah"?n.jsx(Ue,{to:"/dashboard",replace:!0}):n.jsx(qe,{children:t})},Xr=()=>n.jsxs(ea,{children:[n.jsx(I,{path:"/",element:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Dr,{})})}),n.jsx(I,{path:"/dashboard",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(_r,{})})})}),n.jsx(I,{path:"/generator",element:n.jsx(Oe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Or,{})})})}),n.jsx(I,{path:"/generator/create/:templateId",element:n.jsx(Oe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Rr,{})})})}),n.jsx(I,{path:"/generator/sk",element:n.jsx(Yr,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Wr,{})})})}),n.jsx(I,{path:"/users",element:n.jsx(Wt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(qr,{})})})}),n.jsx(I,{path:"/settings",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Ir,{})})})}),n.jsx(I,{path:"/letters/:id",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Mr,{})})})}),n.jsx(I,{path:"/letters",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Fr,{})})})}),n.jsx(I,{path:"/letters/:id/preview",element:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Ur,{})})}),n.jsx(I,{path:"/pengajuan",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Kr,{})})})}),n.jsx(I,{path:"/pengajuan/select",element:n.jsx(Oe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Qr,{})})})}),n.jsx(I,{path:"/pengajuan/:pengajuanId",element:n.jsx(pe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Vr,{})})})}),n.jsx(I,{path:"/pengajuan/:pengajuanId/upload",element:n.jsx(Oe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(zr,{})})})}),n.jsx(I,{path:"/pengajuan/:pengajuanId/edit",element:n.jsx(Oe,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Hr,{})})})}),n.jsx(I,{path:"/job-type-configuration",element:n.jsx(Wt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx($r,{})})})}),n.jsx(I,{path:"/admin-wilayah/dashboard",element:n.jsx(Jt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Br,{})})})}),n.jsx(I,{path:"/admin-wilayah/upload/:pengajuanId",element:n.jsx(Jt,{children:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Gr,{})})})}),n.jsx(I,{path:"*",element:n.jsx(o.Suspense,{fallback:n.jsx(O,{}),children:n.jsx(Lr,{})})})]}),Zr=()=>{const[t,e]=o.useState(!1),s=Zn(),{logout:a}=ie();return o.useEffect(()=>{window.showSessionExpiredModal=()=>{const l=window.location.pathname;l==="/"||l==="/login"||e(!0)},window.dispatchTokenUpdate=l=>{localStorage.setItem("token",l)};const r=l=>{var d,p;if(l.error&&typeof l.error=="object"){const h=l.error;if(h.status===403||(d=h.message)!=null&&d.includes("403")||(p=h.message)!=null&&p.includes("Forbidden")){l.preventDefault();const f=window.location.pathname;!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},i=l=>{var d,p;if(l.reason&&typeof l.reason=="object"){const h=l.reason;if(h.status===403||(d=h.message)!=null&&d.includes("403")||(p=h.message)!=null&&p.includes("Forbidden")){l.preventDefault();const f=window.location.pathname;!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},u=window.fetch;return window.fetch=async(...l)=>{try{const d=await u(...l);if(d.status===403&&!(typeof l[0]=="string"?l[0]:l[0].url).includes("/api/auth/")){const h=window.location.pathname;return!(h==="/"||h==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Response(JSON.stringify({success:!1,message:"Sesi berakhir, silakan login kembali"}),{status:403,headers:{"Content-Type":"application/json"}})}return d}catch(d){throw d}},window.addEventListener("error",r),window.addEventListener("unhandledrejection",i),()=>{window.removeEventListener("error",r),window.removeEventListener("unhandledrejection",i),window.fetch=u,delete window.showSessionExpiredModal,delete window.dispatchTokenUpdate}},[]),n.jsx($a,{client:Jr,children:n.jsxs(ba,{children:[t&&n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200",children:[n.jsx(Wn,{className:"w-16 h-16 text-yellow-500 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"Sesi Berakhir"}),n.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Sesi Anda telah habis. Silakan login kembali untuk melanjutkan."}),n.jsx("button",{className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{try{localStorage.removeItem("token")}catch{}try{a()}catch{}e(!1);try{window.location.assign("/")}catch{s("/",{replace:!0})}},children:"Login Ulang"})]})}),n.jsx(Ba,{children:n.jsx(Xr,{})})]})})},ei=()=>n.jsx(Ar,{children:n.jsx(Xn,{basename:"/FE",children:n.jsx(Zr,{})})});{const t=(...e)=>{};console.log=t,console.debug=t,console.info=t,console.warn=t}Ts(document.getElementById("root")).render(n.jsx(ei,{}));export{q as B,Ie as D,on as I,oe as S,Je as a,$t as b,N as c,kr as d,xe as e,ge as f,ye as g,ve as h,sr as i,ui as j,lt as k,fi as l,hi as m,li as n,ci as o,di as p,Wa as q,Ja as r,Vs as s,Er as t,ie as u,He as v,Ga as w};
//# sourceMappingURL=index-DAqteXQX.js.map
