{"version":3,"file":"TemplateForm-CKniE9uI.js","sources":["../../src/components/ui/separator.tsx","../../src/components/FormSection.tsx","../../src/components/AutoFilledInput.tsx","../../src/pages/TemplateForm.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n","\r\nimport React from 'react';\r\nimport { Separator } from '@/components/ui/separator';\r\n\r\ninterface FormSectionProps {\r\n  title: string;\r\n  description?: string;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport const FormSection: React.FC<FormSectionProps> = ({\r\n  title,\r\n  description,\r\n  children,\r\n  className = ''\r\n}) => {\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      <div className=\"space-y-1\">\r\n        <h3 className=\"text-lg font-semibold\">{title}</h3>\r\n        {description && (\r\n          <p className=\"text-sm text-muted-foreground\">{description}</p>\r\n        )}\r\n      </div>\r\n      <Separator />\r\n      <div className=\"space-y-4\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Check } from 'lucide-react';\r\n\r\ninterface AutoFilledInputProps {\r\n  label: string;\r\n  value: string;\r\n  placeholder?: string;\r\n}\r\n\r\nexport const AutoFilledInput: React.FC<AutoFilledInputProps> = ({\r\n  label,\r\n  value,\r\n  placeholder = ''\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <Label className=\"text-sm font-medium\">{label}</Label>\r\n      <div className=\"relative\">\r\n        <Input\r\n          value={value ?? \"\"}\r\n          placeholder={placeholder}\r\n          readOnly\r\n          className=\"bg-muted/50 text-muted-foreground pr-10\"\r\n        />\r\n        {value && (\r\n          <Check className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 w-4 h-4\" />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { generateUrl } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { PegawaiSearchInput } from '@/components/PegawaiSearchInput';\nimport { FormSection } from '@/components/FormSection';\nimport { AutoFilledInput } from '@/components/AutoFilledInput';\nimport { Template1 } from '@/components/templates/Template1';\nimport { Template2 } from '@/components/templates/Template2';\nimport { Template3 } from '@/components/templates/Template3';\nimport { Template4 } from '@/components/templates/Template4';\nimport { Template5 } from '@/components/templates/Template5';\nimport { Template6 } from '@/components/templates/Template6';\nimport { Template7 } from '@/components/templates/Template7';\nimport { Template8 } from '@/components/templates/Template8';\nimport { Template9 } from '@/components/templates/Template9';\nimport { BaseTemplateData, Template1Data, Template2Data, Template3Data, Template4Data, Template5Data, Template6Data, Template7Data, Template8Data, Template9Data, Pegawai } from '@/types/template';\nimport { Printer, ArrowLeft, FileText, CheckCircle, ExternalLink } from 'lucide-react';\n\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiPost, apiGet } from '@/lib/api';\nimport { useToast } from '@/hooks/use-toast';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport { DialogTitle, DialogDescription } from '@radix-ui/react-dialog';\nimport SuratPreviewContainer from '@/components/SuratPreviewContainer';\n\n// Konstanta untuk kabupaten/kota NTB\nconst KABUPATEN_KOTA_NTB = [\n  'Kota Mataram',\n  'Kabupaten Lombok Barat',\n  'Kabupaten Lombok Tengah',\n  'Kabupaten Lombok Timur',\n  'Kabupaten Lombok Utara',\n  'Kabupaten Sumbawa Barat',\n  'Kabupaten Sumbawa',\n  'Kabupaten Dompu',\n  'Kabupaten Bima',\n  'Kota Bima'\n];\n\nconst TEMPLATES = [\n  {\n    id: '1',\n    title: 'Surat Pernyataan Tidak Sedang Tugas Belajar',\n    description: 'Surat pernyataan bahwa pegawai tidak sedang menjalani tugas belajar atau ikatan dinas',\n    category: 'Pernyataan'\n  },\n  {\n    id: '2',\n    title: 'Surat Keterangan Analisis Jabatan',\n    description: 'Surat keterangan mengenai analisis jabatan dan analisis beban kerja pegawai',\n    category: 'Keterangan'\n  },\n  {\n    id: '3',\n    title: 'Surat Keterangan Pengalaman Mengajar',\n    description: 'Surat keterangan mengenai pengalaman mengajar seorang guru',\n    category: 'Keterangan'\n  },\n  {\n    id: '4',\n    title: 'Surat Permohonan Bebas Temuan',\n    description: 'Surat permohonan penerbitan surat keterangan bebas temuan',\n    category: 'Permohonan'\n  },\n  {\n    id: '5',\n    title: 'Surat Pernyataan Tidak Sedang Hukuman Disiplin',\n    description: 'Surat pernyataan tidak sedang dalam proses atau menjalani hukuman disiplin',\n    category: 'Pernyataan'\n  },\n  {\n    id: '6',\n    title: 'Surat Pernyataan Tidak Sedang Proses Pidana',\n    description: 'Surat pernyataan tidak sedang menjalani proses pidana atau pernah dipidana',\n    category: 'Pernyataan'\n  },\n  {\n    id: '7',\n    title: 'Surat Persetujuan Pelepasan',\n    description: 'Surat persetujuan untuk melepas pegawai pindah tugas',\n    category: 'Persetujuan'\n  },\n  {\n    id: '8',\n    title: 'Surat Persetujuan Penerimaan',\n    description: 'Surat persetujuan untuk menerima pegawai pindah tugas',\n    category: 'Persetujuan'\n  },\n  {\n    id: '9',\n    title: 'Surat Pernyataan Tanggung Jawab Mutlak',\n    description: 'Surat pernyataan tanggung jawab mutlak atas dokumen dan data',\n    category: 'Pernyataan'\n  }\n];\n\n// Helper format tanggal Indonesia\nfunction formatTanggalIndonesia(tanggal: string) {\n  if (!tanggal) return '';\n  const bulanIndo = [\n    '', 'Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',\n    'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'\n  ];\n  let d, m, y;\n  if (/\\d{4}-\\d{2}-\\d{2}/.test(tanggal)) {\n    // yyyy-mm-dd\n    [y, m, d] = tanggal.split('-');\n    return `${parseInt(d, 10)} ${bulanIndo[parseInt(m, 10)]} ${y}`;\n  } else if (/\\d{2}-\\d{2}-\\d{4}/.test(tanggal)) {\n    // dd-mm-yyyy\n    [d, m, y] = tanggal.split('-');\n    return `${parseInt(d, 10)} ${bulanIndo[parseInt(m, 10)]} ${y}`;\n  } else {\n    return tanggal;\n  }\n}\n\nconst TemplateForm: React.FC = () => {\n  const { templateId } = useParams<{ templateId: string }>();\n  const navigate = useNavigate();\n  \n  const [selectedPejabat, setSelectedPejabat] = useState<Pegawai | undefined>();\n  const [selectedPegawai, setSelectedPegawai] = useState<Pegawai | undefined>();\n  const [office, setOffice] = useState<any>(null);\n  \n  // Set default tahun di semua form input tahun\n  const currentYear = new Date().getFullYear().toString();\n\n  // Input tempat pada section tanda tangan: default kosong, placeholder 'Mataram'\n  const [baseData, setBaseData] = useState<BaseTemplateData>({\n    kabkota: 'LOMBOK BARAT',\n    jln: 'Jl. Gajah Mada No. 1 Gerung, Lombok Barat 83511',\n    telfon: 'Telp. (0370) 681557',\n    fax: 'Fax. (0370) 681557',\n    email: 'kemenag.lombokbarat@gmail.com',\n    website: 'lombokbarat.kemenag.go.id',\n    namapejabat: '',\n    nippejabat: '',\n    pangkatgolpejabat: '',\n    jabatanpejabat: '',\n    namapegawai: '',\n    nippegawai: '',\n    pangkatgolpegawai: '',\n    jabatanpegawai: '',\n    ibukota: '', // default kosong\n    tanggal: '',\n    kode_kabko: '',\n    pejabatStatus: 'tetap', // 'tetap', 'plt', 'plh'\n    isPltPlh: false,\n    pltPlhType: 'plt'\n  });\n\n  // Inisialisasi state tahun di semua templateXData\n  const [template1Data, setTemplate1Data] = useState<Partial<Template1Data>>({\n    nosrt: '',\n    blnno: '',\n    thnno: currentYear,\n    ukerpejabat: '',\n    ukerpegawai: ''\n  });\n\n  const [template2Data, setTemplate2Data] = useState<Partial<Template2Data>>({\n    nosurat: '',\n    blnnomor: '',\n    tahunskrg: currentYear,\n    unitkerja: '',\n    namajabatan: '',\n    bbnkerja: '',\n    eksisting: '',\n    kelebihan: '',\n    kekurangan: ''\n  });\n\n  const [template3Data, setTemplate3Data] = useState<Partial<Template3Data>>({\n    nosrt: '',\n    blnno: '',\n    thnno: currentYear,\n    tempattugas: '',\n    sekolah: '',\n    kabkota2: '',\n    tglmulai: ''\n  });\n\n  const [template4Data, setTemplate4Data] = useState<Partial<Template4Data>>({\n    nosrt: '',\n    blnsrt: '',\n    thnskrg: currentYear,\n    unitkerja: '',\n    keperluan: ''\n  });\n\n  const [template5Data, setTemplate5Data] = useState<Partial<Template5Data>>({\n    nosrt: '',\n    blnno: '',\n    thnno: currentYear,\n    ukerpejabat: '',\n    tempattugas: ''\n  });\n\n  const [template6Data, setTemplate6Data] = useState<Partial<Template6Data>>({\n    nosrt: '',\n    blnno: '',\n    thnno: currentYear,\n    ukerpejabat: '',\n    ukerpegawai: ''\n  });\n\n  const [template7Data, setTemplate7Data] = useState<Partial<Template7Data>>({\n    nosurat: '',\n    blnnomor: '',\n    tahunskrg: currentYear,\n    tempattugas: '',\n    kabkota2: '',\n    jabatanpegawai2: '',\n    tempattugas2: '',\n    kabataukotatujuan: ''\n  });\n\n  const [template8Data, setTemplate8Data] = useState<Partial<Template8Data>>({\n    nosrt: '',\n    blnno: '',\n    thnno: currentYear,\n    tempattugas: '',\n    jabatanbaru: '',\n    tempattugasbaru: ''\n  });\n\n  const [template9Data, setTemplate9Data] = useState<Partial<Template9Data>>({\n    nosrt: '',\n    blnno: '',\n    thnno: currentYear,\n    ukerpejabat: ''\n  });\n\n\n\n  const { token, user } = useAuth();\n  const { toast } = useToast();\n  const [saving, setSaving] = useState(false);\n  const [pdfLoading, setPdfLoading] = useState(false);\n  const [suratId, setSuratId] = useState<string | null>(null);\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [savedLetter, setSavedLetter] = useState<any>(null);\n\n  useEffect(() => {\n    if (!suratId || !token) return;\n    apiGet(`/api/letters/${suratId}`, token).then(res => setSavedLetter(res.letter)).catch(() => setSavedLetter(null));\n  }, [suratId, token]);\n\n  React.useEffect(() => {\n    if (!token) return;\n    const fetchOffice = async () => {\n      try {\n        let officeData = null;\n        if (user?.office_id) {\n          const res = await apiGet(`/api/offices/${user.office_id}`, token);\n          officeData = res.office;\n        } else {\n          officeData = null; // Jangan fallback ke office lain\n        }\n        if (officeData) {\n          setOffice(officeData);\n          setBaseData(prev => ({\n            ...prev,\n            kabkota: officeData.kabkota || '',\n            jln: officeData.address || '',\n            telfon: officeData.phone || '',\n            fax: officeData.fax || '', // Allow empty fax\n            email: officeData.email || '',\n            website: officeData.website || '',\n            kode_kabko: officeData.kode_kabko || ''\n          }));\n        }\n      } catch (err) {\n        // Optional: handle error\n      }\n    };\n    fetchOffice();\n  }, [token, user]);\n\n  const handlePejabatSelect = (pejabat?: Pegawai) => {\n    setSelectedPejabat(pejabat);\n    setBaseData(prev => ({\n      ...prev,\n      namapejabat: pejabat?.nama || '',\n      nippejabat: pejabat?.nip || '',\n      pangkatgolpejabat: pejabat?.pangkat_gol || (pejabat as any)?.golongan || '',\n      jabatanpejabat: pejabat?.jabatan || ''\n    }));\n    if (templateId === '1') {\n      setTemplate1Data(prev => ({ ...prev, ukerpejabat: pejabat?.unit_kerja || '' }));\n    }\n    if (templateId === '5') {\n      setTemplate5Data(prev => ({ ...prev, ukerpejabat: pejabat?.unit_kerja || '' }));\n    }\n    if (templateId === '6') {\n      setTemplate6Data(prev => ({ ...prev, ukerpejabat: pejabat?.unit_kerja || '' }));\n    }\n    if (templateId === '9') {\n      setTemplate9Data(prev => ({ ...prev, ukerpejabat: pejabat?.unit_kerja || '' }));\n    }\n  };\n\n  const handlePegawaiSelect = (pegawai?: Pegawai) => {\n    setSelectedPegawai(pegawai);\n    setBaseData(prev => ({\n      ...prev,\n      namapegawai: pegawai?.nama || '',\n      nippegawai: pegawai?.nip || '',\n      pangkatgolpegawai: pegawai?.pangkat_gol || (pegawai as any)?.golongan || '',\n      jabatanpegawai: pegawai?.jabatan || ''\n    }));\n    if (templateId === '1') {\n      setTemplate1Data(prev => ({ ...prev, ukerpegawai: pegawai?.unit_kerja || '' }));\n    }\n    if (templateId === '3') {\n      setTemplate3Data(prev => ({ ...prev, tempattugas: pegawai?.tempat_tugas || '' }));\n    }\n    if (templateId === '4') {\n      setTemplate4Data(prev => ({ ...prev, unitkerja: pegawai?.unit_kerja || '' }));\n    }\n    if (templateId === '5') {\n      setTemplate5Data(prev => ({ ...prev, tempattugas: pegawai?.tempat_tugas || '' }));\n    }\n    if (templateId === '6') {\n      setTemplate6Data(prev => ({ ...prev, ukerpegawai: pegawai?.unit_kerja || '' }));\n    }\n    if (templateId === '7') {\n      // Template 7: tempattugas diisi manual, tidak otomatis dari data pegawai\n    }\n    if (templateId === '8') {\n      // Template 8: tempattugas diisi manual, tidak otomatis dari data pegawai\n    }\n  };\n\n  const handleBaseDataChange = (field: keyof BaseTemplateData, value: string | boolean) => {\n    setBaseData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate1DataChange = (field: keyof Template1Data, value: string) => {\n    setTemplate1Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate2DataChange = (field: keyof Template2Data, value: string) => {\n    setTemplate2Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate3DataChange = (field: keyof Template3Data, value: string) => {\n    setTemplate3Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate4DataChange = (field: keyof Template4Data, value: string) => {\n    setTemplate4Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate5DataChange = (field: keyof Template5Data, value: string) => {\n    setTemplate5Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate6DataChange = (field: keyof Template6Data, value: string) => {\n    setTemplate6Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate7DataChange = (field: keyof Template7Data, value: string) => {\n    setTemplate7Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate8DataChange = (field: keyof Template8Data, value: string) => {\n    setTemplate8Data(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleTemplate9DataChange = (field: keyof Template9Data, value: string) => {\n    setTemplate9Data(prev => ({ ...prev, [field]: value }));\n  };\n\n\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    setSaving(true);\n    setSubmitError(null);\n    setPdfUrl(null);\n    // Validasi field wajib\n    if (!office?.id) {\n      setSubmitError('Data kantor tidak ditemukan. Silakan atur kantor di Settings.');\n      setSaving(false);\n      return;\n    }\n    if (!user?.id) {\n      setSubmitError('User tidak valid. Silakan login ulang.');\n      setSaving(false);\n      return;\n    }\n    if (templateId !== '2' && templateId !== '9' && !selectedPegawai?.nip) {\n      setSubmitError('Pilih pegawai yang akan dinyatakan dalam surat.');\n      setSaving(false);\n      return;\n    }\n    if (!selectedPejabat?.nip) {\n      setSubmitError('Pilih pejabat penandatangan surat.');\n      setSaving(false);\n      return;\n    }\n    // Format nomor surat sesuai template\n    const kodeKabko = office?.kode_kabko || baseData.kode_kabko || '-';\n    let letter_number = '';\n    if (templateId === '1') {\n      letter_number = `B-${template1Data.nosrt}/Kk.18.${kodeKabko}/1/Kp.07.6/${template1Data.blnno}/${template1Data.thnno}`;\n    } else if (templateId === '2') {\n      letter_number = `B-${template2Data.nosurat}/Kk.18.${kodeKabko}/1/KP.07.6/${template2Data.blnnomor}/${template2Data.tahunskrg}`;\n    } else if (templateId === '3') {\n      letter_number = `B-${template3Data.nosrt}/Kk.18.${kodeKabko}/1/KP.07.6/${template3Data.blnno}/${template3Data.thnno}`;\n    } else if (templateId === '4') {\n      letter_number = `B-${template4Data.nosrt}/Kk.18.${kodeKabko}/1/Kp.01.2/${template4Data.blnsrt}/${template4Data.thnskrg}`;\n    } else if (templateId === '5') {\n      letter_number = `B-${template5Data.nosrt}/Kk.18.${kodeKabko}/1/Kp.07.6/${template5Data.blnno}/${template5Data.thnno}`;\n    } else if (templateId === '6') {\n      letter_number = `B-${template6Data.nosrt}/Kk.18.${kodeKabko}/1/Kh.04.1/${template6Data.blnno}/${template6Data.thnno}`;\n    } else if (templateId === '7') {\n      letter_number = `B-${template7Data.nosurat}/Kk.18.${kodeKabko}/1/Kp.07.6/${template7Data.blnnomor}/${template7Data.tahunskrg}`;\n    } else if (templateId === '8') {\n      letter_number = `B-${template8Data.nosrt}/Kk.18.${kodeKabko}/1/Kp.07.6/${template8Data.blnno}/${template8Data.thnno}`;\n    } else if (templateId === '9') {\n      letter_number = `B-${template9Data.nosrt}/Kk.18.${kodeKabko}/1/Kp.01.2/${template9Data.blnno}/${template9Data.thnno}`;\n    }\n    if (!letter_number) {\n      setSubmitError('Nomor surat wajib diisi.');\n      setSaving(false);\n      return;\n    }\n\n    // Format tanggal Indonesia untuk tanda tangan\n    let tanggalIndo = '';\n    if (baseData.tanggal) tanggalIndo = formatTanggalIndonesia(baseData.tanggal);\n    \n\n    \n    // Compose payload sesuai backend\n    const payload: any = {\n      office_id: office.id,\n      created_by: user.id,\n      template_id: Number(templateId),\n      template_name: selectedTemplate?.title || '',\n      letter_number,\n      subject: selectedTemplate?.title,\n      recipient_employee_nip: selectedPegawai?.nip || null, // Handle null for template 9\n      signing_official_nip: selectedPejabat.nip,\n      form_data: {\n        // For Template 2, only include the fields that Template 2 actually uses\n        ...(templateId === '2' ? {\n          // Office data\n          kabkota: baseData.kabkota,\n          jln: baseData.jln,\n          telfon: baseData.telfon,\n          fax: baseData.fax,\n          email: baseData.email,\n          website: baseData.website,\n          // Pejabat data\n          namapejabat: selectedPejabat.nama,\n          nippejabat: selectedPejabat.nip,\n          pangkatgolpejabat: baseData.pangkatgolpejabat || selectedPejabat.pangkat_gol || (selectedPejabat as any)?.golongan || '',\n          jabatanpejabat: selectedPejabat.jabatan,\n          // Template 2 specific data\n          unitkerja: template2Data.unitkerja || '',\n          nosurat: template2Data.nosurat,\n          blnnomor: template2Data.blnnomor,\n          tahunskrg: template2Data.tahunskrg,\n          namajabatan: template2Data.namajabatan,\n          bbnkerja: template2Data.bbnkerja,\n          eksisting: template2Data.eksisting,\n          kelebihan: template2Data.kelebihan,\n          kekurangan: template2Data.kekurangan,\n          // Signature data\n          ibukota: baseData.ibukota,\n          tanggal: tanggalIndo,\n          kode_kabko: office?.kode_kabko || baseData.kode_kabko || '',\n          // Add office data for Template 2\n          office: office\n        } : {\n          // For other templates, include all baseData\n          ...baseData,\n          // Only include pegawai fields for templates that need them\n          ...(templateId !== '2' && {\n            namapegawai: selectedPegawai?.nama || '',\n            nippegawai: selectedPegawai?.nip || '',\n            pangkatgolpegawai: baseData.pangkatgolpegawai || selectedPegawai?.pangkat_gol || (selectedPegawai as any)?.golongan || '',\n            jabatanpegawai: selectedPegawai?.jabatan || '',\n            ukerpegawai: selectedPegawai?.unit_kerja || ''\n          }),\n          // Template specific data (for other templates)\n          ...(templateId === '1' && template1Data),\n          ...(templateId === '3' && template3Data),\n          ...(templateId === '4' && template4Data),\n          ...(templateId === '5' && template5Data),\n          ...(templateId === '6' && template6Data),\n          ...(templateId === '7' && template7Data),\n          ...(templateId === '8' && template8Data),\n          ...(templateId === '9' && template9Data),\n          tanggal: tanggalIndo,\n          kode_kabko: office?.kode_kabko || baseData.kode_kabko || '',\n          unitkerja: selectedPegawai?.unit_kerja || selectedPejabat?.unit_kerja || '',\n          namapejabat: selectedPejabat.nama,\n          nippejabat: selectedPejabat.nip,\n          jabatanpejabat: selectedPejabat.jabatan,\n          unitkerjapejabat: selectedPejabat.unit_kerja,\n          ukerpejabat: selectedPejabat.unit_kerja,\n          ibukota: baseData.ibukota,\n          // PASTIKAN pangkat golongan SELALU ADA untuk semua template kecuali 2 dan 9\n          ...(templateId !== '2' && templateId !== '9' && {\n            pangkatgolpejabat: baseData.pangkatgolpejabat || selectedPejabat?.pangkat_gol || (selectedPejabat as any)?.golongan || '',\n            pangkatgolpegawai: baseData.pangkatgolpegawai || selectedPegawai?.pangkat_gol || (selectedPegawai as any)?.golongan || '',\n          })\n        })\n      }\n    };\n    \n\n    \n    try {\n  \n\n      const res = await apiPost('/api/letters', payload, token);\n      setSuratId(res.letter?.id || res.id);\n      setShowSuccessModal(true);\n      toast({ title: 'Surat berhasil disimpan', description: 'Surat siap digenerate PDF.' });\n      \n\n      \n\n    } catch (err: any) {\n      \n      // Handle specific error messages\n      if (err.message && err.message.includes('Nomor surat sudah ada')) {\n        setSubmitError('Nomor surat sudah ada. Silakan gunakan nomor surat yang berbeda.');\n      } else if (err.message && err.message.includes('Internal server error')) {\n        setSubmitError('Terjadi kesalahan server. Silakan coba lagi.');\n      } else {\n        setSubmitError(err.message || 'Terjadi kesalahan saat menyimpan surat');\n      }\n      \n      setSaving(false);\n      setPdfUrl(null);\n    }\n  };\n\n  const handleGeneratePdf = async () => {\n    if (!suratId) return;\n    setPdfLoading(true);\n    setPdfUrl(null);\n    try {\n      const res = await apiPost(`/api/letters/${suratId}/generate-pdf`, {}, token);\n      setPdfUrl(res.file?.file_path || res.file_path);\n      toast({ title: 'PDF berhasil digenerate', description: 'Klik link untuk mengunduh.' });\n    } catch (err: any) {\n      toast({ title: 'Gagal generate PDF', description: err.message || 'Terjadi kesalahan', variant: 'destructive' });\n    } finally {\n      setPdfLoading(false);\n    }\n  };\n\n  const renderTemplateForm = () => {\n    switch (templateId) {\n      case '1':\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"nosrt\">Nomor Surat</Label>\n              <Input\n                id=\"nosrt\"\n                value={template1Data.nosrt || ''}\n                onChange={(e) => handleTemplate1DataChange('nosrt', e.target.value)}\n                placeholder=\"e.g., 123\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"blnno\">Bulan (Angka)</Label>\n              <Input\n                id=\"blnno\"\n                value={template1Data.blnno || ''}\n                onChange={(e) => handleTemplate1DataChange('blnno', e.target.value)}\n                placeholder=\"e.g., 12\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"thnno\">Tahun</Label>\n              <Input\n                id=\"thnno\"\n                value={template1Data.thnno || ''}\n                onChange={(e) => handleTemplate1DataChange('thnno', e.target.value)}\n                placeholder=\"e.g., 2024\"\n              />\n            </div>\n          </div>\n        );\n      case '2':\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"nosurat\">Nomor Surat</Label>\n              <Input\n                id=\"nosurat\"\n                value={template2Data.nosurat || ''}\n                onChange={(e) => handleTemplate2DataChange('nosurat', e.target.value)}\n                placeholder=\"e.g., 123\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"blnnomor\">Bulan (Angka)</Label>\n              <Input\n                id=\"blnnomor\"\n                value={template2Data.blnnomor || ''}\n                onChange={(e) => handleTemplate2DataChange('blnnomor', e.target.value)}\n                placeholder=\"e.g., 12\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"tahunskrg\">Tahun</Label>\n              <Input\n                id=\"tahunskrg\"\n                value={template2Data.tahunskrg || ''}\n                onChange={(e) => handleTemplate2DataChange('tahunskrg', e.target.value)}\n                placeholder=\"e.g., 2024\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"namajabatan\">Nama Jabatan</Label>\n              <Input\n                id=\"namajabatan\"\n                value={template2Data.namajabatan || ''}\n                onChange={(e) => handleTemplate2DataChange('namajabatan', e.target.value)}\n                placeholder=\"Nama jabatan\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"bbnkerja\">Beban Kerja</Label>\n              <Input\n                id=\"bbnkerja\"\n                value={template2Data.bbnkerja || ''}\n                onChange={(e) => handleTemplate2DataChange('bbnkerja', e.target.value)}\n                placeholder=\"Beban kerja\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"eksisting\">Eksisting</Label>\n              <Input\n                id=\"eksisting\"\n                value={template2Data.eksisting || ''}\n                onChange={(e) => handleTemplate2DataChange('eksisting', e.target.value)}\n                placeholder=\"Jumlah eksisting\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"kelebihan\">Kelebihan</Label>\n              <Input\n                id=\"kelebihan\"\n                value={template2Data.kelebihan || ''}\n                onChange={(e) => handleTemplate2DataChange('kelebihan', e.target.value)}\n                placeholder=\"Jumlah kelebihan\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"kekurangan\">Kekurangan</Label>\n              <Input\n                id=\"kekurangan\"\n                value={template2Data.kekurangan || ''}\n                onChange={(e) => handleTemplate2DataChange('kekurangan', e.target.value)}\n                placeholder=\"Jumlah kekurangan\"\n              />\n            </div>\n          </div>\n        );\n      case '3':\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"nosrt3\">Nomor Surat</Label>\n              <Input\n                id=\"nosrt3\"\n                value={template3Data.nosrt || ''}\n                onChange={(e) => handleTemplate3DataChange('nosrt', e.target.value)}\n                placeholder=\"e.g., 123\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"blnno3\">Bulan (Angka)</Label>\n              <Input\n                id=\"blnno3\"\n                value={template3Data.blnno || ''}\n                onChange={(e) => handleTemplate3DataChange('blnno', e.target.value)}\n                placeholder=\"e.g., 12\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"thnno3\">Tahun</Label>\n              <Input\n                id=\"thnno3\"\n                value={template3Data.thnno || ''}\n                onChange={(e) => handleTemplate3DataChange('thnno', e.target.value)}\n                placeholder=\"e.g., 2024\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"tempattugas\">Tempat Tugas</Label>\n              <Input\n                id=\"tempattugas\"\n                value={template3Data.tempattugas || ''}\n                onChange={(e) => handleTemplate3DataChange('tempattugas', e.target.value)}\n                placeholder=\"Akan terisi otomatis dari data pegawai (atau isi manual)\"\n                className={template3Data.tempattugas ? \"bg-gray-50\" : \"\"}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"sekolah\">Sekolah</Label>\n              <select\n                id=\"sekolah\"\n                className=\"border rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white\"\n                value={template3Data.sekolah || ''}\n                onChange={e => handleTemplate3DataChange('sekolah', e.target.value)}\n              >\n                <option value=\"\">Pilih sekolah</option>\n                <option value=\"MAN\">MAN</option>\n                <option value=\"MTs\">MTs</option>\n                <option value=\"MIN\">MIN</option>\n              </select>\n            </div>\n            <div>\n              <Label htmlFor=\"kabkota2\">Kabupaten/Kota</Label>\n              <Select onValueChange={(value) => handleTemplate3DataChange('kabkota2', value)} value={template3Data.kabkota2 || ''}>\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue placeholder=\"Pilih kabupaten/kota\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {KABUPATEN_KOTA_NTB.map(kota => (\n                    <SelectItem key={kota} value={kota}>{kota}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"tglmulai\">Tanggal Mulai</Label>\n              <Input\n                id=\"tglmulai\"\n                type=\"date\"\n                value={template3Data.tglmulai || ''}\n                onChange={(e) => handleTemplate3DataChange('tglmulai', e.target.value)}\n              />\n            </div>\n          </div>\n        );\n      case '4':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"nosrt4\">Nomor Surat</Label>\n                <Input\n                  id=\"nosrt4\"\n                  value={template4Data.nosrt || ''}\n                  onChange={(e) => handleTemplate4DataChange('nosrt', e.target.value)}\n                  placeholder=\"e.g., 123\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"blnsrt\">Bulan Surat</Label>\n                <Input\n                  id=\"blnsrt\"\n                  value={template4Data.blnsrt || ''}\n                  onChange={(e) => handleTemplate4DataChange('blnsrt', e.target.value)}\n                  placeholder=\"e.g., 12\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"thnskrg\">Tahun</Label>\n                <Input\n                  id=\"thnskrg\"\n                  value={template4Data.thnskrg || ''}\n                  onChange={(e) => handleTemplate4DataChange('thnskrg', e.target.value)}\n                  placeholder=\"e.g., 2024\"\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"unitkerja4\">Unit Kerja</Label>\n                <Input\n                  id=\"unitkerja4\"\n                  value={template4Data.unitkerja || ''}\n                  onChange={(e) => handleTemplate4DataChange('unitkerja', e.target.value)}\n                  placeholder=\"Unit kerja pegawai\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"keperluan\">Keperluan</Label>\n                <Input\n                  id=\"keperluan\"\n                  value={template4Data.keperluan || ''}\n                  onChange={(e) => handleTemplate4DataChange('keperluan', e.target.value)}\n                  placeholder=\"Keperluan SKBT\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n      case '5':\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <Label htmlFor=\"nosrt5\">Nomor Surat</Label>\n              <Input\n                id=\"nosrt5\"\n                value={template5Data.nosrt || ''}\n                onChange={(e) => handleTemplate5DataChange('nosrt', e.target.value)}\n                placeholder=\"e.g., 123\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"blnno5\">Bulan (Angka)</Label>\n              <Input\n                id=\"blnno5\"\n                value={template5Data.blnno || ''}\n                onChange={(e) => handleTemplate5DataChange('blnno', e.target.value)}\n                placeholder=\"e.g., 12\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"thnno5\">Tahun</Label>\n              <Input\n                id=\"thnno5\"\n                value={template5Data.thnno || ''}\n                onChange={(e) => handleTemplate5DataChange('thnno', e.target.value)}\n                placeholder=\"e.g., 2024\"\n              />\n            </div>\n            <div className=\"md:col-span-3\">\n              <Label htmlFor=\"tempattugas5\">Satuan Kerja</Label>\n              <Input\n                id=\"tempattugas5\"\n                value={template5Data.tempattugas || ''}\n                onChange={(e) => handleTemplate5DataChange('tempattugas', e.target.value)}\n                placeholder=\"Akan terisi otomatis dari data pegawai (atau isi manual)\"\n                className={template5Data.tempattugas ? \"bg-gray-50\" : \"\"}\n              />\n            </div>\n          </div>\n        );\n      case '6':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"nosrt6\">Nomor Surat</Label>\n                <Input\n                  id=\"nosrt6\"\n                  value={template6Data.nosrt || ''}\n                  onChange={(e) => handleTemplate6DataChange('nosrt', e.target.value)}\n                  placeholder=\"e.g., 123\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"blnno6\">Bulan (Angka)</Label>\n                <Input\n                  id=\"blnno6\"\n                  value={template6Data.blnno || ''}\n                  onChange={(e) => handleTemplate6DataChange('blnno', e.target.value)}\n                  placeholder=\"e.g., 12\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"thnno6\">Tahun</Label>\n                <Input\n                  id=\"thnno6\"\n                  value={template6Data.thnno || ''}\n                  onChange={(e) => handleTemplate6DataChange('thnno', e.target.value)}\n                  placeholder=\"e.g., 2024\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n      case '7':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"nosurat7\">Nomor Surat</Label>\n                <Input\n                  id=\"nosurat7\"\n                  value={template7Data.nosurat || ''}\n                  onChange={(e) => handleTemplate7DataChange('nosurat', e.target.value)}\n                  placeholder=\"e.g., 123\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"blnnomor7\">Bulan (Angka)</Label>\n                <Input\n                  id=\"blnnomor7\"\n                  value={template7Data.blnnomor || ''}\n                  onChange={(e) => handleTemplate7DataChange('blnnomor', e.target.value)}\n                  placeholder=\"e.g., 12\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"tahunskrg7\">Tahun</Label>\n                <Input\n                  id=\"tahunskrg7\"\n                  value={template7Data.tahunskrg || ''}\n                  onChange={(e) => handleTemplate7DataChange('tahunskrg', e.target.value)}\n                  placeholder=\"e.g., 2024\"\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"tempattugas7\">Tempat Tugas Asal</Label>\n                <Input\n                  id=\"tempattugas7\"\n                  value={template7Data.tempattugas || ''}\n                  onChange={(e) => handleTemplate7DataChange('tempattugas', e.target.value)}\n                  placeholder=\"Masukkan tempat tugas asal (contoh: Bagian Tata Usaha)\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"kabkota27\">Kabupaten/Kota Asal</Label>\n                <Select onValueChange={(value) => handleTemplate7DataChange('kabkota2', value)} value={template7Data.kabkota2 || ''}>\n                  <SelectTrigger className=\"w-full\">\n                    <SelectValue placeholder=\"Pilih kabupaten/kota\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {KABUPATEN_KOTA_NTB.map(kota => (\n                      <SelectItem key={kota} value={kota}>{kota}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"jabatanpegawai2\">Jabatan Baru</Label>\n                <Input\n                  id=\"jabatanpegawai2\"\n                  value={template7Data.jabatanpegawai2 || ''}\n                  onChange={(e) => handleTemplate7DataChange('jabatanpegawai2', e.target.value)}\n                  placeholder=\"Jabatan yang akan dituju\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"tempattugas2\">Tempat Tugas Baru</Label>\n                <Input\n                  id=\"tempattugas2\"\n                  value={template7Data.tempattugas2 || ''}\n                  onChange={(e) => handleTemplate7DataChange('tempattugas2', e.target.value)}\n                  placeholder=\"Tempat tugas tujuan\"\n                />\n              </div>\n            </div>\n            <div>\n              <Label htmlFor=\"kabataukotatujuan\">Kabupaten/Kota Tujuan</Label>\n              <Select onValueChange={(value) => handleTemplate7DataChange('kabataukotatujuan', value)} value={template7Data.kabataukotatujuan || ''}>\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue placeholder=\"Pilih kabupaten/kota\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {KABUPATEN_KOTA_NTB.map(kota => (\n                    <SelectItem key={kota} value={kota}>{kota}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        );\n      case '8':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"nosrt8\">Nomor Surat</Label>\n                <Input\n                  id=\"nosrt8\"\n                  value={template8Data.nosrt || ''}\n                  onChange={(e) => handleTemplate8DataChange('nosrt', e.target.value)}\n                  placeholder=\"e.g., 123\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"blnno8\">Bulan (Angka)</Label>\n                <Input\n                  id=\"blnno8\"\n                  value={template8Data.blnno || ''}\n                  onChange={(e) => handleTemplate8DataChange('blnno', e.target.value)}\n                  placeholder=\"e.g., 12\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"thnno8\">Tahun</Label>\n                <Input\n                  id=\"thnno8\"\n                  value={template8Data.thnno || ''}\n                  onChange={(e) => handleTemplate8DataChange('thnno', e.target.value)}\n                  placeholder=\"e.g., 2024\"\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"tempattugas8\">Tempat Tugas Asal</Label>\n                <Input\n                  id=\"tempattugas8\"\n                  value={template8Data.tempattugas || ''}\n                  onChange={(e) => handleTemplate8DataChange('tempattugas', e.target.value)}\n                  placeholder=\"Masukkan tempat tugas asal (contoh: Bagian Tata Usaha)\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"jabatanbaru\">Jabatan Baru</Label>\n                <Input\n                  id=\"jabatanbaru\"\n                  value={template8Data.jabatanbaru || ''}\n                  onChange={(e) => handleTemplate8DataChange('jabatanbaru', e.target.value)}\n                  placeholder=\"Jabatan yang akan dituju\"\n                />\n              </div>\n            </div>\n            <div>\n              <Label htmlFor=\"tempattugasbaru\">Tempat Tugas Baru</Label>\n              <Input\n                id=\"tempattugasbaru\"\n                value={template8Data.tempattugasbaru || ''}\n                onChange={(e) => handleTemplate8DataChange('tempattugasbaru', e.target.value)}\n                placeholder=\"Tempat tugas tujuan\"\n              />\n            </div>\n          </div>\n        );\n      case '9':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"nosrt9\">Nomor Surat</Label>\n                <Input\n                  id=\"nosrt9\"\n                  value={template9Data.nosrt || ''}\n                  onChange={(e) => handleTemplate9DataChange('nosrt', e.target.value)}\n                  placeholder=\"e.g., 123\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"blnno9\">Bulan (Angka)</Label>\n                <Input\n                  id=\"blnno9\"\n                  value={template9Data.blnno || ''}\n                  onChange={(e) => handleTemplate9DataChange('blnno', e.target.value)}\n                  placeholder=\"e.g., 12\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"thnno9\">Tahun</Label>\n                <Input\n                  id=\"thnno9\"\n                  value={template9Data.thnno || ''}\n                  onChange={(e) => handleTemplate9DataChange('thnno', e.target.value)}\n                  placeholder=\"e.g., 2024\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <FileText className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n            <p>Template tidak ditemukan</p>\n          </div>\n        );\n    }\n  };\n\n  const renderTemplatePreview = () => {\n    switch (templateId) {\n      case '1':\n        return (\n          <Template1 \n            data={{\n              ...baseData,\n              ...template1Data\n            } as Template1Data}\n          />\n        );\n      case '2':\n        return (\n          <Template2 \n            data={{\n              ...baseData,\n              ...template2Data\n            } as Template2Data}\n          />\n        );\n      case '3':\n        return (\n          <Template3 \n            data={{\n              ...baseData,\n              ...template3Data,\n              isPltPlh: baseData.isPltPlh,\n              pltPlhType: baseData.pltPlhType\n            } as Template3Data}\n          />\n        );\n      case '4':\n        return (\n          <Template4 \n            data={{\n              ...baseData,\n              ...template4Data\n            } as Template4Data}\n          />\n        );\n      case '5':\n        return (\n          <Template5 \n            data={{ ...baseData, ...template5Data } as Template5Data}\n          />\n        );\n      case '6':\n        return (\n          <Template6 \n            data={{\n              ...baseData,\n              ...template6Data\n            } as Template6Data}\n          />\n        );\n      case '7':\n        return (\n          <Template7 \n            data={{\n              ...baseData,\n              ...template7Data\n            } as Template7Data}\n          />\n        );\n      case '8':\n        return (\n          <Template8 \n            data={{\n              ...baseData,\n              ...template8Data\n            } as Template8Data}\n          />\n        );\n      case '9':\n        return (\n          <Template9 \n            data={{\n              ...baseData,\n              ...template9Data\n            } as Template9Data}\n          />\n        );\n\n      default:\n        return (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <FileText className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n            <p>Template tidak ditemukan</p>\n          </div>\n        );\n    }\n  };\n\n  const selectedTemplate = TEMPLATES.find(t => t.id === templateId);\n\n  // Template access is handled by route protection\n\n  if (!selectedTemplate) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold mb-4\">Template tidak ditemukan</h1>\n          <Button onClick={() => navigate('/generator')}>\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Kembali ke Pilihan Template\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <Button\n              variant=\"outline\"\n              onClick={() => navigate('/generator')}\n              className=\"mb-4\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              Kembali ke Pilihan Template\n            </Button>\n          </div>\n          <div className=\"flex items-center space-x-2 mb-2\">\n            <Badge variant=\"secondary\">{selectedTemplate.category}</Badge>\n            <span className=\"text-sm text-muted-foreground\">•</span>\n            <span className=\"text-sm text-muted-foreground\">Template {templateId}</span>\n          </div>\n          <h1 className=\"text-3xl font-bold\">{selectedTemplate.title}</h1>\n          <p className=\"text-muted-foreground mt-2\">{selectedTemplate.description}</p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Form Section */}\n          <div className=\"lg:col-span-2 space-y-8\">\n            \n            {/* Pejabat Section */}\n            <FormSection \n              title=\"Data Pejabat Penandatangan\" \n              description=\"Pilih pejabat yang akan menandatangani surat\"\n            >\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div>\n                  <PegawaiSearchInput\n                    label=\"Cari Pejabat\"\n                    placeholder=\"Masukkan nama atau NIP pejabat...\"\n                    onSelect={handlePejabatSelect}\n                    selectedPegawai={selectedPejabat}\n                  />\n                </div>\n                <div className=\"space-y-4\">\n                  <AutoFilledInput\n                    label=\"Nama Pejabat\"\n                    value={baseData.namapejabat || ''}\n                    placeholder=\"Akan terisi otomatis\"\n                  />\n                  <AutoFilledInput\n                    label=\"NIP\"\n                    value={baseData.nippejabat || ''}\n                    placeholder=\"Akan terisi otomatis\"\n                  />\n                  <AutoFilledInput\n                    label=\"Pangkat/Golongan\"\n                    value={baseData.pangkatgolpejabat || ''}\n                    placeholder=\"Akan terisi otomatis\"\n                  />\n                  <AutoFilledInput\n                    label=\"Jabatan\"\n                    value={baseData.jabatanpejabat || ''}\n                    placeholder=\"Akan terisi otomatis\"\n                  />\n                  <AutoFilledInput\n                    label=\"Unit Kerja Pejabat\"\n                    value={selectedPejabat?.unit_kerja ?? ''}\n                    placeholder=\"Akan terisi otomatis\"\n                  />\n                </div>\n              </div>\n            </FormSection>\n            {/* Data Pegawai khusus Analisis Jabatan (template2) hanya input manual unit kerja pegawai */}\n            {templateId === '2' && (\n              <FormSection\n                title=\"Data Pegawai\"\n                description=\"Masukkan unit kerja yang akan dianalisis\"\n              >\n                <div>\n                  <Label htmlFor=\"unitkerja\">Unit Kerja Pegawai</Label>\n                  <Input\n                    id=\"unitkerja\"\n                    value={template2Data.unitkerja || ''}\n                    onChange={e => handleTemplate2DataChange('unitkerja', e.target.value)}\n                    placeholder=\"Masukkan unit kerja pegawai\"\n                  />\n                </div>\n              </FormSection>\n            )}\n            {/* Data Pegawai hanya jika bukan SPTJM dan bukan Analisis Jabatan */}\n            {templateId !== '9' && templateId !== '2' && (\n              <FormSection\n                title=\"Data Pegawai\"\n                description=\"Pilih pegawai yang akan dinyatakan dalam surat\"\n              >\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  <div>\n                    <PegawaiSearchInput\n                      label=\"Cari Pegawai\"\n                      placeholder=\"Masukkan nama atau NIP pegawai...\"\n                      onSelect={handlePegawaiSelect}\n                      selectedPegawai={selectedPegawai}\n                    />\n                  </div>\n                  <div className=\"space-y-4\">\n                    <AutoFilledInput\n                      label=\"Nama Pegawai\"\n                      value={baseData.namapegawai || ''}\n                      placeholder=\"Akan terisi otomatis\"\n                    />\n                    <AutoFilledInput\n                      label=\"NIP\"\n                      value={baseData.nippegawai || ''}\n                      placeholder=\"Akan terisi otomatis\"\n                    />\n                    <AutoFilledInput\n                      label=\"Pangkat/Golongan\"\n                      value={baseData.pangkatgolpegawai || ''}\n                      placeholder=\"Akan terisi otomatis\"\n                    />\n                    <AutoFilledInput\n                      label=\"Jabatan\"\n                      value={baseData.jabatanpegawai || ''}\n                      placeholder=\"Akan terisi otomatis\"\n                    />\n                    <AutoFilledInput\n                      label=\"Unit Kerja Pegawai\"\n                      value={selectedPegawai?.unit_kerja ?? ''}\n                      placeholder=\"Akan terisi otomatis\"\n                    />\n                    {(templateId === '3') && (\n                      <AutoFilledInput\n                        label=\"Tempat Tugas\"\n                        value={selectedPegawai?.tempat_tugas ?? ''}\n                        placeholder=\"Akan terisi otomatis\"\n                      />\n                    )}\n                  </div>\n                </div>\n              </FormSection>\n            )}\n\n            {/* Template Specific Fields */}\n            <FormSection \n              title=\"Detail Template\" \n              description=\"Lengkapi informasi khusus untuk template yang dipilih\"\n            >\n\n              <form onSubmit={handleSubmit} className=\"space-y-8\">\n                {renderTemplateForm()}\n                {/* Signature Section sekarang di dalam form */}\n                <FormSection \n                  title=\"Tanda Tangan\" \n                  description=\"Atur tempat dan tanggal penandatanganan\"\n                >\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"ibukota\">Tempat</Label>\n                      <Input\n                        id=\"ibukota\"\n                        value={baseData.ibukota || ''}\n                        onChange={(e) => handleBaseDataChange('ibukota', e.target.value)}\n                        placeholder=\"Mataram\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"tanggal\">Tanggal</Label>\n                      <Input\n                        id=\"tanggal\"\n                        type=\"date\"\n                        value={baseData.tanggal || ''}\n                        onChange={(e) => handleBaseDataChange('tanggal', e.target.value)}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"mt-4\">\n                    <Label htmlFor=\"pejabatStatus\">Status Pejabat</Label>\n                    <div className=\"space-y-3\">\n                      <label className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={baseData.isPltPlh}\n                          onChange={(e) => {\n                            handleBaseDataChange('isPltPlh', e.target.checked);\n                            if (e.target.checked) {\n                              handleBaseDataChange('pltPlhType', 'plt');\n                            }\n                          }}\n                          className=\"mr-2\"\n                        />\n                        PLT/PLH (Pelaksana Tugas/Pelaksana Harian)\n                      </label>\n                      \n                      {baseData.isPltPlh && (\n                        <div className=\"ml-6 space-y-2\">\n                          <label className=\"flex items-center\">\n                            <input\n                              type=\"radio\"\n                              value=\"plt\"\n                              checked={baseData.pltPlhType === 'plt'}\n                              onChange={(e) => handleBaseDataChange('pltPlhType', e.target.value)}\n                              className=\"mr-2\"\n                            />\n                            PLT (Pelaksana Tugas)\n                          </label>\n                          <label className=\"flex items-center\">\n                            <input\n                              type=\"radio\"\n                              value=\"plh\"\n                              checked={baseData.pltPlhType === 'plh'}\n                              onChange={(e) => handleBaseDataChange('pltPlhType', e.target.value)}\n                              className=\"mr-2\"\n                            />\n                            PLH (Pelaksana Harian)\n                          </label>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </FormSection>\n                <div className=\"pt-6\">\n                  <Button type=\"submit\" className=\"w-full bg-teal-700 hover:bg-teal-800 text-white\" disabled={saving}>\n                    {saving ? 'Menyimpan...' : 'Simpan & Generate Surat'}\n                  </Button>\n                </div>\n                {submitError && <div className=\"text-error mb-2\">{submitError}</div>}\n              </form>\n            </FormSection>\n          </div>\n\n          {/* Preview Section */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"sticky top-8\">\n              <div className=\"mb-4 font-semibold\">Lihat hasil surat yang akan dicetak</div>\n              <SuratPreviewContainer>\n                {renderTemplatePreview()}\n              </SuratPreviewContainer>\n              <div className=\"flex gap-2 mt-4\">\n                <Button\n                  className=\"bg-teal-700 hover:bg-teal-800 text-white flex items-center gap-2\"\n                  onClick={() => {\n                    if (suratId) {\n                      window.open(generateUrl(`/letters/${suratId}/preview`), '_blank');\n                    } else {\n                      alert('Surat belum disimpan. Simpan surat terlebih dahulu untuk membuka preview di tab baru.');\n                    }\n                  }}\n                  type=\"button\"\n                >\n                  <ExternalLink className=\"w-4 h-4\" />\n                  Open in New Tab\n                </Button>\n                <Button\n                  className=\"bg-teal-700 hover:bg-teal-800 text-white flex items-center gap-2\"\n                  onClick={() => {\n                    const w = window.open('', '', 'width=900,height=600');\n                    if (w) {\n                      const headLinks = Array.from(document.head.querySelectorAll('link[rel=\"stylesheet\"], style'));\n                      w.document.write('<html><head>');\n                      headLinks.forEach(link => {\n                        w.document.write(link.outerHTML);\n                      });\n                      w.document.write('</head><body style=\"background:#f8fafc;\">');\n                      const previewHTML = document.querySelector('.preview-container')?.outerHTML || '';\n                      w.document.write(previewHTML);\n                      w.document.write('</body></html>');\n                      w.document.close();\n                      w.focus();\n                      setTimeout(() => w.print(), 500);\n                    }\n                  }}\n                  type=\"button\"\n                >\n                  <Printer className=\"w-4 h-4\" />\n                  Cetak\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Dialog open={showSuccessModal} onOpenChange={setShowSuccessModal}>\n        <DialogContent className=\"max-w-4xl w-full\">\n          <DialogTitle>Preview Surat</DialogTitle>\n          <div className=\"mb-4\">Surat berhasil disimpan. Berikut preview surat dari database:</div>\n          <div className=\"bg-white p-4 rounded shadow max-h-[70vh] overflow-auto\">\n            <SuratPreviewContainer>\n              {savedLetter ? (\n                // Render preview by template id, pakai logic fallback nomor surat seperti di Letters.tsx\n                (() => {\n                  let data = savedLetter.form_data;\n                  if (typeof data === 'string') {\n                    try { data = JSON.parse(data); } catch { data = {}; }\n                  }\n                  if (!data) return <div className=\"text-error\">Data surat tidak ditemukan</div>;\n                  const id = String(savedLetter.template_id);\n                  const nomorParts = (savedLetter.letter_number || '').split('/');\n                  const matchNoSurat = savedLetter.letter_number?.match(/^B-([^/]+)/);\n                  const fallback = {\n                    nosrt: data.nosrt || (matchNoSurat ? matchNoSurat[1] : ''),\n                    nosurat: data.nosurat || (matchNoSurat ? matchNoSurat[1] : ''),\n                    blnno: data.blnno || nomorParts[5] || '',\n                    blnnomor: data.blnnomor || nomorParts[5] || '',\n                    thnno: data.thnno || nomorParts[6] || '',\n                    tahunskrg: data.tahunskrg || nomorParts[6] || '',\n                  };\n                  const mergedData = { ...data, ...fallback };\n                  if (id === '1') return <Template1 data={mergedData} />;\n                  if (id === '2') return <Template2 data={mergedData} />;\n                  if (id === '3') return <Template3 data={mergedData} />;\n                  if (id === '4') return <Template4 data={mergedData} />;\n                  if (id === '5') return <Template5 data={mergedData} />;\n                  if (id === '6') return <Template6 data={mergedData} />;\n                  if (id === '7') return <Template7 data={mergedData} />;\n                  if (id === '8') return <Template8 data={mergedData} />;\n                  if (id === '9') return <Template9 data={mergedData} />;\n\n                  return <div className=\"text-error\">Template tidak dikenali</div>;\n                })()\n              ) : (\n                <div className=\"text-center text-muted-foreground\">Memuat data surat...</div>\n              )}\n            </SuratPreviewContainer>\n          </div>\n          <div className=\"flex gap-2 mt-4\">\n            <Button onClick={() => setShowSuccessModal(false)}>Tutup</Button>\n            <Button onClick={() => window.open(generateUrl(`/letters/${suratId}/preview`), '_blank')} variant=\"outline\">Open in New Tab</Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default TemplateForm;\n"],"names":["Separator","React.forwardRef","className","orientation","decorative","props","ref","jsx","SeparatorPrimitive.Root","cn","FormSection","title","description","children","jsxs","AutoFilledInput","label","value","placeholder","Label","Input","Check","KABUPATEN_KOTA_NTB","TEMPLATES","formatTanggalIndonesia","tanggal","bulanIndo","m","y","TemplateForm","templateId","useParams","navigate","useNavigate","selectedPejabat","setSelectedPejabat","useState","selectedPegawai","setSelectedPegawai","office","setOffice","currentYear","baseData","setBaseData","template1Data","setTemplate1Data","template2Data","setTemplate2Data","template3Data","setTemplate3Data","template4Data","setTemplate4Data","template5Data","setTemplate5Data","template6Data","setTemplate6Data","template7Data","setTemplate7Data","template8Data","setTemplate8Data","template9Data","setTemplate9Data","token","user","useAuth","toast","useToast","saving","setSaving","suratId","setSuratId","pdfUrl","setPdfUrl","submitError","setSubmitError","showSuccessModal","setShowSuccessModal","savedLetter","setSavedLetter","useEffect","apiGet","res","React","officeData","prev","handlePejabatSelect","pejabat","handlePegawaiSelect","pegawai","handleBaseDataChange","field","handleTemplate1DataChange","handleTemplate2DataChange","handleTemplate3DataChange","handleTemplate4DataChange","handleTemplate5DataChange","handleTemplate6DataChange","handleTemplate7DataChange","handleTemplate8DataChange","handleTemplate9DataChange","handleSubmit","kodeKabko","letter_number","tanggalIndo","payload","selectedTemplate","apiPost","_a","err","renderTemplateForm","Select","SelectTrigger","SelectValue","SelectContent","kota","SelectItem","FileText","renderTemplatePreview","Template1","Template2","Template3","Template4","Template5","Template6","Template7","Template8","Template9","t","Button","ArrowLeft","Badge","PegawaiSearchInput","SuratPreviewContainer","generateUrl","ExternalLink","w","headLinks","link","previewHTML","Printer","Dialog","DialogContent","DialogTitle","data","id","nomorParts","matchNoSurat","fallback","mergedData"],"mappings":"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"}