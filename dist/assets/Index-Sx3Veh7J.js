import{j as e,aC as P,E as A,a9 as I,a3 as T,aD as z}from"./ui-vendor-B7g5fNgE.js";import{r as s,e as B,c as F}from"./react-vendor-BNG1zHOu.js";import{u as K,I as p,B as o,D as j,e as f,f as b,g as k,h as w}from"./index-BHRo4m-t.js";import{L as N}from"./label-CJvrnwK8.js";import{C as O,a as H,b as q,d as R,c as G}from"./card-DqsGooBq.js";const W=()=>{const[d,y]=s.useState(""),[c,x]=s.useState(""),[m,v]=s.useState(!1),[l,u]=s.useState(!1),[C,i]=s.useState(!1),[S,r]=s.useState(!1),[E,D]=s.useState(""),{login:L,isAuthenticated:g}=K(),h=B();F.useEffect(()=>{g&&h("/dashboard")},[g,h]);const M=async a=>{if(a.preventDefault(),!l){u(!0),r(!1),i(!1);try{await L(d,c),i(!0)}catch(t){console.error("Login error:",t);let n="Email atau password yang Anda masukkan tidak sesuai. Silakan periksa kembali kredensial Anda.";t.message&&(t.message.includes("Terlalu banyak percobaan login")?n=t.message:t.message.includes("Email atau password salah")?n="Email atau password salah. Silakan periksa kembali kredensial Anda.":n=t.message),D(n),setTimeout(()=>{r(!0)},0)}finally{u(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:[e.jsxs(O,{className:"w-full max-w-md shadow-xl relative z-10",children:[e.jsxs(H,{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Logo Kementerian Agama",className:"w-16 h-16 object-contain"})}),e.jsx(q,{className:"text-2xl font-bold text-gray-900",children:"Si Imut â€” Sistem Informasi Mutasi"}),e.jsx(R,{className:"text-base text-gray-600",children:"Kanwil Kemenag Provinsi NTB"})]}),e.jsx(G,{children:e.jsxs("form",{onSubmit:M,className:"space-y-4 relative",onKeyDown:a=>{a.key==="Enter"&&l&&a.preventDefault()},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(p,{id:"email",type:"email",value:d,onChange:a=>y(a.target.value),placeholder:"nama@kemenag.go.id",required:!0,className:"h-11 relative z-20",autoComplete:"email",autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"password",type:m?"text":"password",value:c,onChange:a=>x(a.target.value),placeholder:"Masukkan password",required:!0,className:"h-11 pr-10 relative z-20",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>v(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors z-30",tabIndex:-1,children:m?e.jsx(P,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})})]})]}),e.jsx(o,{type:"submit",className:"w-full h-11 text-base font-medium bg-green-600 hover:bg-green-700 text-white relative z-20 disabled:opacity-50 disabled:cursor-not-allowed",disabled:l||!d||!c,children:l?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 h-4 w-4 animate-spin text-green-600"}),"Sedang masuk..."]}):"Masuk"})]})})]}),e.jsx(j,{open:C,onOpenChange:i,children:e.jsxs(f,{className:"sm:max-w-md",children:[e.jsxs(b,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-500"}),"Login Berhasil"]}),e.jsx(w,{children:"Selamat datang kembali! Anda akan dialihkan ke dashboard."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{onClick:()=>{i(!1),h("/dashboard")},className:"bg-green-600 hover:bg-green-700 text-white",children:"Lanjutkan"})})]})}),e.jsx(j,{open:S,onOpenChange:a=>{a||r(!1)},children:e.jsxs(f,{className:"sm:max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[e.jsxs(b,{children:[e.jsxs(k,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(z,{className:"w-6 h-6 text-red-500"}),"Login Gagal"]}),e.jsxs(w,{className:"text-left space-y-3",children:[e.jsx("p",{className:"text-red-600 font-medium",children:E}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 space-y-2",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Saran untuk mengatasi masalah:"}),e.jsxs("ul",{className:"text-sm text-red-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Pastikan email yang dimasukkan sudah benar"}),e.jsx("li",{children:"Periksa kembali password Anda"}),e.jsx("li",{children:"Pastikan Caps Lock tidak aktif"}),e.jsx("li",{children:"Hubungi admin jika masalah berlanjut"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(o,{onClick:()=>{r(!1),x("")},variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:"Coba Lagi"}),e.jsx(o,{onClick:()=>r(!1),className:"bg-red-600 hover:bg-red-700 text-white",children:"Tutup"})]})]})})]})};export{W as default};
//# sourceMappingURL=Index-Sx3Veh7J.js.map
