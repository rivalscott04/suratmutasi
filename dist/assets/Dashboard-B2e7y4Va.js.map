{"version":3,"file":"Dashboard-B2e7y4Va.js","sources":["../../src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { apiGet } from '../lib/api';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { FileText, TrendingUp, Clock, Users, ArrowRight, BarChart3, Calendar, Settings as SettingsIcon, RefreshCw, Download, Eye } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell } from '@/components/ui/table';\nimport * as XLSX from 'xlsx';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { PageHeader } from '@/components/PageHeader';\nimport { showSuccess, showError, showSaveSuccess, showSaveError } from '@/lib/messageUtils';\n\nconst Dashboard = () => {\n  const { user, token, loading } = useAuth();\n  const navigate = useNavigate();\n  const [letters, setLetters] = useState<any[]>([]);\n  const [pengajuan, setPengajuan] = useState<any[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [loadingLetters, setLoadingLetters] = useState(false);\n  const [loadingPengajuan, setLoadingPengajuan] = useState(false);\n  const [search, setSearch] = useState('');\n  // Rekap (Superadmin & Admin Wilayah scope-aware via backend)\n  const [rekapAggregation, setRekapAggregation] = useState<Array<{ kabupaten: string; total: number; statuses: { status: string; count: number }[] }>>([]);\n  const [rekapLoading, setRekapLoading] = useState(false);\n  const [exporting, setExporting] = useState(false);\n  const filteredLetters = letters.filter(l =>\n    l.letter_number?.toLowerCase().includes(search.toLowerCase()) ||\n    l.subject?.toLowerCase().includes(search.toLowerCase()) ||\n    l.template_name?.toLowerCase().includes(search.toLowerCase())\n  );\n\n  useEffect(() => {\n    if (!loading && !user) {\n      navigate('/');\n    }\n  }, [user, loading, navigate]);\n\n  useEffect(() => {\n    if (user && token) {\n      setLoadingLetters(true);\n      apiGet('/api/letters', token)\n        .then(res => setLetters(res.letters || []))\n        .catch(err => setError(err.message || 'Gagal fetch surat'))\n        .finally(() => setLoadingLetters(false));\n\n      setLoadingPengajuan(true);\n      // Backend sudah filter otomatis untuk role bimas (penghulu/penyuluh, status != draft/rejected)\n      apiGet('/api/pengajuan', token)\n        .then(res => {\n          // Backend return format: { success: true, data: [...], pagination: {...} }\n          const pengajuanData = res.data || res.pengajuan || [];\n          setPengajuan(Array.isArray(pengajuanData) ? pengajuanData : []);\n        })\n        .catch(() => setPengajuan([]))\n        .finally(() => setLoadingPengajuan(false));\n\n      // Fetch rekap for dashboard (show to admin/superadmin, also works for admin_wilayah with scoped data)\n      const fetchRekap = async () => {\n        try {\n          setRekapLoading(true);\n          const res = await apiGet('/api/pengajuan/rekap/aggregate', token);\n          const agg = res?.data?.aggregation || res?.aggregation || [];\n          setRekapAggregation(Array.isArray(agg) ? agg : []);\n        } catch (e) {\n          setRekapAggregation([]);\n        } finally {\n          setRekapLoading(false);\n        }\n      };\n      fetchRekap();\n    }\n  }, [user, token]);\n\n  if (loading) return <div className=\"flex flex-col items-center justify-center min-h-screen\"><Skeleton className=\"h-8 w-1/2 mb-4\" /><Skeleton className=\"h-10 w-1/3 mb-2\" /><Skeleton className=\"h-10 w-1/3 mb-2\" /><Skeleton className=\"h-10 w-1/3 mb-2\" /></div>;\n\n  // Fungsi untuk menghitung perubahan persentase\n  const calculatePercentageChange = (current: number, previous: number) => {\n    if (previous === 0) return current > 0 ? '+100%' : '0%';\n    const change = ((current - previous) / previous) * 100;\n    return `${change >= 0 ? '+' : ''}${Math.round(change)}%`;\n  };\n\n  // Fungsi untuk mendapatkan data bulan lalu\n  const getLastMonthData = (data: any[], dateField: string) => {\n    const lastMonth = new Date();\n    lastMonth.setMonth(lastMonth.getMonth() - 1);\n    return data.filter(item => {\n      const itemDate = new Date(item[dateField]);\n      return itemDate.getMonth() === lastMonth.getMonth() && \n             itemDate.getFullYear() === lastMonth.getFullYear();\n    });\n  };\n\n  // Fungsi untuk mendapatkan data bulan ini\n  const getCurrentMonthData = (data: any[], dateField: string) => {\n    const currentMonth = new Date();\n    return data.filter(item => {\n      const itemDate = new Date(item[dateField]);\n      return itemDate.getMonth() === currentMonth.getMonth() && \n             itemDate.getFullYear() === currentMonth.getFullYear();\n    });\n  };\n\n  // Data untuk perhitungan\n  const currentMonthLetters = getCurrentMonthData(letters, 'createdAt');\n  const lastMonthLetters = getLastMonthData(letters, 'createdAt');\n  // Field created_at untuk pengajuan (bukan createdAt)\n  const currentMonthPengajuan = getCurrentMonthData(pengajuan, 'created_at');\n  const lastMonthPengajuan = getLastMonthData(pengajuan, 'created_at');\n\n  const getStatusLabel = (status: string) => {\n    const statusConfig = {\n      draft: 'Draf',\n      submitted: 'Diajukan',\n      approved: 'Disetujui',\n      rejected: 'Ditolak Admin Wilayah',\n      resubmitted: 'Diajukan Ulang',\n      admin_wilayah_approved: 'Disetujui Admin Wilayah',\n      admin_wilayah_rejected: 'Ditolak Superadmin',\n      final_approved: 'Selesai',\n      final_rejected: 'Ditolak Final',\n    };\n\n    return statusConfig[status as keyof typeof statusConfig] || status.toUpperCase();\n  };\n\n  const exportExcel = async () => {\n    setExporting(true);\n    try {\n      // Ambil semua data pengajuan dengan pagination\n      let allPengajuanData: any[] = [];\n      let page = 1;\n      let hasMore = true;\n      \n      while (hasMore) {\n        const res = await apiGet(`/api/pengajuan?page=${page}&limit=100`, token);\n        const pageData = res.data || res.pengajuan || [];\n        \n        if (pageData.length === 0) {\n          hasMore = false;\n        } else {\n          allPengajuanData = [...allPengajuanData, ...pageData];\n          page++;\n        }\n      }\n      \n      const pengajuanData = allPengajuanData;\n\n      // Sheet 1: Data Detail per Pengajuan\n      const detailData = pengajuanData.map((item: any) => ({\n        'Nama': item.pegawai?.nama || '-',\n        'Status': getStatusLabel(item.status),\n        'Kabupaten/Kota': item.office?.kabkota || item.office?.name || '-'\n      }));\n\n      // Sheet 2: Summary per Kabupaten\n      const summaryData = rekapAggregation.map(row => {\n        const countByStatus = row.statuses.reduce((acc, s) => { \n          acc[s.status] = s.count; \n          return acc; \n        }, {} as Record<string, number>);\n\n        return {\n          'Kabupaten/Kota': row.kabupaten,\n          'Draf': countByStatus['draft'] || 0,\n          'Diajukan': countByStatus['submitted'] || 0,\n          'Disetujui': countByStatus['approved'] || 0,\n          'Ditolak Admin Wilayah': countByStatus['rejected'] || 0,\n          'Diajukan Ulang': countByStatus['resubmitted'] || 0,\n          'Disetujui Admin Wilayah': countByStatus['admin_wilayah_approved'] || 0,\n          'Ditolak Superadmin': countByStatus['admin_wilayah_rejected'] || 0,\n          'Selesai': countByStatus['final_approved'] || 0,\n          'Ditolak Final': countByStatus['final_rejected'] || 0,\n          'Total': row.total\n        };\n      });\n\n      // Buat workbook dengan 2 sheet\n      const wb = XLSX.utils.book_new();\n      \n      // Sheet 1: Data Detail\n      const ws1 = XLSX.utils.json_to_sheet(detailData);\n      XLSX.utils.book_append_sheet(wb, ws1, 'Data Detail Pengajuan');\n      \n      // Sheet 2: Summary per Kabupaten\n      const ws2 = XLSX.utils.json_to_sheet(summaryData);\n      XLSX.utils.book_append_sheet(wb, ws2, 'Rekap per Kabupaten');\n\n      // Generate filename dengan timestamp\n      const now = new Date();\n      const timestamp = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}`;\n      const roleLabel = (user?.role === 'user') ? 'AdminPusat' : 'Superadmin';\n      const filename = `Rekap_Status_${roleLabel}_${timestamp}.xlsx`;\n\n      // Download file\n      XLSX.writeFile(wb, filename);\n    } catch (error) {\n      console.error('Error exporting Excel:', error);\n    } finally {\n      setExporting(false);\n    }\n  };\n\n  // Statistik dinamis - berbeda untuk role bimas\n  const isBimas = user?.role === 'bimas';\n  const stats = isBimas ? [\n    {\n      title: 'Total Pengajuan',\n      value: pengajuan.length,\n      change: calculatePercentageChange(pengajuan.length, lastMonthPengajuan.length),\n      icon: Users,\n      color: 'text-blue-600'\n    },\n    {\n      title: 'Pengajuan Bulan Ini',\n      value: currentMonthPengajuan.length,\n      change: calculatePercentageChange(currentMonthPengajuan.length, lastMonthPengajuan.length),\n      icon: TrendingUp,\n      color: 'text-green-600'\n    },\n    {\n      title: 'Disetujui',\n      value: pengajuan.filter(p => p.status === 'approved' || p.status === 'final_approved').length,\n      change: calculatePercentageChange(\n        pengajuan.filter(p => p.status === 'approved' || p.status === 'final_approved').length,\n        lastMonthPengajuan.filter(p => p.status === 'approved' || p.status === 'final_approved').length\n      ),\n      icon: FileText,\n      color: 'text-green-600'\n    },\n    {\n      title: 'Diajukan',\n      value: pengajuan.filter(p => p.status === 'submitted' || p.status === 'reviewed').length,\n      change: calculatePercentageChange(\n        pengajuan.filter(p => p.status === 'submitted' || p.status === 'reviewed').length,\n        lastMonthPengajuan.filter(p => p.status === 'submitted' || p.status === 'reviewed').length\n      ),\n      icon: Clock,\n      color: 'text-orange-600'\n    }\n  ] : [\n    {\n      title: 'Total Surat',\n      value: letters.length,\n      change: calculatePercentageChange(letters.length, lastMonthLetters.length),\n      icon: FileText,\n      color: 'text-blue-600'\n    },\n    {\n      title: 'Surat Bulan Ini',\n      value: currentMonthLetters.length,\n      change: calculatePercentageChange(currentMonthLetters.length, lastMonthLetters.length),\n      icon: TrendingUp,\n      color: 'text-green-600'\n    },\n    {\n      title: 'Pengajuan Terbaru',\n      value: pengajuan.filter(p => p.status === 'admin_wilayah_submitted').length,\n      change: calculatePercentageChange(\n        pengajuan.filter(p => p.status === 'admin_wilayah_submitted').length,\n        lastMonthPengajuan.filter(p => p.status === 'admin_wilayah_submitted').length\n      ),\n      icon: Users,\n      color: 'text-purple-600'\n    },\n    {\n      title: 'Surat Pending',\n      value: letters.filter(l => l.status === 'draft').length,\n      change: calculatePercentageChange(\n        letters.filter(l => l.status === 'draft').length,\n        lastMonthLetters.filter(l => l.status === 'draft').length\n      ),\n      icon: Clock,\n      color: 'text-orange-600'\n    }\n  ];\n\n  // Jenis template dinamis dari surat yang ada\n  const templateTypes = Array.from(new Set(letters.map(l => l.template_name))).filter(Boolean);\n\n  const quickActions = [\n    {\n      title: 'Buat Surat Baru',\n      description: 'Mulai membuat surat dengan template yang tersedia',\n      icon: FileText,\n      href: '/generator',\n      color: 'bg-blue-500',\n      showForRoles: ['admin', 'operator'] // Only show for admin and operator\n    },\n    {\n      title: 'Pengajuan',\n      description: 'Buat pengajuan jabatan untuk pegawai',\n      icon: Users,\n      href: '/pengajuan/select',\n      color: 'bg-green-500',\n      showForRoles: ['admin', 'operator'] // Only show for admin and operator\n    },\n    {\n      title: 'Lihat Laporan',\n      description: 'Analisis penggunaan surat',\n      icon: BarChart3,\n      href: '/reports',\n      color: 'bg-purple-500',\n      showForRoles: ['admin', 'operator', 'user'] // Show for all roles\n    }\n  ];\n\n  // Helper badge status\n  const getStatusBadge = (status: string) => {\n    if (status === 'generated') return <Badge className=\"bg-green-100 text-green-700 border-green-200\">Generated</Badge>;\n    if (status === 'draft') return <Badge className=\"bg-orange-100 text-orange-700 border-orange-200\">Draft</Badge>;\n    if (status === 'signed') return <Badge className=\"bg-blue-100 text-blue-700 border-blue-200\">Signed</Badge>;\n    return <Badge className=\"bg-gray-100 text-gray-700 border-gray-200\">{status}</Badge>;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Breadcrumb */}\n      <PageHeader\n        title={user?.role === 'user' ? 'Dashboard Admin Pusat' : \n               user?.role === 'bimas' ? 'Dashboard Bimas' : 'Dashboard'}\n        subtitle={(() => {\n          const roleText = user?.role === 'admin_wilayah' ? 'Admin Wilayah' :\n                          user?.role === 'admin' ? 'Administrator Kanwil' :\n                          user?.role === 'operator' ? 'Operator' :\n                          user?.role === 'user' ? 'Pengguna' :\n                          user?.role === 'bimas' ? 'Kanwil Bimas Islam' : 'Pengguna';\n          \n          return `Selamat datang, ${roleText}`;\n        })()}\n        showBreadcrumb={false}\n        actions={\n          <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n            <Calendar className=\"h-4 w-4\" />\n            <span>{new Date().toLocaleDateString('id-ID', {\n              weekday: 'long',\n              year: 'numeric',\n              month: 'long',\n              day: 'numeric'\n            })}</span>\n          </div>\n        }\n      />\n\n      {/* Stats Cards - 2 kolom untuk bimas, 4 kolom untuk lainnya */}\n      <div className={`grid grid-cols-1 md:grid-cols-2 ${isBimas ? '' : 'lg:grid-cols-4'} gap-6`}>\n        {stats.map((stat, index) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={index}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-gray-600\">\n                  {stat.title}\n                </CardTitle>\n                <Icon className={`h-4 w-4 ${stat.color}`} />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-gray-900\">{stat.value}</div>\n                <p className=\"text-xs text-gray-500\">\n                  <span className=\"text-green-600\">{stat.change}</span> dari bulan lalu\n                </p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Quick Actions - Hidden untuk bimas */}\n      {!isBimas && (\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {quickActions\n          .filter(action => action.showForRoles.includes(user?.role || ''))\n          .map((action, index) => {\n          const Icon = action.icon;\n          return (\n            <Card key={index} className=\"hover:shadow-md transition-shadow cursor-pointer\">\n              <CardHeader>\n                <div className=\"flex items-center space-x-3\">\n                  <div className={`p-2 rounded-lg ${action.color}`}>\n                    <Icon className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-lg\">{action.title}</CardTitle>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-gray-600 mb-4\">{action.description}</p>\n                <Button asChild variant=\"outline\" className=\"w-full\">\n                  <Link to={action.href}>\n                    Akses <ArrowRight className=\"ml-2 h-4 w-4\" />\n                  </Link>\n                </Button>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n      )}\n\n      {/* Rekap Status (Pivot) - Simplified untuk bimas */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-xl font-semibold\">\n              {isBimas ? 'Rekap Pengajuan Penghulu & Penyuluh per Kabupaten' : 'Rekap Status per Kabupaten'}\n            </CardTitle>\n            {!isBimas && (\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"border-green-200 text-green-700 hover:bg-green-50\" \n                disabled={rekapLoading}\n                onClick={async () => {\n                  if (!token) return;\n                  try {\n                    setRekapLoading(true);\n                    const res = await apiGet('/api/pengajuan/rekap/aggregate', token);\n                    const agg = res?.data?.aggregation || res?.aggregation || [];\n                    setRekapAggregation(Array.isArray(agg) ? agg : []);\n                  } finally {\n                    setRekapLoading(false);\n                  }\n                }}\n              >\n                <RefreshCw className={`h-4 w-4 mr-2 ${rekapLoading ? 'animate-spin' : ''}`} /> \n                {rekapLoading ? 'Loading...' : 'Refresh'}\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"border-green-200 text-green-700 hover:bg-green-50\" \n                disabled={exporting}\n                onClick={exportExcel}\n              >\n                <Download className=\"h-4 w-4 mr-2\" /> \n                {exporting ? 'Exporting...' : 'Export Excel'}\n              </Button>\n            </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {rekapLoading ? (\n            <div className=\"text-center py-8 text-gray-500\">Memuat rekap...</div>\n          ) : rekapAggregation.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">Tidak ada data</div>\n          ) : (\n            (() => {\n              const statusKeys = Array.from(new Set(rekapAggregation.flatMap(k => k.statuses.map(s => s.status))));\n              return (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full text-sm\">\n                    <thead>\n                      <tr className=\"text-left border-b\">\n                        <th className=\"py-3 pr-4 font-medium\">Kabupaten</th>\n                        {statusKeys.map(sk => (\n                          <th key={sk} className=\"py-3 pr-4 font-medium whitespace-nowrap text-center\">{\n                            (() => {\n                              const map: Record<string, string> = {\n                                draft: 'Draf',\n                                submitted: 'Diajukan',\n                                approved: 'Disetujui',\n                                rejected: 'Ditolak Admin Wilayah',\n                                resubmitted: 'Diajukan Ulang',\n                                admin_wilayah_approved: 'Disetujui Admin Wilayah',\n                                admin_wilayah_rejected: 'Ditolak Superadmin',\n                                admin_wilayah_submitted: 'Diajukan Admin Wilayah',\n                                final_approved: 'Selesai',\n                                final_rejected: 'Ditolak Final'\n                              };\n                              // Gunakan split/join agar kompatibel dengan lingkungan yang tidak mendukung replaceAll\n                              const fallback = (sk || '').split('_').join(' ').toUpperCase();\n                              return map[sk] || fallback;\n                            })()\n                          }</th>\n                        ))}\n                        <th className=\"py-3 pr-4 font-medium text-center\">Total</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {rekapAggregation.map(row => {\n                        const countBy = row.statuses.reduce((acc: any, s) => { acc[s.status] = s.count; return acc; }, {} as Record<string, number>);\n                        return (\n                          <tr key={row.kabupaten} className=\"border-b hover:bg-gray-50\">\n                            <td className=\"py-3 pr-4 font-medium\">{row.kabupaten}</td>\n                            {statusKeys.map(sk => (\n                              <td key={sk} className=\"py-3 pr-4 text-center\">{countBy[sk] || 0}</td>\n                            ))}\n                            <td className=\"py-3 pr-4 font-semibold text-center\">{row.total}</td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </div>\n              );\n            })()\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Jenis Template: tidak ditampilkan untuk admin pusat (role user) dan bimas */}\n      {user?.role !== 'user' && !isBimas && (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\"><FileText className=\"w-5 h-5 text-green-700\" /> Jenis Template</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {templateTypes.length === 0 ? (\n                  <div className=\"text-center text-gray-500\">Belum ada template surat</div>\n                ) : (\n                  templateTypes.map((name, idx) => (\n                    <div key={idx} className=\"flex items-center gap-2 p-2 bg-gray-50 rounded-lg\">\n                      <FileText className=\"w-4 h-4 text-green-600\" />\n                      <span className=\"font-medium text-gray-900\">{name}</span>\n                    </div>\n                  ))\n                )}\n              </div>\n            </CardContent>\n          </Card>\n          {/* Template Terbaru diganti, atau bisa dihapus jika tidak perlu */}\n        </div>\n      )}\n\n      {/* Tabel Pengajuan Terbaru untuk bimas, Tabel Surat untuk lainnya */}\n      {isBimas ? (\n        <Card className=\"mb-4\">\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-xl font-semibold\">Pengajuan Penghulu & Penyuluh Terbaru</CardTitle>\n              <Button asChild variant=\"outline\" size=\"sm\" className=\"border-green-200 text-green-700 hover:bg-green-50\">\n                <Link to=\"/pengajuan\">\n                  Lihat Semua <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </Link>\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {loadingPengajuan ? (\n              <div className=\"text-center py-8 text-gray-500\">Memuat pengajuan...</div>\n            ) : pengajuan.length === 0 ? (\n              <div className=\"text-center py-8 text-gray-500\">Tidak ada pengajuan</div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>No.</TableHead>\n                      <TableHead>Nama Pegawai</TableHead>\n                      <TableHead>Jenis Jabatan</TableHead>\n                      <TableHead>Kabupaten/Kota</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Aksi</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {pengajuan.slice(0, 10).map((p: any, i: number) => (\n                      <TableRow key={p.id}>\n                        <TableCell>{i + 1}</TableCell>\n                        <TableCell>{p.pegawai?.nama || '-'}</TableCell>\n                        <TableCell>{p.jenis_jabatan || '-'}</TableCell>\n                        <TableCell>{p.office?.kabkota || p.office?.name || '-'}</TableCell>\n                        <TableCell>\n                          <Badge className={\n                            p.status === 'approved' || p.status === 'final_approved' ? 'bg-green-100 text-green-700 border-green-200' :\n                            p.status === 'submitted' || p.status === 'reviewed' ? 'bg-blue-100 text-blue-700 border-blue-200' :\n                            p.status === 'rejected' || p.status === 'final_rejected' ? 'bg-red-100 text-red-700 border-red-200' :\n                            'bg-gray-100 text-gray-700 border-gray-200'\n                          }>\n                            {getStatusLabel(p.status)}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          <Button asChild variant=\"outline\" size=\"sm\">\n                            <Link to={`/pengajuan/${p.id}`}>\n                              <Eye className=\"w-4 h-4 mr-1\" /> Detail\n                            </Link>\n                          </Button>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      ) : (\n        <Card className=\"mb-4\">\n          <CardHeader>\n            <CardTitle className=\"text-xl font-semibold\">Daftar Surat</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-2\">\n              <input\n                type=\"text\"\n                className=\"input input-bordered w-full md:w-64\"\n                placeholder=\"Cari nomor, perihal, atau template...\"\n                value={search}\n                onChange={e => setSearch(e.target.value)}\n              />\n            </div>\n            {loadingLetters ? (\n              <div>Loading surat...</div>\n            ) : error ? (\n              <div className=\"text-error\">{error}</div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>No.</TableHead>\n                      <TableHead>Nomor Surat</TableHead>\n                      <TableHead>Perihal</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Aksi</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredLetters.length === 0 ? (\n                      <TableRow>\n                        <TableCell colSpan={5} className=\"text-center\">Tidak ada surat</TableCell>\n                      </TableRow>\n                    ) : (\n                      filteredLetters.slice(0, 5).map((l, i) => (\n                        <TableRow key={l.id}>\n                          <TableCell>{i + 1}</TableCell>\n                          <TableCell>{l.letter_number}</TableCell>\n                          <TableCell>{l.subject}</TableCell>\n                          <TableCell>{getStatusBadge(l.status)}</TableCell>\n                          <TableCell>\n                            <Link to={`/letters/${l.id}`} className=\"btn btn-xs btn-outline flex items-center gap-1\">\n                              <FileText className=\"w-4 h-4\" /> Detail\n                            </Link>\n                          </TableCell>\n                        </TableRow>\n                      ))\n                    )}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"names":["Dashboard","user","token","loading","useAuth","navigate","useNavigate","letters","setLetters","useState","pengajuan","setPengajuan","error","setError","loadingLetters","setLoadingLetters","loadingPengajuan","setLoadingPengajuan","search","setSearch","rekapAggregation","setRekapAggregation","rekapLoading","setRekapLoading","exporting","setExporting","filteredLetters","l","_a","_b","_c","useEffect","apiGet","res","err","pengajuanData","agg","jsxs","jsx","Skeleton","calculatePercentageChange","current","previous","change","getLastMonthData","data","dateField","lastMonth","item","itemDate","getCurrentMonthData","currentMonth","currentMonthLetters","lastMonthLetters","currentMonthPengajuan","lastMonthPengajuan","getStatusLabel","status","exportExcel","allPengajuanData","page","hasMore","pageData","detailData","summaryData","row","countByStatus","acc","s","wb","XLSX.utils","ws1","ws2","now","timestamp","filename","XLSX.writeFile","isBimas","stats","Users","TrendingUp","p","FileText","Clock","templateTypes","quickActions","BarChart3","getStatusBadge","Badge","PageHeader","Calendar","stat","index","Icon","Card","CardHeader","CardTitle","CardContent","action","Button","Link","ArrowRight","RefreshCw","Download","statusKeys","k","sk","map","fallback","countBy","name","idx","Table","TableHeader","TableRow","TableHead","TableBody","i","TableCell","Eye","e"],"mappings":"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"}