{"version":3,"file":"errorFormatter-D6nNfdnT.js","sources":["../../src/utils/errorFormatter.ts"],"sourcesContent":["// Utility untuk format error message menjadi ramah pengguna\r\n\r\n// Mapping status untuk ditampilkan ke user\r\nconst statusMap: Record<string, string> = {\r\n  'draft': 'Draft',\r\n  'submitted': 'Telah Dikirim',\r\n  'approved': 'Disetujui',\r\n  'rejected': 'Ditolak',\r\n  'resubmitted': 'Dikirim Ulang',\r\n  'admin_wilayah_approved': 'Disetujui Admin Wilayah',\r\n  'admin_wilayah_rejected': 'Ditolak Admin Wilayah',\r\n  'admin_wilayah_submitted': 'Dikirim ke Admin Pusat',\r\n  'kanwil_submitted': 'Dikirim ke Admin Wilayah',\r\n  'kanwil_approved': 'Disetujui Kanwil',\r\n  'final_approved': 'Disetujui Final',\r\n  'final_rejected': 'Ditolak Final'\r\n};\r\n\r\n/**\r\n * Format error message dari backend menjadi pesan yang ramah pengguna\r\n * @param errorMessage - Error message dari backend atau Error object\r\n * @returns Formatted error message yang ramah pengguna\r\n */\r\nexport const formatErrorMessage = (errorMessage: string | Error): string => {\r\n  // Extract message jika Error object\r\n  const message = errorMessage instanceof Error ? errorMessage.message : errorMessage;\r\n  \r\n  if (!message) {\r\n    return 'Terjadi kesalahan. Silakan coba lagi.';\r\n  }\r\n\r\n  // Cek apakah error message mengandung informasi duplikat pengajuan\r\n  if (message.includes('sudah memiliki pengajuan')) {\r\n    // Extract informasi dari error message\r\n    // Format: \"Pegawai {nama} (NIP: {nip}) sudah memiliki pengajuan untuk jabatan \"{jenis_jabatan}\" dengan status \"{status}\"\"\r\n    const match = message.match(/Pegawai (.+?) \\(NIP: (.+?)\\) sudah memiliki pengajuan untuk jabatan \"(.+?)\" dengan status \"(.+?)\"/);\r\n    \r\n    if (match) {\r\n      const [, pegawaiNama, pegawaiNip, jenisJabatan, status] = match;\r\n      const statusDisplay = statusMap[status] || status;\r\n      \r\n      return `Tidak dapat membuat pengajuan baru. Pegawai ${pegawaiNama} (NIP: ${pegawaiNip}) sudah memiliki pengajuan untuk jabatan \"${jenisJabatan}\" dengan status \"${statusDisplay}\". Silakan hapus pengajuan yang sudah ada terlebih dahulu jika ingin membuat pengajuan baru.`;\r\n    }\r\n  }\r\n\r\n  // Format error umum lainnya\r\n  if (message.includes('Rate limit')) {\r\n    return 'Terlalu banyak percobaan. Silakan coba lagi dalam beberapa saat.';\r\n  }\r\n\r\n  if (message.includes('Unauthorized') || message.includes('401')) {\r\n    return 'Sesi Anda telah berakhir. Silakan login kembali.';\r\n  }\r\n\r\n  if (message.includes('Forbidden') || message.includes('403')) {\r\n    return 'Anda tidak memiliki izin untuk melakukan aksi ini.';\r\n  }\r\n\r\n  if (message.includes('Not Found') || message.includes('404')) {\r\n    return 'Data yang diminta tidak ditemukan.';\r\n  }\r\n\r\n  if (message.includes('Internal server error') || message.includes('500')) {\r\n    return 'Terjadi kesalahan pada server. Silakan coba lagi nanti atau hubungi administrator.';\r\n  }\r\n\r\n  // Jika bukan error khusus, kembalikan error message asli\r\n  return message;\r\n};\r\n\r\n/**\r\n * Extract error message dari berbagai tipe error\r\n * @param error - Error object, string, atau unknown\r\n * @returns Error message string\r\n */\r\nexport const extractErrorMessage = (error: unknown): string => {\r\n  if (error instanceof Error) {\r\n    return error.message;\r\n  }\r\n  \r\n  if (typeof error === 'string') {\r\n    return error;\r\n  }\r\n  \r\n  if (error && typeof error === 'object' && 'message' in error) {\r\n    return String(error.message);\r\n  }\r\n  \r\n  return 'Terjadi kesalahan yang tidak diketahui. Silakan coba lagi.';\r\n};\r\n\r\n/**\r\n * Format dan extract error message dalam satu fungsi\r\n * @param error - Error object, string, atau unknown\r\n * @returns Formatted error message yang ramah pengguna\r\n */\r\nexport const formatError = (error: unknown): string => {\r\n  const message = extractErrorMessage(error);\r\n  return formatErrorMessage(message);\r\n};\r\n\r\n"],"names":["statusMap","formatErrorMessage","errorMessage","message","match","pegawaiNama","pegawaiNip","jenisJabatan","status","statusDisplay","extractErrorMessage","error","formatError"],"mappings":"AAGA,MAAMA,EAAoC,CACxC,MAAS,QACT,UAAa,gBACb,SAAY,YACZ,SAAY,UACZ,YAAe,gBACf,uBAA0B,0BAC1B,uBAA0B,wBAC1B,wBAA2B,yBAC3B,iBAAoB,2BACpB,gBAAmB,mBACnB,eAAkB,kBAClB,eAAkB,eACpB,EAOaC,EAAsBC,GAAyC,CAE1E,MAAMC,EAAUD,aAAwB,MAAQA,EAAa,QAAUA,EAEvE,GAAI,CAACC,EACI,MAAA,wCAIL,GAAAA,EAAQ,SAAS,0BAA0B,EAAG,CAG1C,MAAAC,EAAQD,EAAQ,MAAM,mGAAmG,EAE/H,GAAIC,EAAO,CACT,KAAM,CAAA,CAAGC,EAAaC,EAAYC,EAAcC,CAAM,EAAIJ,EACpDK,EAAgBT,EAAUQ,CAAM,GAAKA,EAE3C,MAAO,+CAA+CH,CAAW,UAAUC,CAAU,6CAA6CC,CAAY,oBAAoBE,CAAa,8FACjL,CACF,CAGI,OAAAN,EAAQ,SAAS,YAAY,EACxB,mEAGLA,EAAQ,SAAS,cAAc,GAAKA,EAAQ,SAAS,KAAK,EACrD,mDAGLA,EAAQ,SAAS,WAAW,GAAKA,EAAQ,SAAS,KAAK,EAClD,qDAGLA,EAAQ,SAAS,WAAW,GAAKA,EAAQ,SAAS,KAAK,EAClD,qCAGLA,EAAQ,SAAS,uBAAuB,GAAKA,EAAQ,SAAS,KAAK,EAC9D,qFAIFA,CACT,EAOaO,EAAuBC,GAC9BA,aAAiB,MACZA,EAAM,QAGX,OAAOA,GAAU,SACZA,EAGLA,GAAS,OAAOA,GAAU,UAAY,YAAaA,EAC9C,OAAOA,EAAM,OAAO,EAGtB,6DAQIC,EAAeD,GAA2B,CAC/C,MAAAR,EAAUO,EAAoBC,CAAK,EACzC,OAAOV,EAAmBE,CAAO,CACnC"}