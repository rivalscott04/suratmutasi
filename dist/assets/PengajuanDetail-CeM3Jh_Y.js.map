{"version":3,"file":"PengajuanDetail-CeM3Jh_Y.js","sources":["../../src/pages/PengajuanDetail.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { \r\n  ArrowLeft, \r\n  Eye, \r\n  Download, \r\n  CheckCircle, \r\n  XCircle, \r\n  Clock, \r\n  FileText, \r\n  User, \r\n  Calendar,\r\n  AlertCircle,\r\n  Loader2,\r\n  Edit,\r\n  Send,\r\n  RefreshCw,\r\n  Trash2,\r\n  Printer,\r\n  CheckSquare,\r\n  XSquare,\r\n  Check,\r\n  X\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet, apiPut, apiDelete, apiPost } from '@/lib/api';\r\n\r\ninterface PengajuanFile {\r\n  id: string;\r\n  file_type: string;\r\n  file_name: string;\r\n  file_size: number;\r\n  upload_status: string;\r\n  verification_status: 'pending' | 'approved' | 'rejected';\r\n  verification_notes?: string;\r\n  verified_by?: string;\r\n  verified_at?: string;\r\n  blobUrl?: string;\r\n  file_category?: 'kabupaten' | 'admin_wilayah';\r\n  uploaded_by_role?: string;\r\n  uploaded_by_name?: string;\r\n  uploaded_by_office?: string;\r\n}\r\n\r\ninterface PengajuanData {\r\n  id: string;\r\n  user_id?: string;\r\n  created_by?: string;\r\n  pegawai: {\r\n    nama: string;\r\n    jabatan: string;\r\n    nip: string;\r\n  };\r\n  office?: {\r\n    name: string;\r\n    kabkota: string;\r\n    address?: string;\r\n  };\r\n  jenis_jabatan: string;\r\n  jabatan_id?: number;\r\n  total_dokumen: number;\r\nstatus: 'draft' | 'submitted' | 'approved' | 'rejected' | 'resubmitted' | 'admin_wilayah_approved' | 'admin_wilayah_rejected' | 'final_approved' | 'final_rejected';\r\n  catatan?: string;\r\n  rejection_reason?: string;\r\n  rejected_by?: string;\r\n  rejected_at?: string;\r\n  approved_by?: string;\r\n  approved_at?: string;\r\n  resubmitted_by?: string;\r\n  resubmitted_at?: string;\r\n  final_approved_by?: string;\r\n  final_approved_at?: string;\r\n  final_rejected_by?: string;\r\n  final_rejected_at?: string;\r\n  final_rejection_reason?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  files: PengajuanFile[];\r\n}\r\n\r\nconst PengajuanDetail: React.FC = () => {\r\n  const { pengajuanId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, token, isAuthenticated, originalUser, isImpersonating } = useAuth();\r\n  const [pengajuan, setPengajuan] = useState<PengajuanData | null>(null);\r\n  const [requiredKabupaten, setRequiredKabupaten] = useState<string[]>([]);\r\n  const [requiredKanwil, setRequiredKanwil] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [previewFile, setPreviewFile] = useState<PengajuanFile | null>(null);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [showApproveDialog, setShowApproveDialog] = useState(false);\r\n  const [showRejectDialog, setShowRejectDialog] = useState(false);\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\r\n  const [showPrintDialog, setShowPrintDialog] = useState(false);\r\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\r\n  const [showFinalApproveDialog, setShowFinalApproveDialog] = useState(false);\r\n  const [showFinalRejectDialog, setShowFinalRejectDialog] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [approvalNote, setApprovalNote] = useState('');\r\n  const [rejectionReason, setRejectionReason] = useState('');\r\n  const [finalApprovalNote, setFinalApprovalNote] = useState('');\r\n  const [finalRejectionReason, setFinalRejectionReason] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [verifyingFile, setVerifyingFile] = useState<string | null>(null);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  \r\n  // Check if there are admin wilayah files\r\n  const hasAdminWilayahFiles = pengajuan?.files?.some(file => file.file_category === 'admin_wilayah') || false;\r\n  \r\n\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    if (pengajuanId) {\r\n      fetchPengajuanData();\r\n    }\r\n  }, [isAuthenticated, navigate, pengajuanId]);\r\n\r\n  // Deteksi scroll untuk floating sidebar\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      setIsScrolled(scrollTop > 50); // Mulai floating setelah scroll 50px\r\n    };\r\n\r\n    // Trigger initial check\r\n    handleScroll();\r\n    \r\n    window.addEventListener('scroll', handleScroll, { passive: true });\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  const fetchPengajuanData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiGet(`/api/pengajuan/${pengajuanId}`, token);\r\n      if (response.success) {\r\n        setPengajuan(response.data.pengajuan);\r\n        // simpan daftar required kab/kota dari job type\r\n        if (Array.isArray(response.data.requiredFiles)) {\r\n          setRequiredKabupaten(response.data.requiredFiles as string[]);\r\n        } else {\r\n          setRequiredKabupaten([]);\r\n        }\r\n        // jika admin wilayah, ambil konfigurasi kanwil untuk daftar file wajib\r\n        if (user?.role === 'admin_wilayah') {\r\n          try {\r\n            const awRes = await apiGet(`/api/admin-wilayah/pengajuan/${pengajuanId}`, token);\r\n            const reqList = (awRes?.adminWilayahFileConfig?.required || awRes?.data?.adminWilayahFileConfig?.required || []) as Array<{ file_type: string }>;\r\n            setRequiredKanwil(reqList.map((r) => r.file_type));\r\n          } catch (e) {\r\n            setRequiredKanwil([]);\r\n          }\r\n        } else {\r\n          setRequiredKanwil([]);\r\n        }\r\n      } else {\r\n        setError(response.message || 'Gagal mengambil data pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching pengajuan data:', error);\r\n      setError('Terjadi kesalahan saat mengambil data pengajuan');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleApprove = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = isAdminWilayah\r\n        ? await apiPost(`/api/admin-wilayah/pengajuan/${pengajuanId}/approve`, { notes: approvalNote }, token)\r\n        : await apiPut(`/api/pengajuan/${pengajuanId}/approve`, { catatan: approvalNote }, token);\r\n      \r\n      if (response.success) {\r\n        setSuccessMessage('Pengajuan berhasil disetujui!');\r\n        setShowSuccessDialog(true);\r\n        setShowApproveDialog(false);\r\n        setApprovalNote('');\r\n        await fetchPengajuanData();\r\n      } else {\r\n        setError(response.message || 'Gagal approve pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error approving pengajuan:', error);\r\n      setError('Terjadi kesalahan saat approve pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleReject = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = isAdminWilayah\r\n        ? await apiPost(`/api/admin-wilayah/pengajuan/${pengajuanId}/reject`, { rejection_reason: rejectionReason }, token)\r\n        : await apiPut(`/api/pengajuan/${pengajuanId}/reject`, { rejection_reason: rejectionReason }, token);\r\n      \r\n      if (response.success) {\r\n        setSuccessMessage('Pengajuan berhasil ditolak!');\r\n        setShowSuccessDialog(true);\r\n        setShowRejectDialog(false);\r\n        setRejectionReason('');\r\n        await fetchPengajuanData();\r\n      } else {\r\n        setError(response.message || 'Gagal reject pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error rejecting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat reject pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleFinalApprove = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = await apiPost(`/api/pengajuan/${pengajuanId}/final-approve`, { notes: approvalNote }, token);\r\n      \r\n      if (response.success) {\r\n        setSuccessMessage('Pengajuan berhasil disetujui final!');\r\n        setShowSuccessDialog(true);\r\n        setShowFinalApproveDialog(false);\r\n        setApprovalNote('');\r\n        await fetchPengajuanData();\r\n      } else {\r\n        setError(response.message || 'Gagal approve final pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error final approving pengajuan:', error);\r\n      setError('Terjadi kesalahan saat approve final pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleFinalReject = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = await apiPost(`/api/pengajuan/${pengajuanId}/final-reject`, { rejection_reason: rejectionReason }, token);\r\n      \r\n      if (response.success) {\r\n        setSuccessMessage('Pengajuan berhasil ditolak final!');\r\n        setShowSuccessDialog(true);\r\n        setShowFinalRejectDialog(false);\r\n        setRejectionReason('');\r\n        await fetchPengajuanData();\r\n      } else {\r\n        setError(response.message || 'Gagal reject final pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error final rejecting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat reject final pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleResubmit = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = await apiPut(`/api/pengajuan/${pengajuanId}/resubmit`, {}, token);\r\n      \r\n      if (response.success) {\r\n        setSuccessMessage('Pengajuan berhasil diajukan ulang!');\r\n        setShowSuccessDialog(true);\r\n        await fetchPengajuanData();\r\n      } else {\r\n        setError(response.message || 'Gagal resubmit pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error resubmitting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat resubmit pengajuan');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = await apiDelete(`/api/pengajuan/${pengajuanId}`, token);\r\n      \r\n      if (response.success) {\r\n        setSuccessMessage('Pengajuan berhasil dihapus!');\r\n        setShowSuccessDialog(true);\r\n        setShowDeleteDialog(false);\r\n        // Redirect setelah 2 detik agar user bisa lihat pesan sukses\r\n        setTimeout(() => {\r\n          navigate('/pengajuan');\r\n        }, 2000);\r\n      } else {\r\n        setError(response.message || 'Gagal menghapus pengajuan');\r\n        setShowDeleteDialog(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat menghapus pengajuan');\r\n      setShowDeleteDialog(false);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string, pengajuan?: PengajuanData) => {\r\n    // Helper function to determine if this is submitted after admin wilayah approval\r\n    const isSubmittedAfterAdminWilayah = (status: string, pengajuan?: PengajuanData) => {\r\n      if (status !== 'submitted' || !pengajuan) return false;\r\n      // Only show \"Diajukan Admin Wilayah\" if there are actual admin wilayah files\r\n      return pengajuan.files?.some(f => f.file_category === 'admin_wilayah') || false;\r\n    };\r\n\r\n    const statusConfig = {\r\n      draft: { label: 'DRAFT', className: 'bg-gray-100 text-gray-800' },\r\n      submitted: { \r\n        label: isSubmittedAfterAdminWilayah(status, pengajuan) ? 'DIAJUKAN ADMIN WILAYAH' : 'SUBMITTED', \r\n        className: 'bg-blue-100 text-blue-800' \r\n      },\r\n      approved: { label: 'APPROVED', className: 'bg-green-100 text-green-800' },\r\n      rejected: { label: 'REJECTED', className: 'bg-red-100 text-red-800' },\r\n      resubmitted: { label: 'RESUBMITTED', className: 'bg-yellow-100 text-yellow-800' },\r\n      admin_wilayah_approved: { label: 'ADMIN_WILAYAH_APPROVED', className: 'bg-green-200 text-green-800' },\r\n      admin_wilayah_rejected: { label: 'ADMIN_WILAYAH_REJECTED', className: 'bg-red-200 text-red-800' },\r\n      final_approved: { label: 'FINAL_APPROVED', className: 'bg-green-600 text-white' },\r\n      final_rejected: { label: 'FINAL_REJECTED', className: 'bg-red-600 text-white' },\r\n    };\r\n\r\n    const config = statusConfig[status as keyof typeof statusConfig] || { label: status.toUpperCase(), className: 'bg-gray-100 text-gray-800' };\r\n\r\n    return (\r\n      <Badge className={config.className}>\r\n        {config.label}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const getJabatanDisplayName = (jenisJabatan: string): string => {\r\n    const jabatanMap: Record<string, string> = {\r\n      'guru': 'Guru',\r\n      'eselon_iv': 'Eselon IV',\r\n      'fungsional': 'Fungsional',\r\n      'pelaksana': 'Pelaksana'\r\n    };\r\n    \r\n    return jabatanMap[jenisJabatan] || jenisJabatan;\r\n  };\r\n\r\n  const getFileDisplayName = (fileType: string): string => {\r\n    const fileTypeMap: Record<string, string> = {\r\n      // Berkas Kabupaten/Kota\r\n      'surat_pengantar': 'Surat Pengantar',\r\n      'surat_permohonan_dari_yang_bersangkutan': 'Surat Permohonan Dari Yang Bersangkutan',\r\n      'surat_keputusan_cpns': 'Surat Keputusan CPNS',\r\n      'surat_keputusan_pns': 'Surat Keputusan PNS',\r\n      'surat_keputusan_kenaikan_pangkat_terakhir': 'Surat Keputusan Kenaikan Pangkat Terakhir',\r\n      'surat_keputusan_jabatan_terakhir': 'Surat Keputusan Jabatan Terakhir',\r\n      'skp_2_tahun_terakhir': 'SKP 2 Tahun Terakhir',\r\n      'surat_keterangan_bebas_temuan_inspektorat': 'Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama',\r\n      'surat_keterangan_anjab_abk_instansi_asal': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal',\r\n      'surat_keterangan_anjab_abk_instansi_penerima': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima',\r\n      'surat_pernyataan_tidak_hukuman_disiplin': 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK',\r\n      'surat_persetujuan_mutasi_asal': 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki',\r\n      'surat_lolos_butuh_ppk': 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju',\r\n      'peta_jabatan': 'Peta Jabatan',\r\n      'hasil_uji_kompetensi': 'Hasil Uji Kompetensi',\r\n      'hasil_evaluasi_pertimbangan_baperjakat': 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)',\r\n      'anjab_abk_instansi_asal': 'Anjab/Abk Instansi Asal',\r\n      'anjab_abk_instansi_penerima': 'Anjab/Abk Instansi Penerima',\r\n      'surat_keterangan_tidak_tugas_belajar': 'Surat Keterangan Tidak Sedang Tugas Belajar',\r\n      'sptjm_pimpinan_satker_asal': 'SPTJM Pimpinan Satker dari Asal',\r\n      'sptjm_pimpinan_satker_penerima': 'SPTJM Pimpinan Satker dari Penerima',\r\n      'surat_rekomendasi_instansi_pembina': 'Surat Rekomendasi Instansi Pembina',\r\n      \r\n      // Berkas Admin Wilayah (sesuai narasi)\r\n      'surat_pengantar_permohonan_rekomendasi': 'Surat Pengantar Permohonan Rekomendasi',\r\n      'surat_rekomendasi_kanwil_khusus': 'Surat Rekomendasi Kanwil Khusus',\r\n      'surat_persetujuan_kepala_wilayah': 'Surat Persetujuan Kepala Wilayah',\r\n      'surat_pernyataan_tidak_ikatan_dinas': 'Surat Pernyataan Tidak Ikatan Dinas',\r\n      'surat_pernyataan_tidak_tugas_belajar': 'Surat Pernyataan Tidak Tugas Belajar',\r\n      'surat_keterangan_kanwil': 'Surat Keterangan Kanwil',\r\n      'surat_rekomendasi_kanwil': 'Surat Rekomendasi Kanwil'\r\n    };\r\n    \r\n    return fileTypeMap[fileType] || fileType.replace(/_/g, ' ').toUpperCase();\r\n  };\r\n\r\n  // Fungsi untuk verifikasi file\r\n  const handleVerifyFile = async (fileId: string, verificationStatus: 'approved' | 'rejected', notes?: string) => {\r\n    try {\r\n      console.log('üîç Debug handleVerifyFile:', { fileId, verificationStatus, notes, token });\r\n      setVerifyingFile(fileId);\r\n      \r\n      const requestData = {\r\n        verification_status: verificationStatus,\r\n        verification_notes: notes\r\n      };\r\n      console.log('üì§ Request data:', requestData);\r\n      \r\n      const response = await apiPut(`/api/pengajuan/files/${fileId}/verify`, requestData, token);\r\n      console.log('üì• Response:', response);\r\n      \r\n      if (response.success) {\r\n        // Update local state immediately for smooth UX\r\n        setPengajuan(prev => {\r\n          if (!prev) return prev;\r\n          return {\r\n            ...prev,\r\n            files: prev.files.map(file => \r\n              file.id === fileId \r\n                ? { \r\n                    ...file, \r\n                    verification_status: verificationStatus,\r\n                    verified_by: user?.email || user?.id,\r\n                    verified_at: new Date().toISOString()\r\n                  }\r\n                : file\r\n            )\r\n          };\r\n        });\r\n      } else {\r\n        setError(response.message || 'Gagal verifikasi file');\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Error verifying file:', error);\r\n      setError('Terjadi kesalahan saat verifikasi file');\r\n    } finally {\r\n      setVerifyingFile(null);\r\n    }\r\n  };\r\n\r\n  // Fungsi untuk cetak laporan\r\n  const handlePrintReport = async () => {\r\n    try {\r\n      setSubmitting(true);\r\n      const response = await apiGet(`/api/pengajuan/${pengajuanId}/print-report`, token);\r\n      \r\n      if (response.success) {\r\n        // Generate dan cetak laporan\r\n        generatePrintReport(response.data);\r\n      } else {\r\n        setError(response.message || 'Gagal generate laporan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error generating print report:', error);\r\n      setError('Terjadi kesalahan saat generate laporan');\r\n    } finally {\r\n      setSubmitting(false);\r\n      setShowPrintDialog(false);\r\n    }\r\n  };\r\n\r\n  // Handler untuk cetak laporan final\r\n  const handleFinalPrintReport = () => {\r\n    try {\r\n      generateFinalPrintReport();\r\n      setShowPrintDialog(false);\r\n    } catch (error) {\r\n      console.error('Error generating final print report:', error);\r\n      setError('Terjadi kesalahan saat generate laporan final');\r\n    }\r\n  };\r\n\r\n\r\n\r\n  // Generate HTML untuk cetak\r\n  const generatePrintReport = (data: any) => {\r\n    const printWindow = window.open('', '_blank');\r\n    if (!printWindow) return;\r\n\r\n    const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <title>Laporan Pengajuan - ${data.pegawai.nama}</title>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; margin: 20px; }\r\n          .header { text-align: center; margin-bottom: 30px; }\r\n          .info { margin-bottom: 20px; }\r\n          .info table { width: 100%; border-collapse: collapse; }\r\n          .info td { padding: 5px; }\r\n          .info td:first-child { font-weight: bold; width: 150px; }\r\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; font-family: Arial, sans-serif; font-size: 10pt; }\r\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\r\n          th { background-color: #f2f2f2; font-weight: bold; }\r\n          .checkbox { width: 20px; height: 20px; }\r\n          @media print { body { margin: 0; } }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"header\">\r\n          <h2>LAPORAN PENGAJUAN JABATAN</h2>\r\n        </div>\r\n        \r\n        <div class=\"info\">\r\n          <table>\r\n            <tr><td>Nama</td><td>: ${data.pegawai.nama}</td></tr>\r\n            <tr><td>NIP</td><td>: ${data.pegawai.nip}</td></tr>\r\n            <tr><td>Jabatan</td><td>: ${data.pegawai.jabatan}</td></tr>\r\n                         <tr><td>Kabupaten/Kota</td><td>: ${data.office?.kabkota || 'Tidak tersedia'}</td></tr>\r\n            <tr><td>Status</td><td>: ${data.pengajuan.status}</td></tr>\r\n            <tr><td>Tanggal Approval</td><td>: ${new Date(data.pengajuan.approved_at).toLocaleDateString('id-ID')}</td></tr>\r\n          </table>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>No</th>\r\n              <th>Nama Berkas</th>\r\n              <th>Ada Berkas</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${data.files.map((file: any, index: number) => `\r\n              <tr>\r\n                <td>${index + 1}</td>\r\n                <td>${getFileDisplayName(file.file_type)}</td>\r\n                <td>\r\n                  <input type=\"checkbox\" class=\"checkbox\" ${file.verification_status === 'approved' ? 'checked' : ''} disabled>\r\n                </td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n        \r\n        <!-- Verification Footer -->\r\n        <div style=\"margin-top: 40px; padding: 15px; border-top: 2px solid #ddd; text-align: center; font-size: 10pt; color: #666;\">\r\n          <div style=\"margin-bottom: 8px; font-weight: bold;\">\r\n            ‚úì Dokumen ini telah diverifikasi dan disetujui oleh Admin Kanwil\r\n          </div>\r\n          <div style=\"font-size: 9pt;\">\r\n            Tanggal Approval: ${data.approved_at ? new Date(data.approved_at).toLocaleDateString('id-ID') : new Date().toLocaleDateString('id-ID')}\r\n          </div>\r\n          <div style=\"font-size: 8pt; margin-top: 5px;\">\r\n            Si Imut Kanwil Kemenag NTB\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `;\r\n\r\n    printWindow.document.write(html);\r\n    printWindow.document.close();\r\n    printWindow.print();\r\n  };\r\n\r\n  // Generate HTML untuk cetak laporan FINAL (setelah final approval)\r\n  const generateFinalPrintReport = () => {\r\n    const printWindow = window.open('', '_blank');\r\n    if (!printWindow) return;\r\n\r\n    // Pisahkan file berdasarkan kategori\r\n    const kabupatenFiles = pengajuan.files.filter(f => f.file_category === 'kabupaten');\r\n    const adminWilayahFiles = pengajuan.files.filter(f => f.file_category === 'admin_wilayah');\r\n    \r\n    // Filter berkas admin wilayah yang seharusnya ditampilkan (sesuai narasi)\r\n    const validAdminWilayahFiles = adminWilayahFiles.filter(file => {\r\n      const validTypes = [\r\n        'surat_pengantar_permohonan_rekomendasi',\r\n        'surat_rekomendasi_kanwil_khusus', \r\n        'surat_persetujuan_kepala_wilayah',\r\n        'surat_pernyataan_tidak_ikatan_dinas',\r\n        'surat_pernyataan_tidak_tugas_belajar',\r\n        'surat_keterangan_kanwil',\r\n        'surat_rekomendasi_kanwil'\r\n      ];\r\n      return validTypes.includes(file.file_type);\r\n    });\r\n    \r\n    // Gabungkan semua file yang sudah diverifikasi\r\n    const allVerifiedFiles = [...kabupatenFiles, ...validAdminWilayahFiles];\r\n\r\n    const html = `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <title>Laporan Final Pengajuan - ${pengajuan.pegawai?.nama}</title>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; margin: 20px; }\r\n          .header { text-align: center; margin-bottom: 30px; }\r\n          .info { margin-bottom: 20px; }\r\n          .info table { width: 100%; border-collapse: collapse; }\r\n          .info td { padding: 5px; }\r\n          .info td:first-child { font-weight: bold; width: 150px; }\r\n          .section { margin-bottom: 30px; }\r\n          .section-title { font-size: 14pt; font-weight: bold; margin-bottom: 15px; color: #000000; border-bottom: 2px solid #000000; padding-bottom: 5px; }\r\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; font-family: Arial, sans-serif; font-size: 10pt; }\r\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\r\n          th { background-color: #f2f2f2; font-weight: bold; }\r\n          .checkbox { width: 20px; height: 20px; }\r\n          .status-approved { color: #000000; font-weight: bold; }\r\n          .status-rejected { color: #000000; font-weight: bold; }\r\n          .status-pending { color: #000000; font-weight: bold; }\r\n          @media print { body { margin: 0; } }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"header\">\r\n          <h1 style=\"color: #000000; margin-bottom: 10px;\">LAPORAN FINAL PENGAJUAN JABATAN</h1>\r\n          <h3 style=\"color: #374151; margin: 0;\">Si Imut Kanwil Kemenag NTB</h3>\r\n        </div>\r\n        \r\n                          <div class=\"info\">\r\n           <table>\r\n             <tr><td>Nama Pegawai</td><td>: ${pengajuan.pegawai?.nama}</td></tr>\r\n             <tr><td>NIP</td><td>: ${pengajuan.pegawai?.nip}</td></tr>\r\n             <tr><td>Jabatan</td><td>: ${pengajuan.pegawai?.jabatan}</td></tr>\r\n             <tr><td>Jenis Jabatan</td><td>: ${pengajuan.jenis_jabatan}</td></tr>\r\n                           <tr><td>Kabupaten/Kota Asal</td><td>: ${pengajuan.office?.kabkota || 'Tidak tersedia'}</td></tr>\r\n             <tr><td>Status Pengajuan</td><td>: <span class=\"status-approved\">FINAL APPROVED</span></td></tr>\r\n             <tr><td>Tanggal Final Approval</td><td>: ${pengajuan.final_approved_at ? new Date(pengajuan.final_approved_at).toLocaleDateString('id-ID') : new Date().toLocaleDateString('id-ID')}</td></tr>\r\n             <tr><td>Disetujui Oleh</td><td>: ${pengajuan.final_approved_at ? new Date(pengajuan.final_approved_at).toLocaleDateString('id-ID') : new Date().toLocaleDateString('id-ID')}</td></tr>\r\n           </table>\r\n         </div>\r\n\r\n        <!-- Berkas Kabupaten/Kota -->\r\n        <div class=\"section\">\r\n          <div class=\"section-title\">üìã Berkas Kabupaten/Kota (${kabupatenFiles.length} dokumen)</div>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>No</th>\r\n                <th>Nama Berkas</th>\r\n                <th>Status Verifikasi</th>\r\n                <th>Verifikator</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${kabupatenFiles.map((file: any, index: number) => `\r\n                <tr>\r\n                  <td>${index + 1}</td>\r\n                  <td>${getFileDisplayName(file.file_type)}</td>\r\n                  <td>\r\n                    <span class=\"status-${file.verification_status}\">\r\n                      ${file.verification_status === 'approved' ? '‚úì Sesuai' : \r\n                        file.verification_status === 'rejected' ? '‚úó Tidak Sesuai' : \r\n                        '‚óã Belum Diverifikasi'}\r\n                    </span>\r\n                  </td>\r\n                  <td>${file.verified_by || '-'}</td>\r\n                </tr>\r\n              `).join('')}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- Berkas Admin Wilayah -->\r\n        <div class=\"section\">\r\n          <div class=\"section-title\">üèõÔ∏è Berkas Admin Wilayah (${validAdminWilayahFiles.length} dokumen)</div>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>No</th>\r\n                <th>Nama Berkas</th>\r\n                <th>Status Verifikasi</th>\r\n                <th>Verifikator</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${validAdminWilayahFiles.map((file: any, index: number) => `\r\n                <tr>\r\n                  <td>${index + 1}</td>\r\n                  <td>${getFileDisplayName(file.file_type)}</td>\r\n                  <td>\r\n                    <span class=\"status-${file.verification_status}\">\r\n                      ${file.verification_status === 'approved' ? '‚úì Sesuai' : \r\n                        file.verification_status === 'rejected' ? '‚úó Tidak Sesuai' : \r\n                        '‚óã Belum Diverifikasi'}\r\n                    </span>\r\n                  </td>\r\n                  <td>${file.verified_by || '-'}</td>\r\n                </tr>\r\n              `).join('')}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- Ringkasan -->\r\n        <div class=\"section\">\r\n          <div class=\"section-title\">üìä Ringkasan Dokumen</div>\r\n          <table>\r\n            <tr>\r\n              <td><strong>Total Berkas Kabupaten/Kota:</strong></td>\r\n              <td>${kabupatenFiles.length} dokumen</td>\r\n            </tr>\r\n            <tr>\r\n              <td><strong>Total Berkas Admin Wilayah:</strong></td>\r\n              <td>${validAdminWilayahFiles.length} dokumen</td>\r\n            </tr>\r\n            <tr>\r\n              <td><strong>Total Semua Berkas:</strong></td>\r\n              <td><strong>${allVerifiedFiles.length} dokumen</strong></td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n        \r\n                 <!-- Final Verification Footer -->\r\n         <div style=\"margin-top: 40px; padding: 20px; border: 3px solid #000000; border-radius: 10px; text-align: center; font-size: 11pt; background-color: #ffffff;\">\r\n           <div style=\"margin-bottom: 10px; font-weight: bold; color: #000000; font-size: 14pt;\">\r\n             PENGAJUAN JABATAN TELAH DISETUJUI FINAL\r\n           </div>\r\n           <div style=\"margin-bottom: 8px; font-weight: bold; color: #000000;\">\r\n             ‚úì Semua dokumen telah diverifikasi dan disetujui oleh Admin Wilayah dan Superadmin\r\n           </div>\r\n           <div style=\"font-size: 10pt; color: #000000; margin-bottom: 5px;\">\r\n             Tanggal Final Approval: ${pengajuan.final_approved_at ? new Date(pengajuan.final_approved_at).toLocaleDateString('id-ID') : new Date().toLocaleDateString('id-ID')}\r\n           </div>\r\n           <div style=\"font-size: 9pt; color: #000000; margin-top: 10px;\">\r\n             Si Imut Kanwil Kemenag NTB\r\n           </div>\r\n         </div>\r\n      </body>\r\n      </html>\r\n    `;\r\n\r\n    printWindow.document.write(html);\r\n    printWindow.document.close();\r\n    printWindow.print();\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('id-ID', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getFileSize = (bytes: number) => {\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const handlePreviewFile = async (file: PengajuanFile) => {\r\n    try {\r\n      // Fetch file dengan token authorization\r\n      const response = await fetch(`/api/pengajuan/files/${file.id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Gagal mengambil file');\r\n      }\r\n      \r\n      // Convert ke blob\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n      \r\n      // Set preview file dengan blob URL\r\n      setPreviewFile({\r\n        ...file,\r\n        blobUrl: blobUrl\r\n      });\r\n      setShowPreview(true);\r\n    } catch (error) {\r\n      console.error('Error previewing file:', error);\r\n      setError('Gagal preview file. Silakan coba lagi.');\r\n    }\r\n  };\r\n\r\n  const handleDownloadFile = (file: PengajuanFile) => {\r\n    window.open(`/api/pengajuan/files/${file.id}`, '_blank');\r\n  };\r\n\r\n  const isAdmin = user?.role === 'admin';\r\n  const isAdminWilayah = user?.role === 'admin_wilayah';\r\n  \r\n  // File yang pending = file yang sudah diperbaiki dan siap diajukan ulang\r\n  const hasPendingFiles = (() => {\r\n    if (!pengajuan) return false;\r\n    const requiredAll = new Set<string>([...requiredKabupaten, ...requiredKanwil]);\r\n    for (const t of requiredAll) {\r\n      const f = pengajuan.files.find((x) => x.file_type === t);\r\n      if (f && f.verification_status === 'pending') return true;\r\n    }\r\n    return false;\r\n  })();\r\n  \r\n  // Operator yang sudah upload perbaikan tidak boleh edit/delete lagi, hanya bisa ajukan ulang\r\n  const canEdit = (pengajuan?.status === 'draft' || pengajuan?.status === 'rejected' || pengajuan?.status === 'admin_wilayah_rejected') && \r\n                  (isAdmin || pengajuan?.created_by === user?.id) && \r\n                  !hasPendingFiles; // Tidak bisa edit jika ada file pending\r\n  const canDelete = pengajuan?.status === 'draft' && \r\n                   (isAdmin || pengajuan?.created_by === user?.id) && \r\n                   !hasPendingFiles; // Tidak bisa delete jika ada file pending\r\n  const canApprove = (isAdmin && pengajuan?.status === 'submitted') || (isAdminWilayah && (pengajuan?.status === 'approved' || pengajuan?.status === 'submitted'));\r\n  const canReject = (isAdmin && pengajuan?.status === 'submitted') || (isAdminWilayah && (pengajuan?.status === 'approved' || pengajuan?.status === 'submitted'));\r\n  // Tampilkan tombol Ajukan Ulang saat status ditolak atau draft, namun aktifkan hanya jika semua dokumen yang sebelumnya ditolak sudah diperbaiki (tidak ada yang statusnya 'rejected')\r\n  const canShowResubmit = (pengajuan?.status === 'rejected' || pengajuan?.status === 'draft' || pengajuan?.status === 'admin_wilayah_rejected') && user?.role !== 'user'; // User dengan role 'user' tidak bisa resubmit\r\n  \r\n\r\n  \r\n  // Cek kelengkapan dan verifikasi: semua berkas wajib (kab/kota + kanwil) harus ada dan \"approved\"\r\n  const allFilesApproved = (() => {\r\n    if (!pengajuan) return false;\r\n    const requiredAll = new Set<string>([...requiredKabupaten, ...requiredKanwil]);\r\n    if (requiredAll.size === 0) return false;\r\n    for (const t of requiredAll) {\r\n      const f = pengajuan.files.find((x) => x.file_type === t);\r\n      if (!f) return false; // wajib: harus ada\r\n      if (f.verification_status !== 'approved') return false; // harus sesuai\r\n    }\r\n    return true;\r\n  })();\r\n  \r\n  // File yang rejected = file yang masih bermasalah dan tidak bisa diajukan ulang\r\n  const hasRejectedFiles = (() => {\r\n    if (!pengajuan) return false;\r\n    const requiredAll = new Set<string>([...requiredKabupaten, ...requiredKanwil]);\r\n    for (const t of requiredAll) {\r\n      const f = pengajuan.files.find((x) => x.file_type === t);\r\n      if (!f || f.verification_status === 'rejected') return true; // Hanya rejected, bukan pending\r\n    }\r\n    return false;\r\n  })();\r\n  \r\n  // Bisa ajukan ulang jika tidak ada file rejected (semua file sudah diperbaiki)\r\n  const resubmitEnabled = !hasRejectedFiles;\r\n\r\n  // Cek status berkas admin wilayah untuk final approval\r\n  const allAdminWilayahFilesApproved = (() => {\r\n    if (!pengajuan) return false;\r\n    const adminWilayahFiles = pengajuan.files.filter(f => f.file_category === 'admin_wilayah');\r\n    if (adminWilayahFiles.length === 0) return false;\r\n    \r\n    // Semua berkas admin wilayah harus ada dan status \"approved\"\r\n    for (const file of adminWilayahFiles) {\r\n      if (file.verification_status !== 'approved') return false;\r\n    }\r\n    return true;\r\n  })();\r\n\r\n  const hasRejectedAdminWilayahFiles = (() => {\r\n    if (!pengajuan) return false;\r\n    const adminWilayahFiles = pengajuan.files.filter(f => f.file_category === 'admin_wilayah');\r\n    if (adminWilayahFiles.length === 0) return false;\r\n    \r\n    // Ada minimal satu berkas admin wilayah yang \"rejected\"\r\n    for (const file of adminWilayahFiles) {\r\n      if (file.verification_status === 'rejected') return true;\r\n    }\r\n    return false;\r\n  })();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <Card>\r\n          <CardContent className=\"flex items-center justify-center py-12\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin mr-2\" />\r\n            <span>Memuat detail pengajuan...</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!pengajuan) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <Card>\r\n          <CardContent className=\"flex items-center justify-center py-12\">\r\n            <AlertCircle className=\"h-8 w-8 text-red-500 mr-2\" />\r\n            <span className=\"text-red-600\">Pengajuan tidak ditemukan</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <style dangerouslySetInnerHTML={{\r\n        __html: `\r\n          .sidebar-scroll::-webkit-scrollbar {\r\n            width: 8px;\r\n          }\r\n          .sidebar-scroll::-webkit-scrollbar-track {\r\n            background: #e2e8f0;\r\n            border-radius: 4px;\r\n          }\r\n          .sidebar-scroll::-webkit-scrollbar-thumb {\r\n            background: #94a3b8;\r\n            border-radius: 4px;\r\n          }\r\n          .sidebar-scroll::-webkit-scrollbar-thumb:hover {\r\n            background: #64748b;\r\n          }\r\n        `\r\n      }} />\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n                 <div className=\"flex items-center gap-4\">\r\n           <Button\r\n             variant=\"outline\"\r\n             onClick={() => navigate('/pengajuan')}\r\n             className=\"flex items-center gap-2\"\r\n           >\r\n             <ArrowLeft className=\"h-4 w-4\" />\r\n             Kembali ke Data Pengajuan\r\n           </Button>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold\">Detail Pengajuan</h1>\r\n            <p className=\"text-gray-600\">ID: {pengajuan.id}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {getStatusBadge(pengajuan.status, pengajuan)}\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n          <p className=\"text-red-600\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Informasi Pengajuan */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          {/* Informasi Pegawai */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <User className=\"h-5 w-5\" />\r\n                Informasi Pegawai\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n                             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                 <div className=\"space-y-2\">\r\n                   <label className=\"text-sm font-medium text-gray-700\">Nama</label>\r\n                   <p className=\"text-gray-900 text-base\">{pengajuan.pegawai.nama}</p>\r\n                 </div>\r\n                 <div className=\"space-y-2\">\r\n                   <label className=\"text-sm font-medium text-gray-700\">NIP</label>\r\n                   <p className=\"text-gray-900 text-base\">{pengajuan.pegawai.nip}</p>\r\n                 </div>\r\n                 <div className=\"space-y-2\">\r\n                   <label className=\"text-sm font-medium text-gray-700\">Jabatan Saat Ini</label>\r\n                   <p className=\"text-gray-900 text-base\">{pengajuan.pegawai.jabatan}</p>\r\n                 </div>\r\n                 <div className=\"space-y-2\">\r\n                   <label className=\"text-sm font-medium text-gray-700\">Jenis Jabatan Target</label>\r\n                   <Badge variant=\"outline\" className=\"text-sm\">\r\n                     {getJabatanDisplayName(pengajuan.jenis_jabatan)}\r\n                   </Badge>\r\n                 </div>\r\n                                   <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium text-gray-700\">Kabupaten/Kota Asal</label>\r\n                    <p className=\"text-gray-900 text-base\">{pengajuan.office?.kabkota || 'Tidak tersedia'}</p>\r\n                  </div>\r\n               </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Berkas Kabupaten/Kota */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <FileText className=\"h-5 w-5\" />\r\n                Berkas Kabupaten/Kota\r\n                <Badge variant=\"outline\" className=\"ml-2\">\r\n                  {pengajuan.files.filter(f => !f.file_category || f.file_category === 'kabupaten').length} / {requiredKabupaten.length}\r\n                </Badge>\r\n                {isAdmin && pengajuan.status === 'submitted' && (\r\n                  <Badge \r\n                    variant={allFilesApproved ? 'default' : 'destructive'}\r\n                    className={`ml-2 ${allFilesApproved ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}\r\n                  >\r\n                    {allFilesApproved ? 'Semua Dokumen Sesuai' : 'Ada Dokumen Tidak Sesuai'}\r\n                  </Badge>\r\n                )}\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {pengajuan.files.filter(f => !f.file_category || f.file_category === 'kabupaten').length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-500\">Belum ada dokumen kabupaten yang diupload</p>\r\n                  {canEdit && pengajuan.status !== 'draft' && (\r\n                    <Button\r\n                      onClick={() => navigate(`/pengajuan/${pengajuan.id}/edit`)}\r\n                      className=\"mt-4 bg-green-600 hover:bg-green-700 text-white\"\r\n                    >\r\n                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                      Perbaiki Dokumen\r\n                    </Button>\r\n                  )}\r\n\r\n                  {canEdit && pengajuan.status === 'draft' && (\r\n                    <Button\r\n                      onClick={() => window.open(`http://localhost:8080/pengajuan/${pengajuan.id}/upload`, '_blank')}\r\n                      className=\"mt-4 bg-green-600 hover:bg-green-700 text-white\"\r\n                    >\r\n                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                      Upload Dokumen\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {pengajuan.files.filter(f => !f.file_category || f.file_category === 'kabupaten').map((file) => (\r\n                                         <div key={file.id} className=\"p-6 border rounded-lg\">\r\n                       <div className=\"flex items-center justify-between\">\r\n                         <div className=\"flex-1 space-y-2\">\r\n                           <h4 className=\"font-medium text-base\">{getFileDisplayName(file.file_type)}</h4>\r\n                           <p className=\"text-sm text-gray-600\">{file.file_name}</p>\r\n                           <p className=\"text-xs text-gray-500\">{getFileSize(file.file_size)}</p>\r\n                          \r\n                                                     {/* Status Verifikasi - Selalu tampilkan status */}\r\n                           <div className=\"mt-3 space-y-2\">\r\n                             <Badge \r\n                               variant={file.verification_status === 'approved' ? 'default' : 'destructive'}\r\n                               className={`transition-all duration-500 ease-in-out transform ${\r\n                                 file.verification_status === 'approved' \r\n                                   ? 'bg-green-100 text-green-800' \r\n                                   : file.verification_status === 'rejected'\r\n                                   ? 'bg-red-100 text-red-800'\r\n                                   : 'bg-gray-100 text-gray-800'\r\n                               }`}\r\n                             >\r\n                               {file.verification_status === 'approved' \r\n                                 ? 'Sesuai' \r\n                                 : file.verification_status === 'rejected'\r\n                                 ? 'Tidak Sesuai'\r\n                                 : 'Belum Diverifikasi'\r\n                               }\r\n                               {file.verified_by && ` - ${file.verified_by}`}\r\n                             </Badge>\r\n                             {file.verification_notes && (\r\n                               <p className=\"text-xs text-gray-600\">{file.verification_notes}</p>\r\n                             )}\r\n                           </div>\r\n                        </div>\r\n                        \r\n                                                 <div className=\"flex items-center gap-3\">\r\n                           {/* Switch Toggle Verifikasi - Admin & Admin Wilayah */}\r\n                          {(isAdmin || isAdminWilayah) && (pengajuan.status === 'submitted' || pengajuan.status === 'rejected') ? (\r\n                             <div className=\"flex items-center gap-3 mr-3\">\r\n                              {verifyingFile === file.id ? (\r\n                                <Loader2 className=\"h-4 w-4 animate-spin text-gray-500\" />\r\n                              ) : (\r\n                                                                                                   <div className=\"flex items-center gap-3 transition-all duration-500 ease-in-out\">\r\n                                    <div className=\"relative transform transition-all duration-500 ease-in-out hover:scale-105 active:scale-95\">\r\n                                      <Switch\r\n                                        id={`verify-${file.id}`}\r\n                                        checked={file.verification_status === 'approved'}\r\n                                        onCheckedChange={(checked) => {\r\n                                          const status = checked ? 'approved' : 'rejected';\r\n                                          handleVerifyFile(file.id, status);\r\n                                        }}\r\n                                        disabled={verifyingFile === file.id}\r\n                                        className={`transition-all duration-500 ease-in-out transform ${\r\n                                          file.verification_status === 'approved' \r\n                                            ? 'data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600' \r\n                                            : 'data-[state=unchecked]:bg-red-600 data-[state=unchecked]:border-red-600'\r\n                                        }`}\r\n                                      />\r\n                                    </div>\r\n                                                                       <Label \r\n                                      htmlFor={`verify-${file.id}`} \r\n                                      className={`text-sm font-medium cursor-pointer transition-all duration-500 ease-in-out transform hover:scale-105 ${\r\n                                        file.verification_status === 'approved' \r\n                                          ? 'text-green-700' \r\n                                          : file.verification_status === 'rejected'\r\n                                          ? 'text-red-700'\r\n                                          : 'text-gray-700'\r\n                                      }`}\r\n                                    >\r\n                                      {file.verification_status === 'approved' \r\n                                        ? 'Sesuai' \r\n                                        : file.verification_status === 'rejected'\r\n                                        ? 'Tidak Sesuai'\r\n                                        : 'Belum Diverifikasi'\r\n                                      }\r\n                                    </Label>\r\n                                 </div>\r\n                              )}\r\n                            </div>\r\n                          ) : null}\r\n                          \r\n                                                     <Button\r\n                             size=\"sm\"\r\n                             variant=\"outline\"\r\n                             onClick={() => handlePreviewFile(file)}\r\n                             className=\"px-3 py-2\"\r\n                           >\r\n                             <Eye className=\"h-4 w-4 mr-2\" />\r\n                             Preview\r\n                           </Button>\r\n                           <Button\r\n                             size=\"sm\"\r\n                             variant=\"outline\"\r\n                             onClick={() => handleDownloadFile(file)}\r\n                             className=\"px-3 py-2\"\r\n                           >\r\n                             <Download className=\"h-4 w-4 mr-2\" />\r\n                             Download\r\n                           </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n\r\n\r\n          {/* Berkas Admin Wilayah */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <FileText className=\"h-5 w-5\" />\r\n                Berkas Admin Wilayah\r\n                <Badge variant=\"outline\" className=\"ml-2\">\r\n                  {pengajuan.files.filter(f => f.file_category === 'admin_wilayah').length} / {requiredKanwil.length}\r\n                </Badge>\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {pengajuan.files.filter(f => f.file_category === 'admin_wilayah').length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-500\">Belum ada dokumen admin wilayah yang diupload</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {pengajuan.files.filter(f => f.file_category === 'admin_wilayah').map((file) => (\r\n                    <div key={file.id} className=\"p-6 border rounded-lg\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex-1 space-y-2\">\r\n                          <h4 className=\"font-medium text-base\">{getFileDisplayName(file.file_type)}</h4>\r\n                          <p className=\"text-sm text-gray-600\">{file.file_name}</p>\r\n                          <p className=\"text-xs text-gray-500\">{getFileSize(file.file_size)}</p>\r\n                          \r\n                          {/* Info uploader */}\r\n                          {file.uploaded_by_name && (\r\n                            <div className=\"text-xs text-gray-500\">\r\n                              Upload oleh: {file.uploaded_by_name} ({file.uploaded_by_office || 'Admin Wilayah'})\r\n                            </div>\r\n                          )}\r\n                          \r\n                          {/* Status Verifikasi - Selalu tampilkan status */}\r\n                          <div className=\"mt-3 space-y-2\">\r\n                            <Badge \r\n                              variant={file.verification_status === 'approved' ? 'default' : 'destructive'}\r\n                              className={`transition-all duration-500 ease-in-out transform ${\r\n                                file.verification_status === 'approved' \r\n                                  ? 'bg-green-100 text-green-800' \r\n                                  : file.verification_status === 'rejected'\r\n                                  ? 'bg-red-100 text-red-800'\r\n                                  : 'bg-gray-100 text-gray-800'\r\n                              }`}\r\n                            >\r\n                              {file.verification_status === 'approved' \r\n                                ? 'Sesuai' \r\n                                : file.verification_status === 'rejected'\r\n                                ? 'Tidak Sesuai'\r\n                                : 'Belum Diverifikasi'\r\n                              }\r\n                              {file.verified_by && ` - ${file.verified_by}`}\r\n                            </Badge>\r\n                            {file.verification_notes && (\r\n                              <p className=\"text-xs text-gray-600\">{file.verification_notes}</p>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center gap-3\">\r\n                          {/* Switch Toggle Verifikasi - Superadmin & Admin Wilayah */}\r\n                          {/* \r\n                            Superadmin bisa verifikasi:\r\n                            - submitted: verifikasi berkas operator\r\n                            - rejected: verifikasi berkas operator yang ditolak\r\n                            - admin_wilayah_approved: verifikasi berkas admin wilayah untuk final approval\r\n                            \r\n                            Admin Wilayah bisa verifikasi:\r\n                            - submitted: verifikasi berkas operator\r\n                            - approved: verifikasi berkas operator yang sudah diapprove\r\n                            - rejected: verifikasi berkas operator yang ditolak\r\n                          */}\r\n                          {(isAdmin && (pengajuan.status === 'submitted' || pengajuan.status === 'rejected' || pengajuan.status === 'admin_wilayah_approved')) || (isAdminWilayah && (pengajuan.status === 'submitted' || pengajuan.status === 'approved' || pengajuan.status === 'rejected')) ? (\r\n                            <div className=\"flex items-center gap-3 mr-3\">\r\n                              {verifyingFile === file.id ? (\r\n                                <Loader2 className=\"h-4 w-4 animate-spin text-gray-500\" />\r\n                              ) : (\r\n                                <div className=\"flex items-center gap-3 transition-all duration-500 ease-in-out\">\r\n                                  <div className=\"relative transform transition-all duration-500 ease-in-out hover:scale-105 active:scale-95\">\r\n                                    <Switch\r\n                                      id={`verify-${file.id}`}\r\n                                      checked={file.verification_status === 'approved'}\r\n                                      onCheckedChange={(checked) => {\r\n                                        const status = checked ? 'approved' : 'rejected';\r\n                                        handleVerifyFile(file.id, status);\r\n                                      }}\r\n                                      disabled={verifyingFile === file.id}\r\n                                      className={`transition-all duration-500 ease-in-out transform ${\r\n                                        file.verification_status === 'approved' \r\n                                          ? 'data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600' \r\n                                          : 'data-[state=unchecked]:bg-red-600 data-[state=unchecked]:border-red-600'\r\n                                      }`}\r\n                                    />\r\n                                  </div>\r\n                                  <Label \r\n                                    htmlFor={`verify-${file.id}`} \r\n                                    className={`text-sm font-medium cursor-pointer transition-all duration-500 ease-in-out transform hover:scale-105 ${\r\n                                      file.verification_status === 'approved' \r\n                                        ? 'text-green-700' \r\n                                        : file.verification_status === 'rejected'\r\n                                        ? 'text-red-700'\r\n                                        : 'text-gray-700'\r\n                                    }`}\r\n                                  >\r\n                                    {file.verification_status === 'approved' \r\n                                      ? 'Sesuai' \r\n                                      : file.verification_status === 'rejected'\r\n                                      ? 'Tidak Sesuai'\r\n                                      : 'Belum Diverifikasi'\r\n                                    }\r\n                                  </Label>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ) : null}\r\n                          \r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => handlePreviewFile(file)}\r\n                            className=\"px-3 py-2\"\r\n                          >\r\n                            <Eye className=\"h-4 w-4 mr-2\" />\r\n                            Preview\r\n                          </Button>\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => handleDownloadFile(file)}\r\n                            className=\"px-3 py-2\"\r\n                          >\r\n                            <Download className=\"h-4 w-4 mr-2\" />\r\n                            Download\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n                          {/* Sidebar */}\r\n          <div \r\n            className={`space-y-6 transition-all duration-300 ${\r\n              isScrolled ? 'lg:sticky lg:top-6 lg:z-40 lg:self-start sidebar-scroll' : ''\r\n            }`}\r\n                         style={isScrolled ? { \r\n               position: 'sticky', \r\n               top: '80px', \r\n               zIndex: 40,\r\n               maxHeight: 'calc(100vh - 120px)',\r\n               overflowY: 'scroll',\r\n               paddingRight: '12px'\r\n             } : {}}\r\n          >\r\n          {/* Timeline Status */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Calendar className=\"h-5 w-5\" />\r\n                Timeline Status\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"space-y-3\">\r\n                                 <div className=\"flex items-start gap-4\">\r\n                   <div className=\"w-2 h-2 bg-green-500 rounded-full mt-2\"></div>\r\n                   <div className=\"flex-1 space-y-1\">\r\n                     <p className=\"font-medium\">Dibuat</p>\r\n                     <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.created_at)}</p>\r\n                   </div>\r\n                 </div>\r\n                \r\n                                 {pengajuan.status !== 'draft' && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-blue-500 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Diajukan</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.updated_at)}</p>\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {pengajuan.status === 'approved' && pengajuan.approved_at && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-green-500 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Disetujui</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.approved_at)}</p>\r\n                       {pengajuan.approved_by && (\r\n                         <p className=\"text-xs text-gray-500\">oleh {pengajuan.approved_by}</p>\r\n                       )}\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {pengajuan.status === 'rejected' && pengajuan.rejected_at && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-red-500 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Ditolak</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.rejected_at)}</p>\r\n                       {pengajuan.rejected_by && (\r\n                         <p className=\"text-xs text-gray-500\">oleh {pengajuan.rejected_by}</p>\r\n                       )}\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {/* Admin Wilayah Review */}\r\n                 {pengajuan.status === 'admin_wilayah_approved' && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-green-500 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Disetujui Admin Wilayah</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.updated_at)}</p>\r\n                       <p className=\"text-xs text-gray-500\">Admin Wilayah menyetujui pengajuan</p>\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {pengajuan.status === 'admin_wilayah_rejected' && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-red-500 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Ditolak Admin Wilayah</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.updated_at)}</p>\r\n                       <p className=\"text-xs text-gray-500\">Admin Wilayah menolak pengajuan</p>\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {/* Submit ke Superadmin */}\r\n                 {pengajuan.status === 'submitted' && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-blue-500 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Diajukan ke Superadmin</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.updated_at)}</p>\r\n                       <p className=\"text-xs text-gray-500\">Admin Wilayah mengajukan ke Superadmin untuk review final</p>\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {/* Final Approval */}\r\n                 {pengajuan.status === 'final_approved' && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-green-600 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Disetujui Final</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.updated_at)}</p>\r\n                       <p className=\"text-xs text-gray-500\">Superadmin menyetujui final pengajuan</p>\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n\r\n                 {pengajuan.status === 'final_rejected' && (\r\n                   <div className=\"flex items-start gap-4\">\r\n                     <div className=\"w-2 h-2 bg-red-600 rounded-full mt-2\"></div>\r\n                     <div className=\"flex-1 space-y-1\">\r\n                       <p className=\"font-medium\">Ditolak Final</p>\r\n                       <p className=\"text-sm text-gray-600\">{formatDate(pengajuan.updated_at)}</p>\r\n                       <p className=\"text-xs text-gray-500\">Superadmin menolak final pengajuan</p>\r\n                     </div>\r\n                   </div>\r\n                 )}\r\n                 \r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Catatan */}\r\n          {(pengajuan.catatan || pengajuan.rejection_reason) && (\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Catatan</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                                 {pengajuan.catatan && (\r\n                   <div className=\"mb-6\">\r\n                                           <p className=\"text-sm font-medium text-gray-700 mb-3\">Catatan Persetujuan:</p>\r\n                     <p className=\"text-sm text-gray-900 bg-green-50 p-4 rounded-lg leading-relaxed\">{pengajuan.catatan}</p>\r\n                   </div>\r\n                 )}\r\n                 {pengajuan.rejection_reason && (\r\n                   <div>\r\n                                           <p className=\"text-sm font-medium text-gray-700 mb-3\">Alasan Penolakan:</p>\r\n                     <p className=\"text-sm text-gray-900 bg-red-50 p-4 rounded-lg leading-relaxed\">{pengajuan.rejection_reason}</p>\r\n                   </div>\r\n                 )}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n\r\n                     {/* Aksi */}\r\n           <Card>\r\n             <CardHeader>\r\n               <CardTitle>Aksi</CardTitle>\r\n             </CardHeader>\r\n                           <CardContent className=\"space-y-3\">\r\n                {canApprove && allFilesApproved && (\r\n                  <Button\r\n                    onClick={() => setShowApproveDialog(true)}\r\n                    className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\r\n                  >\r\n                    <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                    Setujui\r\n                  </Button>\r\n                )}\r\n                \r\n                {canReject && (hasRejectedFiles || !allFilesApproved) && (\r\n                  <Button\r\n                    onClick={() => setShowRejectDialog(true)}\r\n                    variant=\"destructive\"\r\n                    className=\"w-full\"\r\n                  >\r\n                    <XCircle className=\"h-4 w-4 mr-2\" />\r\n                    Tolak\r\n                  </Button>\r\n                )}\r\n                \r\n                {canShowResubmit && (\r\n                  <Button\r\n                    onClick={handleResubmit}\r\n                    disabled={submitting || !resubmitEnabled}\r\n                    className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\"\r\n                  >\r\n                    {submitting ? (\r\n                      <>\r\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                        Memproses...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                        Ajukan Ulang\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n\r\n                {/* Tombol untuk status draft - tambahkan di bawah Ajukan Ulang */}\r\n                {pengajuan?.status === 'draft' && canEdit && (\r\n                  <Button\r\n                    onClick={() => window.open(`http://localhost:8080/pengajuan/${pengajuan.id}/upload`, '_blank')}\r\n                    className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\r\n                  >\r\n                    <Edit className=\"h-4 w-4 mr-2\" />\r\n                    Upload Dokumen\r\n                  </Button>\r\n                )}\r\n\r\n                {pengajuan?.status === 'draft' && canDelete && (\r\n                  <Button\r\n                    onClick={() => setShowDeleteDialog(true)}\r\n                    variant=\"destructive\"\r\n                    className=\"w-full\"\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                    Hapus Pengajuan\r\n                  </Button>\r\n                )}\r\n                \r\n                                 {canEdit && pengajuan.status !== 'draft' && (\r\n                   <Button\r\n                     onClick={() => navigate(`/pengajuan/${pengajuan.id}/edit`)}\r\n                     className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\r\n                   >\r\n                     <Edit className=\"h-4 w-4 mr-2\" />\r\n                     Perbaiki Dokumen\r\n                   </Button>\r\n                 )}\r\n\r\n                {canDelete && (\r\n                  <Button\r\n                    onClick={() => setShowDeleteDialog(true)}\r\n                    variant=\"destructive\"\r\n                    className=\"w-full\"\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                    Hapus Pengajuan\r\n                  </Button>\r\n                )}\r\n                \r\n                {pengajuan.status === 'approved' && isAdmin && (\r\n                  <Button\r\n                    onClick={() => setShowPrintDialog(true)}\r\n                    className=\"w-full bg-blue-600 hover:bg-blue-700 text-white\"\r\n                  >\r\n                    <Printer className=\"h-4 w-4 mr-2\" />\r\n                    Cetak Laporan\r\n                  </Button>\r\n                )}\r\n\r\n                {/* Approval Final - Superadmin */}\r\n                {/* \r\n                  Logika Button Final Approval:\r\n                  - Setujui Final: muncul jika SEMUA berkas admin wilayah sudah \"Sesuai\" (approved)\r\n                  - Tolak Final: muncul jika ada SATU SAJA berkas admin wilayah \"Tidak Sesuai\" (rejected)\r\n                  \r\n                  Status pengajuan harus 'admin_wilayah_approved' untuk button ini muncul\r\n                */}\r\n                {isAdmin && pengajuan.status === 'admin_wilayah_approved' && (\r\n                  <>\r\n                    {/* Setujui Final - hanya muncul jika semua berkas admin wilayah sudah \"Sesuai\" */}\r\n                    {allAdminWilayahFilesApproved && (\r\n                      <Button\r\n                        onClick={() => setShowFinalApproveDialog(true)}\r\n                        className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\r\n                      >\r\n                        <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                        Setujui Final\r\n                      </Button>\r\n                    )}\r\n                    \r\n                    {/* Tolak Final - muncul jika ada minimal satu berkas admin wilayah \"Tidak Sesuai\" */}\r\n                    {hasRejectedAdminWilayahFiles && (\r\n                      <Button\r\n                        onClick={() => setShowFinalRejectDialog(true)}\r\n                        variant=\"destructive\"\r\n                        className=\"w-full\"\r\n                      >\r\n                        <XCircle className=\"h-4 w-4 mr-2\" />\r\n                        Tolak Final\r\n                      </Button>\r\n                      )}\r\n                  </>\r\n                )}\r\n\r\n                {/* Cetak Laporan Final */}\r\n                {pengajuan.status === 'final_approved' && isAdmin && (\r\n                  <Button\r\n                    onClick={handleFinalPrintReport}\r\n                    className=\"w-full bg-blue-600 hover:bg-blue-700 text-white\"\r\n                  >\r\n                    <Printer className=\"h-4 w-4 mr-2\" />\r\n                    Cetak Laporan Final\r\n                  </Button>\r\n                )}\r\n              </CardContent>\r\n           </Card>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Approve Dialog */}\r\n      <Dialog open={showApproveDialog} onOpenChange={setShowApproveDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n                         <DialogTitle>Setujui Pengajuan</DialogTitle>\r\n          </DialogHeader>\r\n                       <div className=\"space-y-4\">\r\n               <div className=\"space-y-2\">\r\n                 <label className=\"text-sm font-medium text-gray-700\">Catatan (Opsional)</label>\r\n                                   <Textarea\r\n                    value={approvalNote}\r\n                    onChange={(e) => setApprovalNote(e.target.value)}\r\n                    placeholder=\"Masukkan catatan persetujuan...\"\r\n                    rows={3}\r\n                    className=\"min-h-[80px]\"\r\n                  />\r\n               </div>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                onClick={() => setShowApproveDialog(false)}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n                disabled={submitting}\r\n              >\r\n                Batal\r\n              </Button>\r\n              <Button\r\n                onClick={handleApprove}\r\n                disabled={submitting}\r\n                className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\r\n              >\r\n                                 {submitting ? (\r\n                   <>\r\n                     <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                     Memproses...\r\n                   </>\r\n                 ) : (\r\n                   'Setujui'\r\n                 )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n             {/* Delete Dialog */}\r\n       <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\r\n         <AlertDialogContent>\r\n           <AlertDialogHeader>\r\n             <AlertDialogTitle>Hapus Pengajuan</AlertDialogTitle>\r\n             <AlertDialogDescription>\r\n               Apakah Anda yakin ingin menghapus pengajuan ini? Tindakan ini tidak dapat dibatalkan dan semua file yang diupload akan dihapus secara permanen.\r\n             </AlertDialogDescription>\r\n           </AlertDialogHeader>\r\n           <AlertDialogFooter>\r\n             <AlertDialogCancel disabled={submitting}>Batal</AlertDialogCancel>\r\n             <AlertDialogAction\r\n               onClick={handleDelete}\r\n               disabled={submitting}\r\n               className=\"bg-red-600 hover:bg-red-700 text-white\"\r\n             >\r\n               {submitting ? (\r\n                 <>\r\n                   <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                   Menghapus...\r\n                 </>\r\n               ) : (\r\n                 'Hapus Pengajuan'\r\n               )}\r\n             </AlertDialogAction>\r\n           </AlertDialogFooter>\r\n         </AlertDialogContent>\r\n       </AlertDialog>\r\n\r\n       {/* Print Report Dialog */}\r\n       <AlertDialog open={showPrintDialog} onOpenChange={setShowPrintDialog}>\r\n         <AlertDialogContent>\r\n           <AlertDialogHeader>\r\n             <AlertDialogTitle>Cetak Laporan</AlertDialogTitle>\r\n             <AlertDialogDescription>\r\n               Apakah Anda yakin ingin mencetak laporan pengajuan ini? Laporan akan dibuka di tab baru untuk dicetak.\r\n             </AlertDialogDescription>\r\n           </AlertDialogHeader>\r\n           <AlertDialogFooter>\r\n             <AlertDialogCancel disabled={submitting}>Batal</AlertDialogCancel>\r\n             <AlertDialogAction\r\n               onClick={handlePrintReport}\r\n               disabled={submitting}\r\n               className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n             >\r\n                                {submitting ? (\r\n                   <>\r\n                     <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                     Menyiapkan...\r\n                   </>\r\n                 ) : (\r\n                   <>\r\n                     <Printer className=\"h-4 w-4 mr-2\" />\r\n                     Cetak Laporan\r\n                   </>\r\n                 )}\r\n             </AlertDialogAction>\r\n           </AlertDialogFooter>\r\n         </AlertDialogContent>\r\n       </AlertDialog>\r\n\r\n       {/* Reject Dialog */}\r\n       <Dialog open={showRejectDialog} onOpenChange={setShowRejectDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n                         <DialogTitle>Tolak Pengajuan</DialogTitle>\r\n          </DialogHeader>\r\n                     <div className=\"space-y-4\">\r\n             <div className=\"space-y-2\">\r\n                               <label className=\"text-sm font-medium text-gray-700\">Alasan Penolakan *</label>\r\n                                 <Textarea\r\n                    value={rejectionReason}\r\n                    onChange={(e) => setRejectionReason(e.target.value)}\r\n                    placeholder=\"Masukkan alasan penolakan...\"\r\n                    rows={3}\r\n                    required\r\n                    className=\"min-h-[80px]\"\r\n                  />\r\n             </div>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                onClick={() => setShowRejectDialog(false)}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n                disabled={submitting}\r\n              >\r\n                Batal\r\n              </Button>\r\n              <Button\r\n                onClick={handleReject}\r\n                disabled={submitting || !rejectionReason.trim()}\r\n                variant=\"destructive\"\r\n                className=\"flex-1\"\r\n              >\r\n                                 {submitting ? (\r\n                   <>\r\n                     <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                     Memproses...\r\n                   </>\r\n                 ) : (\r\n                   'Tolak'\r\n                 )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Final Approve Dialog */}\r\n      <Dialog open={showFinalApproveDialog} onOpenChange={setShowFinalApproveDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Setujui Final Pengajuan</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium text-gray-700\">Catatan (Opsional)</label>\r\n              <Textarea\r\n                value={finalApprovalNote}\r\n                onChange={(e) => setFinalApprovalNote(e.target.value)}\r\n                placeholder=\"Masukkan catatan persetujuan final...\"\r\n                rows={3}\r\n                className=\"min-h-[80px]\"\r\n              />\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                onClick={() => setShowFinalApproveDialog(false)}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n                disabled={submitting}\r\n              >\r\n                Batal\r\n              </Button>\r\n              <Button\r\n                onClick={handleFinalApprove}\r\n                disabled={submitting}\r\n                className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\r\n              >\r\n                {submitting ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Memproses...\r\n                  </>\r\n                ) : (\r\n                  'Setujui Final'\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Final Reject Dialog */}\r\n      <Dialog open={showFinalRejectDialog} onOpenChange={setShowFinalRejectDialog}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Tolak Final Pengajuan</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium text-gray-700\">Alasan Penolakan Final *</label>\r\n              <Textarea\r\n                value={finalRejectionReason}\r\n                onChange={(e) => setFinalRejectionReason(e.target.value)}\r\n                placeholder=\"Masukkan alasan penolakan final...\"\r\n                rows={3}\r\n                required\r\n                className=\"min-h-[80px]\"\r\n              />\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                onClick={() => setShowFinalRejectDialog(false)}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n                disabled={submitting}\r\n              >\r\n                Batal\r\n              </Button>\r\n              <Button\r\n                onClick={handleFinalReject}\r\n                disabled={submitting || !finalRejectionReason.trim()}\r\n                variant=\"destructive\"\r\n                className=\"flex-1\"\r\n              >\r\n                {submitting ? (\r\n                  <>\r\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                    Memproses...\r\n                  </>\r\n                ) : (\r\n                  'Tolak Final'\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n             {/* Preview Modal */}\r\n       <Dialog open={showPreview} onOpenChange={(open) => {\r\n         setShowPreview(open);\r\n         // Cleanup blob URL when modal closes\r\n         if (!open && previewFile?.blobUrl) {\r\n           URL.revokeObjectURL(previewFile.blobUrl);\r\n         }\r\n       }}>\r\n         <DialogContent className=\"max-w-4xl\">\r\n           <DialogHeader>\r\n             <DialogTitle>Preview File: {previewFile?.file_name}</DialogTitle>\r\n           </DialogHeader>\r\n           <div className=\"mt-4\">\r\n             {previewFile && (\r\n               <div className=\"border rounded-lg overflow-hidden bg-white\">\r\n                 <div className=\"bg-green-600 text-white px-4 py-2 flex items-center justify-between\">\r\n                   <span className=\"font-medium\">{previewFile.file_name}</span>\r\n                 </div>\r\n                 <iframe\r\n                   src={previewFile.blobUrl || `/api/pengajuan/files/${previewFile.id}`}\r\n                   className=\"w-full h-96 border-0\"\r\n                   title=\"File Preview\"\r\n                 />\r\n               </div>\r\n             )}\r\n           </div>\r\n         </DialogContent>\r\n       </Dialog>\r\n\r\n       {/* Success Dialog */}\r\n       <AlertDialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\r\n         <AlertDialogContent>\r\n           <AlertDialogHeader>\r\n             <AlertDialogTitle className=\"flex items-center gap-2\">\r\n               <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n               Berhasil!\r\n             </AlertDialogTitle>\r\n             <AlertDialogDescription className=\"text-green-700\">\r\n               {successMessage}\r\n             </AlertDialogDescription>\r\n           </AlertDialogHeader>\r\n           <AlertDialogFooter>\r\n             <AlertDialogAction\r\n               onClick={() => setShowSuccessDialog(false)}\r\n               className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n             >\r\n               OK\r\n             </AlertDialogAction>\r\n           </AlertDialogFooter>\r\n         </AlertDialogContent>\r\n       </AlertDialog>\r\n\r\n       \r\n     </div>\r\n   );\r\n };\r\n\r\n export default PengajuanDetail;\r\n"],"names":["PengajuanDetail","pengajuanId","useParams","navigate","useNavigate","user","token","isAuthenticated","originalUser","isImpersonating","useAuth","pengajuan","setPengajuan","useState","requiredKabupaten","setRequiredKabupaten","requiredKanwil","setRequiredKanwil","loading","setLoading","error","setError","previewFile","setPreviewFile","showPreview","setShowPreview","showApproveDialog","setShowApproveDialog","showRejectDialog","setShowRejectDialog","showDeleteDialog","setShowDeleteDialog","showPrintDialog","setShowPrintDialog","showSuccessDialog","setShowSuccessDialog","showFinalApproveDialog","setShowFinalApproveDialog","showFinalRejectDialog","setShowFinalRejectDialog","successMessage","setSuccessMessage","approvalNote","setApprovalNote","rejectionReason","setRejectionReason","finalApprovalNote","setFinalApprovalNote","finalRejectionReason","setFinalRejectionReason","submitting","setSubmitting","verifyingFile","setVerifyingFile","isScrolled","setIsScrolled","_a","file","useEffect","fetchPengajuanData","handleScroll","scrollTop","response","apiGet","awRes","reqList","_c","_b","r","handleApprove","isAdminWilayah","apiPost","apiPut","handleReject","handleFinalApprove","handleFinalReject","handleResubmit","handleDelete","apiDelete","getStatusBadge","status","config","f","Badge","getJabatanDisplayName","jenisJabatan","getFileDisplayName","fileType","handleVerifyFile","fileId","verificationStatus","notes","requestData","prev","handlePrintReport","generatePrintReport","handleFinalPrintReport","generateFinalPrintReport","data","printWindow","html","index","kabupatenFiles","validAdminWilayahFiles","allVerifiedFiles","_d","_e","formatDate","dateString","getFileSize","bytes","sizes","handlePreviewFile","blob","blobUrl","handleDownloadFile","isAdmin","hasPendingFiles","requiredAll","x","canEdit","canDelete","canApprove","canReject","canShowResubmit","allFilesApproved","hasRejectedFiles","resubmitEnabled","allAdminWilayahFilesApproved","adminWilayahFiles","hasRejectedAdminWilayahFiles","jsx","Card","jsxs","CardContent","Loader2","Button","ArrowLeft","CardHeader","CardTitle","User","FileText","Edit","Switch","checked","Label","Eye","Download","Calendar","CheckCircle","XCircle","Fragment","RefreshCw","Trash2","Printer","Dialog","DialogContent","DialogHeader","DialogTitle","Textarea","e","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","open","AlertCircle"],"mappings":"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"}