import{j as e,al as xa,a1 as Ee,a6 as Ye,ag as Fa,am as Ia,F as Qe,i as Xe,_ as Ra,S as qa,an as Ja,ao as le,ap as Me,aq as Te,ak as Oa,U as Wa,w as Ze,ar as La}from"./ui-vendor-BBh2_8F_.js";import{r as i,c as _}from"./react-vendor-BNG1zHOu.js";import{u as Fe,a as W,c as de,d as ja,S as y,I as S,B as x,b as z,D as oe,e as ce,f as fe,g as be,h as ke,i as ye,j as Be,k as Ga,l as De}from"./index-B97-lwoW.js";import{C as Y,a as Q,b as X,c as Z}from"./card-OOjRi-as.js";import{L as b}from"./label-Csq1HLHd.js";import{T as Ha,a as Ua,b as ee,c as ae,d as $a}from"./tabs-CtTGC9yR.js";import{C as ea}from"./checkbox-BCd4T6eD.js";import{S as aa}from"./switch-BIY9Wvr8.js";import{S as sa,a as na,b as ia,c as ta,d as ra}from"./select-B-Ubs7d9.js";import{A as la,a as da,b as oa,c as ca,d as ma,e as ua,f as ga}from"./alert-dialog-DxSQ8qm0.js";const Va=()=>{const{user:n,token:o}=Fe(),[t,u]=i.useState(null),[N,L]=i.useState([]),[E,K]=i.useState(!1),[j,C]=i.useState(!1),[v,c]=i.useState({isActive:!1,message:"",endTime:""});i.useEffect(()=>{o&&(q(),P())},[o]);const q=async()=>{try{const r=await W("/api/maintenance/status",o);u(r),c(h=>({...h,isActive:r.isMaintenanceMode,message:r.message||""}))}catch(r){console.error("Error fetching maintenance status:",r)}},P=async()=>{try{const r=await W("/api/maintenance/history",o);L(r.history||[])}catch(r){console.error("Error fetching maintenance history:",r)}},M=async()=>{if(o){K(!0);try{await de("/api/maintenance/toggle",{isActive:v.isActive,message:v.message||"Sistem sedang dalam mode maintenance",endTime:v.endTime||null},o),await q(),await P();const r=`Maintenance mode ${v.isActive?"diaktifkan":"dinonaktifkan"} berhasil!`,h=document.createElement("div");h.className="fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",h.innerHTML=`
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4">
            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          <h2 class="text-xl font-bold mb-2 text-gray-900">Berhasil!</h2>
          <p class="text-gray-600 mb-6 text-center">${r}</p>
          <button
            class="w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400"
            onclick="this.closest('.fixed').remove()"
          >
            Tutup
          </button>
        </div>
      `,document.body.appendChild(h),setTimeout(()=>{h.parentNode&&h.remove()},3e3)}catch(r){console.error("Error toggling maintenance mode:",r);const h=document.createElement("div");h.className="fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",h.innerHTML=`
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4">
            <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </div>
          <h2 class="text-xl font-bold mb-2 text-gray-900">Gagal!</h2>
          <p class="text-gray-600 mb-6 text-center">Gagal mengubah status maintenance mode. Silakan coba lagi.</p>
          <button
            class="w-full py-3 rounded-lg bg-red-600 hover:bg-red-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400"
            onclick="this.closest('.fixed').remove()"
          >
            Tutup
          </button>
        </div>
      `,document.body.appendChild(h),setTimeout(()=>{h.parentNode&&h.remove()},5e3)}finally{K(!1)}}};return(n==null?void 0:n.role)!=="admin"||(n==null?void 0:n.office_id)!==null?null:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(xa,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Kelola status maintenance sistem"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:t!=null&&t.isMaintenanceMode?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Maintenance Mode Aktif"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Sistem Normal"})]})}),(t==null?void 0:t.message)&&e.jsx("p",{className:"text-gray-600 text-sm bg-gray-50 p-3 rounded-lg",children:t.message}),(t==null?void 0:t.startTime)&&e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Dimulai: ",new Date(t.startTime).toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:v.isActive,onChange:r=>c(h=>({...h,isActive:r.target.checked})),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Aktifkan Maintenance Mode"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pesan Maintenance"}),e.jsx("textarea",{value:v.message,onChange:r=>c(h=>({...h,message:r.target.value})),placeholder:"Masukkan pesan untuk pengguna...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimasi Selesai (Opsional)"}),e.jsx("input",{type:"datetime-local",value:v.endTime,onChange:r=>c(h=>({...h,endTime:r.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsx("button",{onClick:M,disabled:E,className:`w-full py-3 px-4 rounded-lg font-semibold transition-colors ${v.isActive?"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl"} disabled:opacity-50 disabled:cursor-not-allowed`,children:E?"Memproses...":v.isActive?"Aktifkan Maintenance Mode":"Nonaktifkan Maintenance Mode"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("button",{onClick:()=>C(!j),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(Fa,{className:"w-4 h-4"}),j?"Sembunyikan":"Tampilkan"," Riwayat Maintenance"]}),j&&e.jsx("div",{className:"mt-4 space-y-3 max-h-60 overflow-y-auto",children:N.map(r=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.isActive?e.jsx(Ee,{className:"w-4 h-4 text-red-500"}):e.jsx(Ye,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:`text-sm font-medium ${r.isActive?"text-red-600":"text-green-600"}`,children:r.isActive?"Diaktifkan":"Dinonaktifkan"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(r.createdAt).toLocaleString("id-ID")})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:r.message}),r.createdByUser&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Oleh: ",r.createdByUser.full_name]})]},r.id))})]})]})},ha=({text:n,label:o="Teks",className:t})=>{const[u,N]=i.useState(!1),[L,E]=i.useState(!1),K=async j=>{var C,v;(C=j==null?void 0:j.preventDefault)==null||C.call(j),(v=j==null?void 0:j.stopPropagation)==null||v.call(j);try{await navigator.clipboard.writeText(n)}catch{const c=document.createElement("textarea");c.value=n,c.style.position="fixed",c.style.opacity="0",document.body.appendChild(c),c.focus(),c.select();try{document.execCommand("copy")}catch{}document.body.removeChild(c)}N(!0),E(!0),setTimeout(()=>{N(!1),E(!1)},1400)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:K,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&K(j)},className:`inline-flex items-center gap-1 cursor-pointer group text-left ${t||""}`,title:`Salin ${o}`,children:[e.jsx("span",{children:n}),u?e.jsx(Ze,{className:"w-4 h-4 text-green-600"}):e.jsx(La,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600"}),e.jsx("span",{"aria-live":"polite",className:"sr-only",children:u?`${o} disalin`:""})]}),e.jsx(oe,{open:L,onOpenChange:E,children:e.jsx(ce,{className:"max-w-sm min-w-[320px] px-4 py-3 pr-12 rounded-xl border shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-green-50 text-green-600 border border-green-500",children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-semibold",children:["Berhasil menyalin ",o]})]})})})]})},za=({token:n})=>{const[o,t]=i.useState([]),[u,N]=i.useState(!0),[L,E]=i.useState(null),[K,j]=i.useState(""),[C,v]=i.useState(""),[c,q]=i.useState(1),P=20;Fe();const{toast:M}=ja(),[r,h]=i.useState(!1),[m,me]=i.useState(null),[se,ue]=i.useState(!1);i.useEffect(()=>{const l=setTimeout(()=>v(K),300);return()=>clearTimeout(l)},[K]),i.useEffect(()=>{n&&(N(!0),W("/api/employees",n).then(l=>t(l.pegawai||[])).catch(l=>E(l.message||"Gagal mengambil data pegawai")).finally(()=>N(!1)))},[n]);const G=o.filter(l=>{var k,D,B;return((k=l.nama)==null?void 0:k.toLowerCase().includes(C.toLowerCase()))||((D=l.nip)==null?void 0:D.toLowerCase().includes(C.toLowerCase()))||((B=l.unit_kerja)==null?void 0:B.toLowerCase().includes(C.toLowerCase()))}),T=Math.ceil(G.length/P),ge=G.slice((c-1)*P,c*P),Re=(()=>{if(T<=5)return Array.from({length:T},(B,F)=>F+1);let k=Math.max(1,c-2),D=Math.min(T,c+2);return c<=3?(D=5,k=1):c>=T-2&&(D=T,k=T-5+1),Array.from({length:D-k+1},(B,F)=>k+F)})(),ne=l=>{l<1||l>T||q(l)};return i.useEffect(()=>{q(1)},[C]),u?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(y,{className:"h-8 w-1/2 mx-auto mb-4"}),e.jsx(y,{className:"h-10 w-full mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"})]}):L?e.jsx("div",{className:"py-8 text-center text-error",children:L}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(S,{placeholder:"Cari pegawai...",value:K,onChange:l=>j(l.target.value),className:"w-full"})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(x,{variant:"outline",onClick:()=>h(!0),className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-50",children:[e.jsx(le,{className:"h-4 w-4"}),"Tambah Pegawai"]})})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"NIP"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Unit Kerja"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Jabatan"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Pangkat/Gol"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ge.map(l=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(ha,{text:l.nama,label:"Nama"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsx(ha,{text:l.nip,label:"NIP",className:"font-mono"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l.unit_kerja}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l.jabatan}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l.golongan}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>{me(l),h(!0)},className:"flex items-center gap-1",children:[e.jsx(Me,{className:"h-3 w-3"}),"Edit"]})})]},l.id))})]})})}),T>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",(c-1)*P+1," sampai ",Math.min(c*P,G.length)," dari ",G.length," pegawai"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>ne(c-1),disabled:c===1,className:"border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800 disabled:border-gray-300 disabled:text-gray-400",children:"Sebelumnya"}),Re.map(l=>e.jsx(x,{variant:c===l?"default":"outline",size:"sm",onClick:()=>ne(l),className:c===l?"bg-green-600 hover:bg-green-700 text-white":"",children:l},l)),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>ne(c+1),disabled:c===T,className:"border-green-600 text-green-600 hover:bg-green-50 disabled:border-gray-300 disabled:text-gray-400",children:"Selanjutnya"})]})]}),e.jsx(oe,{open:r,onOpenChange:h,children:e.jsxs(ce,{className:"max-w-2xl",children:[e.jsxs(fe,{children:[e.jsx(be,{children:m?"Edit Pegawai":"Tambah Pegawai Baru"}),e.jsx(ke,{children:m?"Edit informasi pegawai":"Masukkan informasi pegawai baru"})]}),e.jsxs("form",{onSubmit:async l=>{l.preventDefault(),ue(!0);try{const k=new FormData(l.currentTarget),D={nama:k.get("nama"),unit_kerja:k.get("unit_kerja"),jabatan:k.get("jabatan"),golongan:k.get("golongan")},B=!!m,F=B?m==null?void 0:m.nip:k.get("nip")||void 0;if(B){if(!F)throw new Error("NIP tidak ditemukan untuk update");await Be(`/api/employees/${F}`,D,n),M({title:"Berhasil",description:"Data pegawai berhasil diperbarui"})}else{const H=k.get("nip")||void 0;await de("/api/employees",{...D,nip:H},n),M({title:"Berhasil",description:"Pegawai baru berhasil ditambahkan"})}const ve=await W("/api/employees",n);t(ve.pegawai||[]),h(!1),me(null)}catch(k){M({title:"Gagal",description:k.message||"Terjadi kesalahan",variant:"destructive"})}finally{ue(!1)}},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"nama",children:"Nama Lengkap"}),e.jsx(S,{id:"nama",name:"nama",defaultValue:(m==null?void 0:m.nama)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"nip",children:"NIP"}),e.jsx(S,{id:"nip",name:"nip",defaultValue:(m==null?void 0:m.nip)||"",required:!0,pattern:"[0-9]{18}",title:"NIP harus 18 digit angka",disabled:!!m,readOnly:!!m})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"unit_kerja",children:"Unit Kerja"}),e.jsx(S,{id:"unit_kerja",name:"unit_kerja",defaultValue:(m==null?void 0:m.unit_kerja)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"jabatan",children:"Jabatan"}),e.jsx(S,{id:"jabatan",name:"jabatan",defaultValue:(m==null?void 0:m.jabatan)||"",required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"golongan",children:"Pangkat/Golongan"}),e.jsx(S,{id:"golongan",name:"golongan",defaultValue:(m==null?void 0:m.golongan)||"",required:!0})]})]}),e.jsxs(ye,{className:"mt-6",children:[e.jsx(Ga,{asChild:!0,children:e.jsx(x,{type:"button",variant:"outline",className:"border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900",children:"Batal"})}),e.jsx(x,{type:"submit",disabled:se,className:"bg-green-600 hover:bg-green-700 text-white",children:se?"Menyimpan...":m?"Update":"Simpan"})]})]})]})})]})},rs=()=>{const{user:n,token:o}=Fe(),{toast:t}=ja(),[u,N]=i.useState({namakantor:"",kabkota:"",alamat:"",telepon:"",fax:"",email:"",website:""}),[L,E]=i.useState({tingkat1:"KEMENTERIAN AGAMA REPUBLIK INDONESIA",tingkat2:"KANTOR WILAYAH KEMENTERIAN AGAMA",tingkat3:"PROVINSI NUSA TENGGARA BARAT",alamat:"",telepon:"",fax:"",email:"",website:""}),[K,j]=i.useState(!0),[C,v]=i.useState(null),[c,q]=i.useState(null),[P,M]=i.useState(null),r={namakantor:_.useRef(null),kabkota:_.useRef(null),alamat:_.useRef(null),telepon:_.useRef(null),email:_.useRef(null),website:_.useRef(null),fax:_.useRef(null)};_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null);const[h,m]=i.useState(!1),[me,se]=i.useState(null),[ue,G]=i.useState(""),[T,ge]=i.useState(!1),[Ie,Re]=i.useState(null),[ne,l]=i.useState(""),[k,D]=i.useState([]),[B,F]=i.useState(!0),[ve,H]=i.useState(!1),[ie,qe]=i.useState(null),[Je,Oe]=i.useState(!1),[A,U]=i.useState({jenis_jabatan:"",total_dokumen:0,required_files:[],is_active:!0}),te=[{id:"surat_pengantar",name:"Surat Pengantar",category:"Dokumen Pengantar"},{id:"surat_permohonan_dari_yang_bersangkutan",name:"Surat Permohonan Dari Yang Bersangkutan",category:"Dokumen Pengantar"},{id:"surat_keputusan_cpns",name:"Surat Keputusan CPNS",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_pns",name:"Surat Keputusan PNS",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_kenaikan_pangkat_terakhir",name:"Surat Keputusan Kenaikan Pangkat Terakhir",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_jabatan_terakhir",name:"Surat Keputusan Jabatan Terakhir",category:"Dokumen Kepegawaian"},{id:"skp_2_tahun_terakhir",name:"SKP 2 Tahun Terakhir",category:"Dokumen Kepegawaian"},{id:"surat_keterangan_bebas_temuan_inspektorat",name:"Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama",category:"Dokumen Keterangan"},{id:"surat_keterangan_anjab_abk_instansi_asal",name:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal",category:"Dokumen Keterangan"},{id:"surat_keterangan_anjab_abk_instansi_penerima",name:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima",category:"Dokumen Keterangan"},{id:"surat_pernyataan_tidak_hukuman_disiplin",name:"Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK",category:"Dokumen Pernyataan"},{id:"surat_persetujuan_mutasi_asal",name:"Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki",category:"Dokumen Persetujuan"},{id:"surat_lolos_butuh_ppk",name:"Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju",category:"Dokumen Persetujuan"},{id:"peta_jabatan",name:"Peta Jabatan",category:"Dokumen Pendukung"},{id:"hasil_uji_kompetensi",name:"Hasil Uji Kompetensi",category:"Dokumen Pendukung"},{id:"hasil_evaluasi_pertimbangan_baperjakat",name:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",category:"Dokumen Pendukung"},{id:"anjab_abk_instansi_asal",name:"Anjab/Abk Instansi Asal",category:"Dokumen Pendukung"},{id:"anjab_abk_instansi_penerima",name:"Anjab/Abk Instansi Penerima",category:"Dokumen Pendukung"},{id:"surat_keterangan_tidak_tugas_belajar",name:"Surat Keterangan Tidak Sedang Tugas Belajar",category:"Dokumen Keterangan"},{id:"sptjm_pimpinan_satker_asal",name:"SPTJM Pimpinan Satker dari Asal",category:"Dokumen Pernyataan"},{id:"sptjm_pimpinan_satker_penerima",name:"SPTJM Pimpinan Satker dari Penerima",category:"Dokumen Pernyataan"},{id:"surat_rekomendasi_instansi_pembina",name:"Surat Rekomendasi Instansi Pembina",category:"Dokumen Rekomendasi"}];i.useEffect(()=>{!n||!o||(n.role==="admin"?(pe(),Ba()):n.role==="admin_wilayah"&&pe())},[n==null?void 0:n.role,o,n==null?void 0:n.id]),i.useEffect(()=>{!n||!o||n.role==="admin"&&Ne()},[o,n==null?void 0:n.role,n==null?void 0:n.id]),i.useEffect(()=>{!n||!o||(j(!0),W("/api/offices",o).then(a=>{var g,d;let s=null;n!=null&&n.office_id&&(s=(g=a.offices)==null?void 0:g.find(w=>w.id===n.office_id)),!s&&(n!=null&&n.kabkota)&&(s=(d=a.offices)==null?void 0:d.find(w=>w.kabkota===n.kabkota)),s?(q(s.id),N({namakantor:s.namakantor||s.name||"",kabkota:s.kabkota||"",alamat:s.alamat||s.address||"",telepon:s.telepon||s.phone||"",fax:s.fax||"",email:s.email||"",website:s.website||""})):(q(null),N({namakantor:"",kabkota:"",alamat:"",telepon:"",fax:"",email:"",website:""}))}).catch(a=>{console.error("Error loading office settings:",a),v("Gagal mengambil data kantor")}).finally(()=>j(!1)))},[o,n==null?void 0:n.id,n==null?void 0:n.office_id,n==null?void 0:n.kabkota]),i.useEffect(()=>{const a=localStorage.getItem("kanwilSettings");if(a)try{const s=JSON.parse(a);E(g=>({...g,tingkat1:s.tingkat1||"KEMENTERIAN AGAMA REPUBLIK INDONESIA",tingkat2:s.tingkat2||"KANTOR WILAYAH KEMENTERIAN AGAMA",tingkat3:s.tingkat3||"PROVINSI NUSA TENGGARA BARAT",alamat:s.alamat||"",telepon:s.telepon||"",fax:s.fax||"",email:s.email||"",website:s.website||""}))}catch(s){console.error("Error parsing kanwil settings:",s)}},[]);const Ne=async()=>{try{F(!0);const a=await W("/api/job-type-configurations",o);a.success&&D(a.data)}catch(a){console.error("Error fetching job configs:",a),t({title:"Error",description:"Gagal mengambil data konfigurasi jabatan",variant:"destructive"})}finally{F(!1)}},pa=async()=>{var a,s;if(M(null),!u.alamat.trim()){M("alamat"),(a=r.alamat.current)==null||a.focus(),t({title:"Alamat wajib diisi.",description:"Silakan isi alamat kantor.",variant:"destructive"});return}if(u.email&&!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(u.email)){M("email"),(s=r.email.current)==null||s.focus(),t({title:"Format email tidak valid.",description:"Silakan isi email dengan format yang benar.",variant:"destructive"});return}try{const g=await Be(`/api/offices/${c}`,{alamat:u.alamat,telepon:u.telepon,fax:u.fax,email:u.email,website:u.website},o);se(!0),G("Pengaturan kantor berhasil disimpan!"),m(!0)}catch{se(!1),G("Gagal menyimpan pengaturan kantor. Silakan coba lagi."),m(!0)}},fa=()=>{t({title:"Fitur Export",description:"Fitur export data akan segera tersedia."})},ba=()=>{t({title:"Fitur Import",description:"Fitur import data akan segera tersedia."})},[we,_e]=i.useState([]),[ka,We]=i.useState(!0),[ya,re]=i.useState(!1),[he,Se]=i.useState(null),[Le,Ge]=i.useState(!1),[xe,je]=i.useState(!1),[I,Pe]=i.useState(null),[$,He]=i.useState(!1),[p,R]=i.useState({jenis_jabatan_id:"",name:"",description:"",selectedFiles:{},selectedVariant:"6.1",is_active:!0}),Ae=[{id:"surat_rekomendasi_kanwil",name:"Surat Rekomendasi dari Instansi Pembina",category:"Dokumen Instansi Pembina",is_required:!0,description:"Surat rekomendasi dari instansi pembina dengan pilihan varian 6.1-6.9"},{id:"surat_persetujuan_kepala_wilayah",name:"Surat Persetujuan Kepala Wilayah",category:"Dokumen Kanwil",is_required:!0,description:"Surat persetujuan dari Kepala Wilayah Kementerian Agama Provinsi"},{id:"surat_pengantar_permohonan_rekomendasi",name:"Surat Pengantar Permohonan Rekomendasi",category:"Dokumen Pengantar",is_required:!0,description:"Surat pengantar permohonan rekomendasi pindah tugas"},{id:"surat_pernyataan_tidak_tugas_belajar",name:"Surat Pernyataan Tidak Sedang Menjalani Tugas Belajar atau Ikatan Dinas",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tidak sedang menjalani tugas belajar atau ikatan dinas"},{id:"surat_pernyataan_tidak_hukuman_disiplin",name:"Surat Pernyataan Tidak Sedang Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tidak sedang dijatuhi hukuman disiplin tingkat sedang atau berat"},{id:"surat_pernyataan_tidak_proses_pidana",name:"Surat Pernyataan Tidak Sedang Menjalani Proses Pidana atau Pernah Dipidana Penjara",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tidak sedang menjalani proses pidana atau pernah dipidana penjara"},{id:"surat_pernyataan_tanggung_jawab_mutlak",name:"Surat Pernyataan Tanggung Jawab Mutlak (SPTJM)",category:"Dokumen Pernyataan",is_required:!0,description:"Surat pernyataan tanggung jawab mutlak untuk pengajuan mutasi"},{id:"surat_keterangan_bebas_temuan_inspektorat",name:"Surat Keterangan Bebas Temuan (SKBT) - Inspektorat",category:"Dokumen Kanwil",is_required:!0,description:"SKBT diterbitkan Inspektorat Jenderal Kemenag"},{id:"hasil_evaluasi_pertimbangan_baperjakat",name:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",category:"Dokumen Kanwil",is_required:!0,description:"Hasil evaluasi dan pertimbangan BAPERJAKAT dari Kanwil Provinsi"},{id:"surat_rekomendasi_kanwil_khusus",name:"Surat Rekomendasi Khusus dari Kanwil (Khusus Penghulu)",category:"Dokumen Keterangan",is_required:!0,description:"Surat rekomendasi khusus dari Kanwil Provinsi untuk jabatan Penghulu"},{id:"hasil_assessment",name:"Hasil Assessment",category:"Dokumen Kanwil",is_required:!0,description:"Dokumen hasil uji kompetensi/assessment dari Kanwil/otoritas terkait"}],[Ue,Ce]=i.useState([]),va=[{value:"6.1",label:"6.1 - Permohonan Persetujuan/Rekomendasi Pengangkatan ke Dalam Jabatan Pengawas (Untuk Eselon)"},{value:"6.2",label:"6.2 - Permohonan Pindah Tugas ke Dirjen Bimas Islam (Untuk Penghulu)"},{value:"6.3",label:"6.3 - Permohonan Pindah Tugas ke Dirjen PENDIS (Untuk Guru, Pengawas, Kepala Madrasah)"},{value:"6.4",label:"6.4 - Permohonan Pindah Tugas ke Kepala Biro SDM Sekjen Kemenag RI (Untuk Analis SDM dan Asesor)"},{value:"6.5",label:"6.5 - Permohonan Pindah Tugas ke Kepala Biro Umum Sekjen Kemenag RI (Arsiparis, BARJAS)"},{value:"6.6",label:"6.6 - Permohonan Pindah Tugas ke Kepala Biro Keuangan dan BMN Sekjen Kemenag RI (Untuk Analis Pengelolaan Keuangan APBN dan Pranata Keuangan APBN)"},{value:"6.7",label:"6.7 - Permohonan Pindah Tugas ke Kepala Biro Perencanaan dan Penganggaran Sekjen Kemenag RI (Untuk Perencana)"},{value:"6.8",label:"6.8 - Permohonan Pindah Tugas ke Kepala Biro Humas (Untuk Pranata Humas)"},{value:"6.9",label:"6.9 - Permohonan Pindah Tugas ke Kepala BMP-PSDM Kemenag RI (Untuk Analis Kebijakan)"}],$e=()=>{U({jenis_jabatan:"",total_dokumen:0,required_files:[],is_active:!0}),qe(null),H(!0)},Na=a=>{var s;U({jenis_jabatan:a.jenis_jabatan,total_dokumen:((s=a.required_files)==null?void 0:s.length)||0,required_files:a.required_files||[],is_active:a.is_active}),qe(a),H(!0)},wa=async()=>{if(!A.jenis_jabatan.trim()){t({title:"Error",description:"Jenis jabatan wajib diisi",variant:"destructive"});return}if(A.required_files.length===0){t({title:"Error",description:"Pilih minimal satu dokumen yang diperlukan",variant:"destructive"});return}try{Oe(!0);const a={jenis_jabatan:A.jenis_jabatan,min_dokumen:A.required_files.length,max_dokumen:A.required_files.length,required_files:A.required_files,is_active:A.is_active};ie?(await Be(`/api/job-type-configurations/${ie.id}`,a,o),t({title:"Sukses",description:"Konfigurasi jabatan berhasil diperbarui"})):(await de("/api/job-type-configurations",a,o),t({title:"Sukses",description:"Konfigurasi jabatan berhasil ditambahkan"})),H(!1),Ne()}catch(a){console.error("Error saving job config:",a),t({title:"Error",description:"Gagal menyimpan konfigurasi jabatan",variant:"destructive"})}finally{Oe(!1)}},_a=async a=>{try{await De(`/api/job-type-configurations/${a}`,o),t({title:"Sukses",description:"Konfigurasi jabatan berhasil dihapus"}),Ne()}catch(s){console.error("Error deleting job config:",s),t({title:"Error",description:"Gagal menghapus konfigurasi jabatan",variant:"destructive"})}},Sa=a=>{U(s=>{const g=s.required_files.includes(a)?s.required_files.filter(d=>d!==a):[...s.required_files,a];return{...s,required_files:g,total_dokumen:g.length}})},Pa=()=>{const a=te.map(s=>s.id);U(s=>({...s,required_files:a,total_dokumen:a.length})),t({title:"Berhasil",description:"Semua dokumen telah dipilih"})},Aa=()=>{U(a=>({...a,required_files:[],total_dokumen:0})),t({title:"Berhasil",description:"Semua dokumen telah dihapus dari pilihan"})},Ve=()=>{if((n==null?void 0:n.role)!=="admin"){t({title:"Error",description:"Hanya superadmin yang dapat menambah konfigurasi",variant:"destructive"});return}R({jenis_jabatan_id:"",name:"",description:"",selectedFiles:{},selectedVariant:"6.1",is_active:!0}),Se(null),re(!0)},Ca=a=>{if((n==null?void 0:n.role)!=="admin"){t({title:"Error",description:"Hanya superadmin yang dapat mengedit konfigurasi",variant:"destructive"});return}const s={};Array.isArray(a.files)&&a.files.forEach(g=>{const d=g.file_type||g.id;d&&(s[String(d)]=!0)}),R({jenis_jabatan_id:a.jenis_jabatan_id.toString(),name:a.name,description:a.description,selectedFiles:s,selectedVariant:"6.1",is_active:a.is_active}),Se(a),re(!0)},Ka=async a=>{if((n==null?void 0:n.role)!=="admin"){t({title:"Error",description:"Hanya superadmin yang dapat menghapus konfigurasi",variant:"destructive"});return}Pe(a),je(!0)},Ta=async()=>{if(I)try{He(!0),console.log("🗑️ Deleting config:",I),console.log("📁 Files to delete:",I.files);const a=I.files.map(async s=>(console.log(`🗑️ Deleting file config ID: ${s.id}, Type: ${s.file_type}`),De(`/api/admin-wilayah-file-config/${s.id}`,o)));await Promise.all(a),t({title:"Berhasil",description:"Konfigurasi admin wilayah berhasil dihapus"}),je(!1),Pe(null),pe()}catch(a){console.error("❌ Error deleting admin wilayah config:",a),t({title:"Error",description:"Gagal menghapus konfigurasi admin wilayah",variant:"destructive"})}finally{He(!1)}},ze=()=>{$||(je(!1),Pe(null))};i.useEffect(()=>{const a=s=>{s.key==="Escape"&&xe&&!$&&ze()};return xe&&document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[xe,$]);const Da=a=>{R(s=>({...s,selectedFiles:{...s.selectedFiles,[a]:!s.selectedFiles[a]}}))},Ea=a=>{R(s=>({...s,selectedVariant:a}))},Ma=async()=>{var w,J;const a=Ue.find(f=>f.id.toString()===p.jenis_jabatan_id),s=a?`Konfigurasi ${a.jenis_jabatan}`:"Konfigurasi Admin Wilayah",g=a?`Konfigurasi file wajib untuk jabatan ${a.jenis_jabatan}`:"Konfigurasi file wajib Admin Wilayah";if(!p.jenis_jabatan_id){t({title:"Error",description:"Jenis jabatan wajib dipilih",variant:"destructive"});return}(w=p.name)!=null&&w.trim()||R(f=>({...f,name:s})),(J=p.description)!=null&&J.trim()||R(f=>({...f,description:g}));const d=Ae.filter(f=>p.selectedFiles[f.id]);if(d.length===0){t({title:"Error",description:"Pilih minimal satu file yang required",variant:"destructive"});return}try{if(Ge(!0),he){const f=we.find(O=>O.jenis_jabatan_id===parseInt(p.jenis_jabatan_id));if(f){console.log("🔄 Updating configs, deleting old ones:",f.files);const O=f.files.map(async Ke=>(console.log(`🗑️ Deleting old file config ID: ${Ke.id}, Type: ${Ke.file_type}`),De(`/api/admin-wilayah-file-config/${Ke.id}`,o)));await Promise.all(O)}for(const O of d)await de("/api/admin-wilayah-file-config",{jenis_jabatan_id:parseInt(p.jenis_jabatan_id),file_type:O.id,display_name:O.name,is_required:O.is_required,description:O.description,is_active:p.is_active},o);t({title:"Berhasil",description:"Konfigurasi admin wilayah berhasil diperbarui"})}else{for(const f of d)await de("/api/admin-wilayah-file-config",{jenis_jabatan_id:parseInt(p.jenis_jabatan_id),file_type:f.id,display_name:f.name,is_required:f.is_required,description:f.description,is_active:p.is_active},o);t({title:"Berhasil",description:"Konfigurasi admin wilayah berhasil dibuat"})}re(!1),Se(null),pe()}catch(f){console.error("Error saving admin wilayah config:",f),t({title:"Error",description:(f==null?void 0:f.message)||"Gagal menyimpan konfigurasi admin wilayah",variant:"destructive"})}finally{Ge(!1)}},pe=async()=>{try{We(!0);const a=await W("/api/admin-wilayah-file-config",o);if(console.log("📡 API Response:",a),a!=null&&a.success&&Array.isArray(a.data)){console.log("📊 Raw data from API:",a.data);const s=a.data.map(d=>{var w,J;return{id:d.id,jenis_jabatan_id:d.jenis_jabatan_id,name:((w=d.jenis_jabatan)==null?void 0:w.jenis_jabatan)||`Jabatan ${d.jenis_jabatan_id}`,description:`Konfigurasi file wajib untuk jabatan ${((J=d.jenis_jabatan)==null?void 0:J.jenis_jabatan)||d.jenis_jabatan_id}`,files:[{id:d.id,file_type:d.file_type,name:d.display_name,description:d.description,is_required:d.is_required,is_active:d.is_active}],is_active:d.is_active,created_at:d.created_at,updated_at:d.updated_at}});console.log("🔄 Transformed configs:",s);const g=s.reduce((d,w)=>{const J=d.find(f=>f.jenis_jabatan_id===w.jenis_jabatan_id);return J?J.files.push(...w.files):d.push(w),d},[]);console.log("📦 Grouped configs:",g),_e(g)}else console.warn("❌ Admin wilayah config API response invalid:",a),_e([])}catch(a){console.error("❌ Error fetching admin wilayah configs:",a),_e([])}finally{We(!1)}},Ba=async()=>{try{const a=await W("/api/admin-wilayah-file-config/available-job-types",o);a!=null&&a.success&&Array.isArray(a.data)?Ce(a.data):(console.warn("Available job types API response invalid:",a),Ce([]))}catch(a){console.error("Error fetching available job types:",a),Ce([])}};if(!n)return e.jsx("div",{className:"py-8 text-center",children:"Silakan login terlebih dahulu."});if(!o)return e.jsx("div",{className:"py-8 text-center",children:"Memuat pengaturan..."});const V=(n==null?void 0:n.role)==="admin";return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Pengaturan"}),e.jsx("p",{className:"text-gray-600",children:"Kelola pengaturan kantor, pegawai, dan sistem aplikasi"})]}),e.jsxs(Ha,{defaultValue:"office",className:"space-y-6",children:[e.jsxs(Ua,{className:`grid w-full ${V?"grid-cols-6":"grid-cols-5"}`,children:[e.jsxs(ee,{value:"office",className:"flex items-center space-x-2",children:[e.jsx(Ia,{className:"h-4 w-4"}),e.jsx("span",{children:"Kantor"})]}),V&&e.jsxs(ee,{value:"job-config",className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Konfigurasi Jabatan"})]}),V&&e.jsxs(ee,{value:"admin-wilayah-config",className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{children:"Konfigurasi Berkas Admin Wilayah"})]}),e.jsxs(ee,{value:"employees",className:"flex items-center space-x-2",children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Pegawai"})]}),V&&e.jsxs(ee,{value:"maintenance",className:"flex items-center space-x-2",children:[e.jsx(xa,{className:"h-4 w-4"}),e.jsx("span",{children:"Maintenance"})]}),e.jsxs(ee,{value:"system",className:"flex items-center space-x-2",children:[e.jsx(qa,{className:"h-4 w-4"}),e.jsx("span",{children:"Sistem"})]})]}),e.jsx(ae,{value:"office",children:e.jsxs(Y,{children:[e.jsx(Q,{children:e.jsx(X,{children:"Pengaturan Kantor"})}),e.jsx(Z,{className:"space-y-4",children:K?e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{className:"h-6 w-1/3 mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"}),e.jsx(y,{className:"h-24 w-full mb-2"}),e.jsx(y,{className:"h-10 w-1/2 mb-2"}),e.jsx(y,{className:"h-10 w-1/2 mb-2"}),e.jsx(y,{className:"h-10 w-1/2 mb-2"})]}):C?e.jsx("div",{className:"text-error",children:C}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"namakantor",children:"Nama Kantor"}),e.jsx(S,{id:"namakantor",ref:r.namakantor,value:u.namakantor,readOnly:!0,disabled:!0,className:P==="namakantor"?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"kabkota",children:"Kabupaten/Kota"}),e.jsx(S,{id:"kabkota",ref:r.kabkota,value:u.kabkota,readOnly:!0,disabled:!0,className:P==="kabkota"?"border-red-500":""})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"alamat",children:"Alamat"}),e.jsx($a,{id:"alamat",ref:r.alamat,value:u.alamat,onChange:a=>N({...u,alamat:a.target.value}),rows:3,className:P==="alamat"?"border-red-500":""})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"telepon",children:"Telepon"}),e.jsx(S,{id:"telepon",ref:r.telepon,value:u.telepon,onChange:a=>N({...u,telepon:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"fax",children:"Fax"}),e.jsx(S,{id:"fax",value:u.fax,onChange:a=>N({...u,fax:a.target.value}),ref:r.fax})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"email",children:"Email"}),e.jsx(S,{id:"email",ref:r.email,type:"email",value:u.email,onChange:a=>N({...u,email:a.target.value}),placeholder:"Contoh: kantor@kemenag.go.id",className:P==="email"?"border-red-500":""})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"website",children:"Website"}),e.jsx(S,{id:"website",ref:r.website,value:u.website,onChange:a=>N({...u,website:a.target.value}),placeholder:"Contoh: kemenag.go.id"})]})]}),e.jsxs(x,{onClick:pa,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Simpan Pengaturan Kantor"]})]})})]})}),V&&e.jsx(ae,{value:"job-config",children:e.jsxs(Y,{children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(X,{children:"Konfigurasi Jabatan"}),e.jsxs(x,{onClick:$e,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Tambah Konfigurasi"]})]})}),e.jsx(Z,{className:"space-y-4",children:B?e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{className:"h-6 w-1/3 mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"}),e.jsx(y,{className:"h-10 w-full mb-2"})]}):k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada konfigurasi jabatan"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Mulai dengan menambahkan konfigurasi jabatan pertama Anda."}),e.jsxs(x,{onClick:$e,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Tambah Konfigurasi Pertama"]})]}):e.jsx("div",{className:"space-y-4",children:k.map(a=>{var s;return e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a.jenis_jabatan}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((s=a.required_files)==null?void 0:s.length)||0," dokumen diperlukan"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:a.is_active?"bg-green-100 text-green-800 border-green-200 hover:bg-green-100":"bg-red-100 text-red-800 border-red-200 hover:bg-red-100",children:a.is_active?"Aktif":"Nonaktif"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>Na(a),className:"border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>_a(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),a.required_files&&a.required_files.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.required_files.map(g=>{const d=te.find(w=>w.id===g);return d?e.jsx(z,{variant:"outline",className:"text-xs",children:d.name},g):null})})]},a.id)})})})]})}),V&&e.jsx(ae,{value:"admin-wilayah-config",children:e.jsxs(Y,{children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(X,{children:"Konfigurasi Berkas Admin Wilayah"}),(n==null?void 0:n.role)==="admin"&&e.jsxs(x,{onClick:Ve,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Tambah Konfigurasi"]})]})}),e.jsx(Z,{children:ka?e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{className:"h-6 w-1/3 mb-2"}),e.jsx(y,{className:"h-32 w-full mb-2"}),e.jsx(y,{className:"h-32 w-full mb-2"})]}):we.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum ada konfigurasi"}),e.jsx("p",{className:"text-gray-600 mb-4",children:(n==null?void 0:n.role)==="admin"?"Buat konfigurasi pertama untuk admin wilayah":"Belum ada konfigurasi yang dibuat oleh superadmin"}),(n==null?void 0:n.role)==="admin"&&e.jsxs(x,{onClick:Ve,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Tambah Konfigurasi"]})]}):e.jsx("div",{className:"space-y-4",children:we.map(a=>e.jsxs(Y,{className:"border-green-200",children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(X,{className:"text-green-800",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.files.length," berkas diperlukan"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:a.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:a.is_active?"Aktif":"Nonaktif"}),(n==null?void 0:n.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ca(a),className:"text-green-600 border-green-200 hover:bg-green-50",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ka(a),className:"text-red-600 border-red-200 hover:bg-red-50",children:e.jsx(Te,{className:"h-4 w-4"})})]})]})]})}),e.jsx(Z,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:a.files.map(s=>e.jsx(z,{variant:"outline",className:"text-xs",children:s.name},s.id))})})]},a.id))})})]})}),e.jsx(ae,{value:"employees",children:e.jsxs(Y,{children:[e.jsx(Q,{children:e.jsx(X,{children:"Kelola Pegawai"})}),e.jsx(Z,{children:e.jsx(za,{token:o})})]})}),V&&e.jsx(ae,{value:"maintenance",children:e.jsx(Va,{})}),e.jsx(ae,{value:"system",children:e.jsxs(Y,{children:[e.jsx(Q,{children:e.jsx(X,{children:"Pengaturan Sistem"})}),e.jsx(Z,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(x,{onClick:fa,variant:"outline",className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800",children:[e.jsx(Oa,{className:"h-4 w-4"}),"Export Data"]}),e.jsxs(x,{onClick:ba,variant:"outline",className:"flex items-center gap-2 border-green-600 text-green-600 hover:bg-green-100 hover:text-green-800",children:[e.jsx(Wa,{className:"h-4 w-4"}),"Import Data"]})]})})]})})]}),e.jsx(la,{open:h,onOpenChange:m,children:e.jsxs(da,{children:[e.jsxs(oa,{children:[e.jsx(ca,{children:me?"Berhasil":"Gagal"}),e.jsx(ma,{children:ue})]}),e.jsx(ua,{children:e.jsx(ga,{onClick:()=>m(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"Tutup"})})]})}),e.jsx(la,{open:T,onOpenChange:ge,children:e.jsxs(da,{children:[e.jsxs(oa,{children:[e.jsx(ca,{children:Ie?"Berhasil":"Gagal"}),e.jsx(ma,{children:ne})]}),e.jsx(ua,{children:e.jsx(ga,{onClick:()=>ge(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"Tutup"})})]})}),e.jsx(oe,{open:ve,onOpenChange:H,children:e.jsxs(ce,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(fe,{children:[e.jsx(be,{children:ie?"Edit Konfigurasi Jabatan":"Tambah Konfigurasi Jabatan Baru"}),e.jsx(ke,{children:ie?"Edit konfigurasi jabatan yang sudah ada":"Buat konfigurasi jabatan baru dengan dokumen yang diperlukan"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"jenis_jabatan",children:"Jenis Jabatan"}),e.jsx(S,{id:"jenis_jabatan",value:A.jenis_jabatan,onChange:a=>U({...A,jenis_jabatan:a.target.value}),placeholder:"Contoh: Kepala Seksi, Kepala Subbagian, dll"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(aa,{id:"is_active",checked:A.is_active,onCheckedChange:a=>U({...A,is_active:a}),className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-200"}),e.jsx(b,{htmlFor:"is_active",children:"Aktif"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(b,{children:"Dokumen yang Diperlukan"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:Pa,className:"border-green-600 text-green-600 hover:bg-green-50",children:["Pilih Semua (",te.length,")"]}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:Aa,className:"border-gray-600 text-gray-600 hover:bg-gray-50",children:"Hapus Semua"})]})]}),e.jsx("div",{className:"mt-2 space-y-4",children:Object.entries(te.reduce((a,s)=>(a[s.category]||(a[s.category]=[]),a[s.category].push(s),a),{})).map(([a,s])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:a}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ea,{id:g.id,checked:A.required_files.includes(g.id),onCheckedChange:()=>Sa(g.id)}),e.jsx(b,{htmlFor:g.id,className:"text-sm cursor-pointer",children:g.name})]},g.id))})]},a))}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Total dokumen yang dipilih: ",A.required_files.length," / ",te.length]})]})]}),e.jsxs(ye,{children:[e.jsx(x,{variant:"outline",onClick:()=>H(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Batal"}),e.jsx(x,{onClick:wa,disabled:Je,className:"bg-green-600 hover:bg-green-700 text-white",children:Je?"Menyimpan...":ie?"Update":"Simpan"})]})]})}),e.jsx(oe,{open:ya,onOpenChange:re,children:e.jsxs(ce,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(fe,{children:[e.jsx(be,{children:he?"Edit Konfigurasi Berkas Admin Wilayah":"Tambah Konfigurasi Berkas Admin Wilayah Baru"}),e.jsx(ke,{children:he?"Edit konfigurasi berkas wajib untuk admin wilayah":"Buat konfigurasi berkas wajib baru untuk admin wilayah"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(aa,{id:"admin-wilayah-is-active",checked:p.is_active,onCheckedChange:a=>R({...p,is_active:a}),className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-200"}),e.jsx(b,{htmlFor:"admin-wilayah-is-active",children:"Aktif"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"admin-wilayah-config-name",children:"Nama Konfigurasi *"}),e.jsx(S,{id:"admin-wilayah-config-name",value:p.name,onChange:a=>R({...p,name:a.target.value}),placeholder:"Contoh: Penghulu, Kepala Kantor, Kepala Seksi"})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Pilih Berkas Wajib Admin Wilayah"}),e.jsx("div",{className:"mt-2 space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ae.map(a=>e.jsx("div",{className:`p-3 border rounded-lg transition-all duration-200 ${p.selectedFiles[a.id]?"border-green-200 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ea,{checked:p.selectedFiles[a.id]||!1,onCheckedChange:()=>Da(a.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:a.name}),a.is_required&&e.jsx(z,{className:"bg-red-100 text-red-800 border-red-200 text-xs",children:"Wajib"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:a.description}),a.id==="surat_rekomendasi_kanwil"&&p.selectedFiles[a.id]&&e.jsxs("div",{className:"mt-3",children:[e.jsx(b,{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Pilih Varian File 6:"}),e.jsxs(sa,{value:p.selectedVariant,onValueChange:Ea,children:[e.jsx(na,{className:"w-full focus:ring-green-500 focus:border-green-500",children:e.jsx(ia,{placeholder:"Pilih varian 6.x..."})}),e.jsx(ta,{children:va.map(s=>e.jsx(ra,{value:s.value,children:s.label},s.value))})]})]})]})]})},a.id))})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ringkasan Konfigurasi"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:["Total berkas yang dipilih: ",Object.values(p.selectedFiles).filter(Boolean).length]}),e.jsxs("p",{children:["Berkas wajib: ",Ae.filter(a=>a.is_required&&p.selectedFiles[a.id]).length]}),p.selectedFiles.surat_rekomendasi_kanwil&&e.jsxs("p",{children:["Varian berkas 6: ",p.selectedVariant]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(b,{htmlFor:"jenis-jabatan",children:"Jenis Jabatan"}),e.jsxs(sa,{value:p.jenis_jabatan_id,onValueChange:a=>R(s=>({...s,jenis_jabatan_id:a})),children:[e.jsx(na,{children:e.jsx(ia,{placeholder:"Pilih jenis jabatan"})}),e.jsx(ta,{children:Ue.map(a=>e.jsx(ra,{value:a.id.toString(),children:a.jenis_jabatan},a.id))})]})]})})]}),e.jsxs(ye,{children:[e.jsx(x,{variant:"outline",onClick:()=>re(!1),className:"border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900",children:"Batal"}),e.jsx(x,{onClick:Ma,disabled:Le,className:"bg-green-600 hover:bg-green-700 text-white",children:Le?"Menyimpan...":he?"Update":"Simpan"})]})]})}),e.jsx(oe,{open:xe,onOpenChange:a=>{!a&&$||je(a)},children:e.jsxs(ce,{className:"sm:max-w-md",children:[e.jsxs(fe,{children:[e.jsx(be,{className:"text-red-600",children:"Konfirmasi Penghapusan"}),e.jsx(ke,{children:"Apakah Anda yakin ingin menghapus konfigurasi berkas admin wilayah ini?"})]}),I&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:I.name}),e.jsx("p",{className:"text-sm text-red-700 mb-2",children:I.description}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.files.map(a=>e.jsx(z,{variant:"outline",className:"text-xs border-red-200 text-red-700",children:a.name},a.id))}),e.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Total ",I.files.length," berkas akan dihapus"]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Peringatan!"}),e.jsx("p",{children:"Tindakan ini tidak dapat dibatalkan. Semua konfigurasi berkas untuk jenis jabatan ini akan dihapus secara permanen."})]})]})})]}),e.jsxs(ye,{className:"flex-col sm:flex-row gap-2",children:[e.jsx(x,{variant:"outline",onClick:ze,disabled:$,className:"w-full sm:w-auto border-gray-300 text-gray-700 hover:bg-gray-200 hover:text-gray-900",children:"Batal"}),e.jsx(x,{onClick:Ta,disabled:$,variant:"destructive",className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menghapus..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Hapus Permanen"]})})]})]})})]})};export{rs as default};
//# sourceMappingURL=Settings-DYpWmKtT.js.map
