{"version":3,"file":"PengajuanFileUpload-B9cNKfnN.js","sources":["../../src/components/PengajuanFileUpload.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\nimport { Upload, CheckCircle, X, FileText, Send, Loader2, AlertCircle, Eye, Download, Edit, Trash2 } from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiGet, apiPost, apiPut } from '@/lib/api';\n\ninterface PengajuanFile {\n  id: string;\n  file_type: string;\n  file_name: string;\n  file_size: number;\n  upload_status: string;\n  blobUrl?: string;\n}\n\ninterface PengajuanData {\n  id: string;\n  pegawai: {\n    nama: string;\n    jabatan: string;\n  };\n  jenis_jabatan: string;\n  jabatan_id?: number;\n  total_dokumen: number;\n  status: string;\n  files: PengajuanFile[];\n}\n\n// Normalize any text to a safe DOM id segment\nconst toSafeId = (raw: string): string => {\n  return String(raw)\n    .toLowerCase()\n    .replace(/[^a-z0-9_-]+/gi, '_')\n    .replace(/^_+|_+$/g, '');\n};\n\n// Helper function to map file types to display names\nconst getFileDisplayName = (fileType: string): string => {\n  const fileTypeMap: Record<string, string> = {\n    'surat_pengantar': 'Surat Pengantar',\n    'surat_permohonan_dari_yang_bersangkutan': 'Surat Permohonan Dari Yang Bersangkutan',\n    'surat_keputusan_cpns': 'Surat Keputusan CPNS',\n    'surat_keputusan_pns': 'Surat Keputusan PNS',\n    'surat_keputusan_kenaikan_pangkat_terakhir': 'Surat Keputusan Kenaikan Pangkat Terakhir',\n    'surat_keputusan_jabatan_terakhir': 'Surat Keputusan Jabatan Terakhir',\n    'skp_2_tahun_terakhir': 'SKP 2 Tahun Terakhir',\n    'surat_keterangan_bebas_temuan_inspektorat': 'Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama',\n    'surat_keterangan_anjab_abk_instansi_asal': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal',\n    'surat_keterangan_anjab_abk_instansi_penerima': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima',\n    'surat_pernyataan_tidak_hukuman_disiplin': 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK',\n    'surat_persetujuan_mutasi_asal': 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki',\n    'surat_lolos_butuh_ppk': 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju',\n    'peta_jabatan': 'Peta Jabatan',\n    'hasil_uji_kompetensi': 'Hasil Uji Kompetensi',\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)',\n    'anjab_abk_instansi_asal': 'Anjab/Abk Instansi Asal',\n    'anjab_abk_instansi_penerima': 'Anjab/Abk Instansi Penerima',\n    'surat_keterangan_tidak_tugas_belajar': 'Surat Keterangan Tidak Sedang Tugas Belajar',\n    'sptjm_pimpinan_satker_asal': 'SPTJM Pimpinan Satker dari Asal',\n    'sptjm_pimpinan_satker_penerima': 'SPTJM Pimpinan Satker dari Penerima',\n    'surat_rekomendasi_instansi_pembina': 'Surat Rekomendasi Instansi Pembina'\n  };\n  \n  return fileTypeMap[fileType] || fileType.replace(/_/g, ' ').toUpperCase();\n};\n\n// Helper function to get file category for grouping\nconst getFileCategory = (fileType: string): string => {\n  const categoryMap: Record<string, string> = {\n    'surat_pengantar': 'Dokumen Pengantar',\n    'surat_permohonan_dari_yang_bersangkutan': 'Dokumen Pengantar',\n    'surat_keputusan_cpns': 'Dokumen Kepegawaian',\n    'surat_keputusan_pns': 'Dokumen Kepegawaian',\n    'surat_keputusan_kenaikan_pangkat_terakhir': 'Dokumen Kepegawaian',\n    'surat_keputusan_jabatan_terakhir': 'Dokumen Kepegawaian',\n    'skp_2_tahun_terakhir': 'Dokumen Kepegawaian',\n    'surat_keterangan_bebas_temuan_inspektorat': 'Dokumen Keterangan',\n    'surat_keterangan_anjab_abk_instansi_asal': 'Dokumen Keterangan',\n    'surat_keterangan_anjab_abk_instansi_penerima': 'Dokumen Keterangan',\n    'surat_pernyataan_tidak_hukuman_disiplin': 'Dokumen Pernyataan',\n    'surat_persetujuan_mutasi_asal': 'Dokumen Persetujuan',\n    'surat_lolos_butuh_ppk': 'Dokumen Persetujuan',\n    'peta_jabatan': 'Dokumen Pendukung',\n    'hasil_uji_kompetensi': 'Dokumen Pendukung',\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Dokumen Pendukung',\n    'anjab_abk_instansi_asal': 'Dokumen Pendukung',\n    'anjab_abk_instansi_penerima': 'Dokumen Pendukung',\n    'surat_keterangan_tidak_tugas_belajar': 'Dokumen Keterangan',\n    'sptjm_pimpinan_satker_asal': 'Dokumen Pernyataan',\n    'sptjm_pimpinan_satker_penerima': 'Dokumen Pernyataan',\n    'surat_rekomendasi_instansi_pembina': 'Dokumen Rekomendasi'\n  };\n  \n  return categoryMap[fileType] || 'Dokumen Lainnya';\n};\n\n// Helper function untuk menampilkan nama jabatan\nconst getJabatanDisplayName = (jenisJabatan: string): string => {\n  const jabatanMap: Record<string, string> = {\n    'guru': 'Guru',\n    'eselon_iv': 'Eselon IV',\n    'fungsional': 'Fungsional',\n    'pelaksana': 'Pelaksana'\n  };\n  \n  return jabatanMap[jenisJabatan] || jenisJabatan;\n};\n\nconst PengajuanFileUpload: React.FC = () => {\n  const { pengajuanId } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { token } = useAuth();\n  const [pengajuan, setPengajuan] = useState<PengajuanData | null>(null);\n  const [requiredFiles, setRequiredFiles] = useState<string[]>([]);\n  const [uploadingStates, setUploadingStates] = useState<Record<string, boolean>>({});\n  const [uploadProgress, setUploadProgress] = useState<Record<string, number>>({});\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [showSubmitDialog, setShowSubmitDialog] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [submitting, setSubmitting] = useState(false);\n  const [previewFile, setPreviewFile] = useState<PengajuanFile | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [replacingFile, setReplacingFile] = useState<string | null>(null);\n  \n  // Ref untuk file inputs\n  const fileInputRefs = useRef<Record<string, HTMLInputElement | null>>({});\n\n  // Ambil data jabatan dari state navigation jika ada\n  const jabatanData = location.state?.jabatan;\n  const requiredFilesFromState = location.state?.requiredFiles;\n  \n  // State untuk menyimpan data job type configuration\n  const [jobTypeConfig, setJobTypeConfig] = useState<any>(null);\n\n  useEffect(() => {\n    if (pengajuanId) {\n      fetchPengajuanData();\n    }\n  }, [pengajuanId]);\n\n  // Reset semua file input setiap kali komponen di-render\n  useEffect(() => {\n    const resetFileInputs = () => {\n      Object.values(fileInputRefs.current).forEach(input => {\n        if (input) {\n          input.value = '';\n        }\n      });\n    };\n    \n    // Reset setelah render\n    resetFileInputs();\n  });\n\n  const fetchPengajuanData = async () => {\n    try {\n      setLoading(true);\n      const response = await apiGet(`/api/pengajuan/${pengajuanId}`, token);\n      if (response.success) {\n        setPengajuan(response.data.pengajuan);\n        \n        // Prioritas 1: Gunakan requiredFiles dari state navigation (jika ada)\n        if (requiredFilesFromState && requiredFilesFromState.length > 0) {\n          setRequiredFiles(requiredFilesFromState);\n          // Set job type config dari state navigation jika ada\n          if (jabatanData) {\n            setJobTypeConfig(jabatanData);\n          }\n        }\n        // Prioritas 2: Gunakan requiredFiles dari response API\n        else if (response.data.requiredFiles && response.data.requiredFiles.length > 0) {\n          setRequiredFiles(response.data.requiredFiles);\n        }\n        // Prioritas 3: Ambil dari job type configuration berdasarkan jabatan_id\n        else if (response.data.pengajuan.jabatan_id) {\n          try {\n            const jobTypeResponse = await apiGet(`/api/job-type-configurations/${response.data.pengajuan.jabatan_id}`, token);\n            if (jobTypeResponse.success && jobTypeResponse.data.required_files) {\n              // required_files sudah di-parse di backend\n              setRequiredFiles(jobTypeResponse.data.required_files);\n              setJobTypeConfig(jobTypeResponse.data);\n            } else {\n              // Fallback: gunakan required files default berdasarkan jenis jabatan\n              setRequiredFiles(getDefaultRequiredFiles(response.data.pengajuan.jenis_jabatan));\n            }\n          } catch (jobTypeError) {\n            console.error('Error fetching job type configuration:', jobTypeError);\n            // Fallback: gunakan required files default berdasarkan jenis jabatan\n            setRequiredFiles(getDefaultRequiredFiles(response.data.pengajuan.jenis_jabatan));\n          }\n        } else {\n          // Fallback: gunakan required files default berdasarkan jenis jabatan\n          setRequiredFiles(getDefaultRequiredFiles(response.data.pengajuan.jenis_jabatan));\n        }\n      } else {\n        setError(response.message || 'Gagal mengambil data pengajuan');\n      }\n    } catch (error) {\n      console.error('Error fetching pengajuan data:', error);\n      setError('Terjadi kesalahan saat mengambil data pengajuan');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Helper function untuk mendapatkan required files default berdasarkan jenis jabatan\n  const getDefaultRequiredFiles = (jenisJabatan: string): string[] => {\n    // Fallback ke fungsional umum jika tidak ada konfigurasi spesifik\n    const fungsionalUmum = [\n      'surat_pengantar',\n      'surat_permohonan_dari_yang_bersangkutan',\n      'surat_keputusan_cpns',\n      'surat_keputusan_pns',\n      'surat_keputusan_kenaikan_pangkat_terakhir',\n      'surat_keputusan_jabatan_terakhir',\n      'skp_2_tahun_terakhir',\n      'surat_keterangan_bebas_temuan_inspektorat'\n    ];\n    \n    const defaultFiles: Record<string, string[]> = {\n      'guru': [\n        'surat_pengantar',\n        'surat_permohonan_dari_yang_bersangkutan',\n        'surat_keputusan_cpns',\n        'surat_keputusan_pns',\n        'surat_keputusan_kenaikan_pangkat_terakhir',\n        'surat_keputusan_jabatan_terakhir',\n        'skp_2_tahun_terakhir',\n        'surat_keterangan_bebas_temuan_inspektorat'\n      ],\n      'eselon_iv': [\n        'surat_pengantar',\n        'surat_permohonan_dari_yang_bersangkutan',\n        'surat_keputusan_cpns',\n        'surat_keputusan_pns',\n        'surat_keputusan_kenaikan_pangkat_terakhir',\n        'surat_keputusan_jabatan_terakhir',\n        'skp_2_tahun_terakhir',\n        'surat_keterangan_bebas_temuan_inspektorat',\n        'surat_keterangan_anjab_abk_instansi_asal',\n        'surat_keterangan_anjab_abk_instansi_penerima'\n      ],\n      'fungsional': fungsionalUmum,\n      'pelaksana': [\n        'surat_pengantar',\n        'surat_permohonan_dari_yang_bersangkutan',\n        'surat_keputusan_cpns',\n        'surat_keputusan_pns',\n        'surat_keputusan_kenaikan_pangkat_terakhir',\n        'surat_keputusan_jabatan_terakhir',\n        'skp_2_tahun_terakhir'\n      ]\n    };\n    \n    return defaultFiles[jenisJabatan] || fungsionalUmum;\n  };\n\n  const handleFileUpload = async (fileType: string, file: File) => {\n    // Validasi ukuran file: default 500KB, khusus SKP 2 Tahun Terakhir 1MB\n    const maxSize = fileType === 'skp_2_tahun_terakhir' ? 1024 * 1024 : 500 * 1024;\n    if (file.size > maxSize) {\n      const humanMax = maxSize === 1024 * 1024 ? '1MB' : '500KB';\n      setError(`File terlalu besar. Maksimal ${humanMax}. Ukuran file: ${(file.size / 1024).toFixed(1)}KB`);\n      return;\n    }\n\n    setUploadingStates(prev => ({ ...prev, [fileType]: true }));\n    setUploadProgress(prev => ({ ...prev, [fileType]: 0 }));\n\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('file_type', fileType);\n\n    try {\n      // Simulate upload progress\n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => ({\n          ...prev,\n          [fileType]: Math.min(prev[fileType] + 10, 90)\n        }));\n      }, 200);\n\n      const response = await fetch(`/api/pengajuan/${pengajuanId}/upload`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n\n      clearInterval(progressInterval);\n      setUploadProgress(prev => ({ ...prev, [fileType]: 100 }));\n\n      if (response.ok) {\n        const result = await response.json();\n        if (result.success) {\n          // Refresh data setelah upload berhasil\n          await fetchPengajuanData();\n          setError(null);\n          // Reset file input setelah upload berhasil menggunakan ref\n          const fileInput = fileInputRefs.current[fileType];\n          if (fileInput) {\n            fileInput.value = '';\n          }\n        } else {\n          setError(result.message || 'Gagal upload file');\n        }\n      } else {\n        setError('Gagal upload file');\n      }\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setError('Terjadi kesalahan saat upload file');\n    } finally {\n      setUploadingStates(prev => ({ ...prev, [fileType]: false }));\n      setReplacingFile(null);\n      // Reset file input di finally untuk memastikan selalu ter-reset menggunakan ref\n      const fileInput = fileInputRefs.current[fileType];\n      if (fileInput) {\n        fileInput.value = '';\n      }\n    }\n  };\n\n  const handleSubmitPengajuan = async () => {\n    try {\n      setSubmitting(true);\n      const response = await apiPut(`/api/pengajuan/${pengajuanId}/submit`, { catatan: '' }, token);\n      if (response.success) {\n        setShowSuccessModal(true);\n      } else {\n        setError(response.message || 'Gagal submit pengajuan');\n      }\n    } catch (error) {\n      console.error('Error submitting pengajuan:', error);\n      setError('Terjadi kesalahan saat submit pengajuan');\n    } finally {\n      setSubmitting(false);\n      setShowSubmitDialog(false);\n    }\n  };\n\n  const handlePreviewFile = async (file: PengajuanFile) => {\n    try {\n      // Fetch file dengan token authorization\n      const response = await fetch(`/api/pengajuan/files/${file.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Gagal mengambil file');\n      }\n      \n      // Convert ke blob\n      const blob = await response.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      \n      // Set preview file dengan blob URL\n      setPreviewFile({\n        ...file,\n        blobUrl: blobUrl\n      });\n      setShowPreview(true);\n    } catch (error) {\n      console.error('Error previewing file:', error);\n      setError('Gagal preview file. Silakan coba lagi.');\n    }\n  };\n\n  const handleDownloadFile = (file: PengajuanFile) => {\n    window.open(`/api/pengajuan/files/${file.id}`, '_blank');\n  };\n\n  const handleReplaceFile = (fileType: string) => {\n    setReplacingFile(fileType);\n  };\n\n  const isAllFilesUploaded = () => {\n    return requiredFiles.every(fileType => {\n      return pengajuan?.files.some(f => f.file_type === fileType);\n    });\n  };\n\n  const getFileStatus = (fileType: string) => {\n    return pengajuan?.files.some(f => f.file_type === fileType) ? 'uploaded' : 'pending';\n  };\n\n  const getFileSize = (bytes: number) => {\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  // Group files by category\n  const groupedFiles = requiredFiles.reduce((acc, fileType) => {\n    const category = getFileCategory(fileType);\n    if (!acc[category]) {\n      acc[category] = [];\n    }\n    acc[category].push(fileType);\n    return acc;\n  }, {} as Record<string, string[]>);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card>\n          <CardContent className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"h-8 w-8 animate-spin\" />\n            <span className=\"ml-2\">Memuat data pengajuan...</span>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!pengajuan) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card>\n          <CardContent className=\"flex items-center justify-center py-12\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <span className=\"ml-2 text-red-600\">Pengajuan tidak ditemukan</span>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Upload Berkas Pengajuan Mutasi PNS</CardTitle>\n          <div className=\"text-sm text-gray-600\">\n            {pengajuan.pegawai.nama} - {pengajuan.pegawai.jabatan}\n          </div>\n          <div className=\"text-sm text-gray-500\">\n            Jenis Jabatan: {getJabatanDisplayName(pengajuan.jenis_jabatan)}\n          </div>\n          <div className=\"text-sm text-gray-500\">\n            Total Dokumen: {jobTypeConfig ? jobTypeConfig.max_dokumen : requiredFiles.length} surat\n          </div>\n        </CardHeader>\n        <CardContent>\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-red-600\">{error}</p>\n            </div>\n          )}\n\n          {/* File Upload Sections by Category */}\n          {requiredFiles.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <p className=\"text-gray-500 mb-2\">Tidak ada dokumen yang diperlukan</p>\n              <p className=\"text-sm text-gray-400\">Silakan hubungi admin untuk mengkonfigurasi dokumen yang diperlukan</p>\n            </div>\n          ) : (\n            Object.entries(groupedFiles).map(([category, fileTypes]) => (\n            <div key={category} className=\"mb-8\">\n              <h3 className=\"text-lg font-semibold mb-4 text-gray-800 border-b pb-2\">\n                {category}\n              </h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {fileTypes.map((fileType) => {\n                  const status = getFileStatus(fileType);\n                  const isUploading = uploadingStates[fileType];\n                  const progress = uploadProgress[fileType];\n                  const uploadedFile = pengajuan.files.find(f => f.file_type === fileType);\n                  const isReplacing = replacingFile === fileType;\n\n                  return (\n                    <div key={fileType} className=\"border rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-sm leading-tight\">{getFileDisplayName(fileType)}</h4>\n                          <p className=\"text-xs text-gray-600 mt-1\">\n                            Upload file PDF (maks. {fileType === 'skp_2_tahun_terakhir' ? '1MB' : '500KB'})\n                          </p>\n                        </div>\n                        <Badge \n                          variant={status === 'uploaded' ? 'secondary' : 'secondary'}\n                          className={status === 'uploaded' ? 'bg-green-600 text-white hover:bg-green-700' : ''}\n                        >\n                          {status === 'uploaded' ? (\n                            <CheckCircle className=\"h-3 w-3 mr-1\" />\n                          ) : (\n                            <FileText className=\"h-3 w-3 mr-1\" />\n                          )}\n                          {status === 'uploaded' ? 'Uploaded' : 'Pending'}\n                        </Badge>\n                      </div>\n\n                      {status === 'uploaded' && uploadedFile && !isReplacing ? (\n                        <div className=\"space-y-3\">\n                          <div className=\"text-sm text-green-600\">\n                            <div className=\"flex items-center gap-2\">\n                              <CheckCircle className=\"h-4 w-4\" />\n                              <span className=\"truncate\">{uploadedFile.file_name}</span>\n                              <span className=\"text-gray-500 text-xs\">({getFileSize(uploadedFile.file_size)})</span>\n                            </div>\n                          </div>\n                          <div className=\"flex gap-2 flex-wrap\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => handlePreviewFile(uploadedFile)}\n                              className=\"flex items-center gap-1\"\n                            >\n                              <Eye className=\"h-3 w-3\" />\n                              Preview\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => handleDownloadFile(uploadedFile)}\n                              className=\"flex items-center gap-1\"\n                            >\n                              <Download className=\"h-3 w-3\" />\n                              Download\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => handleReplaceFile(fileType)}\n                              className=\"flex items-center gap-1\"\n                            >\n                              <Edit className=\"h-3 w-3\" />\n                              Ganti File\n                            </Button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div>\n                          <input\n                            ref={(el) => fileInputRefs.current[fileType] = el}\n                            type=\"file\"\n                            accept=\".pdf\"\n                            onChange={(e) => {\n                              const file = e.target.files?.[0];\n                              if (file) {\n                                handleFileUpload(fileType, file);\n                                // Reset file input setelah file dipilih\n                                e.target.value = '';\n                              }\n                            }}\n                            disabled={isUploading}\n                            className=\"hidden\"\n                            id={`file-${toSafeId(fileType)}`}\n                          />\n                          <label\n                            htmlFor={`file-${toSafeId(fileType)}`}\n                            className=\"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50\"\n                          >\n                            <Upload className=\"h-4 w-4 mr-2\" />\n                            {isUploading ? 'Uploading...' : isReplacing ? 'Pilih File Baru' : 'Pilih File'}\n                          </label>\n                          {isReplacing && (\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={() => setReplacingFile(null)}\n                              className=\"ml-2 text-gray-500\"\n                            >\n                              <X className=\"h-3 w-3 mr-1\" />\n                              Batal\n                            </Button>\n                          )}\n                        </div>\n                      )}\n\n                      {isUploading && (\n                        <div className=\"mt-2\">\n                          <Progress value={progress} className=\"h-2\" />\n                          <p className=\"text-xs text-gray-500 mt-1\">{progress}% uploaded</p>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          ))\n          )}\n\n          {requiredFiles.length > 0 && (\n            <div className=\"mt-8 pt-6 border-t\">\n              <Button\n                onClick={() => setShowSubmitDialog(true)}\n                disabled={!isAllFilesUploaded() || submitting}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n                size=\"lg\"\n              >\n                <Send className=\"h-4 w-4 mr-2\" />\n                Submit Pengajuan\n              </Button>\n              {!isAllFilesUploaded() && (\n                <p className=\"text-sm text-gray-500 mt-2 text-center\">\n                  Semua berkas harus diupload sebelum dapat submit\n                </p>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Submit Confirmation Dialog */}\n      <AlertDialog open={showSubmitDialog} onOpenChange={setShowSubmitDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Submit Pengajuan</AlertDialogTitle>\n            <AlertDialogDescription>\n              Apakah Anda yakin ingin submit pengajuan ini? Setelah disubmit, pengajuan tidak dapat diedit lagi dan akan diproses oleh admin.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel disabled={submitting}>Batal</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleSubmitPengajuan}\n              disabled={submitting}\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              {submitting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Submitting...\n                </>\n              ) : (\n                'Submit Pengajuan'\n              )}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Success Modal */}\n      <Dialog open={showSuccessModal} onOpenChange={setShowSuccessModal}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Pengajuan Berhasil!</DialogTitle>\n          </DialogHeader>\n          <div className=\"text-center py-6\">\n            <CheckCircle className=\"h-16 w-16 text-green-500 mx-auto mb-4\" />\n            <p className=\"text-lg font-medium mb-2\">\n              Pengajuan untuk {pengajuan.pegawai.nama} berhasil disubmit\n            </p>\n            <p className=\"text-gray-600 mb-6\">\n              Pengajuan akan diproses oleh admin. Anda akan mendapat notifikasi ketika status berubah.\n            </p>\n            <div className=\"flex gap-3\">\n              <Button\n                onClick={() => navigate('/dashboard')}\n                className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\n              >\n                Kembali ke Dashboard\n              </Button>\n              <Button\n                onClick={() => navigate('/pengajuan/select')}\n                variant=\"outline\"\n                className=\"flex-1\"\n              >\n                Buat Pengajuan Baru\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Preview Modal */}\n      <Dialog open={showPreview} onOpenChange={(open) => {\n        setShowPreview(open);\n        // Cleanup blob URL when modal closes\n        if (!open && previewFile?.blobUrl) {\n          URL.revokeObjectURL(previewFile.blobUrl);\n        }\n      }}>\n        <DialogContent className=\"max-w-4xl\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center justify-between\">\n              <span>Preview File: {previewFile?.file_name}</span>\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"mt-4\">\n            {previewFile && (\n              <div className=\"border rounded-lg overflow-hidden bg-white\">\n                <div className=\"bg-green-600 text-white px-4 py-2 flex items-center justify-between\">\n                  <span className=\"font-medium\">{previewFile.file_name}</span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setShowPreview(false)}\n                    className=\"text-white hover:bg-green-700\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <iframe\n                  src={previewFile.blobUrl || `/api/pengajuan/files/${previewFile.id}`}\n                  className=\"w-full h-96 border-0\"\n                  title=\"File Preview\"\n                />\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default PengajuanFileUpload; "],"names":["toSafeId","raw","getFileDisplayName","fileType","getFileCategory","getJabatanDisplayName","jenisJabatan","PengajuanFileUpload","pengajuanId","useParams","navigate","useNavigate","location","useLocation","token","useAuth","pengajuan","setPengajuan","useState","requiredFiles","setRequiredFiles","uploadingStates","setUploadingStates","uploadProgress","setUploadProgress","showSuccessModal","setShowSuccessModal","showSubmitDialog","setShowSubmitDialog","loading","setLoading","error","setError","submitting","setSubmitting","previewFile","setPreviewFile","showPreview","setShowPreview","replacingFile","setReplacingFile","fileInputRefs","useRef","jabatanData","_a","requiredFilesFromState","_b","jobTypeConfig","setJobTypeConfig","useEffect","fetchPengajuanData","input","response","apiGet","jobTypeResponse","getDefaultRequiredFiles","jobTypeError","fungsionalUmum","handleFileUpload","file","maxSize","prev","formData","progressInterval","result","fileInput","handleSubmitPengajuan","apiPut","handlePreviewFile","blob","blobUrl","handleDownloadFile","handleReplaceFile","isAllFilesUploaded","f","getFileStatus","getFileSize","bytes","sizes","i","groupedFiles","acc","category","jsx","Card","jsxs","CardContent","Loader2","CardHeader","CardTitle","FileText","fileTypes","status","isUploading","progress","uploadedFile","isReplacing","Badge","CheckCircle","Button","Eye","Download","Edit","el","e","Upload","X","Progress","Send","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Fragment","Dialog","DialogContent","DialogHeader","DialogTitle","open","AlertCircle"],"mappings":"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"}