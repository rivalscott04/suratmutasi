{"version":3,"file":"SuperadminTracking-BDKUPGzW.js","sources":["../../src/pages/SuperadminTracking.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet } from '@/lib/api';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Table, TableHeader, TableBody, TableRow, TableHead, TableCell } from '@/components/ui/table';\r\nimport { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from '@/components/ui/select';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\r\nimport { \r\n  Search, \r\n  Calendar, \r\n  Clock, \r\n  FileText, \r\n  User, \r\n  Building2,\r\n  Eye,\r\n  Loader2,\r\n  TrendingUp,\r\n  CheckCircle,\r\n  AlertCircle,\r\n  Timer\r\n} from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { PageHeader } from '@/components/PageHeader';\r\n\r\ninterface TrackingRecord {\r\n  id: string;\r\n  status_name: string;\r\n  notes?: string;\r\n  estimated_days?: number;\r\n  actual_completion_date?: string;\r\n  created_at: string;\r\n  tracked_by_name: string;\r\n}\r\n\r\ninterface PengajuanData {\r\n  id: string;\r\n  pegawai_nip: string;\r\n  jenis_jabatan: string;\r\n  total_dokumen: number;\r\n  final_approved_at: string;\r\n  pegawai?: {\r\n    id?: string;\r\n    nip?: string;\r\n    nama?: string;\r\n  };\r\n  office?: {\r\n    id: string;\r\n    name: string;\r\n    kabkota: string;\r\n  };\r\n  tracking: TrackingRecord[];\r\n}\r\n\r\nconst AdminTrackingMonitor: React.FC = () => {\r\n  const { user, token } = useAuth();\r\n  const { toast } = useToast();\r\n  \r\n  const [pengajuan, setPengajuan] = useState<PengajuanData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [selectedJabatan, setSelectedJabatan] = useState<string>('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [selectedPengajuan, setSelectedPengajuan] = useState<PengajuanData | null>(null);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [stats, setStats] = useState({\r\n    tracked: 0,\r\n    completed: 0,\r\n    inProgress: 0,\r\n    overdue: 0\r\n  });\r\n\r\n  // Load data\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Check if user is superadmin (office_id === null) or regular admin\r\n      const isSuperadmin = user?.office_id === null;\r\n      const endpoint = isSuperadmin ? '/api/tracking/superadmin' : '/api/tracking/admin';\r\n      \r\n      const response = await apiGet(endpoint, token);\r\n      if (response.success) {\r\n        setPengajuan(response.data);\r\n        calculateStats(response.data);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading tracking data:', error);\r\n      toast({\r\n        title: 'Error',\r\n        description: 'Gagal memuat data tracking',\r\n        variant: 'destructive'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateStats = (data: PengajuanData[]) => {\r\n    let tracked = 0;\r\n    let completed = 0;\r\n    let inProgress = 0;\r\n    let overdue = 0;\r\n\r\n    data.forEach(p => {\r\n      if (p.tracking && p.tracking.length > 0) {\r\n        tracked++;\r\n        const latestTracking = p.tracking[0]; // Assuming sorted by created_at DESC\r\n        \r\n        if (latestTracking.status_name.includes('Selesai')) {\r\n          completed++;\r\n        } else {\r\n          inProgress++;\r\n          \r\n          // Check if overdue\r\n          if (latestTracking.estimated_days) {\r\n            const estimatedDate = new Date(latestTracking.created_at);\r\n            estimatedDate.setDate(estimatedDate.getDate() + latestTracking.estimated_days);\r\n            \r\n            if (new Date() > estimatedDate) {\r\n              overdue++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    setStats({ tracked, completed, inProgress, overdue });\r\n  };\r\n\r\n  const handleViewDetails = (pengajuanData: PengajuanData) => {\r\n    setSelectedPengajuan(pengajuanData);\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const filteredPengajuan = pengajuan.filter(p => {\r\n    const s = search.toLowerCase();\r\n    const matchesSearch =\r\n      p.pegawai_nip.toLowerCase().includes(s) ||\r\n      p.jenis_jabatan.toLowerCase().includes(s) ||\r\n      (p.office?.kabkota || '').toLowerCase().includes(s) ||\r\n      (p.pegawai?.nama || '').toLowerCase().includes(s);\r\n    const matchesJabatan = selectedJabatan === 'all' || p.jenis_jabatan === selectedJabatan;\r\n    return matchesSearch && matchesJabatan;\r\n  });\r\n\r\n  useEffect(() => {\r\n    // reset ke halaman pertama saat filter berubah\r\n    setCurrentPage(1);\r\n  }, [search, selectedJabatan]);\r\n\r\n  const uniqueJabatan = Array.from(new Set(pengajuan.map(p => p.jenis_jabatan))).sort();\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredPengajuan.length / pageSize));\r\n  const firstIndex = (currentPage - 1) * pageSize;\r\n  const lastIndex = firstIndex + pageSize;\r\n  const paginatedPengajuan = filteredPengajuan.slice(firstIndex, lastIndex);\r\n\r\n  const getStatusBadgeVariant = (statusName: string) => {\r\n    // kept for compatibility, not used for color anymore\r\n    return 'secondary';\r\n  };\r\n\r\n  const getStatusIcon = (statusName: string) => {\r\n    if (statusName.includes('Selesai')) return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\r\n    if (statusName.includes('Diproses')) return <Clock className=\"h-4 w-4 text-blue-600\" />;\r\n    if (statusName.includes('Disposisi')) return <TrendingUp className=\"h-4 w-4 text-orange-600\" />;\r\n    return <AlertCircle className=\"h-4 w-4 text-gray-600\" />;\r\n  };\r\n\r\n  const getStatusBadgeClasses = (statusName: string, overdue = false) => {\r\n    if (statusName.includes('Selesai')) return 'bg-green-100 text-green-700 border-green-200';\r\n    if (statusName.includes('Diproses')) return `bg-blue-100 text-blue-700 border-blue-200 ${overdue ? 'border-red-400 text-red-700' : ''}`;\r\n    if (statusName.includes('Disposisi')) return 'bg-orange-100 text-orange-700 border-orange-200';\r\n    if (statusName.includes('Menunggu')) return 'bg-yellow-100 text-yellow-700 border-yellow-200';\r\n    return 'bg-gray-100 text-gray-700 border-gray-200';\r\n  };\r\n\r\n  const isOverdue = (tracking: TrackingRecord) => {\r\n    if (!tracking.estimated_days) return false;\r\n    \r\n    const estimatedDate = new Date(tracking.created_at);\r\n    estimatedDate.setDate(estimatedDate.getDate() + tracking.estimated_days);\r\n    \r\n    return new Date() > estimatedDate && !tracking.status_name.includes('Selesai');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <PageHeader title=\"Tracking Dokumen\" subtitle=\"Monitor progress berkas di pusat\" />\r\n        <div className=\"space-y-4\">\r\n          {[...Array(5)].map((_, i) => (\r\n            <Card key={i}>\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"animate-pulse space-y-3\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-1/4\"></div>\r\n                  <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\r\n                  <div className=\"h-4 bg-gray-200 rounded w-1/3\"></div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <PageHeader \r\n        title=\"Tracking Dokumen\" \r\n        subtitle=\"Monitor progress berkas di pusat\" \r\n      />\r\n\r\n      {/* Stats Cards (tracking-focused) */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n        <Card>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center\">\r\n              <FileText className=\"h-8 w-8 text-blue-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Memiliki riwayat tracking</p>\r\n                <p className=\"text-2xl font-bold\">{stats.tracked}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        \r\n        <Card>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center\">\r\n              <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Selesai</p>\r\n                <p className=\"text-2xl font-bold\">{stats.completed}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        \r\n        <Card>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center\">\r\n              <Clock className=\"h-8 w-8 text-blue-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Dalam Proses</p>\r\n                <p className=\"text-2xl font-bold\">{stats.inProgress}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        \r\n        <Card>\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-center\">\r\n              <AlertCircle className=\"h-8 w-8 text-red-600\" />\r\n              <div className=\"ml-4\">\r\n                <p className=\"text-sm font-medium text-gray-600\">Terlambat</p>\r\n                <p className=\"text-2xl font-bold\">{stats.overdue}</p>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Search & Filter */}\r\n      <Card className=\"mb-6\">\r\n        <CardContent className=\"p-6\">\r\n          <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:gap-4\">\r\n            <div className=\"relative flex-1\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\r\n              <Input\r\n                placeholder=\"Cari NIP/Nama/Jabatan/Kabupaten...\"\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <div className=\"w-full md:w-64\">\r\n              <Select value={selectedJabatan} onValueChange={setSelectedJabatan}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Semua Jabatan\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">Semua Jabatan</SelectItem>\r\n                  {uniqueJabatan.map(j => (\r\n                    <SelectItem key={j} value={j}>{j}</SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Datatable */}\r\n      <Card>\r\n        <CardContent className=\"p-0\">\r\n          {filteredPengajuan.length === 0 ? (\r\n            <div className=\"p-6 text-center\">\r\n              <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-gray-500\">Tidak ada data tracking</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <Table>\r\n                <TableHeader>\r\n                  <TableRow>\r\n                    <TableHead>NIP</TableHead>\r\n                    <TableHead>Nama Pegawai</TableHead>\r\n                    <TableHead>Jabatan</TableHead>\r\n                    <TableHead>Kab/Kota</TableHead>\r\n                    <TableHead>Status Terakhir</TableHead>\r\n                    <TableHead>Estimasi</TableHead>\r\n                    <TableHead>Tgl Final</TableHead>\r\n                    <TableHead>Aksi</TableHead>\r\n                  </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                  {paginatedPengajuan.map((p) => {\r\n                    const latest = p.tracking && p.tracking.length > 0 ? p.tracking[0] : null;\r\n                    const finalDate = p.final_approved_at ? new Date(p.final_approved_at).toLocaleDateString('id-ID') : 'Belum ditentukan';\r\n                    return (\r\n                      <TableRow key={p.id}>\r\n                        <TableCell className=\"font-medium\">{p.pegawai_nip}</TableCell>\r\n                        <TableCell>{p.pegawai?.nama || '—'}</TableCell>\r\n                        <TableCell><Badge variant=\"outline\">{p.jenis_jabatan}</Badge></TableCell>\r\n                        <TableCell>{p.office?.kabkota || 'N/A'}</TableCell>\r\n                        <TableCell>\r\n                          {latest ? (\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {getStatusIcon(latest.status_name)}\r\n                              <Badge title={latest.status_name} className={`cursor-default hover:brightness-95 ${getStatusBadgeClasses(latest.status_name, isOverdue(latest))}`}>\r\n                                {latest.status_name}\r\n                              </Badge>\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-gray-500\">Belum ada</span>\r\n                          )}\r\n                        </TableCell>\r\n                        <TableCell>{latest?.estimated_days ? `${latest.estimated_days} hari` : '-'}</TableCell>\r\n                        <TableCell>{finalDate}</TableCell>\r\n                        <TableCell>\r\n                          <Button size=\"sm\" variant=\"outline\" className=\"flex items-center gap-2\" onClick={() => handleViewDetails(p)}>\r\n                            <Eye className=\"h-4 w-4\" /> Detail\r\n                          </Button>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Pagination */}\r\n      {filteredPengajuan.length > 0 && (\r\n        <div className=\"flex items-center justify-between mt-4\">\r\n          <div className=\"text-sm text-gray-600\">\r\n            Menampilkan {firstIndex + 1}-{Math.min(lastIndex, filteredPengajuan.length)} dari {filteredPengajuan.length}\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"flex items-center gap-2 text-sm text-gray-600 mr-2\">\r\n              <span>Tampilkan</span>\r\n              <Select value={String(pageSize)} onValueChange={(v) => { setPageSize(Number(v)); setCurrentPage(1); }}>\r\n                <SelectTrigger className=\"h-8 w-[84px]\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"10\">10</SelectItem>\r\n                  <SelectItem value=\"25\">25</SelectItem>\r\n                  <SelectItem value=\"50\">50</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n              <span>per halaman</span>\r\n            </div>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setCurrentPage(p => Math.max(1, p - 1))} disabled={currentPage === 1}>\r\n              Sebelumnya\r\n            </Button>\r\n            <span className=\"text-sm\">Hal {currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))} disabled={currentPage === totalPages}>\r\n              Berikutnya\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Detail Dialog */}\r\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\r\n          <DialogHeader>\r\n            <DialogTitle>Detail Tracking</DialogTitle>\r\n          </DialogHeader>\r\n          \r\n          {selectedPengajuan && (\r\n            <div className=\"space-y-6\">\r\n              {/* Pengajuan Info */}\r\n              <div className=\"p-4 bg-gray-50 rounded-lg\">\r\n                <div className=\"mb-2\">\r\n                  <h3 className=\"font-semibold text-xl leading-tight\">{selectedPengajuan.pegawai?.nama || '-'}</h3>\r\n                  <div className=\"text-xs text-gray-500 mt-1 font-mono\">NIP: {selectedPengajuan.pegawai_nip}</div>\r\n                </div>\r\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                  <div>\r\n                    <span className=\"font-medium\">Jenis Jabatan:</span>\r\n                    <p className=\"text-gray-600\">{selectedPengajuan.jenis_jabatan}</p>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"font-medium\">Kabupaten/Kota:</span>\r\n                    <p className=\"text-gray-600\">{selectedPengajuan.office?.kabkota || 'N/A'}</p>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"font-medium\">Total Dokumen:</span>\r\n                    <p className=\"text-gray-600\">{selectedPengajuan.total_dokumen}</p>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"font-medium\">Final Approved:</span>\r\n                    <p className=\"text-gray-600\">\r\n                      {selectedPengajuan.final_approved_at ? new Date(selectedPengajuan.final_approved_at).toLocaleDateString('id-ID') : 'Belum ditentukan'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tracking History */}\r\n              {selectedPengajuan.tracking && selectedPengajuan.tracking.length > 0 ? (\r\n                <div>\r\n                  <h4 className=\"font-semibold mb-4\">Riwayat Tracking</h4>\r\n                  <div className=\"relative pl-6\">\r\n                    <div className=\"absolute left-2 top-0 bottom-0 w-px bg-gray-200\" />\r\n                    <div className=\"space-y-6\">\r\n                      {selectedPengajuan.tracking.map((track) => (\r\n                        <div key={track.id} className=\"relative\">\r\n                          <div className=\"absolute -left-[7px] top-1 h-3 w-3 rounded-full bg-green-600 ring-2 ring-white\" />\r\n                          <div className=\"rounded-md border p-3\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                              {getStatusIcon(track.status_name)}\r\n                              <Badge title={track.status_name} className={`cursor-default hover:brightness-95 ${getStatusBadgeClasses(track.status_name, isOverdue(track))}`}>\r\n                                {track.status_name}\r\n                              </Badge>\r\n                              {isOverdue(track) && (\r\n                                <Badge variant=\"destructive\" className=\"text-xs\">\r\n                                  <Timer className=\"h-3 w-3 mr-1\" /> Terlambat\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-600 flex flex-wrap gap-4\">\r\n                              <div className=\"flex items-center gap-1\"><User className=\"h-3 w-3\" />{track.tracked_by_name}</div>\r\n                              <div className=\"flex items-center gap-1\"><Calendar className=\"h-3 w-3\" />{new Date(track.created_at).toLocaleString('id-ID')}</div>\r\n                              {track.estimated_days && (\r\n                                <div className=\"flex items-center gap-1\"><Clock className=\"h-3 w-3\" />Estimasi: {track.estimated_days} hari</div>\r\n                              )}\r\n                            </div>\r\n                            {track.notes && (\r\n                              <div className=\"mt-2 text-sm text-gray-700\">{track.notes}</div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8\">\r\n                  <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-500\">Belum ada tracking untuk berkas ini</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminTrackingMonitor;\r\n"],"names":["AdminTrackingMonitor","user","token","useAuth","toast","useToast","pengajuan","setPengajuan","useState","loading","setLoading","search","setSearch","selectedJabatan","setSelectedJabatan","currentPage","setCurrentPage","pageSize","setPageSize","selectedPengajuan","setSelectedPengajuan","isDialogOpen","setIsDialogOpen","stats","setStats","useEffect","loadData","endpoint","response","apiGet","calculateStats","error","data","tracked","completed","inProgress","overdue","p","latestTracking","estimatedDate","handleViewDetails","pengajuanData","filteredPengajuan","matchesSearch","_a","_b","matchesJabatan","uniqueJabatan","totalPages","firstIndex","lastIndex","paginatedPengajuan","getStatusIcon","statusName","jsx","CheckCircle","Clock","TrendingUp","AlertCircle","getStatusBadgeClasses","isOverdue","tracking","jsxs","PageHeader","_","i","Card","CardContent","FileText","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","j","Table","TableHeader","TableRow","TableHead","TableBody","latest","finalDate","TableCell","Badge","Button","Eye","v","Dialog","DialogContent","DialogHeader","DialogTitle","track","Timer","User","Calendar"],"mappings":"2gBAwDA,MAAMA,GAAiC,IAAM,SAC3C,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAIC,GAAQ,EAC1B,CAAE,MAAAC,GAAUC,KAEZ,CAACC,EAAWC,CAAY,EAAIC,EAAA,SAA0B,CAAE,CAAA,EACxD,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACG,EAAQC,CAAS,EAAIJ,WAAS,EAAE,EACjC,CAACK,EAAiBC,CAAkB,EAAIN,WAAiB,KAAK,EAC9D,CAACO,EAAaC,CAAc,EAAIR,WAAS,CAAC,EAC1C,CAACS,EAAUC,CAAW,EAAIV,WAAS,EAAE,EACrC,CAACW,EAAmBC,EAAoB,EAAIZ,WAA+B,IAAI,EAC/E,CAACa,GAAcC,CAAe,EAAId,WAAS,EAAK,EAChD,CAACe,EAAOC,EAAQ,EAAIhB,WAAS,CACjC,QAAS,EACT,UAAW,EACX,WAAY,EACZ,QAAS,CAAA,CACV,EAGDiB,EAAAA,UAAU,IAAM,CACLC,IACX,EAAG,CAAE,CAAA,EAEL,MAAMA,GAAW,SAAY,CACvB,GAAA,CACFhB,EAAW,EAAI,EAIT,MAAAiB,GADe1B,GAAA,YAAAA,EAAM,aAAc,KACT,2BAA6B,sBAEvD2B,EAAW,MAAMC,GAAOF,EAAUzB,CAAK,EACzC0B,EAAS,UACXrB,EAAaqB,EAAS,IAAI,EAC1BE,GAAeF,EAAS,IAAI,SAGvBG,EAAO,CACN,QAAA,MAAM,+BAAgCA,CAAK,EAC7C3B,EAAA,CACJ,MAAO,QACP,YAAa,6BACb,QAAS,aAAA,CACV,CAAA,QACD,CACAM,EAAW,EAAK,CAClB,CAAA,EAGIoB,GAAkBE,GAA0B,CAChD,IAAIC,EAAU,EACVC,EAAY,EACZC,EAAa,EACbC,EAAU,EAEdJ,EAAK,QAAaK,GAAA,CAChB,GAAIA,EAAE,UAAYA,EAAE,SAAS,OAAS,EAAG,CACvCJ,IACM,MAAAK,EAAiBD,EAAE,SAAS,CAAC,EAEnC,GAAIC,EAAe,YAAY,SAAS,SAAS,EAC/CJ,YAEAC,IAGIG,EAAe,eAAgB,CACjC,MAAMC,EAAgB,IAAI,KAAKD,EAAe,UAAU,EACxDC,EAAc,QAAQA,EAAc,QAAQ,EAAID,EAAe,cAAc,EAEzE,IAAI,KAASC,GACfH,GAEJ,CAEJ,CAAA,CACD,EAEDZ,GAAS,CAAE,QAAAS,EAAS,UAAAC,EAAW,WAAAC,EAAY,QAAAC,CAAS,CAAA,CAAA,EAGhDI,GAAqBC,GAAiC,CAC1DrB,GAAqBqB,CAAa,EAClCnB,EAAgB,EAAI,CAAA,EAGhBoB,EAAoBpC,EAAU,OAAY+B,GAAA,SACxC,MAAA,EAAI1B,EAAO,cACXgC,EACJN,EAAE,YAAY,YAAc,EAAA,SAAS,CAAC,GACtCA,EAAE,cAAc,YAAY,EAAE,SAAS,CAAC,MACvCO,EAAAP,EAAE,SAAF,YAAAO,EAAU,UAAW,IAAI,YAAY,EAAE,SAAS,CAAC,MACjDC,EAAAR,EAAE,UAAF,YAAAQ,EAAW,OAAQ,IAAI,YAAY,EAAE,SAAS,CAAC,EAC5CC,EAAiBjC,IAAoB,OAASwB,EAAE,gBAAkBxB,EACxE,OAAO8B,GAAiBG,CAAA,CACzB,EAEDrB,EAAAA,UAAU,IAAM,CAEdT,EAAe,CAAC,CAAA,EACf,CAACL,EAAQE,CAAe,CAAC,EAE5B,MAAMkC,GAAgB,MAAM,KAAK,IAAI,IAAIzC,EAAU,IAAI+B,GAAKA,EAAE,aAAa,CAAC,CAAC,EAAE,KAAK,EAE9EW,EAAa,KAAK,IAAI,EAAG,KAAK,KAAKN,EAAkB,OAASzB,CAAQ,CAAC,EACvEgC,GAAclC,EAAc,GAAKE,EACjCiC,EAAYD,EAAahC,EACzBkC,GAAqBT,EAAkB,MAAMO,EAAYC,CAAS,EAOlEE,EAAiBC,GACjBA,EAAW,SAAS,SAAS,EAAWC,MAAAC,EAAA,CAAY,UAAU,wBAAyB,CAAA,EACvFF,EAAW,SAAS,UAAU,EAAWC,MAAAE,EAAA,CAAM,UAAU,uBAAwB,CAAA,EACjFH,EAAW,SAAS,WAAW,EAAWC,MAAAG,GAAA,CAAW,UAAU,yBAA0B,CAAA,EACtFH,EAAA,IAACI,EAAY,CAAA,UAAU,uBAAwB,CAAA,EAGlDC,EAAwB,CAACN,EAAoBjB,EAAU,KACvDiB,EAAW,SAAS,SAAS,EAAU,+CACvCA,EAAW,SAAS,UAAU,EAAU,6CAA6CjB,EAAU,8BAAgC,EAAE,GACjIiB,EAAW,SAAS,WAAW,EAAU,kDACzCA,EAAW,SAAS,UAAU,EAAU,kDACrC,4CAGHO,EAAaC,GAA6B,CAC1C,GAAA,CAACA,EAAS,eAAuB,MAAA,GAErC,MAAMtB,EAAgB,IAAI,KAAKsB,EAAS,UAAU,EAClD,OAAAtB,EAAc,QAAQA,EAAc,QAAQ,EAAIsB,EAAS,cAAc,EAEhE,IAAI,KAAStB,GAAiB,CAACsB,EAAS,YAAY,SAAS,SAAS,CAAA,EAG/E,OAAIpD,EAEAqD,EAAA,KAAC,MAAI,CAAA,UAAU,wBACb,SAAA,CAAAR,EAAA,IAACS,EAAW,CAAA,MAAM,mBAAmB,SAAS,mCAAmC,EACjFT,EAAAA,IAAC,OAAI,UAAU,YACZ,UAAC,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI,CAACU,EAAGC,IACpBX,EAAAA,IAAAY,EAAA,CACC,SAACZ,EAAAA,IAAAa,EAAA,CAAY,UAAU,MACrB,SAAAL,EAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACR,EAAAA,IAAA,MAAA,CAAI,UAAU,+BAAgC,CAAA,EAC/CA,EAAAA,IAAC,MAAI,CAAA,UAAU,+BAAgC,CAAA,EAC/CA,EAAAA,IAAC,MAAI,CAAA,UAAU,+BAAgC,CAAA,CAAA,CAAA,CACjD,CACF,CAAA,CAAA,EAPSW,CAQX,CACD,CACH,CAAA,CACF,CAAA,CAAA,EAKFH,EAAA,KAAC,MAAI,CAAA,UAAU,wBACb,SAAA,CAAAR,EAAA,IAACS,EAAA,CACC,MAAM,mBACN,SAAS,kCAAA,CACX,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAACR,EAAA,IAAAY,EAAA,CACC,eAACC,EAAY,CAAA,UAAU,MACrB,SAACL,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACR,EAAAA,IAAAc,EAAA,CAAS,UAAU,uBAAwB,CAAA,EAC5CN,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACR,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAyB,4BAAA,EACzEA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAsB,WAAM,QAAQ,CAAA,EACnD,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAEAA,EAAA,IAACY,GACC,SAACZ,EAAAA,IAAAa,EAAA,CAAY,UAAU,MACrB,SAAAL,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACR,EAAAA,IAAAC,EAAA,CAAY,UAAU,wBAAyB,CAAA,EAChDO,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACR,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAO,UAAA,EACvDA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAsB,WAAM,UAAU,CAAA,EACrD,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAEAA,EAAA,IAACY,GACC,SAACZ,EAAAA,IAAAa,EAAA,CAAY,UAAU,MACrB,SAAAL,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACR,EAAAA,IAAAE,EAAA,CAAM,UAAU,uBAAwB,CAAA,EACzCM,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACR,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAY,eAAA,EAC5DA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAsB,WAAM,WAAW,CAAA,EACtD,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAEAA,EAAA,IAACY,GACC,SAACZ,EAAAA,IAAAa,EAAA,CAAY,UAAU,MACrB,SAAAL,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACR,EAAAA,IAAAI,EAAA,CAAY,UAAU,sBAAuB,CAAA,EAC9CI,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACR,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAS,YAAA,EACzDA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAsB,WAAM,QAAQ,CAAA,EACnD,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,EACF,EAGAA,EAAA,IAACY,EAAK,CAAA,UAAU,OACd,SAAAZ,EAAA,IAACa,EAAY,CAAA,UAAU,MACrB,SAAAL,OAAC,MAAI,CAAA,UAAU,2DACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,kBACb,SAAA,CAACR,EAAAA,IAAAe,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7Ff,EAAA,IAACgB,GAAA,CACC,YAAY,qCACZ,MAAO3D,EACP,SAAW4D,GAAM3D,EAAU2D,EAAE,OAAO,KAAK,EACzC,UAAU,OAAA,CACZ,CAAA,EACF,EACAjB,EAAAA,IAAC,OAAI,UAAU,iBACb,gBAACkB,EAAO,CAAA,MAAO3D,EAAiB,cAAeC,EAC7C,SAAA,CAAAwC,MAACmB,EACC,CAAA,SAAAnB,EAAA,IAACoB,EAAY,CAAA,YAAY,eAAgB,CAAA,EAC3C,SACCC,EACC,CAAA,SAAA,CAACrB,EAAA,IAAAsB,EAAA,CAAW,MAAM,MAAM,SAAa,gBAAA,EACpC7B,GAAc,IACb8B,GAAAvB,EAAA,IAACsB,GAAmB,MAAOC,EAAI,SAAdA,CAAA,EAAAA,CAAgB,CAClC,CAAA,EACH,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGCvB,EAAA,IAAAY,EAAA,CACC,SAACZ,EAAA,IAAAa,EAAA,CAAY,UAAU,MACpB,SAAkBzB,EAAA,SAAW,EAC5BoB,EAAA,KAAC,MAAI,CAAA,UAAU,kBACb,SAAA,CAACR,EAAAA,IAAAc,EAAA,CAAS,UAAU,sCAAuC,CAAA,EAC1Dd,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAuB,0BAAA,CAAA,CAAA,CACtD,EAECA,EAAAA,IAAA,MAAA,CAAI,UAAU,kBACb,gBAACwB,GACC,CAAA,SAAA,CAACxB,EAAA,IAAAyB,GAAA,CACC,gBAACC,EACC,CAAA,SAAA,CAAA1B,EAAAA,IAAC2B,GAAU,SAAG,KAAA,CAAA,EACd3B,EAAAA,IAAC2B,GAAU,SAAY,cAAA,CAAA,EACvB3B,EAAAA,IAAC2B,GAAU,SAAO,SAAA,CAAA,EAClB3B,EAAAA,IAAC2B,GAAU,SAAQ,UAAA,CAAA,EACnB3B,EAAAA,IAAC2B,GAAU,SAAe,iBAAA,CAAA,EAC1B3B,EAAAA,IAAC2B,GAAU,SAAQ,UAAA,CAAA,EACnB3B,EAAAA,IAAC2B,GAAU,SAAS,WAAA,CAAA,EACpB3B,EAAAA,IAAC2B,GAAU,SAAI,MAAA,CAAA,CAAA,CAAA,CACjB,CACF,CAAA,EACC3B,EAAA,IAAA4B,GAAA,CACE,SAAmB/B,GAAA,IAAKd,GAAM,SACvB,MAAA8C,EAAS9C,EAAE,UAAYA,EAAE,SAAS,OAAS,EAAIA,EAAE,SAAS,CAAC,EAAI,KAC/D+C,EAAY/C,EAAE,kBAAoB,IAAI,KAAKA,EAAE,iBAAiB,EAAE,mBAAmB,OAAO,EAAI,mBACpG,cACG2C,EACC,CAAA,SAAA,CAAA1B,EAAA,IAAC+B,EAAU,CAAA,UAAU,cAAe,SAAAhD,EAAE,YAAY,EACjDiB,EAAA,IAAA+B,EAAA,CAAW,WAAEzC,EAAAP,EAAA,UAAA,YAAAO,EAAS,OAAQ,IAAI,EACnCU,EAAAA,IAAC+B,GAAU,SAAC/B,EAAAA,IAAAgC,EAAA,CAAM,QAAQ,UAAW,SAAAjD,EAAE,cAAc,CAAQ,CAAA,EAC5DiB,EAAA,IAAA+B,EAAA,CAAW,WAAExC,EAAAR,EAAA,SAAA,YAAAQ,EAAQ,UAAW,MAAM,QACtCwC,EACE,CAAA,SAAAF,EACErB,OAAA,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAV,EAAc+B,EAAO,WAAW,QAChCG,EAAM,CAAA,MAAOH,EAAO,YAAa,UAAW,sCAAsCxB,EAAsBwB,EAAO,YAAavB,EAAUuB,CAAM,CAAC,CAAC,GAC5I,WAAO,YACV,CAAA,EACF,EAEC7B,MAAA,OAAA,CAAK,UAAU,gBAAgB,oBAAS,CAAA,EAE7C,EACAA,EAAAA,IAAC+B,GAAW,SAAQF,GAAA,MAAAA,EAAA,eAAiB,GAAGA,EAAO,cAAc,QAAU,GAAI,CAAA,EAC3E7B,EAAAA,IAAC+B,GAAW,SAAUD,CAAA,CAAA,EACrB9B,EAAA,IAAA+B,EAAA,CACC,SAACvB,EAAA,KAAAyB,EAAA,CAAO,KAAK,KAAK,QAAQ,UAAU,UAAU,0BAA0B,QAAS,IAAM/C,GAAkBH,CAAC,EACxG,SAAA,CAACiB,EAAAA,IAAAkC,GAAA,CAAI,UAAU,SAAU,CAAA,EAAE,SAAA,CAAA,CAC7B,CACF,CAAA,CAAA,GAvBanD,EAAE,EAwBjB,CAEH,CAAA,EACH,CAAA,EACF,CAAA,CACF,CAEJ,CAAA,EACF,EAGCK,EAAkB,OAAS,GACzBoB,EAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,eACxBb,EAAa,EAAE,IAAE,KAAK,IAAIC,EAAWR,EAAkB,MAAM,EAAE,SAAOA,EAAkB,MAAA,EACvG,EACAoB,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAR,EAAAA,IAAC,QAAK,SAAS,WAAA,CAAA,EACfQ,OAACU,GAAO,MAAO,OAAOvD,CAAQ,EAAG,cAAgBwE,GAAM,CAAcvE,EAAA,OAAOuE,CAAC,CAAC,EAAGzE,EAAe,CAAC,CAC/F,EAAA,SAAA,CAAAsC,MAACmB,EAAc,CAAA,UAAU,eACvB,SAAAnB,MAACoB,GAAY,CAAA,EACf,SACCC,EACC,CAAA,SAAA,CAACrB,EAAA,IAAAsB,EAAA,CAAW,MAAM,KAAK,SAAE,KAAA,EACxBtB,EAAA,IAAAsB,EAAA,CAAW,MAAM,KAAK,SAAE,KAAA,EACxBtB,EAAA,IAAAsB,EAAA,CAAW,MAAM,KAAK,SAAE,KAAA,CAAA,EAC3B,CAAA,EACF,EACAtB,EAAAA,IAAC,QAAK,SAAW,aAAA,CAAA,CAAA,EACnB,EACAA,MAACiC,GAAO,QAAQ,UAAU,KAAK,KAAK,QAAS,IAAMvE,EAAeqB,GAAK,KAAK,IAAI,EAAGA,EAAI,CAAC,CAAC,EAAG,SAAUtB,IAAgB,EAAG,SAEzH,aAAA,EACA+C,EAAAA,KAAC,OAAK,CAAA,UAAU,UAAU,SAAA,CAAA,OAAK/C,EAAY,MAAIiC,CAAA,EAAW,EAC1DM,MAACiC,GAAO,QAAQ,UAAU,KAAK,KAAK,QAAS,IAAMvE,EAAeqB,GAAK,KAAK,IAAIW,EAAYX,EAAI,CAAC,CAAC,EAAG,SAAUtB,IAAgBiC,EAAY,SAE3I,aAAA,CAAA,EACF,CAAA,EACF,EAIFM,EAAAA,IAACoC,IAAO,KAAMrE,GAAc,aAAcC,EACxC,SAAAwC,EAAA,KAAC6B,GAAc,CAAA,UAAU,yCACvB,SAAA,CAAArC,MAACsC,GACC,CAAA,SAAAtC,EAAA,IAACuC,GAAY,CAAA,SAAA,iBAAe,CAAA,EAC9B,EAEC1E,GACC2C,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,4BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAAAR,MAAC,MAAG,UAAU,sCAAuC,WAAkBV,EAAAzB,EAAA,UAAA,YAAAyB,EAAS,OAAQ,IAAI,EAC5FkB,EAAAA,KAAC,MAAI,CAAA,UAAU,uCAAuC,SAAA,CAAA,QAAM3C,EAAkB,WAAA,EAAY,CAAA,EAC5F,EACA2C,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACR,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAc,iBAAA,EAC3CA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAkB,cAAc,CAAA,EAChE,SACC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAe,kBAAA,QAC5C,IAAE,CAAA,UAAU,gBAAiB,WAAkBT,EAAA1B,EAAA,SAAA,YAAA0B,EAAQ,UAAW,MAAM,CAAA,EAC3E,SACC,MACC,CAAA,SAAA,CAACS,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAc,iBAAA,EAC3CA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAkB,cAAc,CAAA,EAChE,SACC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAAe,kBAAA,EAC5CA,EAAA,IAAA,IAAA,CAAE,UAAU,gBACV,WAAkB,kBAAoB,IAAI,KAAKnC,EAAkB,iBAAiB,EAAE,mBAAmB,OAAO,EAAI,mBACrH,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGCA,EAAkB,UAAYA,EAAkB,SAAS,OAAS,SAChE,MACC,CAAA,SAAA,CAACmC,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAgB,mBAAA,EACnDQ,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAACR,EAAAA,IAAA,MAAA,CAAI,UAAU,iDAAkD,CAAA,EAChEA,EAAA,IAAA,MAAA,CAAI,UAAU,YACZ,SAAkBnC,EAAA,SAAS,IAAK2E,GAC/BhC,EAAAA,KAAC,MAAmB,CAAA,UAAU,WAC5B,SAAA,CAACR,EAAAA,IAAA,MAAA,CAAI,UAAU,gFAAiF,CAAA,EAChGQ,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACf,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+BACV,SAAA,CAAAV,EAAc0C,EAAM,WAAW,QAC/BR,EAAM,CAAA,MAAOQ,EAAM,YAAa,UAAW,sCAAsCnC,EAAsBmC,EAAM,YAAalC,EAAUkC,CAAK,CAAC,CAAC,GACzI,WAAM,YACT,EACClC,EAAUkC,CAAK,GACdhC,EAAAA,KAACwB,GAAM,QAAQ,cAAc,UAAU,UACrC,SAAA,CAAChC,EAAAA,IAAAyC,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,YAAA,EACpC,CAAA,EAEJ,EACAjC,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BAA0B,SAAA,CAACR,EAAAA,IAAA0C,GAAA,CAAK,UAAU,SAAU,CAAA,EAAGF,EAAM,eAAA,EAAgB,EAC5FhC,EAAAA,KAAC,MAAI,CAAA,UAAU,0BAA0B,SAAA,CAACR,EAAAA,IAAA2C,GAAA,CAAS,UAAU,SAAU,CAAA,EAAG,IAAI,KAAKH,EAAM,UAAU,EAAE,eAAe,OAAO,CAAA,EAAE,EAC5HA,EAAM,gBACJhC,OAAA,MAAA,CAAI,UAAU,0BAA0B,SAAA,CAACR,EAAAA,IAAAE,EAAA,CAAM,UAAU,SAAU,CAAA,EAAE,aAAWsC,EAAM,eAAe,OAAA,EAAK,CAAA,EAE/G,EACCA,EAAM,OACLxC,EAAA,IAAC,OAAI,UAAU,6BAA8B,WAAM,MAAM,CAAA,EAE7D,CAxBQ,CAAA,EAAAwC,EAAM,EAyBhB,CACD,EACH,CAAA,EACF,CAAA,CACF,CAAA,EAEAhC,EAAAA,KAAC,MAAI,CAAA,UAAU,mBACb,SAAA,CAACR,EAAAA,IAAAI,EAAA,CAAY,UAAU,sCAAuC,CAAA,EAC7DJ,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAmC,sCAAA,CAAA,EAClE,CAAA,EAEJ,CAAA,CAAA,CAEJ,CACF,CAAA,CACF,CAAA,CAAA,CAEJ"}