{"version":3,"file":"JobTypeConfiguration-BwBzMjY3.js","sources":["../../src/pages/JobTypeConfiguration.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { Plus, Edit, Trash2, Save, X, FileText } from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiGet, apiPost, apiPut, apiDelete } from '@/lib/api';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface JobTypeConfig {\n  id: number;\n  jenis_jabatan: string;\n  min_dokumen: number;\n  max_dokumen: number;\n  required_files: string[];\n  is_active: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface FileType {\n  id: string;\n  name: string;\n  category: string;\n}\n\nconst JobTypeConfiguration: React.FC = () => {\n  const { token } = useAuth();\n  const { toast } = useToast();\n  const [configs, setConfigs] = useState<JobTypeConfig[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [editingConfig, setEditingConfig] = useState<JobTypeConfig | null>(null);\n  const [saving, setSaving] = useState(false);\n\n  // Form state\n  const [formData, setFormData] = useState({\n    jenis_jabatan: '',\n    total_dokumen: 0,\n    required_files: [] as string[],\n    is_active: true\n  });\n\n  // Available file types\n  const availableFileTypes: FileType[] = [\n    { id: 'surat_pengantar', name: 'Surat Pengantar', category: 'Dokumen Pengantar' },\n    { id: 'surat_permohonan_dari_yang_bersangkutan', name: 'Surat Permohonan Dari Yang Bersangkutan', category: 'Dokumen Pengantar' },\n    { id: 'surat_keputusan_cpns', name: 'Surat Keputusan CPNS', category: 'Dokumen Kepegawaian' },\n    { id: 'surat_keputusan_pns', name: 'Surat Keputusan PNS', category: 'Dokumen Kepegawaian' },\n    { id: 'surat_keputusan_kenaikan_pangkat_terakhir', name: 'Surat Keputusan Kenaikan Pangkat Terakhir', category: 'Dokumen Kepegawaian' },\n    { id: 'surat_keputusan_jabatan_terakhir', name: 'Surat Keputusan Jabatan Terakhir', category: 'Dokumen Kepegawaian' },\n    { id: 'skp_2_tahun_terakhir', name: 'SKP 2 Tahun Terakhir', category: 'Dokumen Kepegawaian' },\n    \n    { id: 'surat_keterangan_anjab_abk_instansi_asal', name: 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal', category: 'Dokumen Keterangan' },\n    { id: 'surat_keterangan_anjab_abk_instansi_penerima', name: 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima', category: 'Dokumen Keterangan' },\n    { id: 'surat_pernyataan_tidak_hukuman_disiplin', name: 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK', category: 'Dokumen Pernyataan' },\n    { id: 'surat_persetujuan_mutasi_asal', name: 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki', category: 'Dokumen Persetujuan' },\n    { id: 'surat_lolos_butuh_ppk', name: 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju', category: 'Dokumen Persetujuan' },\n    { id: 'peta_jabatan', name: 'Peta Jabatan', category: 'Dokumen Pendukung' },\n    // Dipindahkan ke konfigurasi Admin Wilayah, bukan bagian dari required_files user\n    { id: 'hasil_evaluasi_pertimbangan_baperjakat', name: 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)', category: 'Dokumen Pendukung' },\n    { id: 'anjab_abk_instansi_asal', name: 'Anjab/Abk Instansi Asal', category: 'Dokumen Pendukung' },\n    { id: 'anjab_abk_instansi_penerima', name: 'Anjab/Abk Instansi Penerima', category: 'Dokumen Pendukung' },\n    { id: 'surat_keterangan_tidak_tugas_belajar', name: 'Surat Keterangan Tidak Sedang Tugas Belajar', category: 'Dokumen Keterangan' },\n    { id: 'sptjm_pimpinan_satker_asal', name: 'SPTJM Pimpinan Satker dari Asal', category: 'Dokumen Pernyataan' },\n    { id: 'sptjm_pimpinan_satker_penerima', name: 'SPTJM Pimpinan Satker dari Penerima', category: 'Dokumen Pernyataan' },\n    { id: 'surat_rekomendasi_instansi_pembina', name: 'Surat Rekomendasi Instansi Pembina', category: 'Dokumen Rekomendasi' }\n  ];\n\n  useEffect(() => {\n    fetchConfigs();\n  }, []);\n\n  const fetchConfigs = async () => {\n    try {\n      setLoading(true);\n      const response = await apiGet('/api/job-type-configurations', token);\n      if (response.success) {\n        setConfigs(response.data);\n      }\n    } catch (error: any) {\n      console.error('Error fetching configs:', error);\n      toast({\n        title: \"Error\",\n        description: \"Gagal mengambil data konfigurasi\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddNew = () => {\n    setFormData({\n      jenis_jabatan: '',\n      total_dokumen: 0, // Start with 0, will auto-update when files are selected\n      required_files: [],\n      is_active: true\n    });\n    setEditingConfig(null);\n    setShowAddDialog(true);\n  };\n\n  const handleEdit = (config: JobTypeConfig) => {\n    // Map database file names to frontend file type IDs\n    const mapFileNamesToIds = (fileNames: string[]): string[] => {\n      const nameToIdMap: Record<string, string> = {\n        // New format file names\n        'Surat Pengantar': 'surat_pengantar',\n        'Surat Permohonan Dari Yang Bersangkutan': 'surat_permohonan_dari_yang_bersangkutan',\n        'Surat Keputusan CPNS': 'surat_keputusan_cpns',\n        'Surat Keputusan PNS': 'surat_keputusan_pns',\n        'Surat Keputusan Kenaikan Pangkat Terakhir': 'surat_keputusan_kenaikan_pangkat_terakhir',\n        'Surat Keputusan Jabatan Terakhir': 'surat_keputusan_jabatan_terakhir',\n        'SKP 2 Tahun Terakhir': 'skp_2_tahun_terakhir',\n        \n        'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal': 'surat_keterangan_anjab_abk_instansi_asal',\n        'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima': 'surat_keterangan_anjab_abk_instansi_penerima',\n        'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK': 'surat_pernyataan_tidak_hukuman_disiplin',\n        'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki': 'surat_persetujuan_mutasi_asal',\n        'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju': 'surat_lolos_butuh_ppk',\n        'Peta Jabatan': 'peta_jabatan',\n        // 'Hasil Assessment' / 'Hasil Uji Kompetensi' dipindahkan ke Admin Wilayah File Config\n        'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)': 'hasil_evaluasi_pertimbangan_baperjakat',\n        'Anjab/Abk Instansi Asal': 'anjab_abk_instansi_asal',\n        'Anjab/Abk Instansi Penerima': 'anjab_abk_instansi_penerima',\n        'Surat Keterangan Tidak Sedang Tugas Belajar': 'surat_keterangan_tidak_tugas_belajar',\n        'SPTJM Pimpinan Satker dari Asal': 'sptjm_pimpinan_satker_asal',\n        'SPTJM Pimpinan Satker dari Penerima': 'sptjm_pimpinan_satker_penerima',\n        'Surat Rekomendasi Instansi Pembina': 'surat_rekomendasi_instansi_pembina',\n        // Legacy database values (from migration files)\n        'SK Pangkat Terakhir': 'surat_keputusan_kenaikan_pangkat_terakhir',\n        'SK Jabatan Terakhir': 'surat_keputusan_jabatan_terakhir',\n        'Ijazah Terakhir': 'surat_keputusan_pns',\n        'Sertifikat Diklat': 'surat_keputusan_cpns',\n        'Surat Pernyataan': 'surat_pernyataan_tidak_hukuman_disiplin',\n        'Foto': 'surat_pengantar'\n      };\n      \n      console.log('Original required_files from database:', config.required_files);\n      const mappedFiles = fileNames\n        .map(name => {\n          const mappedId = nameToIdMap[name];\n          console.log(`Mapping \"${name}\" to \"${mappedId}\"`);\n          return mappedId;\n        })\n        .filter(id => id !== undefined); // Remove any unmapped values\n      \n      console.log('Mapped required_files:', mappedFiles);\n      return mappedFiles;\n    };\n\n    const mappedRequiredFiles = mapFileNamesToIds(config.required_files);\n    \n    setFormData({\n      jenis_jabatan: config.jenis_jabatan,\n      total_dokumen: config.max_dokumen,\n      required_files: mappedRequiredFiles,\n      is_active: config.is_active\n    });\n    setEditingConfig(config);\n    setShowAddDialog(true);\n  };\n\n  const handleSave = async () => {\n    try {\n      setSaving(true);\n      \n      // Map frontend file type IDs back to database file names\n      const mapIdsToFileNames = (fileTypeIds: string[]): string[] => {\n        const idToNameMap: Record<string, string> = {\n          'surat_pengantar': 'Surat Pengantar',\n          'surat_permohonan_dari_yang_bersangkutan': 'Surat Permohonan Dari Yang Bersangkutan',\n          'surat_keputusan_cpns': 'Surat Keputusan CPNS',\n          'surat_keputusan_pns': 'Surat Keputusan PNS',\n          'surat_keputusan_kenaikan_pangkat_terakhir': 'Surat Keputusan Kenaikan Pangkat Terakhir',\n          'surat_keputusan_jabatan_terakhir': 'Surat Keputusan Jabatan Terakhir',\n          'skp_2_tahun_terakhir': 'SKP 2 Tahun Terakhir',\n          \n          'surat_keterangan_anjab_abk_instansi_asal': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal',\n          'surat_keterangan_anjab_abk_instansi_penerima': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima',\n          'surat_pernyataan_tidak_hukuman_disiplin': 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK',\n          'surat_persetujuan_mutasi_asal': 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki',\n          'surat_lolos_butuh_ppk': 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju',\n          'peta_jabatan': 'Peta Jabatan',\n          // hasil_uji_kompetensi dipindahkan ke Admin Wilayah File Config\n          'hasil_evaluasi_pertimbangan_baperjakat': 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)',\n          'anjab_abk_instansi_asal': 'Anjab/Abk Instansi Asal',\n          'anjab_abk_instansi_penerima': 'Anjab/Abk Instansi Penerima',\n          'surat_keterangan_tidak_tugas_belajar': 'Surat Keterangan Tidak Sedang Tugas Belajar',\n          'sptjm_pimpinan_satker_asal': 'SPTJM Pimpinan Satker dari Asal',\n          'sptjm_pimpinan_satker_penerima': 'SPTJM Pimpinan Satker dari Penerima',\n          'surat_rekomendasi_instansi_pembina': 'Surat Rekomendasi Instansi Pembina'\n        };\n        \n        console.log('Frontend file type IDs:', fileTypeIds);\n        const mappedNames = fileTypeIds\n          .map(id => {\n            const mappedName = idToNameMap[id];\n            console.log(`Mapping \"${id}\" to \"${mappedName}\"`);\n            return mappedName;\n          })\n          .filter(name => name !== undefined); // Remove any unmapped values\n        \n        console.log('Mapped file names for database:', mappedNames);\n        return mappedNames;\n      };\n\n      const mappedRequiredFiles = mapIdsToFileNames(formData.required_files);\n      \n      const payload = {\n        ...formData,\n        required_files: mappedRequiredFiles,\n        is_active: formData.is_active\n      };\n\n      if (editingConfig) {\n        await apiPut(`/api/job-type-configurations/${editingConfig.id}`, payload, token);\n        toast({\n          title: \"Berhasil\",\n          description: \"Konfigurasi berhasil diperbarui\",\n        });\n      } else {\n        await apiPost('/api/job-type-configurations', payload, token);\n        toast({\n          title: \"Berhasil\",\n          description: \"Konfigurasi berhasil ditambahkan\",\n        });\n      }\n\n      setShowAddDialog(false);\n      fetchConfigs();\n    } catch (error: any) {\n      console.error('Error saving config:', error);\n      toast({\n        title: \"Error\",\n        description: error?.message || \"Gagal menyimpan konfigurasi\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDelete = async (configId: number) => {\n    if (window.confirm('Apakah Anda yakin ingin menghapus konfigurasi ini?')) {\n      try {\n        await apiDelete(`/api/job-type-configurations/${configId}`, token);\n        toast({\n          title: \"Berhasil\",\n          description: \"Konfigurasi berhasil dihapus\",\n        });\n        fetchConfigs();\n      } catch (error: any) {\n        console.error('Error deleting config:', error);\n        toast({\n          title: \"Error\",\n          description: error?.message || \"Gagal menghapus konfigurasi\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  const handleFileTypeToggle = (fileTypeId: string) => {\n    setFormData(prev => {\n      // Jika file sudah dipilih, hapus (selalu bisa)\n      if (prev.required_files.includes(fileTypeId)) {\n        const newRequiredFiles = prev.required_files.filter(id => id !== fileTypeId);\n        return {\n          ...prev,\n          required_files: newRequiredFiles,\n          total_dokumen: newRequiredFiles.length\n        };\n      }\n      \n      // Jika file belum dipilih, cek apakah sudah mencapai maksimum (22)\n      if (prev.required_files.length >= 22) {\n        toast({\n          title: \"Batas Maksimum\",\n          description: \"Maksimum 22 dokumen yang dapat dipilih untuk mutasi PNS\",\n          variant: \"destructive\",\n        });\n        return prev;\n      }\n      \n      // Tambah file baru\n      const newRequiredFiles = [...prev.required_files, fileTypeId];\n      return {\n        ...prev,\n        required_files: newRequiredFiles,\n        total_dokumen: newRequiredFiles.length\n      };\n    });\n  };\n\n  const handleSelectAll = () => {\n    const allFileTypeIds = availableFileTypes.map(fileType => fileType.id);\n    setFormData(prev => ({\n      ...prev,\n      required_files: allFileTypeIds,\n      total_dokumen: allFileTypeIds.length\n    }));\n    toast({\n      title: \"Berhasil\",\n      description: \"Semua dokumen telah dipilih\",\n    });\n  };\n\n  const handleDeselectAll = () => {\n    setFormData(prev => ({\n      ...prev,\n      required_files: [],\n      total_dokumen: 0\n    }));\n    toast({\n      title: \"Berhasil\",\n      description: \"Semua dokumen telah dihapus dari pilihan\",\n    });\n  };\n\n  const groupedFileTypes = availableFileTypes.reduce((acc, fileType) => {\n    if (!acc[fileType.category]) {\n      acc[fileType.category] = [];\n    }\n    acc[fileType.category].push(fileType);\n    return acc;\n  }, {} as Record<string, FileType[]>);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <div className=\"text-center\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold\">Konfigurasi Jenis Jabatan</h1>\n        <Button onClick={handleAddNew} className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white\">\n          <Plus className=\"h-4 w-4\" />\n          Tambah Konfigurasi\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {configs.map((config) => (\n          <Card key={config.id}>\n                         <CardHeader>\n               <div className=\"flex justify-between items-start\">\n                 <CardTitle className=\"text-lg\">{config.jenis_jabatan}</CardTitle>\n                                                      <Badge \n                     variant=\"secondary\" \n                     className={config.is_active \n                       ? \"bg-green-100 text-green-800 border-green-200\" \n                       : \"bg-red-100 text-red-800 border-red-200\"\n                     }\n                   >\n                     {config.is_active ? \"Aktif\" : \"Nonaktif\"}\n                   </Badge>\n               </div>\n             </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                                 <div>\n                   <Label className=\"text-sm font-medium\">Total Dokumen</Label>\n                   <p className=\"text-lg font-semibold\">{config.max_dokumen}</p>\n                 </div>\n                 \n                 <div>\n                   <Label className=\"text-sm font-medium\">Min Dokumen</Label>\n                   <p className=\"text-sm text-gray-600\">{config.min_dokumen}</p>\n                 </div>\n\n                <div>\n                  <Label className=\"text-sm font-medium\">File Types</Label>\n                  <p className=\"text-sm text-gray-600\">{config.required_files.length} file types</p>\n                </div>\n\n                <div className=\"flex gap-2 pt-2\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => handleEdit(config)}\n                    className=\"flex items-center gap-1 border-green-600 text-green-600 hover:bg-green-50\"\n                  >\n                    <Edit className=\"h-3 w-3\" />\n                    Edit\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={() => handleDelete(config.id)}\n                    className=\"flex items-center gap-1 border-red-600 text-red-600 hover:bg-red-50\"\n                  >\n                    <Trash2 className=\"h-3 w-3\" />\n                    Hapus\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={showAddDialog} onOpenChange={setShowAddDialog}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingConfig ? 'Edit Konfigurasi' : 'Tambah Konfigurasi Baru'}\n            </DialogTitle>\n          </DialogHeader>\n          \n          <div className=\"space-y-6\">\n                         {/* Basic Info */}\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n               <div>\n                 <Label htmlFor=\"jenis_jabatan\">Jenis Jabatan</Label>\n                 <Input\n                   id=\"jenis_jabatan\"\n                   value={formData.jenis_jabatan}\n                   onChange={(e) => setFormData(prev => ({ ...prev, jenis_jabatan: e.target.value }))}\n                   placeholder=\"Contoh: Guru, Penghulu, dll\"\n                 />\n               </div>\n               \n               <div>\n                 <Label htmlFor=\"total_dokumen\">Total Dokumen</Label>\n                 <Input\n                   id=\"total_dokumen\"\n                   type=\"number\"\n                   value={formData.total_dokumen}\n                   onChange={(e) => setFormData(prev => ({ ...prev, total_dokumen: parseInt(e.target.value) || 0 }))}\n                   min=\"1\"\n                   max=\"20\"\n                   disabled\n                   className=\"bg-gray-50\"\n                 />\n                 <p className=\"text-xs text-gray-500 mt-1\">Otomatis mengikuti jumlah file types yang dipilih</p>\n               </div>\n             </div>\n\n                           {/* Status */}\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"is_active\"\n                  checked={formData.is_active}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, is_active: checked }))}\n                  className=\"data-[state=checked]:bg-green-600\"\n                />\n                <Label htmlFor=\"is_active\" className=\"text-sm font-medium\">\n                  {formData.is_active ? \"Aktif\" : \"Nonaktif\"}\n                </Label>\n              </div>\n\n            \n\n            {/* File Types Selection */}\n            <div>\n              <div className=\"flex justify-between items-center mb-4\">\n                <div>\n                  <Label className=\"text-base font-medium\">Pilih File Types yang Diperlukan</Label>\n                  <p className=\"text-sm text-gray-600\">\n                    Centang file types yang diperlukan untuk jenis jabatan ini\n                  </p>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={handleSelectAll}\n                    className=\"border-green-600 text-green-600 hover:bg-green-50\"\n                  >\n                    Pilih Semua ({availableFileTypes.length})\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={handleDeselectAll}\n                    className=\"border-gray-600 text-gray-600 hover:bg-gray-50\"\n                  >\n                    Hapus Semua\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4\">\n                {Object.entries(groupedFileTypes).map(([category, fileTypes]) => (\n                  <div key={category} className=\"border rounded-lg p-4\">\n                    <h4 className=\"font-medium mb-3 text-gray-800\">{category}</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                      {fileTypes.map((fileType) => (\n                                                 <div key={fileType.id} className=\"flex items-center space-x-2\">\n                           <Checkbox\n                             id={fileType.id}\n                             checked={formData.required_files.includes(fileType.id)}\n                             onCheckedChange={() => handleFileTypeToggle(fileType.id)}\n                             className=\"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600\"\n                           />\n                           <Label htmlFor={fileType.id} className=\"text-sm cursor-pointer\">\n                             {fileType.name}\n                           </Label>\n                         </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Summary */}\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h4 className=\"font-medium mb-2\">Ringkasan</h4>\n              <p className=\"text-sm text-gray-600\">\n                Total file types yang dipilih: <strong>{formData.required_files.length}</strong> / 22\n              </p>\n              <p className=\"text-sm text-gray-600\">\n                Total dokumen: <strong>{formData.total_dokumen}</strong>\n              </p>\n              {formData.required_files.length >= 22 && (\n                <p className=\"text-sm text-orange-600 mt-2\">\n                  ⚠️ Maksimum 22 dokumen untuk mutasi PNS\n                </p>\n              )}\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowAddDialog(false)}\n                disabled={saving}\n                className=\"border-gray-300 text-gray-700 hover:bg-gray-50\"\n              >\n                <X className=\"h-4 w-4 mr-2\" />\n                Batal\n              </Button>\n              <Button\n                onClick={handleSave}\n                disabled={saving || !formData.jenis_jabatan || formData.required_files.length === 0}\n                className=\"bg-green-600 hover:bg-green-700 text-white\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {saving ? 'Menyimpan...' : 'Simpan'}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default JobTypeConfiguration;\n"],"names":["JobTypeConfiguration","token","useAuth","toast","useToast","configs","setConfigs","useState","loading","setLoading","showAddDialog","setShowAddDialog","editingConfig","setEditingConfig","saving","setSaving","formData","setFormData","availableFileTypes","useEffect","fetchConfigs","response","apiGet","error","handleAddNew","handleEdit","config","mappedRequiredFiles","fileNames","nameToIdMap","mappedFiles","name","mappedId","id","handleSave","fileTypeIds","idToNameMap","mappedNames","mappedName","payload","apiPut","apiPost","handleDelete","configId","apiDelete","handleFileTypeToggle","fileTypeId","prev","newRequiredFiles","handleSelectAll","allFileTypeIds","fileType","handleDeselectAll","groupedFileTypes","acc","jsx","jsxs","Button","Plus","Card","CardHeader","CardTitle","Badge","CardContent","Label","Edit","Trash2","Dialog","DialogContent","DialogHeader","DialogTitle","Input","Switch","checked","category","fileTypes","Checkbox","X","Save"],"mappings":"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"}