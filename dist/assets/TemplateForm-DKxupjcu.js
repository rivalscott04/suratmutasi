import{j as a,aw as Ca,w as Ga,a5 as ha,ax as Va,ay as Ra,az as za,F as ca}from"./ui-vendor-CkT_OuiB.js";import{r as h,d as Fa,e as qa,c as Ya}from"./react-vendor-BNG1zHOu.js";import{m as Qa,I as l,u as Wa,d as Xa,a as ma,B as L,n as ga,D as Za,e as ae,c as ee,s as te}from"./index-BYJrcMgx.js";import{L as s}from"./label-Cndja_iA.js";import{S as Z,a as aa,b as ea,c as ta,d as na}from"./select-CceWCnik.js";import{P as pa}from"./PegawaiSearchInput-rXO7P9Bo.js";import{T as ja,a as ka,b as xa,c as ba,d as va,e as fa,f as Na,g as Sa,h as Ta}from"./Template9-D11TSEyl.js";import{u as ne,S as se}from"./protected-button-C4byprhw.js";import{P as le}from"./PageHeader-Bboldl_u.js";import{F as re,u as ie,a as oe}from"./form-status-indicator-BGFtNsUq.js";import{S as ya}from"./SuratPreviewContainer-R8b_T3Je.js";import"./card-DjYCkiGR.js";const Pa=h.forwardRef(({className:c,orientation:n="horizontal",decorative:g=!0,...d},P)=>a.jsx(Ca,{ref:P,decorative:g,orientation:n,className:Qa("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",c),...d}));Pa.displayName=Ca.displayName;const H=({title:c,description:n,children:g,className:d=""})=>a.jsxs("div",{className:`space-y-4 ${d}`,children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold",children:c}),n&&a.jsx("p",{className:"text-sm text-muted-foreground",children:n})]}),a.jsx(Pa,{}),a.jsx("div",{className:"space-y-4",children:g})]}),b=({label:c,value:n,placeholder:g=""})=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(s,{className:"text-sm font-medium",children:c}),a.jsxs("div",{className:"relative",children:[a.jsx(l,{value:n??"",placeholder:g,readOnly:!0,className:"bg-muted/50 text-muted-foreground pr-10"}),n&&a.jsx(Ga,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 w-4 h-4"})]})]}),sa=["Kota Mataram","Kabupaten Lombok Barat","Kabupaten Lombok Tengah","Kabupaten Lombok Timur","Kabupaten Lombok Utara","Kabupaten Sumbawa Barat","Kabupaten Sumbawa","Kabupaten Dompu","Kabupaten Bima","Kota Bima"],de=[{id:"1",title:"Surat Pernyataan Tidak Sedang Tugas Belajar",description:"Surat pernyataan bahwa pegawai tidak sedang menjalani tugas belajar atau ikatan dinas",category:"Pernyataan"},{id:"2",title:"Surat Keterangan Analisis Jabatan",description:"Surat keterangan mengenai analisis jabatan dan analisis beban kerja pegawai",category:"Keterangan"},{id:"3",title:"Surat Keterangan Pengalaman Mengajar",description:"Surat keterangan mengenai pengalaman mengajar seorang guru",category:"Keterangan"},{id:"4",title:"Surat Permohonan Bebas Temuan",description:"Surat permohonan penerbitan surat keterangan bebas temuan",category:"Permohonan"},{id:"5",title:"Surat Pernyataan Tidak Sedang Hukuman Disiplin",description:"Surat pernyataan tidak sedang dalam proses atau menjalani hukuman disiplin",category:"Pernyataan"},{id:"6",title:"Surat Pernyataan Tidak Sedang Proses Pidana",description:"Surat pernyataan tidak sedang menjalani proses pidana atau pernah dipidana",category:"Pernyataan"},{id:"7",title:"Surat Persetujuan Pelepasan",description:"Surat persetujuan untuk melepas pegawai pindah tugas",category:"Persetujuan"},{id:"8",title:"Surat Persetujuan Penerimaan",description:"Surat persetujuan untuk menerima pegawai pindah tugas",category:"Persetujuan"},{id:"9",title:"Surat Pernyataan Tanggung Jawab Mutlak",description:"Surat pernyataan tanggung jawab mutlak atas dokumen dan data",category:"Pernyataan"}];function ue(c){if(!c)return"";const n=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let g,d,P;return/\d{4}-\d{2}-\d{2}/.test(c)?([P,d,g]=c.split("-"),`${parseInt(g,10)} ${n[parseInt(d,10)]} ${P}`):/\d{2}-\d{2}-\d{4}/.test(c)?([g,d,P]=c.split("-"),`${parseInt(g,10)} ${n[parseInt(d,10)]} ${P}`):c}const he=()=>{const c=ie(),{templateId:n}=Fa(),g=qa(),[d,P]=h.useState(),[o,wa]=h.useState(),[m,Ka]=h.useState(null),S=new Date().getFullYear().toString(),[r,G]=h.useState({kabkota:"LOMBOK BARAT",jln:"Jl. Gajah Mada No. 1 Gerung, Lombok Barat 83511",telfon:"Telp. (0370) 681557",fax:"Fax. (0370) 681557",email:"kemenag.lombokbarat@gmail.com",website:"lombokbarat.kemenag.go.id",namapejabat:"",nippejabat:"",pangkatgolpejabat:"",jabatanpejabat:"",namapegawai:"",nippegawai:"",pangkatgolpegawai:"",jabatanpegawai:"",ibukota:"",tanggal:"",kode_kabko:"",pejabatStatus:"tetap",isPltPlh:!1,pltPlhType:"plt"}),[w,R]=h.useState({nosrt:"",blnno:"",thnno:S,ukerpejabat:"",ukerpegawai:""}),[u,_a]=h.useState({nosurat:"",blnnomor:"",tahunskrg:S,unitkerja:"",namajabatan:"",bbnkerja:"",eksisting:"",kelebihan:"",kekurangan:""}),[p,la]=h.useState({nosrt:"",blnno:"",thnno:S,tempattugas:"",sekolah:"",kabkota2:"",tglmulai:""}),[v,ra]=h.useState({nosrt:"",blnsrt:"",thnskrg:S,unitkerja:"",keperluan:""}),[f,z]=h.useState({nosrt:"",blnno:"",thnno:S,ukerpejabat:"",tempattugas:""}),[K,q]=h.useState({nosrt:"",blnno:"",thnno:S,ukerpejabat:"",ukerpegawai:""}),[j,Da]=h.useState({nosurat:"",blnnomor:"",tahunskrg:S,tempattugas:"",kabkota2:"",jabatanpegawai2:"",tempattugas2:"",kabataukotatujuan:""}),[x,$a]=h.useState({nosrt:"",blnno:"",thnno:S,tempattugas:"",jabatanbaru:"",tempattugasbaru:""}),[_,ia]=h.useState({nosrt:"",blnno:"",thnno:S,ukerpejabat:""}),{token:$,user:T}=Wa(),{toast:Ba}=Xa();h.useState(!1);const{submitForm:Aa,isSubmitting:Ma}=ne();h.useState(!1);const[A,Ia]=h.useState(null),[ce,oa]=h.useState(null),[da,y]=h.useState(null),[La,Y]=h.useState(!1),[E,ua]=h.useState(null);h.useEffect(()=>{!A||!$||ma(`/api/letters/${A}`,$).then(e=>ua(e.letter)).catch(()=>ua(null))},[A,$]),Ya.useEffect(()=>{if(!$)return;(async()=>{try{let t=null;T!=null&&T.office_id?t=(await ma(`/api/offices/${T.office_id}`,$)).office:t=null,t&&(Ka(t),G(i=>({...i,kabkota:t.kabkota||"",jln:t.address||"",telfon:t.phone||"",fax:t.fax||"",email:t.email||"",website:t.website||"",kode_kabko:t.kode_kabko||""})))}catch{}})()},[$,T]);const Ea=e=>{P(e),G(t=>({...t,namapejabat:(e==null?void 0:e.nama)||"",nippejabat:(e==null?void 0:e.nip)||"",pangkatgolpejabat:(e==null?void 0:e.pangkat_gol)||(e==null?void 0:e.golongan)||"",jabatanpejabat:(e==null?void 0:e.jabatan)||""})),n==="1"&&R(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""})),n==="5"&&z(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""})),n==="6"&&q(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""})),n==="9"&&ia(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""}))},Ja=e=>{wa(e),G(t=>({...t,namapegawai:(e==null?void 0:e.nama)||"",nippegawai:(e==null?void 0:e.nip)||"",pangkatgolpegawai:(e==null?void 0:e.pangkat_gol)||(e==null?void 0:e.golongan)||"",jabatanpegawai:(e==null?void 0:e.jabatan)||""})),n==="1"&&R(t=>({...t,ukerpegawai:(e==null?void 0:e.unit_kerja)||""})),n==="3"&&la(t=>({...t,tempattugas:(e==null?void 0:e.tempat_tugas)||""})),n==="4"&&ra(t=>({...t,unitkerja:(e==null?void 0:e.unit_kerja)||""})),n==="5"&&z(t=>({...t,tempattugas:(e==null?void 0:e.tempat_tugas)||""})),n==="6"&&q(t=>({...t,ukerpegawai:(e==null?void 0:e.unit_kerja)||""}))},M=(e,t)=>{G(i=>({...i,[e]:t}))},Q=(e,t)=>{R(i=>({...i,[e]:t}))},C=(e,t)=>{_a(i=>({...i,[e]:t}))},B=(e,t)=>{la(i=>({...i,[e]:t}))},J=(e,t)=>{ra(i=>({...i,[e]:t}))},V=(e,t)=>{z(i=>({...i,[e]:t}))},W=(e,t)=>{q(i=>({...i,[e]:t}))},D=(e,t)=>{Da(i=>({...i,[e]:t}))},I=(e,t)=>{$a(i=>({...i,[e]:t}))},X=(e,t)=>{ia(i=>({...i,[e]:t}))},Oa=async e=>{e.preventDefault(),c.startSubmission(),c.clearFeedback(),Aa(async()=>{var U;if(y(null),oa(null),!(m!=null&&m.id))throw y("Data kantor tidak ditemukan. Silakan atur kantor di Settings."),new Error("Data kantor tidak ditemukan");if(!(T!=null&&T.id))throw y("User tidak valid. Silakan login ulang."),new Error("User tidak valid");if(n!=="2"&&n!=="9"&&!(o!=null&&o.nip))throw y("Pilih pegawai yang akan dinyatakan dalam surat."),new Error("Pegawai belum dipilih");if(!(d!=null&&d.nip))throw y("Pilih pejabat penandatangan surat."),new Error("Pejabat belum dipilih");const t=(m==null?void 0:m.kode_kabko)||r.kode_kabko||"-";let i="";if(n==="1"?i=`B-${w.nosrt}/Kk.18.${t}/1/Kp.07.6/${w.blnno}/${w.thnno}`:n==="2"?i=`B-${u.nosurat}/Kk.18.${t}/1/KP.07.6/${u.blnnomor}/${u.tahunskrg}`:n==="3"?i=`B-${p.nosrt}/Kk.18.${t}/1/KP.07.6/${p.blnno}/${p.thnno}`:n==="4"?i=`B-${v.nosrt}/Kk.18.${t}/1/Kp.01.2/${v.blnsrt}/${v.thnskrg}`:n==="5"?i=`B-${f.nosrt}/Kk.18.${t}/1/Kp.07.6/${f.blnno}/${f.thnno}`:n==="6"?i=`B-${K.nosrt}/Kk.18.${t}/1/Kh.04.1/${K.blnno}/${K.thnno}`:n==="7"?i=`B-${j.nosurat}/Kk.18.${t}/1/Kp.07.6/${j.blnnomor}/${j.tahunskrg}`:n==="8"?i=`B-${x.nosrt}/Kk.18.${t}/1/Kp.07.6/${x.blnno}/${x.thnno}`:n==="9"&&(i=`B-${_.nosrt}/Kk.18.${t}/1/Kp.01.2/${_.blnno}/${_.thnno}`),!i)throw y("Nomor surat wajib diisi."),new Error("Nomor surat wajib diisi");let N="";r.tanggal&&(N=ue(r.tanggal));const O={office_id:m.id,created_by:T.id,template_id:Number(n),template_name:(F==null?void 0:F.title)||"",letter_number:i,subject:F==null?void 0:F.title,recipient_employee_nip:(o==null?void 0:o.nip)||null,signing_official_nip:d.nip,form_data:{...n==="2"?{kabkota:r.kabkota,jln:r.jln,telfon:r.telfon,fax:r.fax,email:r.email,website:r.website,namapejabat:d.nama,nippejabat:d.nip,pangkatgolpejabat:r.pangkatgolpejabat||d.pangkat_gol||(d==null?void 0:d.golongan)||"",jabatanpejabat:d.jabatan,unitkerja:u.unitkerja||"",nosurat:u.nosurat,blnnomor:u.blnnomor,tahunskrg:u.tahunskrg,namajabatan:u.namajabatan,bbnkerja:u.bbnkerja,eksisting:u.eksisting,kelebihan:u.kelebihan,kekurangan:u.kekurangan,ibukota:r.ibukota,tanggal:N,kode_kabko:(m==null?void 0:m.kode_kabko)||r.kode_kabko||"",office:m}:{...r,...n!=="2"&&{namapegawai:(o==null?void 0:o.nama)||"",nippegawai:(o==null?void 0:o.nip)||"",pangkatgolpegawai:r.pangkatgolpegawai||(o==null?void 0:o.pangkat_gol)||(o==null?void 0:o.golongan)||"",jabatanpegawai:(o==null?void 0:o.jabatan)||"",ukerpegawai:(o==null?void 0:o.unit_kerja)||""},...n==="1"&&w,...n==="3"&&p,...n==="4"&&v,...n==="5"&&f,...n==="6"&&K,...n==="7"&&j,...n==="8"&&x,...n==="9"&&_,tanggal:N,kode_kabko:(m==null?void 0:m.kode_kabko)||r.kode_kabko||"",unitkerja:(o==null?void 0:o.unit_kerja)||(d==null?void 0:d.unit_kerja)||"",namapejabat:d.nama,nippejabat:d.nip,jabatanpejabat:d.jabatan,unitkerjapejabat:d.unit_kerja,ukerpejabat:d.unit_kerja,ibukota:r.ibukota,...n!=="2"&&n!=="9"&&{pangkatgolpejabat:r.pangkatgolpejabat||(d==null?void 0:d.pangkat_gol)||(d==null?void 0:d.golongan)||"",pangkatgolpegawai:r.pangkatgolpegawai||(o==null?void 0:o.pangkat_gol)||(o==null?void 0:o.golongan)||""}}}},k=await ee("/api/letters",O,$);Ia(((U=k.letter)==null?void 0:U.id)||k.id),Y(!0),te("SAVE_SUCCESS","Surat berhasil disimpan dan siap digenerate PDF."),c.endSubmission(!0,"Surat berhasil disimpan dan siap digenerate PDF.")},()=>{},t=>{t.message&&t.message.includes("Nomor surat sudah ada")?y("Nomor surat sudah ada. Silakan gunakan nomor surat yang berbeda."):t.message&&t.message.includes("Internal server error")?y("Terjadi kesalahan server. Silakan coba lagi."):y(t.message||"Terjadi kesalahan saat menyimpan surat"),oa(null),c.endSubmission(!1,t.message||"Terjadi kesalahan saat menyimpan surat")})},Ua=()=>{switch(n){case"1":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt",value:w.nosrt||"",onChange:e=>Q("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnno",value:w.blnno||"",onChange:e=>Q("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno",children:"Tahun"}),a.jsx(l,{id:"thnno",value:w.thnno||"",onChange:e=>Q("thnno",e.target.value),placeholder:"e.g., 2024"})]})]});case"2":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosurat",children:"Nomor Surat"}),a.jsx(l,{id:"nosurat",value:u.nosurat||"",onChange:e=>C("nosurat",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnnomor",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnnomor",value:u.blnnomor||"",onChange:e=>C("blnnomor",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tahunskrg",children:"Tahun"}),a.jsx(l,{id:"tahunskrg",value:u.tahunskrg||"",onChange:e=>C("tahunskrg",e.target.value),placeholder:"e.g., 2024"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"namajabatan",children:"Nama Jabatan"}),a.jsx(l,{id:"namajabatan",value:u.namajabatan||"",onChange:e=>C("namajabatan",e.target.value),placeholder:"Nama jabatan"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"bbnkerja",children:"Beban Kerja"}),a.jsx(l,{id:"bbnkerja",value:u.bbnkerja||"",onChange:e=>C("bbnkerja",e.target.value),placeholder:"Beban kerja"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"eksisting",children:"Eksisting"}),a.jsx(l,{id:"eksisting",value:u.eksisting||"",onChange:e=>C("eksisting",e.target.value),placeholder:"Jumlah eksisting"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kelebihan",children:"Kelebihan"}),a.jsx(l,{id:"kelebihan",value:u.kelebihan||"",onChange:e=>C("kelebihan",e.target.value),placeholder:"Jumlah kelebihan"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kekurangan",children:"Kekurangan"}),a.jsx(l,{id:"kekurangan",value:u.kekurangan||"",onChange:e=>C("kekurangan",e.target.value),placeholder:"Jumlah kekurangan"})]})]});case"3":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt3",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt3",value:p.nosrt||"",onChange:e=>B("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno3",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnno3",value:p.blnno||"",onChange:e=>B("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno3",children:"Tahun"}),a.jsx(l,{id:"thnno3",value:p.thnno||"",onChange:e=>B("thnno",e.target.value),placeholder:"e.g., 2024"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas",children:"Tempat Tugas"}),a.jsx(l,{id:"tempattugas",value:p.tempattugas||"",onChange:e=>B("tempattugas",e.target.value),placeholder:"Akan terisi otomatis dari data pegawai (atau isi manual)",className:p.tempattugas?"bg-gray-50":""})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"sekolah",children:"Sekolah"}),a.jsxs("select",{id:"sekolah",className:"border rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",value:p.sekolah||"",onChange:e=>B("sekolah",e.target.value),children:[a.jsx("option",{value:"",children:"Pilih sekolah"}),a.jsx("option",{value:"MAN",children:"MAN"}),a.jsx("option",{value:"MTs",children:"MTs"}),a.jsx("option",{value:"MIN",children:"MIN"})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kabkota2",children:"Kabupaten/Kota"}),a.jsxs(Z,{onValueChange:e=>B("kabkota2",e),value:p.kabkota2||"",children:[a.jsx(aa,{className:"w-full",children:a.jsx(ea,{placeholder:"Pilih kabupaten/kota"})}),a.jsx(ta,{children:sa.map(e=>a.jsx(na,{value:e,children:e},e))})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tglmulai",children:"Tanggal Mulai"}),a.jsx(l,{id:"tglmulai",type:"date",value:p.tglmulai||"",onChange:e=>B("tglmulai",e.target.value)})]})]});case"4":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt4",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt4",value:v.nosrt||"",onChange:e=>J("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnsrt",children:"Bulan Surat"}),a.jsx(l,{id:"blnsrt",value:v.blnsrt||"",onChange:e=>J("blnsrt",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnskrg",children:"Tahun"}),a.jsx(l,{id:"thnskrg",value:v.thnskrg||"",onChange:e=>J("thnskrg",e.target.value),placeholder:"e.g., 2024"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"unitkerja4",children:"Unit Kerja"}),a.jsx(l,{id:"unitkerja4",value:v.unitkerja||"",onChange:e=>J("unitkerja",e.target.value),placeholder:"Unit kerja pegawai"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"keperluan",children:"Keperluan"}),a.jsx(l,{id:"keperluan",value:v.keperluan||"",onChange:e=>J("keperluan",e.target.value),placeholder:"Keperluan SKBT"})]})]})]});case"5":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt5",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt5",value:f.nosrt||"",onChange:e=>V("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno5",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnno5",value:f.blnno||"",onChange:e=>V("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno5",children:"Tahun"}),a.jsx(l,{id:"thnno5",value:f.thnno||"",onChange:e=>V("thnno",e.target.value),placeholder:"e.g., 2024"})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx(s,{htmlFor:"tempattugas5",children:"Satuan Kerja"}),a.jsx(l,{id:"tempattugas5",value:f.tempattugas||"",onChange:e=>V("tempattugas",e.target.value),placeholder:"Akan terisi otomatis dari data pegawai (atau isi manual)",className:f.tempattugas?"bg-gray-50":""})]})]});case"6":return a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt6",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt6",value:K.nosrt||"",onChange:e=>W("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno6",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnno6",value:K.blnno||"",onChange:e=>W("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno6",children:"Tahun"}),a.jsx(l,{id:"thnno6",value:K.thnno||"",onChange:e=>W("thnno",e.target.value),placeholder:"e.g., 2024"})]})]})});case"7":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosurat7",children:"Nomor Surat"}),a.jsx(l,{id:"nosurat7",value:j.nosurat||"",onChange:e=>D("nosurat",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnnomor7",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnnomor7",value:j.blnnomor||"",onChange:e=>D("blnnomor",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tahunskrg7",children:"Tahun"}),a.jsx(l,{id:"tahunskrg7",value:j.tahunskrg||"",onChange:e=>D("tahunskrg",e.target.value),placeholder:"e.g., 2024"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas7",children:"Tempat Tugas Asal"}),a.jsx(l,{id:"tempattugas7",value:j.tempattugas||"",onChange:e=>D("tempattugas",e.target.value),placeholder:"Masukkan tempat tugas asal (contoh: Bagian Tata Usaha)"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kabkota27",children:"Kabupaten/Kota Asal"}),a.jsxs(Z,{onValueChange:e=>D("kabkota2",e),value:j.kabkota2||"",children:[a.jsx(aa,{className:"w-full",children:a.jsx(ea,{placeholder:"Pilih kabupaten/kota"})}),a.jsx(ta,{children:sa.map(e=>a.jsx(na,{value:e,children:e},e))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"jabatanpegawai2",children:"Jabatan Baru"}),a.jsx(l,{id:"jabatanpegawai2",value:j.jabatanpegawai2||"",onChange:e=>D("jabatanpegawai2",e.target.value),placeholder:"Jabatan yang akan dituju"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas2",children:"Tempat Tugas Baru"}),a.jsx(l,{id:"tempattugas2",value:j.tempattugas2||"",onChange:e=>D("tempattugas2",e.target.value),placeholder:"Tempat tugas tujuan"})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kabataukotatujuan",children:"Kabupaten/Kota Tujuan"}),a.jsxs(Z,{onValueChange:e=>D("kabataukotatujuan",e),value:j.kabataukotatujuan||"",children:[a.jsx(aa,{className:"w-full",children:a.jsx(ea,{placeholder:"Pilih kabupaten/kota"})}),a.jsx(ta,{children:sa.map(e=>a.jsx(na,{value:e,children:e},e))})]})]})]});case"8":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt8",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt8",value:x.nosrt||"",onChange:e=>I("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno8",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnno8",value:x.blnno||"",onChange:e=>I("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno8",children:"Tahun"}),a.jsx(l,{id:"thnno8",value:x.thnno||"",onChange:e=>I("thnno",e.target.value),placeholder:"e.g., 2024"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas8",children:"Tempat Tugas Asal"}),a.jsx(l,{id:"tempattugas8",value:x.tempattugas||"",onChange:e=>I("tempattugas",e.target.value),placeholder:"Masukkan tempat tugas asal (contoh: Bagian Tata Usaha)"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"jabatanbaru",children:"Jabatan Baru"}),a.jsx(l,{id:"jabatanbaru",value:x.jabatanbaru||"",onChange:e=>I("jabatanbaru",e.target.value),placeholder:"Jabatan yang akan dituju"})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugasbaru",children:"Tempat Tugas Baru"}),a.jsx(l,{id:"tempattugasbaru",value:x.tempattugasbaru||"",onChange:e=>I("tempattugasbaru",e.target.value),placeholder:"Tempat tugas tujuan"})]})]});case"9":return a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt9",children:"Nomor Surat"}),a.jsx(l,{id:"nosrt9",value:_.nosrt||"",onChange:e=>X("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno9",children:"Bulan (Angka)"}),a.jsx(l,{id:"blnno9",value:_.blnno||"",onChange:e=>X("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno9",children:"Tahun"}),a.jsx(l,{id:"thnno9",value:_.thnno||"",onChange:e=>X("thnno",e.target.value),placeholder:"e.g., 2024"})]})]})});default:return a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Template tidak ditemukan"})]})}},Ha=()=>{switch(n){case"1":return a.jsx(ja,{data:{...r,...w}});case"2":return a.jsx(ka,{data:{...r,...u}});case"3":return a.jsx(xa,{data:{...r,...p,isPltPlh:r.isPltPlh,pltPlhType:r.pltPlhType}});case"4":return a.jsx(ba,{data:{...r,...v}});case"5":return a.jsx(va,{data:{...r,...f}});case"6":return a.jsx(fa,{data:{...r,...K}});case"7":return a.jsx(Na,{data:{...r,...j}});case"8":return a.jsx(Sa,{data:{...r,...x}});case"9":return a.jsx(Ta,{data:{...r,..._}});default:return a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(ca,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Template tidak ditemukan"})]})}},F=de.find(e=>e.id===n);return F?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx(le,{title:F.title,subtitle:`${F.description} â€¢ Template ${n}`,actions:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(oe,{feedback:c.feedback,compact:!0}),a.jsxs(L,{variant:"outline",onClick:()=>g("/generator"),className:"flex items-center gap-2",children:[a.jsx(ha,{className:"w-4 h-4"}),"Kembali ke Pilihan Template"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsx(H,{title:"Data Pejabat Penandatangan",description:"Pilih pejabat yang akan menandatangani surat",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{children:a.jsx(pa,{label:"Cari Pejabat",placeholder:"Masukkan nama atau NIP pejabat...",onSelect:Ea,selectedPegawai:d})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(b,{label:"Nama Pejabat",value:r.namapejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"NIP",value:r.nippejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Pangkat/Golongan",value:r.pangkatgolpejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Jabatan",value:r.jabatanpejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Unit Kerja Pejabat",value:(d==null?void 0:d.unit_kerja)??"",placeholder:"Akan terisi otomatis"})]})]})}),n==="2"&&a.jsx(H,{title:"Data Pegawai",description:"Masukkan unit kerja yang akan dianalisis",children:a.jsxs("div",{children:[a.jsx(s,{htmlFor:"unitkerja",children:"Unit Kerja Pegawai"}),a.jsx(l,{id:"unitkerja",value:u.unitkerja||"",onChange:e=>C("unitkerja",e.target.value),placeholder:"Masukkan unit kerja pegawai"})]})}),n!=="9"&&n!=="2"&&a.jsx(H,{title:"Data Pegawai",description:"Pilih pegawai yang akan dinyatakan dalam surat",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{children:a.jsx(pa,{label:"Cari Pegawai",placeholder:"Masukkan nama atau NIP pegawai...",onSelect:Ja,selectedPegawai:o})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(b,{label:"Nama Pegawai",value:r.namapegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"NIP",value:r.nippegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Pangkat/Golongan",value:r.pangkatgolpegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Jabatan",value:r.jabatanpegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Unit Kerja Pegawai",value:(o==null?void 0:o.unit_kerja)??"",placeholder:"Akan terisi otomatis"}),n==="3"&&a.jsx(b,{label:"Tempat Tugas",value:(o==null?void 0:o.tempat_tugas)??"",placeholder:"Akan terisi otomatis"})]})]})}),a.jsx(H,{title:"Detail Template",description:"Lengkapi informasi khusus untuk template yang dipilih",children:a.jsxs("form",{onSubmit:Oa,className:"space-y-8",children:[Ua(),a.jsxs(H,{title:"Tanda Tangan",description:"Atur tempat dan tanggal penandatanganan",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"ibukota",children:"Tempat"}),a.jsx(l,{id:"ibukota",value:r.ibukota||"",onChange:e=>M("ibukota",e.target.value),placeholder:"Mataram"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tanggal",children:"Tanggal"}),a.jsx(l,{id:"tanggal",type:"date",value:r.tanggal||"",onChange:e=>M("tanggal",e.target.value)})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx(s,{htmlFor:"pejabatStatus",children:"Status Pejabat"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:r.isPltPlh,onChange:e=>{M("isPltPlh",e.target.checked),e.target.checked&&M("pltPlhType","plt")},className:"mr-2"}),"PLT/PLH (Pelaksana Tugas/Pelaksana Harian)"]}),r.isPltPlh&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"plt",checked:r.pltPlhType==="plt",onChange:e=>M("pltPlhType",e.target.value),className:"mr-2"}),"PLT (Pelaksana Tugas)"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"plh",checked:r.pltPlhType==="plh",onChange:e=>M("pltPlhType",e.target.value),className:"mr-2"}),"PLH (Pelaksana Harian)"]})]})]})]})]}),a.jsx("div",{className:"pt-6",children:a.jsx(se,{type:"submit",className:"w-full bg-teal-700 hover:bg-teal-800 text-white",isProcessing:Ma,processingText:"Menyimpan...",children:"Simpan & Generate Surat"})}),da&&a.jsx("div",{className:"text-error mb-2",children:da})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"sticky top-8",children:[a.jsx("div",{className:"mb-4 font-semibold",children:"Lihat hasil surat yang akan dicetak"}),a.jsx(ya,{children:Ha()}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(L,{className:"bg-teal-700 hover:bg-teal-800 text-white flex items-center gap-2",onClick:()=>{A?window.open(ga(`/letters/${A}/preview`),"_blank"):Ba({title:"Info",description:"Surat belum disimpan. Simpan dulu untuk membuka preview.",duration:3e3})},type:"button",children:[a.jsx(Va,{className:"w-4 h-4"}),"Open in New Tab"]}),a.jsxs(L,{className:"bg-teal-700 hover:bg-teal-800 text-white flex items-center gap-2",onClick:()=>{var t;const e=window.open("","","width=900,height=600");if(e){const i=Array.from(document.head.querySelectorAll('link[rel="stylesheet"], style'));e.document.write("<html><head>"),i.forEach(O=>{e.document.write(O.outerHTML)}),e.document.write('</head><body style="background:#f8fafc;">');const N=((t=document.querySelector(".preview-container"))==null?void 0:t.outerHTML)||"";e.document.write(N),e.document.write("</body></html>"),e.document.close(),e.focus(),setTimeout(()=>e.print(),500)}},type:"button",children:[a.jsx(Ra,{className:"w-4 h-4"}),"Cetak"]})]})]})})]})]}),a.jsx(Za,{open:La,onOpenChange:Y,children:a.jsxs(ae,{className:"max-w-4xl w-full",children:[a.jsx(za,{children:"Preview Surat"}),a.jsx("div",{className:"mb-4",children:"Surat berhasil disimpan. Berikut preview surat dari database:"}),a.jsx("div",{className:"bg-white p-4 rounded shadow max-h-[70vh] overflow-auto",children:a.jsx(ya,{children:E?(()=>{var U;let e=E.form_data;if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}if(!e)return a.jsx("div",{className:"text-error",children:"Data surat tidak ditemukan"});const t=String(E.template_id),i=(E.letter_number||"").split("/"),N=(U=E.letter_number)==null?void 0:U.match(/^B-([^/]+)/),O={nosrt:e.nosrt||(N?N[1]:""),nosurat:e.nosurat||(N?N[1]:""),blnno:e.blnno||i[5]||"",blnnomor:e.blnnomor||i[5]||"",thnno:e.thnno||i[6]||"",tahunskrg:e.tahunskrg||i[6]||""},k={...e,...O};return t==="1"?a.jsx(ja,{data:k}):t==="2"?a.jsx(ka,{data:k}):t==="3"?a.jsx(xa,{data:k}):t==="4"?a.jsx(ba,{data:k}):t==="5"?a.jsx(va,{data:k}):t==="6"?a.jsx(fa,{data:k}):t==="7"?a.jsx(Na,{data:k}):t==="8"?a.jsx(Sa,{data:k}):t==="9"?a.jsx(Ta,{data:k}):a.jsx("div",{className:"text-error",children:"Template tidak dikenali"})})():a.jsx("div",{className:"text-center text-muted-foreground",children:"Memuat data surat..."})})}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx(L,{onClick:()=>Y(!1),children:"Tutup"}),a.jsx(L,{onClick:()=>window.open(ga(`/letters/${A}/preview`),"_blank"),variant:"outline",children:"Open in New Tab"})]})]})})]}):a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Template tidak ditemukan"}),a.jsxs(L,{onClick:()=>g("/generator"),children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Kembali ke Pilihan Template"]})]})})},ye=()=>{const{templateId:c}=Fa(),n={templateId:c||""};return a.jsx(re,{initialData:n,autoSave:!1,showToastOnSave:!0,showToastOnError:!0,showToastOnValidation:!1,children:a.jsx(he,{})})};export{ye as default};
//# sourceMappingURL=TemplateForm-DKxupjcu.js.map
