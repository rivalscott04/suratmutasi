const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-sd-Vb4KQ.js","assets/ui-vendor-DiY4nm-6.js","assets/react-vendor-C8WR5ETM.js","assets/card-CwkqGxNf.js","assets/table-DziV8Kax.js","assets/Settings-D4iygQsv.js","assets/label-THTu1QKS.js","assets/textarea-Do7eS2d9.js","assets/checkbox-C4w7p23q.js","assets/switch-CeE1RIkR.js","assets/select-BEzStRhD.js","assets/alert-dialog-lIK93R4R.js","assets/TemplateSelection-WFXVGIik.js","assets/TemplateForm-D2ZIbWZ5.js","assets/PegawaiSearchInput-CFPYVDSH.js","assets/Template9-B0hu2FOi.js","assets/SuratPreviewContainer-BctLaNbQ.js","assets/NotFound-CqBNxDsc.js","assets/Index-DAaEyFlO.js","assets/LetterDetail-pgOLJKur.js","assets/Letters-0-wTrUhf.js","assets/accordion-C7KZhneL.js","assets/LetterPrintPreview-qbeGkIWZ.js","assets/Users-BjklewYs.js","assets/PengajuanSelect-DRJrB_to.js","assets/PengajuanFileUpload-B9cNKfnN.js","assets/progress-XJaURpud.js","assets/PengajuanIndex-DdGywYVo.js","assets/PengajuanDetail-61JmreaV.js","assets/PengajuanEdit-X5jUlYYH.js","assets/JobTypeConfiguration-DbUA89SP.js","assets/AdminWilayahDashboard-C2XpV2YF.js","assets/AdminWilayahUploadPage-BOpFfU2n.js"])))=>i.map(i=>d[i]);
var yn=Object.defineProperty;var kt=t=>{throw TypeError(t)};var vn=(t,e,s)=>e in t?yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Ct=(t,e,s)=>vn(t,typeof e!="symbol"?e+"":e,s),at=(t,e,s)=>e.has(t)||kt("Cannot "+s);var c=(t,e,s)=>(at(t,e,"read from private field"),s?s.call(t):e.get(t)),w=(t,e,s)=>e.has(t)?kt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),b=(t,e,s,a)=>(at(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),D=(t,e,s)=>(at(t,e,"access private method"),s);var Ue=(t,e,s,a)=>({set _(r){b(t,e,r,s)},get _(){return c(t,e,a)}});import{c as as,a as rs,u as is,j as n,A as bn,P as Ge,b as pe,d as jn,D as wn,C as Sn,R as Nn,e as En,f as kn,t as Cn,g as Tn,h as pt,S as Pn,i as os,k as An,l as ls,m as In,n as cs,I as ds,o as us,p as hs,q as On,r as fs,s as _n,L as ms,v as ps,w as Rn,T as Ln,O as xs,x as gs,y as ys,X as xt,z as vs,B as bs,E as Dn,F as Mn,G as Fn,H as dt,U as Ie,J as qe,K as Tt,M as Pt,N as Un,Q as qn,V as Qn,W as zn,Y as At,Z as Kn,_ as Vn,$ as It,a0 as Ot,a1 as _t,a2 as Hn,a3 as $n,a4 as js,a5 as ws,a6 as Ss,a7 as Ns,a8 as Es,a9 as ks,aa as Bn,ab as Gn}from"./ui-vendor-DiY4nm-6.js";import{a as Wn,r as o,u as Jn,L as rt,B as Yn,d as Xn,e as Zn,f as O,N as We}from"./react-vendor-C8WR5ETM.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Cs,Rt=Wn;Cs=Rt.createRoot,Rt.hydrateRoot;const ea="modulepreload",ta=function(t){return"/FE/"+t},Lt={},L=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),l=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=Promise.allSettled(s.map(d=>{if(d=ta(d),d in Lt)return;Lt[d]=!0;const p=d.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":ea,p||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),p)return new Promise((y,E)=>{f.addEventListener("load",y),f.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return r.then(u=>{for(const l of u||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var[Je,si]=as("Tooltip",[rs]),gt=rs(),Ts="TooltipProvider",sa=700,Dt="tooltip.open",[na,Ps]=Je(Ts),As=t=>{const{__scopeTooltip:e,delayDuration:s=sa,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:i}=t,u=o.useRef(!0),l=o.useRef(!1),d=o.useRef(0);return o.useEffect(()=>{const p=d.current;return()=>window.clearTimeout(p)},[]),n.jsx(na,{scope:e,isOpenDelayedRef:u,delayDuration:s,onOpen:o.useCallback(()=>{window.clearTimeout(d.current),u.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>u.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:o.useCallback(p=>{l.current=p},[]),disableHoverableContent:r,children:i})};As.displayName=Ts;var Is="Tooltip",[ni,Ye]=Je(Is),ut="TooltipTrigger",aa=o.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,r=Ye(ut,s),i=Ps(ut,s),u=gt(s),l=o.useRef(null),d=is(e,l,r.onTriggerChange),p=o.useRef(!1),h=o.useRef(!1),f=o.useCallback(()=>p.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(bn,{asChild:!0,...u,children:n.jsx(Ge.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:d,onPointerMove:pe(t.onPointerMove,y=>{y.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{r.open&&r.onClose(),p.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pe(t.onFocus,()=>{p.current||r.onOpen()}),onBlur:pe(t.onBlur,r.onClose),onClick:pe(t.onClick,r.onClose)})})});aa.displayName=ut;var ra="TooltipPortal",[ai,ia]=Je(ra,{forceMount:void 0}),Pe="TooltipContent",Os=o.forwardRef((t,e)=>{const s=ia(Pe,t.__scopeTooltip),{forceMount:a=s.forceMount,side:r="top",...i}=t,u=Ye(Pe,t.__scopeTooltip);return n.jsx(jn,{present:a||u.open,children:u.disableHoverableContent?n.jsx(_s,{side:r,...i,ref:e}):n.jsx(oa,{side:r,...i,ref:e})})}),oa=o.forwardRef((t,e)=>{const s=Ye(Pe,t.__scopeTooltip),a=Ps(Pe,t.__scopeTooltip),r=o.useRef(null),i=is(e,r),[u,l]=o.useState(null),{trigger:d,onClose:p}=s,h=r.current,{onPointerInTransitChange:f}=a,y=o.useCallback(()=>{l(null),f(!1)},[f]),E=o.useCallback((C,v)=>{const S=C.currentTarget,j={x:C.clientX,y:C.clientY},P=ha(j,S.getBoundingClientRect()),x=fa(j,P),m=ma(v.getBoundingClientRect()),k=xa([...x,...m]);l(k),f(!0)},[f]);return o.useEffect(()=>()=>y(),[y]),o.useEffect(()=>{if(d&&h){const C=S=>E(S,h),v=S=>E(S,d);return d.addEventListener("pointerleave",C),h.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",C),h.removeEventListener("pointerleave",v)}}},[d,h,E,y]),o.useEffect(()=>{if(u){const C=v=>{const S=v.target,j={x:v.clientX,y:v.clientY},P=(d==null?void 0:d.contains(S))||(h==null?void 0:h.contains(S)),x=!pa(j,u);P?y():x&&(y(),p())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[d,h,u,p,y]),n.jsx(_s,{...t,ref:i})}),[la,ca]=Je(Is,{isInside:!1}),da=kn("TooltipContent"),_s=o.forwardRef((t,e)=>{const{__scopeTooltip:s,children:a,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:u,...l}=t,d=Ye(Pe,s),p=gt(s),{onClose:h}=d;return o.useEffect(()=>(document.addEventListener(Dt,h),()=>document.removeEventListener(Dt,h)),[h]),o.useEffect(()=>{if(d.trigger){const f=y=>{const E=y.target;E!=null&&E.contains(d.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,h]),n.jsx(wn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:n.jsxs(Sn,{"data-state":d.stateAttribute,...p,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(da,{children:a}),n.jsx(la,{scope:s,isInside:!0,children:n.jsx(Nn,{id:d.contentId,role:"tooltip",children:r||a})})]})})});Os.displayName=Pe;var Rs="TooltipArrow",ua=o.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,r=gt(s);return ca(Rs,s).isInside?null:n.jsx(En,{...r,...a,ref:e})});ua.displayName=Rs;function ha(t,e){const s=Math.abs(e.top-t.y),a=Math.abs(e.bottom-t.y),r=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(s,a,r,i)){case i:return"left";case r:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function fa(t,e,s=5){const a=[];switch(e){case"top":a.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":a.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":a.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":a.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return a}function ma(t){const{top:e,right:s,bottom:a,left:r}=t;return[{x:r,y:e},{x:s,y:e},{x:s,y:a},{x:r,y:a}]}function pa(t,e){const{x:s,y:a}=t;let r=!1;for(let i=0,u=e.length-1;i<e.length;u=i++){const l=e[i],d=e[u],p=l.x,h=l.y,f=d.x,y=d.y;h>a!=y>a&&s<(f-p)*(a-h)/(y-h)+p&&(r=!r)}return r}function xa(t){const e=t.slice();return e.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),ga(e)}function ga(t){if(t.length<=1)return t.slice();const e=[];for(let a=0;a<t.length;a++){const r=t[a];for(;e.length>=2;){const i=e[e.length-1],u=e[e.length-2];if((i.x-u.x)*(r.y-u.y)>=(i.y-u.y)*(r.x-u.x))e.pop();else break}e.push(r)}e.pop();const s=[];for(let a=t.length-1;a>=0;a--){const r=t[a];for(;s.length>=2;){const i=s[s.length-1],u=s[s.length-2];if((i.x-u.x)*(r.y-u.y)>=(i.y-u.y)*(r.x-u.x))s.pop();else break}s.push(r)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var ya=As,Ls=Os;function N(...t){return Cn(Tn(t))}function ri(t){if(!t)return"";const e=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let s,a,r;return/\d{4}-\d{2}-\d{2}/.test(t)?([r,a,s]=t.split("-"),`${parseInt(s,10)} ${e[parseInt(a,10)]} ${r}`):/\d{2}-\d{2}-\d{4}/.test(t)?([s,a,r]=t.split("-"),`${parseInt(s,10)} ${e[parseInt(a,10)]} ${r}`):t}function ii(t){return t?t.toLowerCase().replace(/^(kota|kabupaten)/,e=>e.charAt(0).toUpperCase()+e.slice(1)).replace(/(^| )([a-z])/g,e=>e.toUpperCase()):""}const va=ya,ba=o.forwardRef(({className:t,sideOffset:e=4,...s},a)=>n.jsx(Ls,{ref:a,sideOffset:e,className:N("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));ba.displayName=Ls.displayName;var Xe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ze=typeof window>"u"||"Deno"in globalThis;function K(){}function ja(t,e){return typeof t=="function"?t(e):t}function wa(t){return typeof t=="number"&&t>=0&&t!==1/0}function Sa(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ht(t,e){return typeof t=="function"?t(e):t}function Na(t,e){return typeof t=="function"?t(e):t}function Mt(t,e){const{type:s="all",exact:a,fetchStatus:r,predicate:i,queryKey:u,stale:l}=t;if(u){if(a){if(e.queryHash!==yt(u,e.options))return!1}else if(!De(e.queryKey,u))return!1}if(s!=="all"){const d=e.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function Ft(t,e){const{exact:s,status:a,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(Le(e.options.mutationKey)!==Le(i))return!1}else if(!De(e.options.mutationKey,i))return!1}return!(a&&e.state.status!==a||r&&!r(e))}function yt(t,e){return((e==null?void 0:e.queryKeyHashFn)||Le)(t)}function Le(t){return JSON.stringify(t,(e,s)=>ft(s)?Object.keys(s).sort().reduce((a,r)=>(a[r]=s[r],a),{}):s)}function De(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>De(t[s],e[s])):!1}function Ds(t,e){if(t===e)return t;const s=Ut(t)&&Ut(e);if(s||ft(t)&&ft(e)){const a=s?t:Object.keys(t),r=a.length,i=s?e:Object.keys(e),u=i.length,l=s?[]:{},d=new Set(a);let p=0;for(let h=0;h<u;h++){const f=s?h:i[h];(!s&&d.has(f)||s)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,p++):(l[f]=Ds(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&p++)}return r===u&&p===r?t:l}return e}function Ut(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ft(t){if(!qt(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!qt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ea(t){return new Promise(e=>{setTimeout(e,t)})}function ka(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Ds(t,e):e}function Ca(t,e,s=0){const a=[...t,e];return s&&a.length>s?a.slice(1):a}function Ta(t,e,s=0){const a=[e,...t];return s&&a.length>s?a.slice(0,-1):a}var vt=Symbol();function Ms(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===vt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ce,se,be,Jt,Pa=(Jt=class extends Xe{constructor(){super();w(this,ce);w(this,se);w(this,be);b(this,be,e=>{if(!Ze&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){c(this,se)||this.setEventListener(c(this,be))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,se))==null||e.call(this),b(this,se,void 0))}setEventListener(e){var s;b(this,be,e),(s=c(this,se))==null||s.call(this),b(this,se,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){c(this,ce)!==e&&(b(this,ce,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof c(this,ce)=="boolean"?c(this,ce):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ce=new WeakMap,se=new WeakMap,be=new WeakMap,Jt),Fs=new Pa,je,ne,we,Yt,Aa=(Yt=class extends Xe{constructor(){super();w(this,je,!0);w(this,ne);w(this,we);b(this,we,e=>{if(!Ze&&window.addEventListener){const s=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){c(this,ne)||this.setEventListener(c(this,we))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,ne))==null||e.call(this),b(this,ne,void 0))}setEventListener(e){var s;b(this,we,e),(s=c(this,ne))==null||s.call(this),b(this,ne,e(this.setOnline.bind(this)))}setOnline(e){c(this,je)!==e&&(b(this,je,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return c(this,je)}},je=new WeakMap,ne=new WeakMap,we=new WeakMap,Yt),$e=new Aa;function Ia(){let t,e;const s=new Promise((r,i)=>{t=r,e=i});s.status="pending",s.catch(()=>{});function a(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{a({status:"fulfilled",value:r}),t(r)},s.reject=r=>{a({status:"rejected",reason:r}),e(r)},s}function Oa(t){return Math.min(1e3*2**t,3e4)}function Us(t){return(t??"online")==="online"?$e.isOnline():!0}var mt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function qs(t){let e=!1,s=0,a;const r=Ia(),i=()=>r.status!=="pending",u=v=>{var S;if(!i()){const j=new mt(v);y(j),(S=t.onCancel)==null||S.call(t,j)}},l=()=>{e=!0},d=()=>{e=!1},p=()=>Fs.isFocused()&&(t.networkMode==="always"||$e.isOnline())&&t.canRun(),h=()=>Us(t.networkMode)&&t.canRun(),f=v=>{i()||(a==null||a(),r.resolve(v))},y=v=>{i()||(a==null||a(),r.reject(v))},E=()=>new Promise(v=>{var S;a=j=>{(i()||p())&&v(j)},(S=t.onPause)==null||S.call(t)}).then(()=>{var v;a=void 0,i()||(v=t.onContinue)==null||v.call(t)}),C=()=>{if(i())return;let v;const S=s===0?t.initialPromise:void 0;try{v=S??t.fn()}catch(j){v=Promise.reject(j)}Promise.resolve(v).then(f).catch(j=>{var T;if(i())return;const P=t.retry??(Ze?0:3),x=t.retryDelay??Oa,m=typeof x=="function"?x(s,j):x,k=P===!0||typeof P=="number"&&s<P||typeof P=="function"&&P(s,j);if(e||!k){y(j);return}s++,(T=t.onFail)==null||T.call(t,s,j),Ea(m).then(()=>p()?void 0:E()).then(()=>{e?y(j):C()})})};return{promise:r,status:()=>r.status,cancel:u,continue:()=>(a==null||a(),r),cancelRetry:l,continueRetry:d,canStart:h,start:()=>(h()?C():E().then(C),r)}}var _a=t=>setTimeout(t,0);function Ra(){let t=[],e=0,s=l=>{l()},a=l=>{l()},r=_a;const i=l=>{e?t.push(l):r(()=>{s(l)})},u=()=>{const l=t;t=[],l.length&&r(()=>{a(()=>{l.forEach(d=>{s(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||u()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{r=l}}}var F=Ra(),de,Xt,Qs=(Xt=class{constructor(){w(this,de)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wa(this.gcTime)&&b(this,de,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ze?1/0:5*60*1e3))}clearGcTimeout(){c(this,de)&&(clearTimeout(c(this,de)),b(this,de,void 0))}},de=new WeakMap,Xt),Se,Ne,Q,ue,R,Me,he,V,Y,Zt,La=(Zt=class extends Qs{constructor(e){super();w(this,V);w(this,Se);w(this,Ne);w(this,Q);w(this,ue);w(this,R);w(this,Me);w(this,he);b(this,he,!1),b(this,Me,e.defaultOptions),this.setOptions(e.options),this.observers=[],b(this,ue,e.client),b(this,Q,c(this,ue).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,b(this,Se,Ma(this.options)),this.state=e.state??c(this,Se),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,R))==null?void 0:e.promise}setOptions(e){this.options={...c(this,Me),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,Q).remove(this)}setData(e,s){const a=ka(this.state.data,e,this.options);return D(this,V,Y).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(e,s){D(this,V,Y).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var a,r;const s=(a=c(this,R))==null?void 0:a.promise;return(r=c(this,R))==null||r.cancel(e),s?s.then(K).catch(K):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Se))}isActive(){return this.observers.some(e=>Na(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ht(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Sa(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,R))==null||s.continue()}onOnline(){var s;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=c(this,R))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,Q).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(c(this,R)&&(c(this,he)?c(this,R).cancel({revert:!0}):c(this,R).cancelRetry()),this.scheduleGc()),c(this,Q).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||D(this,V,Y).call(this,{type:"invalidate"})}async fetch(e,s){var d,p,h,f,y,E,C,v,S,j,P,x;if(this.state.fetchStatus!=="idle"&&((d=c(this,R))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,R))return c(this,R).continueRetry(),c(this,R).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(k=>k.options.queryFn);m&&this.setOptions(m.options)}const a=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(b(this,he,!0),a.signal)})},i=()=>{const m=Ms(this.options,s),T=(()=>{const U={client:c(this,ue),queryKey:this.queryKey,meta:this.meta};return r(U),U})();return b(this,he,!1),this.options.persister?this.options.persister(m,T,this):m(T)},l=(()=>{const m={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:c(this,ue),state:this.state,fetchFn:i};return r(m),m})();(p=this.options.behavior)==null||p.onFetch(l,this),b(this,Ne,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&D(this,V,Y).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),b(this,R,qs({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:m=>{m instanceof mt&&m.revert&&this.setState({...c(this,Ne),fetchStatus:"idle"}),a.abort()},onFail:(m,k)=>{D(this,V,Y).call(this,{type:"failed",failureCount:m,error:k})},onPause:()=>{D(this,V,Y).call(this,{type:"pause"})},onContinue:()=>{D(this,V,Y).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const m=await c(this,R).start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),(E=(y=c(this,Q).config).onSuccess)==null||E.call(y,m,this),(v=(C=c(this,Q).config).onSettled)==null||v.call(C,m,this.state.error,this),m}catch(m){if(m instanceof mt){if(m.silent)return c(this,R).promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw D(this,V,Y).call(this,{type:"error",error:m}),(j=(S=c(this,Q).config).onError)==null||j.call(S,m,this),(x=(P=c(this,Q).config).onSettled)==null||x.call(P,this.state.data,m,this),m}finally{this.scheduleGc()}}},Se=new WeakMap,Ne=new WeakMap,Q=new WeakMap,ue=new WeakMap,R=new WeakMap,Me=new WeakMap,he=new WeakMap,V=new WeakSet,Y=function(e){const s=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Da(a.data,this.options),fetchMeta:e.meta??null};case"success":const r={...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return b(this,Ne,e.manual?r:void 0),r;case"error":const i=e.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=s(this.state),F.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),c(this,Q).notify({query:this,type:"updated",action:e})})},Zt);function Da(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Us(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ma(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,a=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var B,es,Fa=(es=class extends Xe{constructor(e={}){super();w(this,B);this.config=e,b(this,B,new Map)}build(e,s,a){const r=s.queryKey,i=s.queryHash??yt(r,s);let u=this.get(i);return u||(u=new La({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(r)}),this.add(u)),u}add(e){c(this,B).has(e.queryHash)||(c(this,B).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=c(this,B).get(e.queryHash);s&&(e.destroy(),s===e&&c(this,B).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){F.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,B).get(e)}getAll(){return[...c(this,B).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Mt(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>Mt(e,a)):s}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){F.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){F.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},B=new WeakMap,es),G,M,fe,W,te,ts,Ua=(ts=class extends Qs{constructor(e){super();w(this,W);w(this,G);w(this,M);w(this,fe);this.mutationId=e.mutationId,b(this,M,e.mutationCache),b(this,G,[]),this.state=e.state||qa(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,G).includes(e)||(c(this,G).push(e),this.clearGcTimeout(),c(this,M).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){b(this,G,c(this,G).filter(s=>s!==e)),this.scheduleGc(),c(this,M).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,G).length||(this.state.status==="pending"?this.scheduleGc():c(this,M).remove(this))}continue(){var e;return((e=c(this,fe))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,u,l,d,p,h,f,y,E,C,v,S,j,P,x,m,k,T,U,J;const s=()=>{D(this,W,te).call(this,{type:"continue"})};b(this,fe,qs({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,z)=>{D(this,W,te).call(this,{type:"failed",failureCount:I,error:z})},onPause:()=>{D(this,W,te).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,M).canRun(this)}));const a=this.state.status==="pending",r=!c(this,fe).canStart();try{if(a)s();else{D(this,W,te).call(this,{type:"pending",variables:e,isPaused:r}),await((u=(i=c(this,M).config).onMutate)==null?void 0:u.call(i,e,this));const z=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,e));z!==this.state.context&&D(this,W,te).call(this,{type:"pending",context:z,variables:e,isPaused:r})}const I=await c(this,fe).start();return await((h=(p=c(this,M).config).onSuccess)==null?void 0:h.call(p,I,e,this.state.context,this)),await((y=(f=this.options).onSuccess)==null?void 0:y.call(f,I,e,this.state.context)),await((C=(E=c(this,M).config).onSettled)==null?void 0:C.call(E,I,null,this.state.variables,this.state.context,this)),await((S=(v=this.options).onSettled)==null?void 0:S.call(v,I,null,e,this.state.context)),D(this,W,te).call(this,{type:"success",data:I}),I}catch(I){try{throw await((P=(j=c(this,M).config).onError)==null?void 0:P.call(j,I,e,this.state.context,this)),await((m=(x=this.options).onError)==null?void 0:m.call(x,I,e,this.state.context)),await((T=(k=c(this,M).config).onSettled)==null?void 0:T.call(k,void 0,I,this.state.variables,this.state.context,this)),await((J=(U=this.options).onSettled)==null?void 0:J.call(U,void 0,I,e,this.state.context)),I}finally{D(this,W,te).call(this,{type:"error",error:I})}}finally{c(this,M).runNext(this)}}},G=new WeakMap,M=new WeakMap,fe=new WeakMap,W=new WeakSet,te=function(e){const s=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),F.batch(()=>{c(this,G).forEach(a=>{a.onMutationUpdate(e)}),c(this,M).notify({mutation:this,type:"updated",action:e})})},ts);function qa(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var X,H,Fe,ss,Qa=(ss=class extends Xe{constructor(e={}){super();w(this,X);w(this,H);w(this,Fe);this.config=e,b(this,X,new Set),b(this,H,new Map),b(this,Fe,0)}build(e,s,a){const r=new Ua({mutationCache:this,mutationId:++Ue(this,Fe)._,options:e.defaultMutationOptions(s),state:a});return this.add(r),r}add(e){c(this,X).add(e);const s=Qe(e);if(typeof s=="string"){const a=c(this,H).get(s);a?a.push(e):c(this,H).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(c(this,X).delete(e)){const s=Qe(e);if(typeof s=="string"){const a=c(this,H).get(s);if(a)if(a.length>1){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}else a[0]===e&&c(this,H).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Qe(e);if(typeof s=="string"){const a=c(this,H).get(s),r=a==null?void 0:a.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var a;const s=Qe(e);if(typeof s=="string"){const r=(a=c(this,H).get(s))==null?void 0:a.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){F.batch(()=>{c(this,X).forEach(e=>{this.notify({type:"removed",mutation:e})}),c(this,X).clear(),c(this,H).clear()})}getAll(){return Array.from(c(this,X))}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Ft(s,a))}findAll(e={}){return this.getAll().filter(s=>Ft(e,s))}notify(e){F.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return F.batch(()=>Promise.all(e.map(s=>s.continue().catch(K))))}},X=new WeakMap,H=new WeakMap,Fe=new WeakMap,ss);function Qe(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Qt(t){return{onFetch:(e,s)=>{var h,f,y,E,C;const a=e.options,r=(y=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:y.direction,i=((E=e.state.data)==null?void 0:E.pages)||[],u=((C=e.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const p=async()=>{let v=!1;const S=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},j=Ms(e.options,e.fetchOptions),P=async(x,m,k)=>{if(v)return Promise.reject();if(m==null&&x.pages.length)return Promise.resolve(x);const U=(()=>{const Z={client:e.client,queryKey:e.queryKey,pageParam:m,direction:k?"backward":"forward",meta:e.options.meta};return S(Z),Z})(),J=await j(U),{maxPages:I}=e.options,z=k?Ta:Ca;return{pages:z(x.pages,J,I),pageParams:z(x.pageParams,m,I)}};if(r&&i.length){const x=r==="backward",m=x?za:zt,k={pages:i,pageParams:u},T=m(a,k);l=await P(k,T,x)}else{const x=t??i.length;do{const m=d===0?u[0]??a.initialPageParam:zt(a,l);if(d>0&&m==null)break;l=await P(l,m),d++}while(d<x)}return l};e.options.persister?e.fetchFn=()=>{var v,S;return(S=(v=e.options).persister)==null?void 0:S.call(v,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=p}}}function zt(t,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,s[a],s):void 0}function za(t,{pages:e,pageParams:s}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,s[0],s):void 0}var A,ae,re,Ee,ke,ie,Ce,Te,ns,Ka=(ns=class{constructor(t={}){w(this,A);w(this,ae);w(this,re);w(this,Ee);w(this,ke);w(this,ie);w(this,Ce);w(this,Te);b(this,A,t.queryCache||new Fa),b(this,ae,t.mutationCache||new Qa),b(this,re,t.defaultOptions||{}),b(this,Ee,new Map),b(this,ke,new Map),b(this,ie,0)}mount(){Ue(this,ie)._++,c(this,ie)===1&&(b(this,Ce,Fs.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onFocus())})),b(this,Te,$e.subscribe(async t=>{t&&(await this.resumePausedMutations(),c(this,A).onOnline())})))}unmount(){var t,e;Ue(this,ie)._--,c(this,ie)===0&&((t=c(this,Ce))==null||t.call(this),b(this,Ce,void 0),(e=c(this,Te))==null||e.call(this),b(this,Te,void 0))}isFetching(t){return c(this,A).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return c(this,ae).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,A).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=c(this,A).build(this,e),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ht(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return c(this,A).findAll(t).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(t,e,s){const a=this.defaultQueryOptions({queryKey:t}),r=c(this,A).get(a.queryHash),i=r==null?void 0:r.state.data,u=ja(e,i);if(u!==void 0)return c(this,A).build(this,a).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return F.batch(()=>c(this,A).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=c(this,A).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=c(this,A);F.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=c(this,A);return F.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},a=F.batch(()=>c(this,A).findAll(t).map(r=>r.cancel(s)));return Promise.all(a).then(K).catch(K)}invalidateQueries(t,e={}){return F.batch(()=>(c(this,A).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},a=F.batch(()=>c(this,A).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,s);return s.throwOnError||(i=i.catch(K)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(K)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=c(this,A).build(this,e);return s.isStaleByTime(ht(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(K).catch(K)}fetchInfiniteQuery(t){return t.behavior=Qt(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(K).catch(K)}ensureInfiniteQueryData(t){return t.behavior=Qt(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return $e.isOnline()?c(this,ae).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,A)}getMutationCache(){return c(this,ae)}getDefaultOptions(){return c(this,re)}setDefaultOptions(t){b(this,re,t)}setQueryDefaults(t,e){c(this,Ee).set(Le(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...c(this,Ee).values()],s={};return e.forEach(a=>{De(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,e){c(this,ke).set(Le(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...c(this,ke).values()],s={};return e.forEach(a=>{De(t,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...c(this,re).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=yt(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===vt&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...c(this,re).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){c(this,A).clear(),c(this,ae).clear()}},A=new WeakMap,ae=new WeakMap,re=new WeakMap,Ee=new WeakMap,ke=new WeakMap,ie=new WeakMap,Ce=new WeakMap,Te=new WeakMap,ns),Va=o.createContext(void 0),Ha=({client:t,children:e})=>(o.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(Va.Provider,{value:t,children:e}));const Kt=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:3001":"";async function et(t,e,s={}){const{data:a,token:r,headers:i={}}=s,u=Kt()+e,l={method:t,headers:{...i},credentials:"include"};r&&(l.headers={...l.headers,Authorization:`Bearer ${r}`}),a&&(typeof FormData<"u"&&a instanceof FormData?l.body=a:(l.headers={"Content-Type":"application/json",...l.headers},l.body=JSON.stringify(a)));let d=await fetch(u,l),p=d.headers.get("content-type"),h;if(p&&p.includes("application/json")?h=await d.json():h=await d.text(),(d.status===401||d.status===403)&&e!=="/api/auth/refresh"&&e!=="/api/auth/me"&&!e.includes("/api/auth/"))try{await new Promise(y=>setTimeout(y,100));const f=await fetch(Kt()+"/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const y=await f.json();if(y.token){if(localStorage.setItem("token",y.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(y.token),l.headers={...l.headers,Authorization:`Bearer ${y.token}`},d=await fetch(u,l),p=d.headers.get("content-type"),p&&p.includes("application/json")?h=await d.json():h=await d.text(),!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}}throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error("Sesi berakhir, silakan login kembali")}catch(f){const y=f instanceof Error?f.message:"Sesi berakhir, silakan login kembali";throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error(y)}if(!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}const Be=(t,e,s)=>et("GET",t,{token:e,headers:s}),it=(t,e,s,a)=>et("POST",t,{data:e,token:s,headers:a}),oi=(t,e,s,a)=>et("PUT",t,{data:e,token:s,headers:a}),li=(t,e,s)=>et("DELETE",t,{token:e,headers:s}),zs=o.createContext({}),$a=({children:t})=>{const[e,s]=o.useState(null),[a,r]=o.useState(null),[i,u]=o.useState(null),[l,d]=o.useState(null),[p,h]=o.useState(!0);o.useEffect(()=>(window.dispatchTokenUpdate=x=>{u(x),localStorage.setItem("token",x)},()=>{delete window.dispatchTokenUpdate}),[]),o.useEffect(()=>{const x=localStorage.getItem("token"),m=localStorage.getItem("originalToken"),k=localStorage.getItem("originalUser");if(x){if(u(x),m&&k)try{d(m),r(JSON.parse(k))}catch(T){console.error("Error parsing stored original user:",T),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}Be("/api/auth/me",x).then(T=>{s(T.user),!a&&!k&&r(T.user)}).catch(T=>{var U,J;console.error("Error fetching user:",T),((U=T.message)!=null&&U.includes("Sesi berakhir")||(J=T.message)!=null&&J.includes("Unauthorized"))&&y()}).finally(()=>h(!1))}else h(!1)},[]);const f=async(x,m)=>{h(!0);try{const k=await it("/api/auth/login",{email:x,password:m});u(k.token),s(k.user),r(k.user),d(null),localStorage.setItem("token",k.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}finally{h(!1)}},y=()=>{u(null),s(null),r(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")},E=async()=>{if(i){h(!0);try{const x=await Be("/api/auth/me",i);s(x.user)}finally{h(!1)}}},C=x=>{u(x),localStorage.setItem("token",x)},v=async x=>{if(!i||!P)throw new Error("Only admin kanwil can impersonate");h(!0);try{l||(d(i),localStorage.setItem("originalToken",i)),a||(r(e),localStorage.setItem("originalUser",JSON.stringify(e)));const m=await it("/api/auth/impersonate",{userId:x},i);u(m.token),s(m.user),localStorage.setItem("token",m.token),console.log("Impersonation started:",m.impersonation)}finally{h(!1)}},S=async()=>{if(!i||!(e!=null&&e.impersonating)&&!l){console.log("No impersonation to stop:",{hasToken:!!i,userImpersonating:e==null?void 0:e.impersonating,hasOriginalToken:!!l});return}h(!0);try{console.log("Stopping impersonation...");const x=await it("/api/auth/stop-impersonate",{},i);u(x.token),s(x.user),d(null),localStorage.setItem("token",x.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),console.log("Impersonation stopped successfully")}catch(x){console.error("Error stopping impersonation:",x),l&&a&&(console.log("Using fallback restore"),u(l),s(a),d(null),localStorage.setItem("token",l),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"))}finally{h(!1)}},j=!!l||!!(e!=null&&e.impersonating),P=(e==null?void 0:e.role)==="admin"&&(e==null?void 0:e.office_id)===null;return n.jsx(zs.Provider,{value:{user:e,originalUser:a,token:i,loading:p,login:f,logout:y,refreshUser:E,isAuthenticated:!!e&&!!i,isImpersonating:j,isAdminKanwil:P,impersonateUser:v,stopImpersonating:S,updateToken:C},children:t})},me=()=>o.useContext(zs),Ba=pt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=o.forwardRef(({className:t,variant:e,size:s,asChild:a=!1,...r},i)=>{const u=a?Pn:"button";return n.jsx(u,{className:N(Ba({variant:e,size:s,className:t})),ref:i,...r})});q.displayName="Button";const Ga=Rn,Wa=Ln,Ja=o.forwardRef(({className:t,inset:e,children:s,...a},r)=>n.jsxs(os,{ref:r,className:N("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...a,children:[s,n.jsx(An,{className:"ml-auto h-4 w-4"})]}));Ja.displayName=os.displayName;const Ya=o.forwardRef(({className:t,...e},s)=>n.jsx(ls,{ref:s,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Ya.displayName=ls.displayName;const Ks=o.forwardRef(({className:t,sideOffset:e=4,...s},a)=>n.jsx(In,{children:n.jsx(cs,{ref:a,sideOffset:e,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Ks.displayName=cs.displayName;const ze=o.forwardRef(({className:t,inset:e,...s},a)=>n.jsx(ds,{ref:a,className:N("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...s}));ze.displayName=ds.displayName;const Xa=o.forwardRef(({className:t,children:e,checked:s,...a},r)=>n.jsxs(us,{ref:r,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...a,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(hs,{children:n.jsx(On,{className:"h-4 w-4"})})}),e]}));Xa.displayName=us.displayName;const Za=o.forwardRef(({className:t,children:e,...s},a)=>n.jsxs(fs,{ref:a,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(hs,{children:n.jsx(_n,{className:"h-2 w-2 fill-current"})})}),e]}));Za.displayName=fs.displayName;const Vs=o.forwardRef(({className:t,inset:e,...s},a)=>n.jsx(ms,{ref:a,className:N("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));Vs.displayName=ms.displayName;const Ke=o.forwardRef(({className:t,...e},s)=>n.jsx(ps,{ref:s,className:N("-mx-1 my-1 h-px bg-muted",t),...e}));Ke.displayName=ps.displayName;const Oe=Dn,er=Mn,ci=ys,Hs=o.forwardRef(({className:t,...e},s)=>n.jsx(xs,{ref:s,className:N("fixed inset-0 z-[9999] bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 duration-200",t),...e}));Hs.displayName=xs.displayName;const xe=o.forwardRef(({className:t,children:e,...s},a)=>n.jsxs(er,{children:[n.jsx(Hs,{}),n.jsxs(gs,{ref:a,className:N("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(ys,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xe.displayName=gs.displayName;const ge=({className:t,...e})=>n.jsx("div",{className:N("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ge.displayName="DialogHeader";const tr=({className:t,...e})=>n.jsx("div",{className:N("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});tr.displayName="DialogFooter";const ye=o.forwardRef(({className:t,...e},s)=>n.jsx(vs,{ref:s,className:N("text-lg font-semibold leading-none tracking-tight",t),...e}));ye.displayName=vs.displayName;const ve=o.forwardRef(({className:t,...e},s)=>n.jsx(bs,{ref:s,className:N("text-sm text-muted-foreground",t),...e}));ve.displayName=bs.displayName;var $s={exports:{}},Bs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=o;function sr(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:sr,ar=Ae.useState,rr=Ae.useEffect,ir=Ae.useLayoutEffect,or=Ae.useDebugValue;function lr(t,e){var s=e(),a=ar({inst:{value:s,getSnapshot:e}}),r=a[0].inst,i=a[1];return ir(function(){r.value=s,r.getSnapshot=e,ot(r)&&i({inst:r})},[t,s,e]),rr(function(){return ot(r)&&i({inst:r}),t(function(){ot(r)&&i({inst:r})})},[t]),or(s),s}function ot(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!nr(t,s)}catch{return!0}}function cr(t,e){return e()}var dr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cr:lr;Bs.useSyncExternalStore=Ae.useSyncExternalStore!==void 0?Ae.useSyncExternalStore:dr;$s.exports=Bs;var ur=$s.exports;function hr(){return ur.useSyncExternalStore(fr,()=>!0,()=>!1)}function fr(){return()=>{}}var bt="Avatar",[mr,di]=as(bt),[pr,Gs]=mr(bt),Ws=o.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[r,i]=o.useState("idle");return n.jsx(pr,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:n.jsx(Ge.span,{...a,ref:e})})});Ws.displayName=bt;var Js="AvatarImage",Ys=o.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:r=()=>{},...i}=t,u=Gs(Js,s),l=xr(a,i),d=Fn(p=>{r(p),u.onImageLoadingStatusChange(p)});return dt(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?n.jsx(Ge.img,{...i,ref:e,src:a}):null});Ys.displayName=Js;var Xs="AvatarFallback",Zs=o.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...r}=t,i=Gs(Xs,s),[u,l]=o.useState(a===void 0);return o.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(d)}},[a]),u&&i.imageLoadingStatus!=="loaded"?n.jsx(Ge.span,{...r,ref:e}):null});Zs.displayName=Xs;function Vt(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function xr(t,{referrerPolicy:e,crossOrigin:s}){const a=hr(),r=o.useRef(null),i=a?(r.current||(r.current=new window.Image),r.current):null,[u,l]=o.useState(()=>Vt(i,t));return dt(()=>{l(Vt(i,t))},[i,t]),dt(()=>{const d=f=>()=>{l(f)};if(!i)return;const p=d("loaded"),h=d("error");return i.addEventListener("load",p),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",p),i.removeEventListener("error",h)}},[i,s,e]),u}var en=Ws,tn=Ys,sn=Zs;const nn=o.forwardRef(({className:t,...e},s)=>n.jsx(en,{ref:s,className:N("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));nn.displayName=en.displayName;const gr=o.forwardRef(({className:t,...e},s)=>n.jsx(tn,{ref:s,className:N("aspect-square h-full w-full",t),...e}));gr.displayName=tn.displayName;const an=o.forwardRef(({className:t,...e},s)=>n.jsx(sn,{ref:s,className:N("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));an.displayName=sn.displayName;const rn=o.forwardRef(({className:t,type:e,...s},a)=>n.jsx("input",{type:e,className:N("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s}));rn.displayName="Input";const yr=pt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ht({className:t,variant:e,...s}){return n.jsx("div",{className:N(yr({variant:e}),t),...s})}const vr=()=>{const{user:t,originalUser:e,isImpersonating:s,impersonateUser:a,stopImpersonating:r,logout:i,token:u,loading:l,isAdminKanwil:d}=me(),p=Jn(),[h,f]=o.useState(!1),[y,E]=o.useState(!1),[C,v]=o.useState(!1),[S,j]=o.useState(!1),[P,x]=o.useState(!1),[m,k]=o.useState(""),[T,U]=o.useState([]),[J,I]=o.useState(!1),[z,Z]=o.useState(!1),[st,hn]=o.useState(""),jt=(()=>{const g=s?(e==null?void 0:e.role)==="admin":(t==null?void 0:t.role)==="admin",$=(t==null?void 0:t.role)==="admin_wilayah",ee=[{name:"Dashboard",href:"/dashboard",icon:It},{name:"Template Generator",href:"/generator",icon:Ot},{name:"Riwayat Surat",href:"/letters",icon:Ot},{name:"Data Pengajuan",href:"/pengajuan",icon:_t}];return g&&ee.push({name:"Management User",href:"/users",icon:Hn}),$&&(ee.unshift({name:"Dashboard Admin Wilayah",href:"/admin-wilayah/dashboard",icon:It}),ee.push({name:"Upload File",href:"/admin-wilayah/dashboard",icon:_t})),ee.push({name:"Settings",href:"/settings",icon:$n}),ee})();o.useEffect(()=>{z&&d&&fn()},[z,d]);const fn=async()=>{if(u){I(!0);try{console.log(" Fetching users for impersonation...");const g=await Be("/api/users",u);console.log(" Raw users response:",g);const $=g.users.filter(ee=>ee.id!==(e==null?void 0:e.id)&&ee.role!=="admin");console.log(" Filtered users:",$),U($)}catch(g){console.error(" Failed to fetch users:",g),U([])}finally{I(!1)}}},wt=g=>g==="/letters"?p.pathname.startsWith("/letters"):g==="/pengajuan"?p.pathname.startsWith("/pengajuan"):p.pathname===g,St=()=>{E(!0),f(!1)},mn=()=>{i(),E(!1)},Nt=()=>{Z(!0),f(!1)},pn=g=>{k(g),Z(!1),v(!0)},Et=T.filter(g=>g.full_name.toLowerCase().includes(st.toLowerCase())||g.email.toLowerCase().includes(st.toLowerCase())),xn=async()=>{if(m)try{await a(m),v(!1),k("")}catch(g){console.error("Failed to impersonate user:",g),alert("Failed to impersonate user. Please try again.")}},nt=()=>{j(!0),f(!1)},gn=async()=>{try{await r(),j(!1),x(!0),setTimeout(()=>{x(!1)},3e3)}catch(g){console.error("Failed to stop impersonating:",g),alert("Failed to stop impersonating. Please try again.")}};return n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs(rt,{to:"/dashboard",className:"flex items-center space-x-3",children:[n.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Kementerian Agama",className:"h-8 w-8",onError:g=>{console.error("Logo Kemenag not found"),g.currentTarget.style.display="none"}}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("h1",{className:"text-lg font-semibold text-green-700",children:"Si Imut"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Sistem Informasi Mutasi"})]})]})}),s&&n.jsxs("div",{className:"hidden md:flex items-center bg-blue-50 border border-blue-200 rounded-lg px-3 py-1",children:[n.jsx(Ie,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Impersonating: ",t==null?void 0:t.full_name]}),n.jsx(q,{variant:"ghost",size:"sm",onClick:nt,className:"ml-2 h-6 px-2 text-blue-600 hover:text-blue-700",children:n.jsx(qe,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"hidden md:flex items-center space-x-8",children:jt.map(g=>{const $=g.icon;return n.jsxs(rt,{to:g.href,className:N("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",wt(g.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),children:[n.jsx($,{className:"h-4 w-4"}),n.jsx("span",{children:g.name})]},g.name)})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(Ga,{children:[n.jsx(Wa,{asChild:!0,children:n.jsx(q,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:n.jsx(nn,{className:"h-8 w-8",children:n.jsx(an,{className:"bg-green-100 text-green-700",children:l?n.jsx("span",{className:"animate-pulse w-6 h-6 block bg-green-200 rounded-full mx-auto"}):t!=null&&t.full_name?t.full_name.split(" ").map(g=>g[0]).join("").toUpperCase():"?"})})})}),n.jsxs(Ks,{className:"w-64",align:"end",children:[n.jsx(Vs,{className:"font-normal",children:n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("p",{className:"text-sm font-semibold leading-none",children:t==null?void 0:t.full_name}),n.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t==null?void 0:t.email}),d?n.jsx("p",{className:"text-xs leading-none text-blue-600 font-medium",children:" Admin Kanwil (All Access)"}):n.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Role: ",t==null?void 0:t.role]}),(t==null?void 0:t.office_id)&&!d&&n.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Office ID: ",t.office_id]}),s&&n.jsxs("p",{className:"text-xs leading-none text-blue-600",children:["Impersonating as ",t==null?void 0:t.full_name]})]})}),n.jsx(Ke,{}),s&&n.jsxs(n.Fragment,{children:[n.jsxs(ze,{onClick:nt,className:"text-blue-600",children:[n.jsx(qe,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Stop Impersonating"})]}),n.jsx(Ke,{})]}),d&&!s&&n.jsxs(n.Fragment,{children:[n.jsxs(ze,{onClick:Nt,className:"text-blue-600",children:[n.jsx(Tt,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsx(Ke,{})]}),n.jsxs(ze,{onClick:St,className:"text-red-600",children:[n.jsx(Pt,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Logout"})]})]})]}),n.jsx(q,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>f(!h),children:h?n.jsx(xt,{className:"h-5 w-5"}):n.jsx(Un,{className:"h-5 w-5"})})]})]}),h&&n.jsx("div",{className:"md:hidden",children:n.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[jt.map(g=>{const $=g.icon;return n.jsxs(rt,{to:g.href,className:N("flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium",wt(g.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),onClick:()=>f(!1),children:[n.jsx($,{className:"h-5 w-5"}),n.jsx("span",{children:g.name})]},g.name)}),s&&n.jsxs("button",{onClick:nt,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(qe,{className:"h-5 w-5"}),n.jsx("span",{children:"Stop Impersonating"})]}),d&&!s&&n.jsxs("button",{onClick:Nt,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(Tt,{className:"h-5 w-5"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsxs("button",{onClick:St,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 w-full",children:[n.jsx(Pt,{className:"h-5 w-5"}),n.jsx("span",{children:"Logout"})]})]})})]})}),n.jsx(Oe,{open:y,onOpenChange:E,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(qn,{className:"w-5 h-5 text-orange-500"}),"Konfirmasi Logout"]}),n.jsx(ve,{children:"Apakah Anda yakin ingin keluar dari sistem? Anda perlu login kembali untuk mengakses aplikasi."})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>E(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:mn,className:"bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]})}),n.jsx(Oe,{open:z,onOpenChange:Z,children:n.jsxs(xe,{className:"sm:max-w-lg",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Ie,{className:"w-5 h-5 text-blue-500"}),"Pilih User untuk Impersonate"]}),n.jsx(ve,{children:"Pilih user yang ingin Anda impersonate dari daftar di bawah ini."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx(rn,{placeholder:"Cari user...",value:st,onChange:g=>hn(g.target.value),className:"pl-10"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:J?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(zn,{className:"w-6 h-6 animate-spin mr-2"}),n.jsx("span",{className:"text-sm text-gray-500",children:"Loading users..."})]}):T.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang tersedia untuk impersonation"}):Et.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang cocok dengan pencarian"}):n.jsx("div",{className:"divide-y",children:Et.map(g=>n.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>pn(g.id),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(At,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:g.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:g.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Ht,{variant:"outline",className:"text-xs",children:g.role}),n.jsx("span",{className:"text-xs text-gray-500",children:g.office_id||"No Office"})]})]})]})},g.id))})})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx(q,{onClick:()=>Z(!1),variant:"outline",children:"Batal"})})]})}),n.jsx(Oe,{open:C,onOpenChange:v,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Ie,{className:"w-5 h-5 text-blue-500"}),"Impersonate User"]}),n.jsx(ve,{children:"Konfirmasi untuk impersonate user yang dipilih."})]}),n.jsxs("div",{className:"space-y-4",children:[m&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(At,{className:"w-4 h-4 text-blue-600"})}),n.jsx("div",{className:"flex-1",children:(()=>{const g=T.find($=>$.id===m);return g?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-sm",children:g.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:g.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Ht,{variant:"outline",className:"text-xs",children:g.role}),n.jsx("span",{className:"text-xs text-gray-500",children:g.office_id||"No Office"})]})]}):n.jsx("div",{className:"text-sm text-gray-500",children:"User tidak ditemukan"})})()})]})}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsxs(q,{onClick:()=>{v(!1),Z(!0)},variant:"outline",className:"w-full",children:[n.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Pilih User Lain"]})})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>v(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:xn,disabled:!m,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Impersonate"})]})]})}),n.jsx(Oe,{open:S,onOpenChange:j,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(qe,{className:"w-5 h-5 text-blue-500"}),"Stop Impersonating"]}),n.jsxs(ve,{children:["Anda sedang mengakses sistem sebagai ",n.jsx("strong",{children:t==null?void 0:t.full_name}),". Apakah Anda yakin ingin kembali ke akun admin Anda?"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Setelah stop impersonate, Anda akan kembali ke akun: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{onClick:()=>j(!1),variant:"outline",children:"Batal"}),n.jsx(q,{onClick:gn,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Ya, Stop Impersonating"})]})]})}),n.jsx(Oe,{open:P,onOpenChange:x,children:n.jsxs(xe,{className:"sm:max-w-md",children:[n.jsxs(ge,{children:[n.jsxs(ye,{className:"flex items-center gap-2",children:[n.jsx(Vn,{className:"w-5 h-5 text-green-500"}),"Stop Impersonating Berhasil"]}),n.jsx(ve,{children:"Anda telah berhasil kembali ke akun admin Anda."})]}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ie,{className:"w-4 h-4 text-green-600 mr-2"}),n.jsxs("span",{className:"text-sm text-green-700",children:["Sekarang Anda mengakses sistem sebagai: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(q,{onClick:()=>x(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"OK"})})]})})]})};function oe({className:t,...e}){return n.jsx("div",{className:N("animate-pulse rounded-md bg-muted",t),...e})}const br=1,jr=1e6;let lt=0;function wr(){return lt=(lt+1)%Number.MAX_SAFE_INTEGER,lt.toString()}const ct=new Map,$t=t=>{if(ct.has(t))return;const e=setTimeout(()=>{ct.delete(t),Re({type:"REMOVE_TOAST",toastId:t})},jr);ct.set(t,e)},Sr=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,br)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?$t(s):t.toasts.forEach(a=>{$t(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},Ve=[];let He={toasts:[]};function Re(t){He=Sr(He,t),Ve.forEach(e=>{e(He)})}function Nr({...t}){const e=wr(),s=r=>Re({type:"UPDATE_TOAST",toast:{...r,id:e}}),a=()=>Re({type:"DISMISS_TOAST",toastId:e});return Re({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:r=>{r||a()}}}),{id:e,dismiss:a,update:s}}function Er(){const[t,e]=o.useState(He);return o.useEffect(()=>(Ve.push(e),()=>{const s=Ve.indexOf(e);s>-1&&Ve.splice(s,1)}),[t]),{...t,toast:Nr,dismiss:s=>Re({type:"DISMISS_TOAST",toastId:s})}}const kr=Bn,on=o.forwardRef(({className:t,...e},s)=>n.jsx(js,{ref:s,className:N("fixed top-0 z-[10000] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));on.displayName=js.displayName;const Cr=pt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ln=o.forwardRef(({className:t,variant:e,...s},a)=>n.jsx(ws,{ref:a,className:N(Cr({variant:e}),t),...s}));ln.displayName=ws.displayName;const Tr=o.forwardRef(({className:t,...e},s)=>n.jsx(Ss,{ref:s,className:N("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Tr.displayName=Ss.displayName;const cn=o.forwardRef(({className:t,...e},s)=>n.jsx(Ns,{ref:s,className:N("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(xt,{className:"h-4 w-4"})}));cn.displayName=Ns.displayName;const dn=o.forwardRef(({className:t,...e},s)=>n.jsx(Es,{ref:s,className:N("text-sm font-semibold",t),...e}));dn.displayName=Es.displayName;const un=o.forwardRef(({className:t,...e},s)=>n.jsx(ks,{ref:s,className:N("text-sm opacity-90",t),...e}));un.displayName=ks.displayName;function Bt(){const{toasts:t}=Er();return n.jsxs(kr,{children:[t.map(function({id:e,title:s,description:a,action:r,...i}){return n.jsxs(ln,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(dn,{children:s}),a&&n.jsx(un,{children:a})]}),r,n.jsx(cn,{})]},e)}),n.jsx(on,{})]})}const tt=({children:t})=>{const{user:e,token:s,refreshUser:a}=me(),[r,i]=o.useState(!1),[u,l]=o.useState([]);return o.useState(""),o.useState(!1),o.useState(null),o.useEffect(()=>{e&&!e.office_id?(i(!0),s&&Be("/api/offices",s).then(d=>l(d.offices||[]))):i(!1)},[e,s]),!e&&s?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"h-16 bg-white border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(oe,{className:"h-8 w-8 rounded"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(oe,{className:"h-4 w-32"}),n.jsx(oe,{className:"h-3 w-24"})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx(oe,{className:"h-8 w-8 rounded-full"})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(oe,{className:"h-8 w-48"}),n.jsx(oe,{className:"h-32 w-full"}),n.jsx(oe,{className:"h-32 w-full"})]})}),n.jsx(Bt,{})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(vr,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),n.jsx(Bt,{})]})};class Pr extends o.Component{constructor(){super(...arguments);Ct(this,"state",{hasError:!1})}static getDerivedStateFromError(s){return s.message.includes("403")||s.message.includes("Forbidden")?(window.showSessionExpiredModal&&window.showSessionExpiredModal(),{hasError:!1}):{hasError:!0,error:s}}componentDidCatch(s,a){if(console.error("ErrorBoundary caught an error:",s,a),s.message.includes("403")||s.message.includes("Forbidden")){window.showSessionExpiredModal&&window.showSessionExpiredModal();return}}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:n.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Terjadi Kesalahan"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maaf, terjadi kesalahan yang tidak terduga. Silakan coba refresh halaman atau hubungi administrator."}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>window.location.reload(),children:"Refresh Halaman"})})]})})}):this.props.children}}const Ar=o.lazy(()=>L(()=>import("./Dashboard-sd-Vb4KQ.js"),__vite__mapDeps([0,1,2,3,4]))),Ir=o.lazy(()=>L(()=>import("./Settings-D4iygQsv.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,10,11]))),Or=o.lazy(()=>L(()=>import("./TemplateSelection-WFXVGIik.js"),__vite__mapDeps([12,1,2,3]))),_r=o.lazy(()=>L(()=>import("./TemplateForm-D2ZIbWZ5.js"),__vite__mapDeps([13,1,2,6,10,14,3,15,16]))),Rr=o.lazy(()=>L(()=>import("./NotFound-CqBNxDsc.js"),__vite__mapDeps([17,1,2]))),Lr=o.lazy(()=>L(()=>import("./Index-DAaEyFlO.js"),__vite__mapDeps([18,1,2,6,3]))),Dr=o.lazy(()=>L(()=>import("./LetterDetail-pgOLJKur.js"),__vite__mapDeps([19,1,2,3,15,4,16]))),Mr=o.lazy(()=>L(()=>import("./Letters-0-wTrUhf.js"),__vite__mapDeps([20,1,2,3,4,15,21,10,14,6]))),Fr=o.lazy(()=>L(()=>import("./LetterPrintPreview-qbeGkIWZ.js"),__vite__mapDeps([22,1,2,15]))),Ur=o.lazy(()=>L(()=>import("./Users-BjklewYs.js"),__vite__mapDeps([23,1,2,6,10,4,11,3]))),qr=o.lazy(()=>L(()=>import("./PengajuanSelect-DRJrB_to.js"),__vite__mapDeps([24,1,2,3,8,4]))),Qr=o.lazy(()=>L(()=>import("./PengajuanFileUpload-B9cNKfnN.js"),__vite__mapDeps([25,1,2,3,26,11]))),zr=o.lazy(()=>L(()=>import("./PengajuanIndex-DdGywYVo.js"),__vite__mapDeps([27,1,2,3,10,4,21,11]))),Kr=o.lazy(()=>L(()=>import("./PengajuanDetail-61JmreaV.js"),__vite__mapDeps([28,1,2,3,11,7,6,9]))),Vr=o.lazy(()=>L(()=>import("./PengajuanEdit-X5jUlYYH.js"),__vite__mapDeps([29,1,2,3,6,11]))),Hr=o.lazy(()=>L(()=>import("./JobTypeConfiguration-DbUA89SP.js"),__vite__mapDeps([30,1,2,3,6,8,9]))),$r=o.lazy(()=>L(()=>import("./AdminWilayahDashboard-C2XpV2YF.js"),__vite__mapDeps([31,1,2,3,26]))),Br=o.lazy(()=>L(()=>import("./AdminWilayahUploadPage-BOpFfU2n.js"),__vite__mapDeps([32,1,2,3,10,11]))),_=()=>n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),Gr=new Ka,le=({children:t})=>{const{user:e,loading:s}=me();return s?null:e?n.jsx(tt,{children:t}):n.jsx(We,{to:"/",replace:!0})},Gt=({children:t})=>{const{user:e,loading:s}=me();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"?n.jsx(We,{to:"/dashboard",replace:!0}):n.jsx(tt,{children:t})},_e=({children:t})=>{const{user:e,loading:s}=me();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin"&&e.role!=="operator"?n.jsx(We,{to:"/dashboard",replace:!0}):n.jsx(tt,{children:t})},Wt=({children:t})=>{const{user:e,loading:s}=me();return s?n.jsx("div",{children:"Loading..."}):!e||e.role!=="admin_wilayah"?n.jsx(We,{to:"/dashboard",replace:!0}):n.jsx(tt,{children:t})},Wr=()=>n.jsxs(Zn,{children:[n.jsx(O,{path:"/",element:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Lr,{})})}),n.jsx(O,{path:"/dashboard",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Ar,{})})})}),n.jsx(O,{path:"/generator",element:n.jsx(_e,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Or,{})})})}),n.jsx(O,{path:"/generator/create/:templateId",element:n.jsx(_e,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(_r,{})})})}),n.jsx(O,{path:"/users",element:n.jsx(Gt,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Ur,{})})})}),n.jsx(O,{path:"/settings",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Ir,{})})})}),n.jsx(O,{path:"/letters/:id",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Dr,{})})})}),n.jsx(O,{path:"/letters",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Mr,{})})})}),n.jsx(O,{path:"/letters/:id/preview",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Fr,{})})})}),n.jsx(O,{path:"/pengajuan",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(zr,{})})})}),n.jsx(O,{path:"/pengajuan/select",element:n.jsx(_e,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(qr,{})})})}),n.jsx(O,{path:"/pengajuan/:pengajuanId",element:n.jsx(le,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Kr,{})})})}),n.jsx(O,{path:"/pengajuan/:pengajuanId/upload",element:n.jsx(_e,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Qr,{})})})}),n.jsx(O,{path:"/pengajuan/:pengajuanId/edit",element:n.jsx(_e,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Vr,{})})})}),n.jsx(O,{path:"/job-type-configuration",element:n.jsx(Gt,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Hr,{})})})}),n.jsx(O,{path:"/admin-wilayah/dashboard",element:n.jsx(Wt,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx($r,{})})})}),n.jsx(O,{path:"/admin-wilayah/upload/:pengajuanId",element:n.jsx(Wt,{children:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Br,{})})})}),n.jsx(O,{path:"*",element:n.jsx(o.Suspense,{fallback:n.jsx(_,{}),children:n.jsx(Rr,{})})})]}),Jr=()=>{const[t,e]=o.useState(!1),s=Xn(),{logout:a}=me();return o.useEffect(()=>{window.showSessionExpiredModal=()=>{const l=window.location.pathname;l==="/"||l==="/login"||e(!0)},window.dispatchTokenUpdate=l=>{localStorage.setItem("token",l)};const r=l=>{var d,p;if(l.error&&typeof l.error=="object"){const h=l.error;if(h.status===403||(d=h.message)!=null&&d.includes("403")||(p=h.message)!=null&&p.includes("Forbidden")){l.preventDefault();const f=window.location.pathname;!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},i=l=>{var d,p;if(l.reason&&typeof l.reason=="object"){const h=l.reason;if(h.status===403||(d=h.message)!=null&&d.includes("403")||(p=h.message)!=null&&p.includes("Forbidden")){l.preventDefault();const f=window.location.pathname;!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},u=window.fetch;return window.fetch=async(...l)=>{try{const d=await u(...l);if(d.status===403&&!(typeof l[0]=="string"?l[0]:l[0].url).includes("/api/auth/")){const h=window.location.pathname;return!(h==="/"||h==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Response(JSON.stringify({success:!1,message:"Sesi berakhir, silakan login kembali"}),{status:403,headers:{"Content-Type":"application/json"}})}return d}catch(d){throw d}},window.addEventListener("error",r),window.addEventListener("unhandledrejection",i),()=>{window.removeEventListener("error",r),window.removeEventListener("unhandledrejection",i),window.fetch=u,delete window.showSessionExpiredModal,delete window.dispatchTokenUpdate}},[]),n.jsx(Ha,{client:Gr,children:n.jsxs(va,{children:[t&&n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200",children:[n.jsx(Gn,{className:"w-16 h-16 text-yellow-500 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"Sesi Berakhir"}),n.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Sesi Anda telah habis. Silakan login kembali untuk melanjutkan."}),n.jsx("button",{className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{try{localStorage.removeItem("token")}catch{}try{a()}catch{}e(!1);try{window.location.assign("/")}catch{s("/",{replace:!0})}},children:"Login Ulang"})]})}),n.jsx($a,{children:n.jsx(Wr,{})})]})})},Yr=()=>n.jsx(Pr,{children:n.jsx(Yn,{basename:"/FE",children:n.jsx(Jr,{})})});{const t=(...e)=>{};console.log=t,console.debug=t,console.info=t,console.warn=t}Cs(document.getElementById("root")).render(n.jsx(Yr,{}));export{q as B,Oe as D,rn as I,oe as S,Be as a,Ht as b,N as c,Er as d,xe as e,ge as f,ye as g,ve as h,tr as i,oi as j,it as k,ci as l,li as m,ri as n,ii as o,Ga as p,Wa as q,Ks as r,ze as s,Nr as t,me as u,Ba as v};
//# sourceMappingURL=index-BVaUMgfr.js.map
