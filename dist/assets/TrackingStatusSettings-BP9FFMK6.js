import{j as a,ar as E,as as B,at as P,bi as H}from"./ui-vendor-B7g5fNgE.js";import{r as n}from"./react-vendor-BNG1zHOu.js";import{u as F,d as I,a as K,D as O,A as $,B as c,e as G,f as L,g as M,h as U,I as f,i as z,b as R,j as q,c as J,l as Q}from"./index-BQ3AkV0g.js";import{L as h}from"./label-CT4N1eM_.js";import{T as V}from"./textarea-CixiOszQ.js";import{S as W}from"./switch-C6oPrkoq.js";import{C as X,a as Y,b as Z,d as aa,c as sa}from"./card-BxGrc11R.js";import{A as ea,h as ta,a as ra,b as ia,c as na,d as la,e as ca,g as da,f as oa}from"./alert-dialog-XJWdMrzJ.js";import{T as ua,a as ma,b as _,c as d,d as ha,e as o}from"./table-Cd7D0qcd.js";import{P as S}from"./PageHeader-D0Oy2vF9.js";const Na=()=>{const{user:ga,token:u}=F(),{toast:t}=I(),[x,D]=n.useState([]),[N,p]=n.useState(!0),[T,m]=n.useState(!1),[r,j]=n.useState(null),[k,v]=n.useState(!1),[i,l]=n.useState({status_name:"",status_code:"",description:"",is_active:!0,sort_order:0});n.useEffect(()=>{g()},[]);const g=async()=>{try{p(!0);const s=await K("/api/tracking/status-master/all",u);s.success&&D(s.data)}catch(s){console.error("Error loading tracking statuses:",s),t({title:"Error",description:"Gagal memuat data status tracking",variant:"destructive"})}finally{p(!1)}},b=s=>{s?(j(s),l({status_name:s.status_name,status_code:s.status_code,description:s.description||"",is_active:s.is_active,sort_order:s.sort_order})):(j(null),l({status_name:"",status_code:"",description:"",is_active:!0,sort_order:0})),m(!0)},C=async()=>{try{if(v(!0),!i.status_name){t({title:"Error",description:"Nama status harus diisi",variant:"destructive"});return}const s={...i,status_code:r?i.status_code:`status-${Date.now()}`};let e;r?e=await q(`/api/tracking/status-master/${r.id}`,s,u):e=await J("/api/tracking/status-master",s,u),e.success?(t({title:"Berhasil",description:r?"Status tracking berhasil diperbarui":"Status tracking berhasil dibuat"}),m(!1),g()):t({title:"Error",description:e.message||"Terjadi kesalahan",variant:"destructive"})}catch(s){console.error("Error submitting form:",s),t({title:"Error",description:"Terjadi kesalahan saat menyimpan data",variant:"destructive"})}finally{v(!1)}},y=async s=>{try{const e=await Q(`/api/tracking/status-master/${s.id}`,u);e.success?(t({title:"Berhasil",description:"Status tracking berhasil dihapus"}),g()):t({title:"Error",description:e.message||"Gagal menghapus status tracking",variant:"destructive"})}catch(e){console.error("Error deleting status:",e),t({title:"Error",description:"Terjadi kesalahan saat menghapus data",variant:"destructive"})}},w=s=>`status-${Date.now()}`,A=s=>{l(e=>({...e,status_name:s,status_code:r?e.status_code:w()}))};return N?a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx(S,{title:"Konfigurasi Status Tracking"}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Memuat data..."})]})})]}):a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx(S,{title:"Konfigurasi Status Tracking"}),a.jsx("div",{className:"mb-6",children:a.jsxs(X,{children:[a.jsx(Y,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Z,{children:"Master Status Tracking"}),a.jsx(aa,{children:"Kelola status tracking yang tersedia untuk admin pusat"})]}),a.jsxs(O,{open:T,onOpenChange:m,children:[a.jsx($,{asChild:!0,children:a.jsxs(c,{onClick:()=>b(),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(E,{className:"h-4 w-4 mr-2"}),"Tambah Status"]})}),a.jsxs(G,{className:"sm:max-w-[425px]",children:[a.jsxs(L,{children:[a.jsx(M,{children:r?"Edit Status Tracking":"Tambah Status Tracking"}),a.jsx(U,{children:r?"Perbarui informasi status tracking":"Buat status tracking baru untuk admin pusat"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(h,{htmlFor:"status_name",children:"Nama Status"}),a.jsx(f,{id:"status_name",value:i.status_name,onChange:s=>A(s.target.value),placeholder:"Contoh: Diterima di Pusat"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(h,{htmlFor:"description",children:"Deskripsi"}),a.jsx(V,{id:"description",value:i.description,onChange:s=>l(e=>({...e,description:s.target.value})),placeholder:"Deskripsi status tracking",rows:3})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(h,{htmlFor:"sort_order",children:"Urutan Tampil"}),a.jsx(f,{id:"sort_order",type:"number",value:i.sort_order,onChange:s=>l(e=>({...e,sort_order:parseInt(s.target.value)||0})),placeholder:"0"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(W,{id:"is_active",checked:i.is_active,onCheckedChange:s=>l(e=>({...e,is_active:s}))}),a.jsx(h,{htmlFor:"is_active",children:"Status Aktif"})]})]}),a.jsxs(z,{children:[a.jsx(c,{variant:"outline",onClick:()=>m(!1),children:"Batal"}),a.jsx(c,{onClick:C,disabled:k,className:"bg-green-600 hover:bg-green-700 text-white",children:k?"Menyimpan...":r?"Perbarui":"Simpan"})]})]})]})]})}),a.jsxs(sa,{children:[a.jsx("div",{className:"rounded-md border",children:a.jsxs(ua,{children:[a.jsx(ma,{children:a.jsxs(_,{children:[a.jsx(d,{children:"Status Tracking"}),a.jsx(d,{children:"Deskripsi"}),a.jsx(d,{children:"Urutan"}),a.jsx(d,{children:"Status"}),a.jsx(d,{className:"text-right",children:"Aksi"})]})}),a.jsx(ha,{children:x.map(s=>a.jsxs(_,{children:[a.jsx(o,{className:"font-medium",children:a.jsx("div",{className:"font-semibold text-gray-900",children:s.status_name})}),a.jsx(o,{children:s.description||"-"}),a.jsx(o,{children:s.sort_order}),a.jsx(o,{children:a.jsx(R,{variant:s.is_active?"default":"secondary",className:s.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"",children:s.is_active?"Aktif":"Tidak Aktif"})}),a.jsx(o,{className:"text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx(c,{variant:"outline",size:"sm",onClick:()=>b(s),children:a.jsx(B,{className:"h-4 w-4"})}),a.jsxs(ea,{children:[a.jsx(ta,{asChild:!0,children:a.jsx(c,{variant:"outline",size:"sm",children:a.jsx(P,{className:"h-4 w-4"})})}),a.jsxs(ra,{children:[a.jsxs(ia,{children:[a.jsx(na,{children:"Hapus Status Tracking"}),a.jsxs(la,{children:['Apakah Anda yakin ingin menghapus status "',s.status_name,'"?',a.jsx("br",{}),a.jsx("strong",{children:"Perhatian:"})," Status yang sedang digunakan dalam tracking tidak bisa dihapus."]})]}),a.jsxs(ca,{children:[a.jsx(da,{children:"Batal"}),a.jsx(oa,{onClick:()=>y(s),className:"bg-red-600 hover:bg-red-700",children:"Hapus"})]})]})]})]})})]},s.id))})]})}),x.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(H,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Belum ada status tracking"}),a.jsx("p",{className:"text-sm",children:'Klik "Tambah Status" untuk membuat status pertama'})]})]})]})})]})};export{Na as default};
//# sourceMappingURL=TrackingStatusSettings-BP9FFMK6.js.map
