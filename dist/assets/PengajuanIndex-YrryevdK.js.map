{"version":3,"file":"PengajuanIndex-YrryevdK.js","sources":["../../src/pages/PengajuanIndex.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { \r\n  Plus, \r\n  Search, \r\n  Filter, \r\n  MoreHorizontal, \r\n  Eye, \r\n  Edit, \r\n  Trash2, \r\n  CheckCircle, \r\n  XCircle, \r\n  Clock, \r\n  FileText,\r\n  Loader2,\r\n  ChevronLeft,\r\n  ChevronRight\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet, apiDelete } from '@/lib/api';\r\n\r\ninterface PengajuanData {\r\n  id: string;\r\n  created_by?: string;\r\n  pegawai: {\r\n    nama: string;\r\n    jabatan: string;\r\n  };\r\n  jenis_jabatan: string;\r\n  total_dokumen: number;\r\n  status: 'draft' | 'submitted' | 'approved' | 'rejected' | 'resubmitted';\r\n  catatan?: string;\r\n  rejection_reason?: string;\r\n  created_at: string;\r\n  files: Array<{\r\n    id: string;\r\n    file_type: string;\r\n    file_name: string;\r\n  }>;\r\n}\r\n\r\nconst PengajuanIndex: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const { user, token, isAuthenticated } = useAuth();\r\n  const [pengajuanList, setPengajuanList] = useState<PengajuanData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [createdByFilter, setCreatedByFilter] = useState<string>('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [totalItems, setTotalItems] = useState(0);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [pengajuanToDelete, setPengajuanToDelete] = useState<string | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [filterOptions, setFilterOptions] = useState<{\r\n    users: Array<{ id: string; email: string; full_name: string }>;\r\n  }>({ users: [] });\r\n  const [groupedByKabkota, setGroupedByKabkota] = useState<Record<string, PengajuanData[]>>({});\r\n\r\n  const itemsPerPage = 10;\r\n  const isAdmin = user?.role === 'admin';\r\n\r\n  // Fallback grouping on client for admin when server doesn't provide grouping\r\n  const clientGroupedByKabkota: Record<string, PengajuanData[]> = React.useMemo(() => {\r\n    if (!isAdmin) return {};\r\n    if (Object.keys(groupedByKabkota).length > 0) return groupedByKabkota;\r\n    if (!pengajuanList || pengajuanList.length === 0) return {};\r\n    return pengajuanList.reduce((acc: Record<string, PengajuanData[]>, item: any) => {\r\n      const kab = (item.office && (item.office.kabkota || item.office.name)) || (item.pegawai && (item.pegawai as any).induk_unit) || (item.pegawai as any)?.unit_kerja || 'Lainnya';\r\n      if (!acc[kab]) acc[kab] = [];\r\n      acc[kab].push(item);\r\n      return acc;\r\n    }, {});\r\n  }, [isAdmin, groupedByKabkota, pengajuanList]);\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    fetchPengajuanData();\r\n  }, [isAuthenticated, navigate, currentPage, statusFilter, createdByFilter]);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && isAdmin) {\r\n      fetchFilterOptions();\r\n    }\r\n  }, [isAuthenticated, isAdmin]);\r\n\r\n    const fetchPengajuanData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = new URLSearchParams({\r\n        page: currentPage.toString(),\r\n        limit: itemsPerPage.toString(),\r\n        ...(statusFilter !== 'all' && { status: statusFilter }),\r\n        ...(searchTerm && { search: searchTerm }),\r\n        ...(isAdmin && createdByFilter !== 'all' && { created_by: createdByFilter })\r\n      });\r\n\r\n             const response = await apiGet(`/api/pengajuan?${params}`, token);\r\n        if (response.success) {\r\n          setPengajuanList(response.data.data || response.data);\r\n          if (isAdmin) {\r\n            const grouped = (response.data && response.data.grouped_by_kabkota) || (response.grouped_by_kabkota);\r\n            if (grouped) {\r\n              setGroupedByKabkota(grouped as Record<string, PengajuanData[]>);\r\n            } else {\r\n              setGroupedByKabkota({});\r\n            }\r\n          }\r\n          setTotalPages(response.data.pagination?.totalPages || 1);\r\n          setTotalItems(response.data.pagination?.total || 0);\r\n        } else {\r\n          setError(response.message || 'Gagal mengambil data pengajuan');\r\n        }\r\n     } catch (error) {\r\n       console.error('Error fetching pengajuan data:', error);\r\n       setError('Terjadi kesalahan saat mengambil data pengajuan');\r\n     } finally {\r\n       setLoading(false);\r\n     }\r\n   };\r\n\r\n       const fetchFilterOptions = async () => {\r\n      try {\r\n        const response = await apiGet('/api/pengajuan/filter-options', token);\r\n        if (response.success) {\r\n          console.log('üîç Debug fetchFilterOptions - Response:', response.data);\r\n          setFilterOptions(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching filter options:', error);\r\n      }\r\n    };\r\n\r\n  const handleSearch = (value: string) => {\r\n    setSearchTerm(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleStatusFilter = (value: string) => {\r\n    setStatusFilter(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleCreatedByFilter = (value: string) => {\r\n    setCreatedByFilter(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n\r\n\r\n    const handleDelete = async () => {\r\n    if (!pengajuanToDelete) return;\r\n\r\n    try {\r\n      setDeleting(true);\r\n      const response = await apiDelete(`/api/pengajuan/${pengajuanToDelete}`, token);\r\n      \r\n      if (response.success) {\r\n        fetchPengajuanData();\r\n        setDeleteDialogOpen(false);\r\n        setPengajuanToDelete(null);\r\n      } else {\r\n        setError(response.message || 'Gagal menghapus pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat menghapus pengajuan');\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = {\r\n      draft: { label: 'Draft', className: 'bg-gray-100 text-gray-800 hover:bg-gray-200', icon: Clock },\r\n      submitted: { label: 'Diajukan', className: 'bg-blue-100 text-blue-800 hover:bg-blue-200', icon: FileText },\r\n      approved: { label: 'Disetujui', className: 'bg-green-100 text-green-800 hover:bg-green-200', icon: CheckCircle },\r\n      rejected: { label: 'Ditolak', className: 'bg-red-100 text-red-800 hover:bg-red-200', icon: XCircle },\r\n      resubmitted: { label: 'Diajukan Ulang', className: 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200', icon: Clock }\r\n    };\r\n\r\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.draft;\r\n    const Icon = config.icon;\r\n\r\n    return (\r\n      <Badge className={config.className}>\r\n        <Icon className=\"h-3 w-3 mr-1\" />\r\n        {config.label}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const getJabatanDisplayName = (jenisJabatan: string): string => {\r\n    const jabatanMap: Record<string, string> = {\r\n      'guru': 'Guru',\r\n      'eselon_iv': 'Eselon IV',\r\n      'fungsional': 'Fungsional',\r\n      'pelaksana': 'Pelaksana'\r\n    };\r\n    \r\n    return jabatanMap[jenisJabatan] || jenisJabatan;\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('id-ID', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n  \r\n  // Debug info\r\n  console.log('üîç Debug PengajuanIndex:', {\r\n    userRole: user?.role,\r\n    isAdmin,\r\n    userEmail: user?.email\r\n  });\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <FileText className=\"h-5 w-5\" />\r\n                Daftar Pengajuan Mutasi PNS\r\n              </CardTitle>\r\n              <p className=\"text-sm text-gray-600 mt-1\">\r\n                {isAdmin ? 'Semua pengajuan mutasi PNS' : 'Pengajuan mutasi PNS Anda'}\r\n              </p>\r\n            </div>\r\n            {/* Only show Add button for admin and operator, not for user role */}\r\n            {user?.role !== 'user' && (\r\n              <Button\r\n                onClick={() => navigate('/pengajuan/select')}\r\n                className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Tambah Pengajuan\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n                     {/* Search and Filter */}\r\n           <div className=\"flex flex-col gap-4 mb-6\">\r\n             {/* Search Bar */}\r\n             <div className=\"relative flex-1\">\r\n               <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n               <Input\r\n                 placeholder=\"Cari berdasarkan nama pegawai, jabatan, atau jenis jabatan...\"\r\n                 value={searchTerm}\r\n                 onChange={(e) => handleSearch(e.target.value)}\r\n                 className=\"pl-10\"\r\n               />\r\n             </div>\r\n             \r\n             {/* Filter Row */}\r\n             <div className=\"flex flex-col sm:flex-row gap-4\">\r\n               <div className=\"flex items-center gap-2\">\r\n                 <Filter className=\"h-4 w-4 text-gray-400\" />\r\n                 <Select value={statusFilter} onValueChange={handleStatusFilter}>\r\n                   <SelectTrigger className=\"w-48\">\r\n                     <SelectValue placeholder=\"Filter Status\" />\r\n                   </SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"all\">Semua Status</SelectItem>\r\n                     <SelectItem value=\"draft\">Draft</SelectItem>\r\n                     <SelectItem value=\"submitted\">Diajukan</SelectItem>\r\n                     <SelectItem value=\"approved\">Disetujui</SelectItem>\r\n                     <SelectItem value=\"rejected\">Ditolak</SelectItem>\r\n                     <SelectItem value=\"resubmitted\">Diajukan Ulang</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n               \r\n                               {/* Admin Only Filters */}\r\n                {isAdmin && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Filter className=\"h-4 w-4 text-gray-400\" />\r\n                    <Select value={createdByFilter} onValueChange={handleCreatedByFilter}>\r\n                      <SelectTrigger className=\"w-48\">\r\n                        <SelectValue placeholder=\"Filter Pembuat\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">Semua Pembuat</SelectItem>\r\n                        {filterOptions.users.map((user) => (\r\n                          <SelectItem key={user.id} value={user.id}>\r\n                            {user.full_name || user.email || 'Unknown User'}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                )}\r\n             </div>\r\n           </div>\r\n\r\n          {/* Admin grouped view */}\r\n          {isAdmin && Object.keys(clientGroupedByKabkota).length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-sm text-gray-600\">Tergabung berdasarkan kabupaten/kota</div>\r\n              <Accordion type=\"multiple\" className=\"w-full\">\r\n                {Object.entries(clientGroupedByKabkota).map(([kab, items]) => (\r\n                  <AccordionItem key={kab} value={kab} className=\"border rounded-lg\">\r\n                    <AccordionTrigger className=\"px-4 py-3 hover:no-underline\">\r\n                      <div className=\"flex items-center justify-between w-full\">\r\n                        <div className=\"font-medium\">{kab}</div>\r\n                        <Badge variant=\"secondary\" className=\"ml-2\">{items.length}</Badge>\r\n                      </div>\r\n                    </AccordionTrigger>\r\n                    <AccordionContent className=\"px-0\">\r\n                      <div className=\"border-t\">\r\n                        <Table>\r\n                          <TableHeader>\r\n                            <TableRow>\r\n                              <TableHead>Pegawai</TableHead>\r\n                              <TableHead>Jenis Jabatan</TableHead>\r\n                              <TableHead>Status</TableHead>\r\n                              <TableHead>Dokumen</TableHead>\r\n                              <TableHead>Pembuat</TableHead>\r\n                              <TableHead>Tanggal Dibuat</TableHead>\r\n                              <TableHead className=\"text-right\">Aksi</TableHead>\r\n                            </TableRow>\r\n                          </TableHeader>\r\n                          <TableBody>\r\n                            {items.map((pengajuan) => (\r\n                              <TableRow key={pengajuan.id} className=\"hover:bg-gray-50\">\r\n                                <TableCell>\r\n                                  <div>\r\n                                    <div className=\"font-medium\">{pengajuan.pegawai.nama}</div>\r\n                                    <div className=\"text-sm text-gray-500\">{pengajuan.pegawai.jabatan}</div>\r\n                                  </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                  <Badge variant=\"outline\">{getJabatanDisplayName(pengajuan.jenis_jabatan)}</Badge>\r\n                                </TableCell>\r\n                                <TableCell>{getStatusBadge(pengajuan.status)}</TableCell>\r\n                                <TableCell>\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"text-sm\">{pengajuan.files.length}</span>\r\n                                    <span className=\"text-gray-500\">/</span>\r\n                                    <span className=\"text-sm\">{pengajuan.total_dokumen}</span>\r\n                                  </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                  <div className=\"text-sm text-gray-600\">\r\n                                    {(() => {\r\n                                      const u = filterOptions.users.find(u => u.id === pengajuan.created_by);\r\n                                      if (u) return u.full_name || u.email || 'Unknown User';\r\n                                      return pengajuan.created_by?.includes('@') ? pengajuan.created_by : 'Unknown User';\r\n                                    })()}\r\n                                  </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                  <div className=\"text-sm text-gray-600\">{formatDate(pengajuan.created_at)}</div>\r\n                                </TableCell>\r\n                                <TableCell className=\"text-right\">\r\n                                  <DropdownMenu>\r\n                                    <DropdownMenuTrigger asChild>\r\n                                      <Button variant=\"ghost\" size=\"sm\">\r\n                                        <MoreHorizontal className=\"h-4 w-4\" />\r\n                                      </Button>\r\n                                    </DropdownMenuTrigger>\r\n                                    <DropdownMenuContent align=\"end\">\r\n                                      <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                        <Eye className=\"h-4 w-4 mr-2\" />\r\n                                        Lihat Detail\r\n                                      </DropdownMenuItem>\r\n                                      {pengajuan.status === 'submitted' && (\r\n                                        <>\r\n                                          <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                            <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                                            Setujui\r\n                                          </DropdownMenuItem>\r\n                                          <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                            <XCircle className=\"h-4 w-4 mr-2\" />\r\n                                            Tolak\r\n                                          </DropdownMenuItem>\r\n                                        </>\r\n                                      )}\r\n                                      <DropdownMenuItem \r\n                                        onClick={() => {\r\n                                          setPengajuanToDelete(pengajuan.id);\r\n                                          setDeleteDialogOpen(true);\r\n                                        }}\r\n                                        className=\"text-red-600\"\r\n                                      >\r\n                                        <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                                        Hapus\r\n                                      </DropdownMenuItem>\r\n                                    </DropdownMenuContent>\r\n                                  </DropdownMenu>\r\n                                </TableCell>\r\n                              </TableRow>\r\n                            ))}\r\n                          </TableBody>\r\n                        </Table>\r\n                      </div>\r\n                    </AccordionContent>\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n              {/* Pagination for admin grouped view */}\r\n              {totalPages > 1 && (\r\n                <div className=\"flex items-center justify-between px-4 py-3 border rounded-lg bg-gray-50\">\r\n                  <div className=\"text-sm text-gray-700\">\r\n                    Menampilkan {((currentPage - 1) * itemsPerPage) + 1} sampai {Math.min(currentPage * itemsPerPage, totalItems)} dari {totalItems} pengajuan\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(currentPage - 1)}\r\n                      disabled={currentPage === 1}\r\n                    >\r\n                      <ChevronLeft className=\"h-4 w-4\" />\r\n                      Sebelumnya\r\n                    </Button>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                        <Button\r\n                          key={page}\r\n                          variant={currentPage === page ? \"default\" : \"outline\"}\r\n                          size=\"sm\"\r\n                          onClick={() => setCurrentPage(page)}\r\n                          className=\"w-8 h-8 p-0\"\r\n                        >\r\n                          {page}\r\n                        </Button>\r\n                      ))}\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(currentPage + 1)}\r\n                      disabled={currentPage === totalPages}\r\n                    >\r\n                      Selanjutnya\r\n                      <ChevronRight className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n          /* Table */\r\n          <div className=\"border rounded-lg overflow-hidden\">\r\n            {loading ? (\r\n              <div className=\"flex items-center justify-center py-12\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin mr-2\" />\r\n                <span>Memuat data pengajuan...</span>\r\n              </div>\r\n            ) : pengajuanList.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                <p className=\"text-gray-500 mb-2\">\r\n                  {searchTerm || statusFilter !== 'all' \r\n                    ? 'Tidak ada pengajuan yang sesuai dengan filter'\r\n                    : 'Belum ada pengajuan'\r\n                  }\r\n                </p>\r\n                {!searchTerm && statusFilter === 'all' && user?.role !== 'user' && (\r\n                  <Button\r\n                    onClick={() => navigate('/pengajuan/select')}\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Buat Pengajuan Pertama\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <>\r\n                                 <Table>\r\n                   <TableHeader>\r\n                     <TableRow>\r\n                       <TableHead>Pegawai</TableHead>\r\n                       <TableHead>Jenis Jabatan</TableHead>\r\n                       <TableHead>Status</TableHead>\r\n                       <TableHead>Dokumen</TableHead>\r\n                       {isAdmin && <TableHead>Pembuat</TableHead>}\r\n                       <TableHead>Tanggal Dibuat</TableHead>\r\n                       <TableHead className=\"text-right\">Aksi</TableHead>\r\n                     </TableRow>\r\n                   </TableHeader>\r\n                  <TableBody>\r\n                    {pengajuanList.map((pengajuan) => (\r\n                      <TableRow key={pengajuan.id} className=\"hover:bg-gray-50\">\r\n                        <TableCell>\r\n                          <div>\r\n                            <div className=\"font-medium\">{pengajuan.pegawai.nama}</div>\r\n                            <div className=\"text-sm text-gray-500\">{pengajuan.pegawai.jabatan}</div>\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Badge variant=\"outline\">\r\n                            {getJabatanDisplayName(pengajuan.jenis_jabatan)}\r\n                          </Badge>\r\n                        </TableCell>\r\n                                                 <TableCell>\r\n                           {getStatusBadge(pengajuan.status)}\r\n                         </TableCell>\r\n                                                 <TableCell>\r\n                           <div className=\"flex items-center gap-2\">\r\n                             <span className=\"text-sm\">{pengajuan.files.length}</span>\r\n                             <span className=\"text-gray-500\">/</span>\r\n                             <span className=\"text-sm\">{pengajuan.total_dokumen}</span>\r\n                           </div>\r\n                         </TableCell>\r\n                                                   {isAdmin && (\r\n                            <TableCell>\r\n                              <div className=\"text-sm text-gray-600\">\r\n                                {(() => {\r\n                                  const user = filterOptions.users.find(u => u.id === pengajuan.created_by);\r\n                                  if (user) {\r\n                                    // Prioritaskan full_name, jika tidak ada gunakan email\r\n                                    return user.full_name || user.email || 'Unknown User';\r\n                                  }\r\n                                  // Jika user tidak ditemukan, tampilkan email dari created_by (jika itu email)\r\n                                  return pengajuan.created_by?.includes('@') ? pengajuan.created_by : 'Unknown User';\r\n                                })()}\r\n                              </div>\r\n                            </TableCell>\r\n                          )}\r\n                         <TableCell>\r\n                           <div className=\"text-sm text-gray-600\">\r\n                             {formatDate(pengajuan.created_at)}\r\n                           </div>\r\n                         </TableCell>\r\n                        <TableCell className=\"text-right\">\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"ghost\" size=\"sm\">\r\n                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\">\r\n                              <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                <Eye className=\"h-4 w-4 mr-2\" />\r\n                                Lihat Detail\r\n                              </DropdownMenuItem>\r\n                              {/* Only show edit actions for admin and operator, not for user role */}\r\n                              {user?.role !== 'user' && (\r\n                                <>\r\n                                  {pengajuan.status === 'draft' && (\r\n                                    <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}/upload`)}>\r\n                                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                                      Upload Dokumen\r\n                                    </DropdownMenuItem>\r\n                                  )}\r\n                                  {pengajuan.status === 'rejected' && (\r\n                                    <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}/edit`)}>\r\n                                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                                      Perbaiki Dokumen\r\n                                    </DropdownMenuItem>\r\n                                  )}\r\n                                </>\r\n                              )}\r\n                               {isAdmin && pengajuan.status === 'submitted' && (\r\n                                 <>\r\n                                   <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                     <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                                     Setujui\r\n                                   </DropdownMenuItem>\r\n                                   <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                     <XCircle className=\"h-4 w-4 mr-2\" />\r\n                                     Tolak\r\n                                   </DropdownMenuItem>\r\n                                 </>\r\n                               )}\r\n                                                                                          {/* Only show delete for admin and operator, not for user role */}\r\n                              {(isAdmin || (pengajuan.status === 'draft' && user?.role !== 'user')) && (\r\n                                <DropdownMenuItem \r\n                                  onClick={() => {\r\n                                    console.log('üîç Debug: Klik hapus untuk pengajuan:', {\r\n                                      id: pengajuan.id,\r\n                                      status: pengajuan.status,\r\n                                      isAdmin,\r\n                                      userRole: user?.role\r\n                                    });\r\n                                    setPengajuanToDelete(pengajuan.id);\r\n                                    setDeleteDialogOpen(true);\r\n                                  }}\r\n                                  className=\"text-red-600\"\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                                  Hapus\r\n                                </DropdownMenuItem>\r\n                              )}\r\n                             \r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n\r\n                {/* Pagination */}\r\n                {totalPages > 1 && (\r\n                  <div className=\"flex items-center justify-between px-4 py-3 border-t bg-gray-50\">\r\n                    <div className=\"text-sm text-gray-700\">\r\n                      Menampilkan {((currentPage - 1) * itemsPerPage) + 1} sampai {Math.min(currentPage * itemsPerPage, totalItems)} dari {totalItems} pengajuan\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => setCurrentPage(currentPage - 1)}\r\n                        disabled={currentPage === 1}\r\n                      >\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                        Sebelumnya\r\n                      </Button>\r\n                      \r\n                      <div className=\"flex items-center gap-1\">\r\n                        {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                          <Button\r\n                            key={page}\r\n                            variant={currentPage === page ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => setCurrentPage(page)}\r\n                            className=\"w-8 h-8 p-0\"\r\n                          >\r\n                            {page}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                      \r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => setCurrentPage(currentPage + 1)}\r\n                        disabled={currentPage === totalPages}\r\n                      >\r\n                        Selanjutnya\r\n                        <ChevronRight className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Hapus Pengajuan</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Apakah Anda yakin ingin menghapus pengajuan ini? Tindakan ini tidak dapat dibatalkan.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={deleting}>Batal</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleDelete}\r\n              disabled={deleting}\r\n              className=\"bg-red-600 hover:bg-red-700\"\r\n            >\r\n              {deleting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Menghapus...\r\n                </>\r\n              ) : (\r\n                'Hapus'\r\n              )}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PengajuanIndex;\r\n"],"names":["PengajuanIndex","navigate","useNavigate","user","token","isAuthenticated","useAuth","pengajuanList","setPengajuanList","useState","loading","setLoading","error","setError","searchTerm","setSearchTerm","statusFilter","setStatusFilter","createdByFilter","setCreatedByFilter","currentPage","setCurrentPage","totalPages","setTotalPages","totalItems","setTotalItems","deleteDialogOpen","setDeleteDialogOpen","pengajuanToDelete","setPengajuanToDelete","deleting","setDeleting","filterOptions","setFilterOptions","groupedByKabkota","setGroupedByKabkota","itemsPerPage","isAdmin","clientGroupedByKabkota","React","acc","item","kab","_a","useEffect","fetchPengajuanData","fetchFilterOptions","params","response","apiGet","grouped","_b","handleSearch","value","handleStatusFilter","handleCreatedByFilter","handleDelete","apiDelete","getStatusBadge","status","statusConfig","Clock","FileText","CheckCircle","XCircle","config","Icon","jsxs","Badge","jsx","getJabatanDisplayName","jenisJabatan","formatDate","dateString","Card","CardHeader","CardTitle","Button","Plus","CardContent","Search","Input","e","Filter","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Accordion","items","AccordionItem","AccordionTrigger","AccordionContent","Table","TableHeader","TableRow","TableHead","TableBody","pengajuan","TableCell","u","DropdownMenu","DropdownMenuTrigger","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","Eye","Fragment","Trash2","ChevronLeft","_","i","page","ChevronRight","Loader2","Edit","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}