import{j as e,aw as Ae,a2 as z,an as ne,a$ as re,a4 as Pe,ak as $e,a3 as Te,F as ie,am as Ue}from"./ui-vendor-DipkbOWo.js";import{r,L as v}from"./react-vendor-DheTkQGW.js";import{C as m,a as x,b as h,c as u}from"./card-CDtrjLk7.js";import{u as Le,B as o,b as F,P as ce,I as Ke,a as w}from"./index-4k6JnYy6.js";import{S as de,a as oe,b as me,c as xe,d as A}from"./select-CU5zfeNc.js";import{u as S,w as Ee}from"./xlsx-DjuO7_Ju.js";const Qe=()=>{const{token:p}=Le(),[j,P]=r.useState("process"),[d,he]=r.useState({totalPengajuan:0,pendingUpload:0,completedUpload:0,totalFiles:0,verifiedFiles:0,rejectedFiles:0}),[$,ue]=r.useState([]),[pe,I]=r.useState(!0),[W,T]=r.useState(null),[U,je]=r.useState([]);r.useState(null);const[B,M]=r.useState([]),[y,J]=r.useState([]),[D,q]=r.useState([]),[L,V]=r.useState(!1),[f,H]=r.useState(""),[k,O]=r.useState("all"),[_,G]=r.useState("all"),[Re,ge]=r.useState(null),be=()=>{const a=[];return $.slice(0,3).forEach(s=>{const l=Y(s.uploaded_at);a.push({type:"upload",message:`File ${s.file_type} uploaded for ${s.pengajuan.pegawai.nama} (NIP: ${s.pengajuan.pegawai.nip})`,time:l})}),U.slice(0,2).forEach(s=>{var t,n;const l=Y(s.updated_at||s.created_at);s.status==="approved"?a.push({type:"approval",message:`Pengajuan approved for ${((t=s.pegawai)==null?void 0:t.nama)||"Unknown"} (${s.jenis_jabatan})`,time:l}):s.status==="rejected"&&a.push({type:"rejection",message:`Pengajuan rejected for ${((n=s.pegawai)==null?void 0:n.nama)||"Unknown"} (${s.jenis_jabatan})`,time:l})}),a.sort((s,l)=>0).slice(0,5)},Y=a=>{const s=new Date,l=new Date(a),t=s.getTime()-l.getTime(),n=Math.floor(t/(1e3*60*60)),c=Math.floor(n/24);return c>0?`${c} day${c>1?"s":""} ago`:n>0?`${n} hour${n>1?"s":""} ago`:"Just now"},Q=be(),[ze,fe]=r.useState(null),[Ie,X]=r.useState([]),[We,Z]=r.useState(0),[Be,ye]=r.useState(1),[Ne,Me]=r.useState(25),[Je,ee]=r.useState(!1),[ve,we]=r.useState({statuses:[]}),N=async()=>{var a,s,l;try{I(!0),T(null);const t=await w("/api/admin-wilayah/dashboard",p),n=((a=t==null?void 0:t.data)==null?void 0:a.stats)||(t==null?void 0:t.stats),c=((s=t==null?void 0:t.data)==null?void 0:s.recentUploads)||(t==null?void 0:t.recentUploads)||[],i=((l=t==null?void 0:t.data)==null?void 0:l.pengajuan)||(t==null?void 0:t.pengajuan)||[];n?(he({totalPengajuan:Number(n.total_pengajuan||n.totalPengajuan||0),pendingUpload:Number(n.pending_upload||n.pendingUpload||0),completedUpload:Number(n.completed_upload||n.completedUpload||0),totalFiles:Number(n.total_files||n.totalFiles||0),verifiedFiles:Number(n.verified_files||n.verifiedFiles||0),rejectedFiles:Number(n.rejected_files||n.rejectedFiles||0)}),ue(Array.isArray(c)?c:[]),je(Array.isArray(i)?i:[])):T("Failed to fetch dashboard data")}catch(t){console.error("Error fetching dashboard data:",t),T("Error connecting to server")}finally{I(!1)}},Se=async()=>{var a;try{const s=await w("/api/admin-wilayah/history",p),l=((a=s==null?void 0:s.data)==null?void 0:a.pengajuan)||(s==null?void 0:s.pengajuan)||[];M(Array.isArray(l)?l:[])}catch{M([])}},C=async()=>{try{V(!0);const a=await w("/api/admin-wilayah/pengajuan-datatable",p);a!=null&&a.success&&(a!=null&&a.data)&&(J(a.data.pengajuan||[]),q(a.data.aggregation||[]))}catch(a){console.error("Error fetching data table:",a),J([]),q([])}finally{V(!1)}},De=async()=>{try{const a=await w("/api/pengajuan/filter-options",p);a.success&&we(a.data)}catch(a){console.error("Error fetching filter options:",a)}},ke=async(a,s,l=1)=>{var t,n;try{ee(!0),ye(l);const c=new URLSearchParams({kabupaten:a,status:s,page:String(l),pageSize:String(Ne)}),i=await w(`/api/pengajuan/rekap/list?${c.toString()}`,p),R=((t=i==null?void 0:i.data)==null?void 0:t.items)||(i==null?void 0:i.items)||[],g=Number(((n=i==null?void 0:i.data)==null?void 0:n.total)??(i==null?void 0:i.total)??0);X(R),Z(g)}catch{X([]),Z(0)}finally{ee(!1)}};r.useEffect(()=>{N(),Se(),C(),De()},[p]),r.useEffect(()=>{if(!p)return;const a=setInterval(()=>{N(),C()},3e4);return()=>clearInterval(a)},[p]),r.useEffect(()=>{if(!p)return;const a=()=>{N(),C()};return window.addEventListener("focus",a),()=>window.removeEventListener("focus",a)},[p]);const _e=()=>d.totalFiles===0?0:d.verifiedFiles/d.totalFiles*100,K=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ae=a=>{const l={draft:{label:"Draf",className:"bg-gray-100 text-gray-800"},submitted:{label:"Diajukan",className:"bg-blue-100 text-blue-800"},approved:{label:"Disetujui",className:"bg-green-100 text-green-800"},rejected:{label:"Ditolak",className:"bg-red-100 text-red-800"},resubmitted:{label:"Diajukan Ulang",className:"bg-yellow-100 text-yellow-800"},admin_wilayah_approved:{label:"Disetujui Admin Wilayah",className:"bg-green-200 text-green-800"},admin_wilayah_rejected:{label:"Ditolak Admin Wilayah",className:"bg-red-200 text-red-800"},final_approved:{label:"Selesai",className:"bg-green-600 text-white"},final_rejected:{label:"Ditolak Final",className:"bg-red-600 text-white"}}[a]||{label:a.toUpperCase(),className:"bg-gray-100 text-gray-800"};return e.jsx(F,{className:l.className,children:l.label})},Ce=a=>({draft:"Draf",submitted:"Diajukan",approved:"Disetujui",rejected:"Ditolak",resubmitted:"Diajukan Ulang",admin_wilayah_approved:"Disetujui Admin Wilayah",admin_wilayah_rejected:"Ditolak Admin Wilayah",final_approved:"Selesai",final_rejected:"Ditolak Final"})[a]||a.toUpperCase(),se=()=>{const a=y.map(g=>({Nama:g.nama,Status:Ce(g.status),"Kabupaten/Kota":g.kabupaten})),s=D.map(g=>{const b=g.statuses.reduce((te,le)=>(te[le.status]=le.count,te),{});return{"Kabupaten/Kota":g.kabupaten,Draf:b.draft||0,Diajukan:b.submitted||0,Disetujui:b.approved||0,Ditolak:b.rejected||0,"Diajukan Ulang":b.resubmitted||0,"Disetujui Admin Wilayah":b.admin_wilayah_approved||0,"Ditolak Admin Wilayah":b.admin_wilayah_rejected||0,Selesai:b.final_approved||0,"Ditolak Final":b.final_rejected||0,Total:g.total}}),l=S.book_new(),t=S.json_to_sheet(a);S.book_append_sheet(l,t,"Data Detail Pengajuan");const n=S.json_to_sheet(s);S.book_append_sheet(l,n,"Rekap per Kabupaten");const c=new Date,R=`Rekap_Status_Admin_Wilayah_${`${c.getFullYear()}${String(c.getMonth()+1).padStart(2,"0")}${String(c.getDate()).padStart(2,"0")}_${String(c.getHours()).padStart(2,"0")}${String(c.getMinutes()).padStart(2,"0")}`}.xlsx`;Ee(l,R)},E=y.filter(a=>{const s=f===""||a.nama.toLowerCase().includes(f.toLowerCase())||a.nip.toLowerCase().includes(f.toLowerCase())||a.kabupaten.toLowerCase().includes(f.toLowerCase())||a.jenis_jabatan.toLowerCase().includes(f.toLowerCase()),l=k==="all"||a.status===k,t=_==="all"||a.kabupaten===_;return s&&l&&t}),Fe=Array.from(new Set(y.map(a=>a.kabupaten))).sort();return pe?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((a,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})})}):W?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ae,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-4",children:W}),e.jsxs(o,{onClick:N,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(z,{className:"h-4 w-4"}),"Retry"]})]})})}):e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Admin Wilayah"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitoring aktivitas upload file dan progress pengajuan"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{onClick:N,variant:"outline",size:"sm",className:"border-green-200 text-green-700 hover:bg-green-50",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(o,{onClick:se,variant:"outline",size:"sm",className:"border-green-200 text-green-700 hover:bg-green-50",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),e.jsx(re,{className:"h-6 w-6 text-green-600"}),e.jsx(F,{className:"bg-green-100 text-green-800",children:"Admin Wilayah"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{className:`${j==="process"?"bg-green-600 hover:bg-green-700 text-white":"border-green-200 text-green-700 hover:bg-green-50"}`,variant:j==="process"?"default":"outline",size:"sm",onClick:()=>P("process"),children:"ðŸ“‹ Pengajuan"}),e.jsx(o,{className:`${j==="archive"?"bg-green-600 hover:bg-green-700 text-white":"border-green-200 text-green-700 hover:bg-green-50"}`,variant:j==="archive"?"default":"outline",size:"sm",onClick:()=>P("archive"),children:"ðŸ“ Riwayat"}),e.jsx(o,{className:`${j==="rekap"?"bg-green-600 hover:bg-green-700 text-white":"border-green-200 text-green-700 hover:bg-green-50"}`,variant:j==="rekap"?"default":"outline",size:"sm",onClick:()=>P("rekap"),children:"ðŸ“Š Laporan"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Pengajuan"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.totalPengajuan}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pengajuan yang sudah di-ACC admin wilayah"})]})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pending Upload"}),e.jsx($e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:d.pendingUpload}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Menunggu upload file admin wilayah"})]})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Completed Upload"}),e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.completedUpload}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"File admin wilayah sudah lengkap"})]})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Files"}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.totalFiles}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"File yang sudah diupload"})]})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Progress Overview"})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"File Verification Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.verifiedFiles," of ",d.totalFiles," files verified"]})]}),e.jsx(ce,{value:_e(),className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Pending: ",d.totalFiles-d.verifiedFiles-d.rejectedFiles]}),e.jsxs("span",{children:["Verified: ",d.verifiedFiles]}),e.jsxs("span",{children:["Rejected: ",d.rejectedFiles]})]})]})})]}),j==="process"&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Pengajuan yang Sudah Di-ACC Admin Wilayah"})}),e.jsx(u,{children:U.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Tidak ada data"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:"Pegawai"}),e.jsx("th",{className:"py-2 pr-4",children:"NIP"}),e.jsx("th",{className:"py-2 pr-4",children:"Jenis Jabatan"}),e.jsx("th",{className:"py-2 pr-4",children:"Berkas Kab/Kota"}),e.jsx("th",{className:"py-2 pr-4",children:"Progress Kanwil"}),e.jsx("th",{className:"py-2 pr-4",children:"Aksi"})]})}),e.jsx("tbody",{children:U.map(a=>{const s=a.pegawai||{},l=a.uploadProgress||{required:0,total:0},t=`${l.required}/${l.total}`;return a.status==="admin_wilayah_approved"&&(l.total||0)>0&&(l.required||0)>=(l.total||0),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:s.nama||"-"}),e.jsx("td",{className:"py-2 pr-4",children:s.nip||"-"}),e.jsx("td",{className:"py-2 pr-4",children:a.jenis_jabatan}),e.jsx("td",{className:"py-2 pr-4",children:a.kabupaten_files_count}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t}),e.jsx(ce,{value:l.total?l.required/l.total*100:0,className:"h-2 w-32"})]})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{asChild:!0,variant:"outline",size:"sm",className:"border-green-200 text-green-700 hover:bg-green-50",children:e.jsx(v,{to:`/pengajuan/${a.id}`,children:"Detail"})}),e.jsx(o,{asChild:!0,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:e.jsx(v,{to:`/admin-wilayah/upload/${a.id}`,children:"Upload Kanwil"})})]})})]},a.id)})})]})})})]}),j==="archive"&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Arsip (Keputusan Superadmin)"})}),e.jsx(u,{children:B.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Belum ada arsip"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:"Pegawai"}),e.jsx("th",{className:"py-2 pr-4",children:"NIP"}),e.jsx("th",{className:"py-2 pr-4",children:"Jenis Jabatan"}),e.jsx("th",{className:"py-2 pr-4",children:"Status"}),e.jsx("th",{className:"py-2 pr-4",children:"Tanggal"}),e.jsx("th",{className:"py-2 pr-4",children:"Aksi"})]})}),e.jsx("tbody",{children:B.map(a=>{var s,l;return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4",children:((s=a.pegawai)==null?void 0:s.nama)||"-"}),e.jsx("td",{className:"py-2 pr-4",children:((l=a.pegawai)==null?void 0:l.nip)||"-"}),e.jsx("td",{className:"py-2 pr-4",children:a.jenis_jabatan}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx(F,{className:a.status==="approved"?"bg-green-600 text-white":"bg-red-600 text-white",children:a.status==="approved"?"Disetujui":"Ditolak"})}),e.jsx("td",{className:"py-2 pr-4",children:K(a.updated_at)}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx(o,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(v,{to:`/pengajuan/${a.id}`,children:"Detail"})})})]},a.id)})})]})})})]}),j==="rekap"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{children:"Rekap Status per Kabupaten"}),e.jsxs(o,{onClick:se,variant:"outline",size:"sm",className:"border-green-200 text-green-700 hover:bg-green-50",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})}),e.jsx(u,{children:D.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Tidak ada data"}):(()=>{const a=Array.from(new Set(D.flatMap(s=>s.statuses.map(l=>l.status))));return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Kabupaten"}),a.map(s=>e.jsx("th",{className:"py-3 pr-4 font-medium whitespace-nowrap text-center",children:ae(s)},s)),e.jsx("th",{className:"py-3 pr-4 font-medium text-center",children:"Total"})]})}),e.jsx("tbody",{children:D.map(s=>{const l=s.statuses.reduce((t,n)=>(t[n.status]=n.count,t),{});return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 pr-4 font-medium",children:s.kabupaten}),a.map(t=>e.jsx("td",{className:"py-3 pr-4 text-center",children:e.jsx("button",{className:"text-green-700 hover:underline",onClick:()=>{ge(s.kabupaten),fe(t),ke(s.kabupaten,t,1)},children:l[t]||0})},t)),e.jsx("td",{className:"py-3 pr-4 font-semibold text-center",children:s.total})]},s.kabupaten)})})]})})})()})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(h,{children:["Data Pengajuan (",E.length," dari ",y.length,")"]}),e.jsxs(o,{onClick:C,variant:"outline",size:"sm",disabled:L,children:[e.jsx(z,{className:`h-4 w-4 mr-2 ${L?"animate-spin":""}`}),"Refresh"]})]})}),e.jsxs(u,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Cari"}),e.jsx(Ke,{placeholder:"Cari nama, NIP, kabupaten, atau jenis jabatan...",value:f,onChange:a=>H(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter Status"}),e.jsxs(de,{value:k,onValueChange:O,children:[e.jsx(oe,{children:e.jsx(me,{placeholder:"Pilih status"})}),e.jsxs(xe,{children:[e.jsx(A,{value:"all",children:"Semua Status"}),ve.statuses.filter(a=>a.count>0).map(a=>e.jsxs(A,{value:a.value,children:[a.label," (",a.count,")"]},a.value))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter Kabupaten"}),e.jsxs(de,{value:_,onValueChange:G,children:[e.jsx(oe,{children:e.jsx(me,{placeholder:"Pilih kabupaten"})}),e.jsxs(xe,{children:[e.jsx(A,{value:"all",children:"Semua Kabupaten"}),Fe.map(a=>e.jsx(A,{value:a,children:a},a))]})]})]})]}),(f||k!=="all"||_!=="all")&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{H(""),O("all"),G("all")},children:"Reset Filter"})})]}),L?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Memuat data..."})]}):y.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Tidak ada data pengajuan"}):E.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Tidak ada data yang sesuai dengan filter"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Nama"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"NIP"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Kabupaten"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Jenis Jabatan"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Status"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Tanggal Dibuat"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Aksi"})]})}),e.jsx("tbody",{children:E.map(a=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 pr-4 font-medium",children:a.nama}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:a.nip}),e.jsx("td",{className:"py-3 pr-4",children:a.kabupaten}),e.jsx("td",{className:"py-3 pr-4",children:a.jenis_jabatan}),e.jsx("td",{className:"py-3 pr-4",children:ae(a.status)}),e.jsx("td",{className:"py-3 pr-4 text-gray-600",children:K(a.created_at)}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx(o,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(v,{to:`/pengajuan/${a.id}`,children:"Detail"})})})]},a.id))})]})})]})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Recent Uploads"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:$.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Belum ada file yang diupload"})]}):$.map(a=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.pengajuan.pegawai.nama}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.pengajuan.jenis_jabatan," â€¢ ",a.file_type]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:a.status==="approved"?"default":"secondary",children:a.status}),e.jsx(o,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(v,{to:`/admin-wilayah/upload/${a.pengajuan.id}`,children:e.jsx(Ue,{className:"h-4 w-4"})})})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400",children:(()=>{const t=(a.uploaded_by_office||"").toString().replace(/\s*\([^)]*\)\s*$/,"").replace(/\b[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\b/g,"").trim(),n=t?` ${t}`:"";return`Diupload oleh: ${a.uploaded_by_name}${n} - ${K(a.uploaded_at)}`})()})]},a.id))})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Recent Activity"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-3",children:Q.length>0?Q.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.type==="upload"?"bg-blue-500":a.type==="approval"?"bg-green-500":a.type==="rejection"?"bg-red-500":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:a.message}),e.jsx("p",{className:"text-xs text-gray-500",children:a.time})]})]},s)):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(re,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No recent activities"})]})})})]})]})})};export{Qe as default};
//# sourceMappingURL=AdminWilayahDashboard-DLAHNQHr.js.map
