import{j as a,ay as Fa,q as Oa,Z as ca,az as Ha,aA as Ga,aB as Ra,a0 as ma}from"./ui-vendor-BCnv6AUJ.js";import{r as h,g as Va,d as qa,c as za}from"./react-vendor-C8WR5ETM.js";import{c as Ya,I as r,u as Za,d as Qa,a as ga,B as M,b as Wa,n as pa,D as Xa,e as ae,k as ee}from"./index-Cm23nM4t.js";import{L as s}from"./label-DKpVqyHA.js";import{S as X,a as aa,b as ea,c as ta,d as na}from"./select-DnvgtXM-.js";import{P as ja}from"./PegawaiSearchInput-DftYEHKw.js";import{T as ka,a as xa,b as ba,c as va,d as fa,e as Na,f as Ta,g as Sa,h as ya}from"./Template9-BgdF0VLD.js";import{S as Ca}from"./SuratPreviewContainer-4J1Y0q5m.js";import"./card-BxPyaNgJ.js";const Pa=h.forwardRef(({className:n,orientation:c="horizontal",decorative:d=!0,...v},l)=>a.jsx(Fa,{ref:l,decorative:d,orientation:c,className:Ya("shrink-0 bg-border",c==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...v}));Pa.displayName=Fa.displayName;const H=({title:n,description:c,children:d,className:v=""})=>a.jsxs("div",{className:`space-y-4 ${v}`,children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-semibold",children:n}),c&&a.jsx("p",{className:"text-sm text-muted-foreground",children:c})]}),a.jsx(Pa,{}),a.jsx("div",{className:"space-y-4",children:d})]}),b=({label:n,value:c,placeholder:d=""})=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(s,{className:"text-sm font-medium",children:n}),a.jsxs("div",{className:"relative",children:[a.jsx(r,{value:c??"",placeholder:d,readOnly:!0,className:"bg-muted/50 text-muted-foreground pr-10"}),c&&a.jsx(Oa,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 w-4 h-4"})]})]}),sa=["Kota Mataram","Kabupaten Lombok Barat","Kabupaten Lombok Tengah","Kabupaten Lombok Timur","Kabupaten Lombok Utara","Kabupaten Sumbawa Barat","Kabupaten Sumbawa","Kabupaten Dompu","Kabupaten Bima","Kota Bima"],te=[{id:"1",title:"Surat Pernyataan Tidak Sedang Tugas Belajar",description:"Surat pernyataan bahwa pegawai tidak sedang menjalani tugas belajar atau ikatan dinas",category:"Pernyataan"},{id:"2",title:"Surat Keterangan Analisis Jabatan",description:"Surat keterangan mengenai analisis jabatan dan analisis beban kerja pegawai",category:"Keterangan"},{id:"3",title:"Surat Keterangan Pengalaman Mengajar",description:"Surat keterangan mengenai pengalaman mengajar seorang guru",category:"Keterangan"},{id:"4",title:"Surat Permohonan Bebas Temuan",description:"Surat permohonan penerbitan surat keterangan bebas temuan",category:"Permohonan"},{id:"5",title:"Surat Pernyataan Tidak Sedang Hukuman Disiplin",description:"Surat pernyataan tidak sedang dalam proses atau menjalani hukuman disiplin",category:"Pernyataan"},{id:"6",title:"Surat Pernyataan Tidak Sedang Proses Pidana",description:"Surat pernyataan tidak sedang menjalani proses pidana atau pernah dipidana",category:"Pernyataan"},{id:"7",title:"Surat Persetujuan Pelepasan",description:"Surat persetujuan untuk melepas pegawai pindah tugas",category:"Persetujuan"},{id:"8",title:"Surat Persetujuan Penerimaan",description:"Surat persetujuan untuk menerima pegawai pindah tugas",category:"Persetujuan"},{id:"9",title:"Surat Pernyataan Tanggung Jawab Mutlak",description:"Surat pernyataan tanggung jawab mutlak atas dokumen dan data",category:"Pernyataan"}];function ne(n){if(!n)return"";const c=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let d,v,l;return/\d{4}-\d{2}-\d{2}/.test(n)?([l,v,d]=n.split("-"),`${parseInt(d,10)} ${c[parseInt(v,10)]} ${l}`):/\d{2}-\d{2}-\d{4}/.test(n)?([d,v,l]=n.split("-"),`${parseInt(d,10)} ${c[parseInt(v,10)]} ${l}`):n}const ge=()=>{const{templateId:n}=Va(),c=qa(),[d,v]=h.useState(),[l,Ka]=h.useState(),[m,_a]=h.useState(null),y=new Date().getFullYear().toString(),[i,G]=h.useState({kabkota:"LOMBOK BARAT",jln:"Jl. Gajah Mada No. 1 Gerung, Lombok Barat 83511",telfon:"Telp. (0370) 681557",fax:"Fax. (0370) 681557",email:"kemenag.lombokbarat@gmail.com",website:"lombokbarat.kemenag.go.id",namapejabat:"",nippejabat:"",pangkatgolpejabat:"",jabatanpejabat:"",namapegawai:"",nippegawai:"",pangkatgolpegawai:"",jabatanpegawai:"",ibukota:"",tanggal:"",kode_kabko:"",pejabatStatus:"tetap",isPltPlh:!1,pltPlhType:"plt"}),[K,V]=h.useState({nosrt:"",blnno:"",thnno:y,ukerpejabat:"",ukerpegawai:""}),[u,Da]=h.useState({nosurat:"",blnnomor:"",tahunskrg:y,unitkerja:"",namajabatan:"",bbnkerja:"",eksisting:"",kelebihan:"",kekurangan:""}),[g,la]=h.useState({nosrt:"",blnno:"",thnno:y,tempattugas:"",sekolah:"",kabkota2:"",tglmulai:""}),[f,ra]=h.useState({nosrt:"",blnsrt:"",thnskrg:y,unitkerja:"",keperluan:""}),[N,q]=h.useState({nosrt:"",blnno:"",thnno:y,ukerpejabat:"",tempattugas:""}),[_,z]=h.useState({nosrt:"",blnno:"",thnno:y,ukerpejabat:"",ukerpegawai:""}),[p,$a]=h.useState({nosurat:"",blnnomor:"",tahunskrg:y,tempattugas:"",kabkota2:"",jabatanpegawai2:"",tempattugas2:"",kabataukotatujuan:""}),[k,Ba]=h.useState({nosrt:"",blnno:"",thnno:y,tempattugas:"",jabatanbaru:"",tempattugasbaru:""}),[D,ia]=h.useState({nosrt:"",blnno:"",thnno:y,ukerpejabat:""}),{token:B,user:C}=Za(),{toast:wa}=Qa(),[oa,w]=h.useState(!1);h.useState(!1);const[L,Aa]=h.useState(null),[se,da]=h.useState(null),[ua,F]=h.useState(null),[Ma,Y]=h.useState(!1),[U,ha]=h.useState(null);h.useEffect(()=>{!L||!B||ga(`/api/letters/${L}`,B).then(e=>ha(e.letter)).catch(()=>ha(null))},[L,B]),za.useEffect(()=>{if(!B)return;(async()=>{try{let t=null;C!=null&&C.office_id?t=(await ga(`/api/offices/${C.office_id}`,B)).office:t=null,t&&(_a(t),G(o=>({...o,kabkota:t.kabkota||"",jln:t.address||"",telfon:t.phone||"",fax:t.fax||"",email:t.email||"",website:t.website||"",kode_kabko:t.kode_kabko||""})))}catch{}})()},[B,C]);const La=e=>{v(e),G(t=>({...t,namapejabat:(e==null?void 0:e.nama)||"",nippejabat:(e==null?void 0:e.nip)||"",pangkatgolpejabat:(e==null?void 0:e.pangkat_gol)||(e==null?void 0:e.golongan)||"",jabatanpejabat:(e==null?void 0:e.jabatan)||""})),n==="1"&&V(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""})),n==="5"&&q(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""})),n==="6"&&z(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""})),n==="9"&&ia(t=>({...t,ukerpejabat:(e==null?void 0:e.unit_kerja)||""}))},Ia=e=>{Ka(e),G(t=>({...t,namapegawai:(e==null?void 0:e.nama)||"",nippegawai:(e==null?void 0:e.nip)||"",pangkatgolpegawai:(e==null?void 0:e.pangkat_gol)||(e==null?void 0:e.golongan)||"",jabatanpegawai:(e==null?void 0:e.jabatan)||""})),n==="1"&&V(t=>({...t,ukerpegawai:(e==null?void 0:e.unit_kerja)||""})),n==="3"&&la(t=>({...t,tempattugas:(e==null?void 0:e.tempat_tugas)||""})),n==="4"&&ra(t=>({...t,unitkerja:(e==null?void 0:e.unit_kerja)||""})),n==="5"&&q(t=>({...t,tempattugas:(e==null?void 0:e.tempat_tugas)||""})),n==="6"&&z(t=>({...t,ukerpegawai:(e==null?void 0:e.unit_kerja)||""}))},I=(e,t)=>{G(o=>({...o,[e]:t}))},Z=(e,t)=>{V(o=>({...o,[e]:t}))},P=(e,t)=>{Da(o=>({...o,[e]:t}))},A=(e,t)=>{la(o=>({...o,[e]:t}))},E=(e,t)=>{ra(o=>({...o,[e]:t}))},R=(e,t)=>{q(o=>({...o,[e]:t}))},Q=(e,t)=>{z(o=>({...o,[e]:t}))},$=(e,t)=>{$a(o=>({...o,[e]:t}))},J=(e,t)=>{Ba(o=>({...o,[e]:t}))},W=(e,t)=>{ia(o=>({...o,[e]:t}))},Ja=async e=>{var j;if(e.preventDefault(),w(!0),F(null),da(null),!(m!=null&&m.id)){F("Data kantor tidak ditemukan. Silakan atur kantor di Settings."),w(!1);return}if(!(C!=null&&C.id)){F("User tidak valid. Silakan login ulang."),w(!1);return}if(n!=="2"&&n!=="9"&&!(l!=null&&l.nip)){F("Pilih pegawai yang akan dinyatakan dalam surat."),w(!1);return}if(!(d!=null&&d.nip)){F("Pilih pejabat penandatangan surat."),w(!1);return}const t=(m==null?void 0:m.kode_kabko)||i.kode_kabko||"-";let o="";if(n==="1"?o=`B-${K.nosrt}/Kk.18.${t}/1/Kp.07.6/${K.blnno}/${K.thnno}`:n==="2"?o=`B-${u.nosurat}/Kk.18.${t}/1/KP.07.6/${u.blnnomor}/${u.tahunskrg}`:n==="3"?o=`B-${g.nosrt}/Kk.18.${t}/1/KP.07.6/${g.blnno}/${g.thnno}`:n==="4"?o=`B-${f.nosrt}/Kk.18.${t}/1/Kp.01.2/${f.blnsrt}/${f.thnskrg}`:n==="5"?o=`B-${N.nosrt}/Kk.18.${t}/1/Kp.07.6/${N.blnno}/${N.thnno}`:n==="6"?o=`B-${_.nosrt}/Kk.18.${t}/1/Kh.04.1/${_.blnno}/${_.thnno}`:n==="7"?o=`B-${p.nosurat}/Kk.18.${t}/1/Kp.07.6/${p.blnnomor}/${p.tahunskrg}`:n==="8"?o=`B-${k.nosrt}/Kk.18.${t}/1/Kp.07.6/${k.blnno}/${k.thnno}`:n==="9"&&(o=`B-${D.nosrt}/Kk.18.${t}/1/Kp.01.2/${D.blnno}/${D.thnno}`),!o){F("Nomor surat wajib diisi."),w(!1);return}let S="";i.tanggal&&(S=ne(i.tanggal));const O={office_id:m.id,created_by:C.id,template_id:Number(n),template_name:(T==null?void 0:T.title)||"",letter_number:o,subject:T==null?void 0:T.title,recipient_employee_nip:(l==null?void 0:l.nip)||null,signing_official_nip:d.nip,form_data:{...n==="2"?{kabkota:i.kabkota,jln:i.jln,telfon:i.telfon,fax:i.fax,email:i.email,website:i.website,namapejabat:d.nama,nippejabat:d.nip,pangkatgolpejabat:i.pangkatgolpejabat||d.pangkat_gol||(d==null?void 0:d.golongan)||"",jabatanpejabat:d.jabatan,unitkerja:u.unitkerja||"",nosurat:u.nosurat,blnnomor:u.blnnomor,tahunskrg:u.tahunskrg,namajabatan:u.namajabatan,bbnkerja:u.bbnkerja,eksisting:u.eksisting,kelebihan:u.kelebihan,kekurangan:u.kekurangan,ibukota:i.ibukota,tanggal:S,kode_kabko:(m==null?void 0:m.kode_kabko)||i.kode_kabko||"",office:m}:{...i,...n!=="2"&&{namapegawai:(l==null?void 0:l.nama)||"",nippegawai:(l==null?void 0:l.nip)||"",pangkatgolpegawai:i.pangkatgolpegawai||(l==null?void 0:l.pangkat_gol)||(l==null?void 0:l.golongan)||"",jabatanpegawai:(l==null?void 0:l.jabatan)||"",ukerpegawai:(l==null?void 0:l.unit_kerja)||""},...n==="1"&&K,...n==="3"&&g,...n==="4"&&f,...n==="5"&&N,...n==="6"&&_,...n==="7"&&p,...n==="8"&&k,...n==="9"&&D,tanggal:S,kode_kabko:(m==null?void 0:m.kode_kabko)||i.kode_kabko||"",unitkerja:(l==null?void 0:l.unit_kerja)||(d==null?void 0:d.unit_kerja)||"",namapejabat:d.nama,nippejabat:d.nip,jabatanpejabat:d.jabatan,unitkerjapejabat:d.unit_kerja,ukerpejabat:d.unit_kerja,ibukota:i.ibukota,...n!=="2"&&n!=="9"&&{pangkatgolpejabat:i.pangkatgolpejabat||(d==null?void 0:d.pangkat_gol)||(d==null?void 0:d.golongan)||"",pangkatgolpegawai:i.pangkatgolpegawai||(l==null?void 0:l.pangkat_gol)||(l==null?void 0:l.golongan)||""}}}};try{const x=await ee("/api/letters",O,B);Aa(((j=x.letter)==null?void 0:j.id)||x.id),Y(!0),wa({title:"Surat berhasil disimpan",description:"Surat siap digenerate PDF."})}catch(x){x.message&&x.message.includes("Nomor surat sudah ada")?F("Nomor surat sudah ada. Silakan gunakan nomor surat yang berbeda."):x.message&&x.message.includes("Internal server error")?F("Terjadi kesalahan server. Silakan coba lagi."):F(x.message||"Terjadi kesalahan saat menyimpan surat"),w(!1),da(null)}},Ua=()=>{switch(n){case"1":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt",value:K.nosrt||"",onChange:e=>Z("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnno",value:K.blnno||"",onChange:e=>Z("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno",children:"Tahun"}),a.jsx(r,{id:"thnno",value:K.thnno||"",onChange:e=>Z("thnno",e.target.value),placeholder:"e.g., 2024"})]})]});case"2":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosurat",children:"Nomor Surat"}),a.jsx(r,{id:"nosurat",value:u.nosurat||"",onChange:e=>P("nosurat",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnnomor",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnnomor",value:u.blnnomor||"",onChange:e=>P("blnnomor",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tahunskrg",children:"Tahun"}),a.jsx(r,{id:"tahunskrg",value:u.tahunskrg||"",onChange:e=>P("tahunskrg",e.target.value),placeholder:"e.g., 2024"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"namajabatan",children:"Nama Jabatan"}),a.jsx(r,{id:"namajabatan",value:u.namajabatan||"",onChange:e=>P("namajabatan",e.target.value),placeholder:"Nama jabatan"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"bbnkerja",children:"Beban Kerja"}),a.jsx(r,{id:"bbnkerja",value:u.bbnkerja||"",onChange:e=>P("bbnkerja",e.target.value),placeholder:"Beban kerja"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"eksisting",children:"Eksisting"}),a.jsx(r,{id:"eksisting",value:u.eksisting||"",onChange:e=>P("eksisting",e.target.value),placeholder:"Jumlah eksisting"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kelebihan",children:"Kelebihan"}),a.jsx(r,{id:"kelebihan",value:u.kelebihan||"",onChange:e=>P("kelebihan",e.target.value),placeholder:"Jumlah kelebihan"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kekurangan",children:"Kekurangan"}),a.jsx(r,{id:"kekurangan",value:u.kekurangan||"",onChange:e=>P("kekurangan",e.target.value),placeholder:"Jumlah kekurangan"})]})]});case"3":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt3",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt3",value:g.nosrt||"",onChange:e=>A("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno3",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnno3",value:g.blnno||"",onChange:e=>A("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno3",children:"Tahun"}),a.jsx(r,{id:"thnno3",value:g.thnno||"",onChange:e=>A("thnno",e.target.value),placeholder:"e.g., 2024"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas",children:"Tempat Tugas"}),a.jsx(r,{id:"tempattugas",value:g.tempattugas||"",onChange:e=>A("tempattugas",e.target.value),placeholder:"Akan terisi otomatis dari data pegawai (atau isi manual)",className:g.tempattugas?"bg-gray-50":""})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"sekolah",children:"Sekolah"}),a.jsxs("select",{id:"sekolah",className:"border rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",value:g.sekolah||"",onChange:e=>A("sekolah",e.target.value),children:[a.jsx("option",{value:"",children:"Pilih sekolah"}),a.jsx("option",{value:"MAN",children:"MAN"}),a.jsx("option",{value:"MTs",children:"MTs"}),a.jsx("option",{value:"MIN",children:"MIN"})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kabkota2",children:"Kabupaten/Kota"}),a.jsxs(X,{onValueChange:e=>A("kabkota2",e),value:g.kabkota2||"",children:[a.jsx(aa,{className:"w-full",children:a.jsx(ea,{placeholder:"Pilih kabupaten/kota"})}),a.jsx(ta,{children:sa.map(e=>a.jsx(na,{value:e,children:e},e))})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tglmulai",children:"Tanggal Mulai"}),a.jsx(r,{id:"tglmulai",type:"date",value:g.tglmulai||"",onChange:e=>A("tglmulai",e.target.value)})]})]});case"4":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt4",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt4",value:f.nosrt||"",onChange:e=>E("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnsrt",children:"Bulan Surat"}),a.jsx(r,{id:"blnsrt",value:f.blnsrt||"",onChange:e=>E("blnsrt",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnskrg",children:"Tahun"}),a.jsx(r,{id:"thnskrg",value:f.thnskrg||"",onChange:e=>E("thnskrg",e.target.value),placeholder:"e.g., 2024"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"unitkerja4",children:"Unit Kerja"}),a.jsx(r,{id:"unitkerja4",value:f.unitkerja||"",onChange:e=>E("unitkerja",e.target.value),placeholder:"Unit kerja pegawai"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"keperluan",children:"Keperluan"}),a.jsx(r,{id:"keperluan",value:f.keperluan||"",onChange:e=>E("keperluan",e.target.value),placeholder:"Keperluan SKBT"})]})]})]});case"5":return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt5",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt5",value:N.nosrt||"",onChange:e=>R("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno5",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnno5",value:N.blnno||"",onChange:e=>R("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno5",children:"Tahun"}),a.jsx(r,{id:"thnno5",value:N.thnno||"",onChange:e=>R("thnno",e.target.value),placeholder:"e.g., 2024"})]}),a.jsxs("div",{className:"md:col-span-3",children:[a.jsx(s,{htmlFor:"tempattugas5",children:"Satuan Kerja"}),a.jsx(r,{id:"tempattugas5",value:N.tempattugas||"",onChange:e=>R("tempattugas",e.target.value),placeholder:"Akan terisi otomatis dari data pegawai (atau isi manual)",className:N.tempattugas?"bg-gray-50":""})]})]});case"6":return a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt6",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt6",value:_.nosrt||"",onChange:e=>Q("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno6",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnno6",value:_.blnno||"",onChange:e=>Q("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno6",children:"Tahun"}),a.jsx(r,{id:"thnno6",value:_.thnno||"",onChange:e=>Q("thnno",e.target.value),placeholder:"e.g., 2024"})]})]})});case"7":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosurat7",children:"Nomor Surat"}),a.jsx(r,{id:"nosurat7",value:p.nosurat||"",onChange:e=>$("nosurat",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnnomor7",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnnomor7",value:p.blnnomor||"",onChange:e=>$("blnnomor",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tahunskrg7",children:"Tahun"}),a.jsx(r,{id:"tahunskrg7",value:p.tahunskrg||"",onChange:e=>$("tahunskrg",e.target.value),placeholder:"e.g., 2024"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas7",children:"Tempat Tugas Asal"}),a.jsx(r,{id:"tempattugas7",value:p.tempattugas||"",onChange:e=>$("tempattugas",e.target.value),placeholder:"Masukkan tempat tugas asal (contoh: Bagian Tata Usaha)"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kabkota27",children:"Kabupaten/Kota Asal"}),a.jsxs(X,{onValueChange:e=>$("kabkota2",e),value:p.kabkota2||"",children:[a.jsx(aa,{className:"w-full",children:a.jsx(ea,{placeholder:"Pilih kabupaten/kota"})}),a.jsx(ta,{children:sa.map(e=>a.jsx(na,{value:e,children:e},e))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"jabatanpegawai2",children:"Jabatan Baru"}),a.jsx(r,{id:"jabatanpegawai2",value:p.jabatanpegawai2||"",onChange:e=>$("jabatanpegawai2",e.target.value),placeholder:"Jabatan yang akan dituju"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas2",children:"Tempat Tugas Baru"}),a.jsx(r,{id:"tempattugas2",value:p.tempattugas2||"",onChange:e=>$("tempattugas2",e.target.value),placeholder:"Tempat tugas tujuan"})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"kabataukotatujuan",children:"Kabupaten/Kota Tujuan"}),a.jsxs(X,{onValueChange:e=>$("kabataukotatujuan",e),value:p.kabataukotatujuan||"",children:[a.jsx(aa,{className:"w-full",children:a.jsx(ea,{placeholder:"Pilih kabupaten/kota"})}),a.jsx(ta,{children:sa.map(e=>a.jsx(na,{value:e,children:e},e))})]})]})]});case"8":return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt8",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt8",value:k.nosrt||"",onChange:e=>J("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno8",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnno8",value:k.blnno||"",onChange:e=>J("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno8",children:"Tahun"}),a.jsx(r,{id:"thnno8",value:k.thnno||"",onChange:e=>J("thnno",e.target.value),placeholder:"e.g., 2024"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugas8",children:"Tempat Tugas Asal"}),a.jsx(r,{id:"tempattugas8",value:k.tempattugas||"",onChange:e=>J("tempattugas",e.target.value),placeholder:"Masukkan tempat tugas asal (contoh: Bagian Tata Usaha)"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"jabatanbaru",children:"Jabatan Baru"}),a.jsx(r,{id:"jabatanbaru",value:k.jabatanbaru||"",onChange:e=>J("jabatanbaru",e.target.value),placeholder:"Jabatan yang akan dituju"})]})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tempattugasbaru",children:"Tempat Tugas Baru"}),a.jsx(r,{id:"tempattugasbaru",value:k.tempattugasbaru||"",onChange:e=>J("tempattugasbaru",e.target.value),placeholder:"Tempat tugas tujuan"})]})]});case"9":return a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"nosrt9",children:"Nomor Surat"}),a.jsx(r,{id:"nosrt9",value:D.nosrt||"",onChange:e=>W("nosrt",e.target.value),placeholder:"e.g., 123"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"blnno9",children:"Bulan (Angka)"}),a.jsx(r,{id:"blnno9",value:D.blnno||"",onChange:e=>W("blnno",e.target.value),placeholder:"e.g., 12"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"thnno9",children:"Tahun"}),a.jsx(r,{id:"thnno9",value:D.thnno||"",onChange:e=>W("thnno",e.target.value),placeholder:"e.g., 2024"})]})]})});default:return a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(ma,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Template tidak ditemukan"})]})}},Ea=()=>{switch(n){case"1":return a.jsx(ka,{data:{...i,...K}});case"2":return a.jsx(xa,{data:{...i,...u}});case"3":return a.jsx(ba,{data:{...i,...g,isPltPlh:i.isPltPlh,pltPlhType:i.pltPlhType}});case"4":return a.jsx(va,{data:{...i,...f}});case"5":return a.jsx(fa,{data:{...i,...N}});case"6":return a.jsx(Na,{data:{...i,..._}});case"7":return a.jsx(Ta,{data:{...i,...p}});case"8":return a.jsx(Sa,{data:{...i,...k}});case"9":return a.jsx(ya,{data:{...i,...D}});default:return a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(ma,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Template tidak ditemukan"})]})}},T=te.find(e=>e.id===n);return T?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs(M,{variant:"outline",onClick:()=>c("/generator"),className:"mb-4",children:[a.jsx(ca,{className:"w-4 h-4 mr-2"}),"Kembali ke Pilihan Template"]})}),a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Wa,{variant:"secondary",children:T.category}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"•"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Template ",n]})]}),a.jsx("h1",{className:"text-3xl font-bold",children:T.title}),a.jsx("p",{className:"text-muted-foreground mt-2",children:T.description})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsx(H,{title:"Data Pejabat Penandatangan",description:"Pilih pejabat yang akan menandatangani surat",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{children:a.jsx(ja,{label:"Cari Pejabat",placeholder:"Masukkan nama atau NIP pejabat...",onSelect:La,selectedPegawai:d})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(b,{label:"Nama Pejabat",value:i.namapejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"NIP",value:i.nippejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Pangkat/Golongan",value:i.pangkatgolpejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Jabatan",value:i.jabatanpejabat||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Unit Kerja Pejabat",value:(d==null?void 0:d.unit_kerja)??"",placeholder:"Akan terisi otomatis"})]})]})}),n==="2"&&a.jsx(H,{title:"Data Pegawai",description:"Masukkan unit kerja yang akan dianalisis",children:a.jsxs("div",{children:[a.jsx(s,{htmlFor:"unitkerja",children:"Unit Kerja Pegawai"}),a.jsx(r,{id:"unitkerja",value:u.unitkerja||"",onChange:e=>P("unitkerja",e.target.value),placeholder:"Masukkan unit kerja pegawai"})]})}),n!=="9"&&n!=="2"&&a.jsx(H,{title:"Data Pegawai",description:"Pilih pegawai yang akan dinyatakan dalam surat",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{children:a.jsx(ja,{label:"Cari Pegawai",placeholder:"Masukkan nama atau NIP pegawai...",onSelect:Ia,selectedPegawai:l})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(b,{label:"Nama Pegawai",value:i.namapegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"NIP",value:i.nippegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Pangkat/Golongan",value:i.pangkatgolpegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Jabatan",value:i.jabatanpegawai||"",placeholder:"Akan terisi otomatis"}),a.jsx(b,{label:"Unit Kerja Pegawai",value:(l==null?void 0:l.unit_kerja)??"",placeholder:"Akan terisi otomatis"}),n==="3"&&a.jsx(b,{label:"Tempat Tugas",value:(l==null?void 0:l.tempat_tugas)??"",placeholder:"Akan terisi otomatis"})]})]})}),a.jsx(H,{title:"Detail Template",description:"Lengkapi informasi khusus untuk template yang dipilih",children:a.jsxs("form",{onSubmit:Ja,className:"space-y-8",children:[Ua(),a.jsxs(H,{title:"Tanda Tangan",description:"Atur tempat dan tanggal penandatanganan",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(s,{htmlFor:"ibukota",children:"Tempat"}),a.jsx(r,{id:"ibukota",value:i.ibukota||"",onChange:e=>I("ibukota",e.target.value),placeholder:"Mataram"})]}),a.jsxs("div",{children:[a.jsx(s,{htmlFor:"tanggal",children:"Tanggal"}),a.jsx(r,{id:"tanggal",type:"date",value:i.tanggal||"",onChange:e=>I("tanggal",e.target.value)})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx(s,{htmlFor:"pejabatStatus",children:"Status Pejabat"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:i.isPltPlh,onChange:e=>{I("isPltPlh",e.target.checked),e.target.checked&&I("pltPlhType","plt")},className:"mr-2"}),"PLT/PLH (Pelaksana Tugas/Pelaksana Harian)"]}),i.isPltPlh&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"plt",checked:i.pltPlhType==="plt",onChange:e=>I("pltPlhType",e.target.value),className:"mr-2"}),"PLT (Pelaksana Tugas)"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"plh",checked:i.pltPlhType==="plh",onChange:e=>I("pltPlhType",e.target.value),className:"mr-2"}),"PLH (Pelaksana Harian)"]})]})]})]})]}),a.jsx("div",{className:"pt-6",children:a.jsx(M,{type:"submit",className:"w-full bg-teal-700 hover:bg-teal-800 text-white",disabled:oa,children:oa?"Menyimpan...":"Simpan & Generate Surat"})}),ua&&a.jsx("div",{className:"text-error mb-2",children:ua})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"sticky top-8",children:[a.jsx("div",{className:"mb-4 font-semibold",children:"Lihat hasil surat yang akan dicetak"}),a.jsx(Ca,{children:Ea()}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(M,{className:"bg-teal-700 hover:bg-teal-800 text-white flex items-center gap-2",onClick:()=>{L?window.open(pa(`/letters/${L}/preview`),"_blank"):alert("Surat belum disimpan. Simpan surat terlebih dahulu untuk membuka preview di tab baru.")},type:"button",children:[a.jsx(Ha,{className:"w-4 h-4"}),"Open in New Tab"]}),a.jsxs(M,{className:"bg-teal-700 hover:bg-teal-800 text-white flex items-center gap-2",onClick:()=>{var t;const e=window.open("","","width=900,height=600");if(e){const o=Array.from(document.head.querySelectorAll('link[rel="stylesheet"], style'));e.document.write("<html><head>"),o.forEach(O=>{e.document.write(O.outerHTML)}),e.document.write('</head><body style="background:#f8fafc;">');const S=((t=document.querySelector(".preview-container"))==null?void 0:t.outerHTML)||"";e.document.write(S),e.document.write("</body></html>"),e.document.close(),e.focus(),setTimeout(()=>e.print(),500)}},type:"button",children:[a.jsx(Ga,{className:"w-4 h-4"}),"Cetak"]})]})]})})]})]}),a.jsx(Xa,{open:Ma,onOpenChange:Y,children:a.jsxs(ae,{className:"max-w-4xl w-full",children:[a.jsx(Ra,{children:"Preview Surat"}),a.jsx("div",{className:"mb-4",children:"Surat berhasil disimpan. Berikut preview surat dari database:"}),a.jsx("div",{className:"bg-white p-4 rounded shadow max-h-[70vh] overflow-auto",children:a.jsx(Ca,{children:U?(()=>{var x;let e=U.form_data;if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}if(!e)return a.jsx("div",{className:"text-error",children:"Data surat tidak ditemukan"});const t=String(U.template_id),o=(U.letter_number||"").split("/"),S=(x=U.letter_number)==null?void 0:x.match(/^B-([^/]+)/),O={nosrt:e.nosrt||(S?S[1]:""),nosurat:e.nosurat||(S?S[1]:""),blnno:e.blnno||o[5]||"",blnnomor:e.blnnomor||o[5]||"",thnno:e.thnno||o[6]||"",tahunskrg:e.tahunskrg||o[6]||""},j={...e,...O};return t==="1"?a.jsx(ka,{data:j}):t==="2"?a.jsx(xa,{data:j}):t==="3"?a.jsx(ba,{data:j}):t==="4"?a.jsx(va,{data:j}):t==="5"?a.jsx(fa,{data:j}):t==="6"?a.jsx(Na,{data:j}):t==="7"?a.jsx(Ta,{data:j}):t==="8"?a.jsx(Sa,{data:j}):t==="9"?a.jsx(ya,{data:j}):a.jsx("div",{className:"text-error",children:"Template tidak dikenali"})})():a.jsx("div",{className:"text-center text-muted-foreground",children:"Memuat data surat..."})})}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx(M,{onClick:()=>Y(!1),children:"Tutup"}),a.jsx(M,{onClick:()=>window.open(pa(`/letters/${L}/preview`),"_blank"),variant:"outline",children:"Open in New Tab"})]})]})})]}):a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Template tidak ditemukan"}),a.jsxs(M,{onClick:()=>c("/generator"),children:[a.jsx(ca,{className:"w-4 h-4 mr-2"}),"Kembali ke Pilihan Template"]})]})})};export{ge as default};
//# sourceMappingURL=TemplateForm-Bk4BLQBa.js.map
