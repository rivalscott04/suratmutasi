import{j as a,ar as E,as as B,at as P,bi as F}from"./ui-vendor-sDPVfCnv.js";import{r as l}from"./react-vendor-BNG1zHOu.js";import{u as H,d as K,a as I,D as O,A as $,B as c,e as G,f as L,g as M,h as U,I as x,i as z,b as R,j as q,c as J,l as Q}from"./index-BfFoZe-y.js";import{L as d}from"./label-D4rybsK0.js";import{T as V}from"./textarea-C807XanX.js";import{S as W}from"./switch-Bhycf5Cd.js";import{C as X,a as Y,b as Z,d as aa,c as sa}from"./card-gcIfCSez.js";import{A as ea,h as ta,a as ia,b as ra,c as na,d as la,e as ca,g as da,f as oa}from"./alert-dialog-DUNBr381.js";import{T as ua,a as ma,b as _,c as o,d as ha,e as u}from"./table-D8OmBape.js";import{P as S}from"./PageHeader-DxtRMcFK.js";const Da=()=>{const{user:ga,token:m}=H(),{toast:i}=K(),[p,N]=l.useState([]),[D,j]=l.useState(!0),[T,h]=l.useState(!1),[t,k]=l.useState(null),[v,b]=l.useState(!1),[r,n]=l.useState({status_name:"",status_code:"",description:"",is_active:!0,sort_order:0});l.useEffect(()=>{g()},[]);const g=async()=>{try{j(!0);const s=await I("/api/tracking/status-master/all",m);s.success&&N(s.data)}catch(s){console.error("Error loading tracking statuses:",s),i({title:"Error",description:"Gagal memuat data status tracking",variant:"destructive"})}finally{j(!1)}},f=s=>{s?(k(s),n({status_name:s.status_name,status_code:s.status_code,description:s.description||"",is_active:s.is_active,sort_order:s.sort_order})):(k(null),n({status_name:"",status_code:"",description:"",is_active:!0,sort_order:0})),h(!0)},y=async()=>{try{if(b(!0),!r.status_name){i({title:"Error",description:"Nama status harus diisi",variant:"destructive"});return}const s={...r,status_code:t?r.status_code:`status-${Date.now()}`};let e;t?e=await q(`/api/tracking/status-master/${t.id}`,s,m):e=await J("/api/tracking/status-master",s,m),e.success?(i({title:"Berhasil",description:t?"Status tracking berhasil diperbarui":"Status tracking berhasil dibuat"}),h(!1),g()):i({title:"Error",description:e.message||"Terjadi kesalahan",variant:"destructive"})}catch(s){console.error("Error submitting form:",s),i({title:"Error",description:"Terjadi kesalahan saat menyimpan data",variant:"destructive"})}finally{b(!1)}},C=async s=>{try{const e=await Q(`/api/tracking/status-master/${s.id}`,m);e.success?(i({title:"Berhasil",description:"Status tracking berhasil dihapus"}),g()):i({title:"Error",description:e.message||"Gagal menghapus status tracking",variant:"destructive"})}catch(e){console.error("Error deleting status:",e),i({title:"Error",description:"Terjadi kesalahan saat menghapus data",variant:"destructive"})}},A=s=>`status-${Date.now()}`,w=s=>{n(e=>({...e,status_name:s,status_code:t?e.status_code:A()}))};return D?a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx(S,{title:"Konfigurasi Status Tracking"}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Memuat data..."})]})})]}):a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsx(S,{title:"Konfigurasi Status Tracking"}),a.jsx("div",{className:"mb-6",children:a.jsxs(X,{children:[a.jsx(Y,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Z,{children:"Master Status Tracking"}),a.jsx(aa,{children:"Kelola status tracking yang tersedia untuk admin pusat"})]}),a.jsxs(O,{open:T,onOpenChange:h,children:[a.jsx($,{asChild:!0,children:a.jsxs(c,{onClick:()=>f(),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(E,{className:"h-4 w-4 mr-2"}),"Tambah Status"]})}),a.jsxs(G,{className:"sm:max-w-[425px]",children:[a.jsxs(L,{children:[a.jsx(M,{children:t?"Edit Status Tracking":"Tambah Status Tracking"}),a.jsx(U,{children:t?"Perbarui informasi status tracking":"Buat status tracking baru untuk admin pusat"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(d,{htmlFor:"status_name",children:"Nama Status"}),a.jsx(x,{id:"status_name",value:r.status_name,onChange:s=>w(s.target.value),placeholder:"Contoh: Diterima di Pusat"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(d,{htmlFor:"status_code",children:"Kode Status"}),a.jsx(x,{id:"status_code",value:r.status_code,onChange:s=>n(e=>({...e,status_code:s.target.value})),placeholder:"Akan di-generate otomatis",disabled:!t}),!t&&a.jsx("p",{className:"text-xs text-gray-500",children:"Kode status akan dibuat otomatis saat menyimpan"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(d,{htmlFor:"description",children:"Deskripsi"}),a.jsx(V,{id:"description",value:r.description,onChange:s=>n(e=>({...e,description:s.target.value})),placeholder:"Deskripsi status tracking",rows:3})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(d,{htmlFor:"sort_order",children:"Urutan Tampil"}),a.jsx(x,{id:"sort_order",type:"number",value:r.sort_order,onChange:s=>n(e=>({...e,sort_order:parseInt(s.target.value)||0})),placeholder:"0"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(W,{id:"is_active",checked:r.is_active,onCheckedChange:s=>n(e=>({...e,is_active:s}))}),a.jsx(d,{htmlFor:"is_active",children:"Status Aktif"})]})]}),a.jsxs(z,{children:[a.jsx(c,{variant:"outline",onClick:()=>h(!1),children:"Batal"}),a.jsx(c,{onClick:y,disabled:v,className:"bg-green-600 hover:bg-green-700 text-white",children:v?"Menyimpan...":t?"Perbarui":"Simpan"})]})]})]})]})}),a.jsxs(sa,{children:[a.jsx("div",{className:"rounded-md border",children:a.jsxs(ua,{children:[a.jsx(ma,{children:a.jsxs(_,{children:[a.jsx(o,{children:"Status Tracking"}),a.jsx(o,{children:"Deskripsi"}),a.jsx(o,{children:"Urutan"}),a.jsx(o,{children:"Status"}),a.jsx(o,{className:"text-right",children:"Aksi"})]})}),a.jsx(ha,{children:p.map(s=>a.jsxs(_,{children:[a.jsx(u,{className:"font-medium",children:a.jsx("div",{className:"font-semibold text-gray-900",children:s.status_name})}),a.jsx(u,{children:s.description||"-"}),a.jsx(u,{children:s.sort_order}),a.jsx(u,{children:a.jsx(R,{variant:s.is_active?"default":"secondary",className:s.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"",children:s.is_active?"Aktif":"Tidak Aktif"})}),a.jsx(u,{className:"text-right",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx(c,{variant:"outline",size:"sm",onClick:()=>f(s),children:a.jsx(B,{className:"h-4 w-4"})}),a.jsxs(ea,{children:[a.jsx(ta,{asChild:!0,children:a.jsx(c,{variant:"outline",size:"sm",children:a.jsx(P,{className:"h-4 w-4"})})}),a.jsxs(ia,{children:[a.jsxs(ra,{children:[a.jsx(na,{children:"Hapus Status Tracking"}),a.jsxs(la,{children:['Apakah Anda yakin ingin menghapus status "',s.status_name,'"?',a.jsx("br",{}),a.jsx("strong",{children:"Perhatian:"})," Status yang sedang digunakan dalam tracking tidak bisa dihapus."]})]}),a.jsxs(ca,{children:[a.jsx(da,{children:"Batal"}),a.jsx(oa,{onClick:()=>C(s),className:"bg-red-600 hover:bg-red-700",children:"Hapus"})]})]})]})]})})]},s.id))})]})}),p.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(F,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Belum ada status tracking"}),a.jsx("p",{className:"text-sm",children:'Klik "Tambah Status" untuk membuat status pertama'})]})]})]})})]})};export{Da as default};
//# sourceMappingURL=TrackingStatusSettings-BH3kvFb0.js.map
