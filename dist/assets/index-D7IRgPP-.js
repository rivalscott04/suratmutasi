const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-C3d2kDEV.js","assets/ui-vendor-e65TVV2G.js","assets/react-vendor-C8WR5ETM.js","assets/card-B4xsStc8.js","assets/table-Czq08bSv.js","assets/data-vendor-DtxkLsA5.js","assets/Settings-pMkKIXoM.js","assets/label-CaxuD9ur.js","assets/textarea-CUJ3YW5Z.js","assets/checkbox-DcsPFf_a.js","assets/switch-DYwHPumt.js","assets/select-ujpBkyLr.js","assets/alert-dialog-Cbkb3Oah.js","assets/TemplateSelection-5xvYxqYK.js","assets/TemplateForm-DUb8beAl.js","assets/PegawaiSearchInput-CvZxpEug.js","assets/Template9-CD0FboVE.js","assets/SuratPreviewContainer-BE4SyOqE.js","assets/NotFound-1incY6yT.js","assets/Index-CRksKMai.js","assets/LetterDetail-o8oFo2Aj.js","assets/Letters-C1CJHPwe.js","assets/accordion-BLJUUlbM.js","assets/LetterPrintPreview-D5toq3A6.js","assets/Users-Dz55xpTd.js","assets/PengajuanSelect-DVtMmEM5.js","assets/PengajuanFileUpload-BTGp9R8x.js","assets/progress-DammPENp.js","assets/PengajuanIndex-BK6ZdaDl.js","assets/PengajuanDetail-CIAVMAuM.js","assets/PengajuanEdit-C-EWpBBr.js","assets/JobTypeConfiguration-DevYQWOm.js","assets/AdminWilayahDashboard-C7nq-SUY.js","assets/AdminWilayahUploadPage-BTOypMsc.js"])))=>i.map(i=>d[i]);
var ys=Object.defineProperty;var vs=(t,s,a)=>s in t?ys(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var he=(t,s,a)=>vs(t,typeof s!="symbol"?s+"":s,a);import{t as Ns,c as ks,j as e,C as Ce,P as Ss,a as ie,S as _s,b as Le,d as Es,e as Oe,f as Is,g as Re,I as Pe,h as De,i as Me,k as Ts,R as Ue,l as As,L as ze,m as Fe,n as Cs,T as Ls,O as Ve,o as Be,p as $e,X as le,q as Ke,D as We,r as Os,s as Rs,u as Je,v as qe,F as Ge,U as M,w as B,x as ge,y as je,M as Ps,z as Ds,A as Ms,B as Us,E as be,G as zs,H as Fs,J as we,K as ye,N as ve,Q as Vs,V as Bs,W as He,Y as Qe,Z as Xe,_ as Ye,$ as Ze,a0 as es,a1 as $s,a2 as Ks}from"./ui-vendor-e65TVV2G.js";import{a as Ws,r as n,u as Js,L as ae,B as qs,d as Gs,e as Hs,f as g,N as G}from"./react-vendor-C8WR5ETM.js";import{Q as Qs,a as Xs}from"./data-vendor-DtxkLsA5.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();var ss,Ne=Ws;ss=Ne.createRoot,Ne.hydrateRoot;const Ys="modulepreload",Zs=function(t){return"/FE/"+t},ke={},b=function(s,a,o){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(a.map(l=>{if(l=Zs(l),l in ke)return;ke[l]=!0;const p=l.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${x}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":Ys,p||(m.as="script"),m.crossOrigin="",m.href=l,d&&m.setAttribute("nonce",d),document.head.appendChild(m),p)return new Promise((N,y)=>{m.addEventListener("load",N),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function c(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&c(d.reason);return s().catch(c)})};function f(...t){return Ns(ks(t))}function Yt(t){if(!t)return"";const s=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let a,o,i;return/\d{4}-\d{2}-\d{2}/.test(t)?([i,o,a]=t.split("-"),`${parseInt(a,10)} ${s[parseInt(o,10)]} ${i}`):/\d{2}-\d{2}-\d{4}/.test(t)?([a,o,i]=t.split("-"),`${parseInt(a,10)} ${s[parseInt(o,10)]} ${i}`):t}function Zt(t){return t?t.toLowerCase().replace(/^(kota|kabupaten)/,s=>s.charAt(0).toUpperCase()+s.slice(1)).replace(/(^| )([a-z])/g,s=>s.toUpperCase()):""}const et=Ss,st=n.forwardRef(({className:t,sideOffset:s=4,...a},o)=>e.jsx(Ce,{ref:o,sideOffset:s,className:f("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a}));st.displayName=Ce.displayName;const Se=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:3001":"";async function H(t,s,a={}){const{data:o,token:i,headers:c={}}=a,u=Se(),d=s.startsWith("http")?s:u+s,l={method:t,headers:{...c,...i?{Authorization:`Bearer ${i}`}:{}},credentials:"include"};o&&(typeof FormData<"u"&&o instanceof FormData?l.body=o:(l.headers={"Content-Type":"application/json",...l.headers},l.body=JSON.stringify(o)));let p=await fetch(d,l),x=p.headers.get("content-type"),m;if(x&&x.includes("application/json")?m=await p.json():m=await p.text(),(p.status===401||p.status===403)&&s!=="/api/auth/refresh")try{const N=await fetch(Se()+"/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(N.ok){const y=await N.json();if(y.token){if(localStorage.setItem("token",y.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(y.token),l.headers={...l.headers,Authorization:`Bearer ${y.token}`},p=await fetch(d,l),x=p.headers.get("content-type"),x&&x.includes("application/json")?m=await p.json():m=await p.text(),!p.ok)throw new Error((m==null?void 0:m.message)||p.statusText);return m}}throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error("Sesi berakhir, silakan login kembali")}catch{throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error("Sesi berakhir, silakan login kembali")}if(!p.ok)throw new Error((m==null?void 0:m.message)||p.statusText);return m}const q=(t,s,a)=>H("GET",t,{token:s,headers:a}),ne=(t,s,a,o)=>H("POST",t,{data:s,token:a,headers:o}),ea=(t,s,a,o)=>H("PUT",t,{data:s,token:a,headers:o}),sa=(t,s,a)=>H("DELETE",t,{token:s,headers:a}),ts=n.createContext({}),tt=({children:t})=>{const[s,a]=n.useState(null),[o,i]=n.useState(null),[c,u]=n.useState(null),[d,l]=n.useState(null),[p,x]=n.useState(!0);n.useEffect(()=>(window.dispatchTokenUpdate=h=>{u(h),localStorage.setItem("token",h)},()=>{delete window.dispatchTokenUpdate}),[]),n.useEffect(()=>{const h=localStorage.getItem("token"),w=localStorage.getItem("originalToken"),k=localStorage.getItem("originalUser");if(h){if(u(h),w&&k)try{l(w),i(JSON.parse(k))}catch(S){console.error("Error parsing stored original user:",S),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}q("/api/auth/me",h).then(S=>{a(S.user),!o&&!k&&i(S.user)}).catch(S=>{console.error("Error fetching user:",S),N()}).finally(()=>x(!1))}else x(!1)},[]);const m=async(h,w)=>{x(!0);try{const k=await ne("/api/auth/login",{email:h,password:w});u(k.token),a(k.user),i(k.user),l(null),localStorage.setItem("token",k.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}finally{x(!1)}},N=()=>{u(null),a(null),i(null),l(null),localStorage.removeItem("token"),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")},y=async()=>{if(c){x(!0);try{const h=await q("/api/auth/me",c);a(h.user)}finally{x(!1)}}},X=h=>{u(h),localStorage.setItem("token",h)},E=async h=>{if(!c||!V)throw new Error("Only admin kanwil can impersonate");x(!0);try{d||(l(c),localStorage.setItem("originalToken",c)),o||(i(s),localStorage.setItem("originalUser",JSON.stringify(s)));const w=await ne("/api/auth/impersonate",{userId:h},c);u(w.token),a(w.user),localStorage.setItem("token",w.token),console.log("Impersonation started:",w.impersonation)}finally{x(!1)}},Y=async()=>{if(!c||!(s!=null&&s.impersonating)&&!d){console.log("No impersonation to stop:",{hasToken:!!c,userImpersonating:s==null?void 0:s.impersonating,hasOriginalToken:!!d});return}x(!0);try{console.log("Stopping impersonation...");const h=await ne("/api/auth/stop-impersonate",{},c);u(h.token),a(h.user),l(null),localStorage.setItem("token",h.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),console.log("Impersonation stopped successfully")}catch(h){console.error("Error stopping impersonation:",h),d&&o&&(console.log("Using fallback restore"),u(d),a(o),l(null),localStorage.setItem("token",d),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"))}finally{x(!1)}},A=!!d||!!(s!=null&&s.impersonating),V=(s==null?void 0:s.role)==="admin"&&(s==null?void 0:s.office_id)===null;return e.jsx(ts.Provider,{value:{user:s,originalUser:o,token:c,loading:p,login:m,logout:N,refreshUser:y,isAuthenticated:!!s&&!!c,isImpersonating:A,isAdminKanwil:V,impersonateUser:E,stopImpersonating:Y,updateToken:X},children:t})},T=()=>n.useContext(ts),at=ie("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=n.forwardRef(({className:t,variant:s,size:a,asChild:o=!1,...i},c)=>{const u=o?_s:"button";return e.jsx(u,{className:f(at({variant:s,size:a,className:t})),ref:c,...i})});v.displayName="Button";const nt=Cs,ot=Ls,rt=n.forwardRef(({className:t,inset:s,children:a,...o},i)=>e.jsxs(Le,{ref:i,className:f("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...o,children:[a,e.jsx(Es,{className:"ml-auto h-4 w-4"})]}));rt.displayName=Le.displayName;const it=n.forwardRef(({className:t,...s},a)=>e.jsx(Oe,{ref:a,className:f("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));it.displayName=Oe.displayName;const as=n.forwardRef(({className:t,sideOffset:s=4,...a},o)=>e.jsx(Is,{children:e.jsx(Re,{ref:o,sideOffset:s,className:f("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));as.displayName=Re.displayName;const $=n.forwardRef(({className:t,inset:s,...a},o)=>e.jsx(Pe,{ref:o,className:f("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...a}));$.displayName=Pe.displayName;const lt=n.forwardRef(({className:t,children:s,checked:a,...o},i)=>e.jsxs(De,{ref:i,className:f("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Me,{children:e.jsx(Ts,{className:"h-4 w-4"})})}),s]}));lt.displayName=De.displayName;const dt=n.forwardRef(({className:t,children:s,...a},o)=>e.jsxs(Ue,{ref:o,className:f("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Me,{children:e.jsx(As,{className:"h-2 w-2 fill-current"})})}),s]}));dt.displayName=Ue.displayName;const ns=n.forwardRef(({className:t,inset:s,...a},o)=>e.jsx(ze,{ref:o,className:f("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...a}));ns.displayName=ze.displayName;const K=n.forwardRef(({className:t,...s},a)=>e.jsx(Fe,{ref:a,className:f("-mx-1 my-1 h-px bg-muted",t),...s}));K.displayName=Fe.displayName;const U=Os,ct=Rs,ta=$e,os=n.forwardRef(({className:t,...s},a)=>e.jsx(Ve,{ref:a,className:f("fixed inset-0 z-[9999] bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 duration-200",t),...s}));os.displayName=Ve.displayName;const L=n.forwardRef(({className:t,children:s,...a},o)=>e.jsxs(ct,{children:[e.jsx(os,{}),e.jsxs(Be,{ref:o,className:f("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs($e,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));L.displayName=Be.displayName;const O=({className:t,...s})=>e.jsx("div",{className:f("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});O.displayName="DialogHeader";const mt=({className:t,...s})=>e.jsx("div",{className:f("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});mt.displayName="DialogFooter";const R=n.forwardRef(({className:t,...s},a)=>e.jsx(Ke,{ref:a,className:f("text-lg font-semibold leading-none tracking-tight",t),...s}));R.displayName=Ke.displayName;const P=n.forwardRef(({className:t,...s},a)=>e.jsx(We,{ref:a,className:f("text-sm text-muted-foreground",t),...s}));P.displayName=We.displayName;const rs=n.forwardRef(({className:t,...s},a)=>e.jsx(Je,{ref:a,className:f("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));rs.displayName=Je.displayName;const ut=n.forwardRef(({className:t,...s},a)=>e.jsx(qe,{ref:a,className:f("aspect-square h-full w-full",t),...s}));ut.displayName=qe.displayName;const is=n.forwardRef(({className:t,...s},a)=>e.jsx(Ge,{ref:a,className:f("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));is.displayName=Ge.displayName;const ls=n.forwardRef(({className:t,type:s,...a},o)=>e.jsx("input",{type:s,className:f("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:o,...a}));ls.displayName="Input";const xt=ie("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _e({className:t,variant:s,...a}){return e.jsx("div",{className:f(xt({variant:s}),t),...a})}const pt=()=>{const{user:t,originalUser:s,isImpersonating:a,impersonateUser:o,stopImpersonating:i,logout:c,token:u,loading:d,isAdminKanwil:l}=T(),p=Js(),[x,m]=n.useState(!1),[N,y]=n.useState(!1),[X,E]=n.useState(!1),[Y,A]=n.useState(!1),[V,h]=n.useState(!1),[w,k]=n.useState(""),[S,de]=n.useState([]),[ps,ce]=n.useState(!1),[Z,D]=n.useState(!1),[ee,fs]=n.useState(""),me=(()=>{const r=[{name:"Dashboard",href:"/dashboard",icon:we},{name:"Template Generator",href:"/generator",icon:ye},{name:"Riwayat Surat",href:"/letters",icon:ye},{name:"Data Pengajuan",href:"/pengajuan",icon:ve}];return(a?(s==null?void 0:s.role)==="admin":(t==null?void 0:t.role)==="admin")&&r.push({name:"Management User",href:"/users",icon:Vs}),(a?(s==null?void 0:s.role)==="admin_wilayah":(t==null?void 0:t.role)==="admin_wilayah")&&r.push({name:"Dashboard Admin Wilayah",href:"/admin-wilayah/dashboard",icon:we},{name:"Upload File",href:"/admin-wilayah/upload",icon:ve}),r.push({name:"Settings",href:"/settings",icon:Bs}),r})();n.useEffect(()=>{Z&&l&&hs()},[Z,l]);const hs=async()=>{if(u){ce(!0);try{console.log(" Fetching users for impersonation...");const r=await q("/api/users",u);console.log(" Raw users response:",r);const _=r.users.filter(te=>te.id!==(s==null?void 0:s.id)&&te.role!=="admin");console.log("✅ Filtered users:",_),de(_)}catch(r){console.error("❌ Failed to fetch users:",r),de([])}finally{ce(!1)}}},ue=r=>r==="/letters"?p.pathname.startsWith("/letters"):r==="/pengajuan"?p.pathname.startsWith("/pengajuan"):p.pathname===r,xe=()=>{y(!0),m(!1)},gs=()=>{c(),y(!1)},pe=()=>{D(!0),m(!1)},js=r=>{k(r),D(!1),E(!0)},fe=S.filter(r=>r.full_name.toLowerCase().includes(ee.toLowerCase())||r.email.toLowerCase().includes(ee.toLowerCase())),bs=async()=>{if(w)try{await o(w),E(!1),k("")}catch(r){console.error("Failed to impersonate user:",r),alert("Failed to impersonate user. Please try again.")}},se=()=>{A(!0),m(!1)},ws=async()=>{try{await i(),A(!1),h(!0),setTimeout(()=>{h(!1)},3e3)}catch(r){console.error("Failed to stop impersonating:",r),alert("Failed to stop impersonating. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(ae,{to:"/dashboard",className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Kementerian Agama",className:"h-8 w-8",onError:r=>{console.error("Logo Kemenag not found"),r.currentTarget.style.display="none"}}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("h1",{className:"text-lg font-semibold text-green-700",children:"Surat Generator"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Kementerian Agama RI"})]})]})}),a&&e.jsxs("div",{className:"hidden md:flex items-center bg-blue-50 border border-blue-200 rounded-lg px-3 py-1",children:[e.jsx(M,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-sm text-blue-700",children:["Impersonating: ",t==null?void 0:t.full_name]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:se,className:"ml-2 h-6 px-2 text-blue-600 hover:text-blue-700",children:e.jsx(B,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-8",children:me.map(r=>{const _=r.icon;return e.jsxs(ae,{to:r.href,className:f("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors",ue(r.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:r.name})]},r.name)})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(nt,{children:[e.jsx(ot,{asChild:!0,children:e.jsx(v,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsx(rs,{className:"h-8 w-8",children:e.jsx(is,{className:"bg-green-100 text-green-700",children:d?e.jsx("span",{className:"animate-pulse w-6 h-6 block bg-green-200 rounded-full mx-auto"}):t!=null&&t.full_name?t.full_name.split(" ").map(r=>r[0]).join("").toUpperCase():"?"})})})}),e.jsxs(as,{className:"w-64",align:"end",children:[e.jsx(ns,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold leading-none",children:t==null?void 0:t.full_name}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t==null?void 0:t.email}),l?e.jsx("p",{className:"text-xs leading-none text-blue-600 font-medium",children:"👑 Admin Kanwil (All Access)"}):e.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Role: ",t==null?void 0:t.role]}),(t==null?void 0:t.office_id)&&!l&&e.jsxs("p",{className:"text-xs leading-none text-gray-500",children:["Office ID: ",t.office_id]}),a&&e.jsxs("p",{className:"text-xs leading-none text-blue-600",children:["Impersonating as ",t==null?void 0:t.full_name]})]})}),e.jsx(K,{}),a&&e.jsxs(e.Fragment,{children:[e.jsxs($,{onClick:se,className:"text-blue-600",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Stop Impersonating"})]}),e.jsx(K,{})]}),l&&!a&&e.jsxs(e.Fragment,{children:[e.jsxs($,{onClick:pe,className:"text-blue-600",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Impersonate User"})]}),e.jsx(K,{})]}),e.jsxs($,{onClick:xe,className:"text-red-600",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})]}),e.jsx(v,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>m(!x),children:x?e.jsx(le,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]})]}),x&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[me.map(r=>{const _=r.icon;return e.jsxs(ae,{to:r.href,className:f("flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium",ue(r.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),onClick:()=>m(!1),children:[e.jsx(_,{className:"h-5 w-5"}),e.jsx("span",{children:r.name})]},r.name)}),a&&e.jsxs("button",{onClick:se,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:"Stop Impersonating"})]}),l&&!a&&e.jsxs("button",{onClick:pe,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[e.jsx(ge,{className:"h-5 w-5"}),e.jsx("span",{children:"Impersonate User"})]}),e.jsxs("button",{onClick:xe,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 w-full",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:"Logout"})]})]})})]})}),e.jsx(U,{open:N,onOpenChange:y,children:e.jsxs(L,{className:"sm:max-w-md",children:[e.jsxs(O,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5 text-orange-500"}),"Konfirmasi Logout"]}),e.jsx(P,{children:"Apakah Anda yakin ingin keluar dari sistem? Anda perlu login kembali untuk mengakses aplikasi."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(v,{onClick:()=>y(!1),variant:"outline",children:"Batal"}),e.jsx(v,{onClick:gs,className:"bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]})}),e.jsx(U,{open:Z,onOpenChange:D,children:e.jsxs(L,{className:"sm:max-w-lg",children:[e.jsxs(O,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-blue-500"}),"Pilih User untuk Impersonate"]}),e.jsx(P,{children:"Pilih user yang ingin Anda impersonate dari daftar di bawah ini."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(ls,{placeholder:"Cari user...",value:ee,onChange:r=>fs(r.target.value),className:"pl-10"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:ps?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Us,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading users..."})]}):S.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang tersedia untuk impersonation"}):fe.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang cocok dengan pencarian"}):e.jsx("div",{className:"divide-y",children:fe.map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>js(r.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(be,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:r.full_name}),e.jsx("div",{className:"text-xs text-gray-500",children:r.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(_e,{variant:"outline",className:"text-xs",children:r.role}),e.jsx("span",{className:"text-xs text-gray-500",children:r.office_id||"No Office"})]})]})]})},r.id))})})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(v,{onClick:()=>D(!1),variant:"outline",children:"Batal"})})]})}),e.jsx(U,{open:X,onOpenChange:E,children:e.jsxs(L,{className:"sm:max-w-md",children:[e.jsxs(O,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-blue-500"}),"Impersonate User"]}),e.jsx(P,{children:"Konfirmasi untuk impersonate user yang dipilih."})]}),e.jsxs("div",{className:"space-y-4",children:[w&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(be,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:"flex-1",children:(()=>{const r=S.find(_=>_.id===w);return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-sm",children:r.full_name}),e.jsx("div",{className:"text-xs text-gray-500",children:r.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(_e,{variant:"outline",className:"text-xs",children:r.role}),e.jsx("span",{className:"text-xs text-gray-500",children:r.office_id||"No Office"})]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"User tidak ditemukan"})})()})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(v,{onClick:()=>{E(!1),D(!0)},variant:"outline",className:"w-full",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"}),"Pilih User Lain"]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(v,{onClick:()=>E(!1),variant:"outline",children:"Batal"}),e.jsx(v,{onClick:bs,disabled:!w,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Impersonate"})]})]})}),e.jsx(U,{open:Y,onOpenChange:A,children:e.jsxs(L,{className:"sm:max-w-md",children:[e.jsxs(O,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-500"}),"Stop Impersonating"]}),e.jsxs(P,{children:["Anda sedang mengakses sistem sebagai ",e.jsx("strong",{children:t==null?void 0:t.full_name}),". Apakah Anda yakin ingin kembali ke akun admin Anda?"]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 my-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-sm text-blue-700",children:["Setelah stop impersonate, Anda akan kembali ke akun: ",e.jsx("strong",{children:s==null?void 0:s.full_name})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(v,{onClick:()=>A(!1),variant:"outline",children:"Batal"}),e.jsx(v,{onClick:ws,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Ya, Stop Impersonating"})]})]})}),e.jsx(U,{open:V,onOpenChange:h,children:e.jsxs(L,{className:"sm:max-w-md",children:[e.jsxs(O,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-5 h-5 text-green-500"}),"Stop Impersonating Berhasil"]}),e.jsx(P,{children:"Anda telah berhasil kembali ke akun admin Anda."})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 my-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsxs("span",{className:"text-sm text-green-700",children:["Sekarang Anda mengakses sistem sebagai: ",e.jsx("strong",{children:s==null?void 0:s.full_name})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(v,{onClick:()=>h(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"OK"})})]})})]})};function I({className:t,...s}){return e.jsx("div",{className:f("animate-pulse rounded-md bg-muted",t),...s})}const ft=1,ht=1e6;let oe=0;function gt(){return oe=(oe+1)%Number.MAX_SAFE_INTEGER,oe.toString()}const re=new Map,Ee=t=>{if(re.has(t))return;const s=setTimeout(()=>{re.delete(t),F({type:"REMOVE_TOAST",toastId:t})},ht);re.set(t,s)},jt=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,ft)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?Ee(a):t.toasts.forEach(o=>{Ee(o.id)}),{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},W=[];let J={toasts:[]};function F(t){J=jt(J,t),W.forEach(s=>{s(J)})}function bt({...t}){const s=gt(),a=i=>F({type:"UPDATE_TOAST",toast:{...i,id:s}}),o=()=>F({type:"DISMISS_TOAST",toastId:s});return F({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||o()}}}),{id:s,dismiss:o,update:a}}function wt(){const[t,s]=n.useState(J);return n.useEffect(()=>(W.push(s),()=>{const a=W.indexOf(s);a>-1&&W.splice(a,1)}),[t]),{...t,toast:bt,dismiss:a=>F({type:"DISMISS_TOAST",toastId:a})}}const yt=$s,ds=n.forwardRef(({className:t,...s},a)=>e.jsx(He,{ref:a,className:f("fixed top-0 z-[10000] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));ds.displayName=He.displayName;const vt=ie("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cs=n.forwardRef(({className:t,variant:s,...a},o)=>e.jsx(Qe,{ref:o,className:f(vt({variant:s}),t),...a}));cs.displayName=Qe.displayName;const Nt=n.forwardRef(({className:t,...s},a)=>e.jsx(Xe,{ref:a,className:f("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Nt.displayName=Xe.displayName;const ms=n.forwardRef(({className:t,...s},a)=>e.jsx(Ye,{ref:a,className:f("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(le,{className:"h-4 w-4"})}));ms.displayName=Ye.displayName;const us=n.forwardRef(({className:t,...s},a)=>e.jsx(Ze,{ref:a,className:f("text-sm font-semibold",t),...s}));us.displayName=Ze.displayName;const xs=n.forwardRef(({className:t,...s},a)=>e.jsx(es,{ref:a,className:f("text-sm opacity-90",t),...s}));xs.displayName=es.displayName;function Ie(){const{toasts:t}=wt();return e.jsxs(yt,{children:[t.map(function({id:s,title:a,description:o,action:i,...c}){return e.jsxs(cs,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(us,{children:a}),o&&e.jsx(xs,{children:o})]}),i,e.jsx(ms,{})]},s)}),e.jsx(ds,{})]})}const Q=({children:t})=>{const{user:s,token:a,refreshUser:o}=T(),[i,c]=n.useState(!1),[u,d]=n.useState([]);return n.useState(""),n.useState(!1),n.useState(null),n.useEffect(()=>{s&&!s.office_id?(c(!0),a&&q("/api/offices",a).then(l=>d(l.offices||[]))):c(!1)},[s,a]),!s&&a?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"h-16 bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{className:"h-8 w-8 rounded"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(I,{className:"h-4 w-32"}),e.jsx(I,{className:"h-3 w-24"})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(I,{className:"h-8 w-8 rounded-full"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{className:"h-8 w-48"}),e.jsx(I,{className:"h-32 w-full"}),e.jsx(I,{className:"h-32 w-full"})]})}),e.jsx(Ie,{})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(pt,{}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),e.jsx(Ie,{})]})};class kt extends n.Component{constructor(){super(...arguments);he(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return a.message.includes("403")||a.message.includes("Forbidden")?(window.showSessionExpiredModal&&window.showSessionExpiredModal(),{hasError:!1}):{hasError:!0,error:a}}componentDidCatch(a,o){if(console.error("ErrorBoundary caught an error:",a,o),a.message.includes("403")||a.message.includes("Forbidden")){window.showSessionExpiredModal&&window.showSessionExpiredModal();return}}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maaf, terjadi kesalahan yang tidak terduga. Silakan coba refresh halaman atau hubungi administrator."}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>window.location.reload(),children:"Refresh Halaman"})})]})})}):this.props.children}}const St=n.lazy(()=>b(()=>import("./Dashboard-C3d2kDEV.js"),__vite__mapDeps([0,1,2,3,4,5]))),_t=n.lazy(()=>b(()=>import("./Settings-pMkKIXoM.js"),__vite__mapDeps([6,1,2,3,7,8,9,10,11,12,5]))),Et=n.lazy(()=>b(()=>import("./TemplateSelection-5xvYxqYK.js"),__vite__mapDeps([13,1,2,3,5]))),It=n.lazy(()=>b(()=>import("./TemplateForm-DUb8beAl.js"),__vite__mapDeps([14,1,2,7,11,15,3,16,17,5]))),Tt=n.lazy(()=>b(()=>import("./NotFound-1incY6yT.js"),__vite__mapDeps([18,1,2]))),At=n.lazy(()=>b(()=>import("./Index-CRksKMai.js"),__vite__mapDeps([19,1,2,7,3,5]))),Ct=n.lazy(()=>b(()=>import("./LetterDetail-o8oFo2Aj.js"),__vite__mapDeps([20,1,2,3,16,4,17,5]))),Lt=n.lazy(()=>b(()=>import("./Letters-C1CJHPwe.js"),__vite__mapDeps([21,1,2,3,4,16,22,11,15,7,5]))),Ot=n.lazy(()=>b(()=>import("./LetterPrintPreview-D5toq3A6.js"),__vite__mapDeps([23,1,2,16,5]))),Rt=n.lazy(()=>b(()=>import("./Users-Dz55xpTd.js"),__vite__mapDeps([24,1,2,7,11,4,12,3,5]))),Pt=n.lazy(()=>b(()=>import("./PengajuanSelect-DVtMmEM5.js"),__vite__mapDeps([25,1,2,3,9,4,5]))),Dt=n.lazy(()=>b(()=>import("./PengajuanFileUpload-BTGp9R8x.js"),__vite__mapDeps([26,1,2,3,27,12,5]))),Mt=n.lazy(()=>b(()=>import("./PengajuanIndex-BK6ZdaDl.js"),__vite__mapDeps([28,1,2,3,11,4,22,12,5]))),Ut=n.lazy(()=>b(()=>import("./PengajuanDetail-CIAVMAuM.js"),__vite__mapDeps([29,1,2,3,12,8,7,10,5]))),zt=n.lazy(()=>b(()=>import("./PengajuanEdit-C-EWpBBr.js"),__vite__mapDeps([30,1,2,3,7,12,5]))),Ft=n.lazy(()=>b(()=>import("./JobTypeConfiguration-DevYQWOm.js"),__vite__mapDeps([31,1,2,3,7,9,10,5]))),Vt=n.lazy(()=>b(()=>import("./AdminWilayahDashboard-C7nq-SUY.js"),__vite__mapDeps([32,1,2,3,27,5]))),Bt=n.lazy(()=>b(()=>import("./AdminWilayahUploadPage-BTOypMsc.js"),__vite__mapDeps([33,1,2,3,27,9,5]))),j=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),$t=new Qs,C=({children:t})=>{const{user:s,loading:a}=T();return a?null:s?e.jsx(Q,{children:t}):e.jsx(G,{to:"/",replace:!0})},Te=({children:t})=>{const{user:s,loading:a}=T();return a?e.jsx("div",{children:"Loading..."}):!s||s.role!=="admin"?e.jsx(G,{to:"/dashboard",replace:!0}):e.jsx(Q,{children:t})},z=({children:t})=>{const{user:s,loading:a}=T();return a?e.jsx("div",{children:"Loading..."}):!s||s.role!=="admin"&&s.role!=="operator"?e.jsx(G,{to:"/dashboard",replace:!0}):e.jsx(Q,{children:t})},Ae=({children:t})=>{const{user:s,loading:a}=T();return a?e.jsx("div",{children:"Loading..."}):!s||s.role!=="admin_wilayah"?e.jsx(G,{to:"/dashboard",replace:!0}):e.jsx(Q,{children:t})},Kt=()=>e.jsxs(Hs,{children:[e.jsx(g,{path:"/",element:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(At,{})})}),e.jsx(g,{path:"/dashboard",element:e.jsx(C,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(St,{})})})}),e.jsx(g,{path:"/generator",element:e.jsx(z,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Et,{})})})}),e.jsx(g,{path:"/generator/create/:templateId",element:e.jsx(z,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(It,{})})})}),e.jsx(g,{path:"/users",element:e.jsx(Te,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Rt,{})})})}),e.jsx(g,{path:"/settings",element:e.jsx(C,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(_t,{})})})}),e.jsx(g,{path:"/letters/:id",element:e.jsx(C,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Ct,{})})})}),e.jsx(g,{path:"/letters",element:e.jsx(C,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Lt,{})})})}),e.jsx(g,{path:"/letters/:id/preview",element:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Ot,{})})}),e.jsx(g,{path:"/pengajuan",element:e.jsx(C,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Mt,{})})})}),e.jsx(g,{path:"/pengajuan/select",element:e.jsx(z,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Pt,{})})})}),e.jsx(g,{path:"/pengajuan/:pengajuanId",element:e.jsx(C,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Ut,{})})})}),e.jsx(g,{path:"/pengajuan/:pengajuanId/upload",element:e.jsx(z,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Dt,{})})})}),e.jsx(g,{path:"/pengajuan/:pengajuanId/edit",element:e.jsx(z,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(zt,{})})})}),e.jsx(g,{path:"/job-type-configuration",element:e.jsx(Te,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Ft,{})})})}),e.jsx(g,{path:"/admin-wilayah/dashboard",element:e.jsx(Ae,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Vt,{})})})}),e.jsx(g,{path:"/admin-wilayah/upload/:pengajuanId",element:e.jsx(Ae,{children:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Bt,{})})})}),e.jsx(g,{path:"*",element:e.jsx(n.Suspense,{fallback:e.jsx(j,{}),children:e.jsx(Tt,{})})})]}),Wt=()=>{const[t,s]=n.useState(!1),a=Gs(),{logout:o}=T();return n.useEffect(()=>{window.showSessionExpiredModal=()=>{const d=window.location.pathname;d==="/"||d==="/login"||s(!0)},window.dispatchTokenUpdate=d=>{localStorage.setItem("token",d)};const i=d=>{var l,p;if(d.error&&typeof d.error=="object"){const x=d.error;if(x.status===403||(l=x.message)!=null&&l.includes("403")||(p=x.message)!=null&&p.includes("Forbidden")){d.preventDefault();const m=window.location.pathname;!(m==="/"||m==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},c=d=>{var l,p;if(d.reason&&typeof d.reason=="object"){const x=d.reason;if(x.status===403||(l=x.message)!=null&&l.includes("403")||(p=x.message)!=null&&p.includes("Forbidden")){d.preventDefault();const m=window.location.pathname;!(m==="/"||m==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},u=window.fetch;return window.fetch=async(...d)=>{try{const l=await u(...d);if(l.status===403&&!(typeof d[0]=="string"?d[0]:d[0].url).includes("/api/auth/")){const x=window.location.pathname;return!(x==="/"||x==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Response(JSON.stringify({success:!1,message:"Sesi berakhir, silakan login kembali"}),{status:403,headers:{"Content-Type":"application/json"}})}return l}catch(l){throw l}},window.addEventListener("error",i),window.addEventListener("unhandledrejection",c),()=>{window.removeEventListener("error",i),window.removeEventListener("unhandledrejection",c),window.fetch=u,delete window.showSessionExpiredModal,delete window.dispatchTokenUpdate}},[]),e.jsx(Xs,{client:$t,children:e.jsxs(et,{children:[t&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200",children:[e.jsx(Ks,{className:"w-16 h-16 text-yellow-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"Sesi Berakhir"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Sesi Anda telah habis. Silakan login kembali untuk melanjutkan."}),e.jsx("button",{className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{o(),s(!1),a("/",{replace:!0})},children:"Login Ulang"})]})}),e.jsx(tt,{children:e.jsx(Kt,{})})]})})},Jt=()=>e.jsx(kt,{children:e.jsx(qs,{basename:"/FE",children:e.jsx(Wt,{})})});ss(document.getElementById("root")).render(e.jsx(Jt,{}));export{v as B,U as D,ls as I,I as S,q as a,_e as b,f as c,wt as d,L as e,O as f,R as g,P as h,mt as i,ea as j,ne as k,ta as l,sa as m,Yt as n,Zt as o,nt as p,ot as q,as as r,$ as s,bt as t,T as u,at as v};
//# sourceMappingURL=index-D7IRgPP-.js.map
