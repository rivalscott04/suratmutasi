import{r as o,c as d}from"./react-vendor-BNG1zHOu.js";import{j as g,a9 as v}from"./ui-vendor-B7g5fNgE.js";import{B,x as D}from"./index-StOLTLM1.js";function k(a={}){const{delay:e=1e3,showWarning:r=!0,warningMessage:i="Tunggu sebentar, proses sedang berjalan..."}=a,[t,s]=o.useState(!1),n=o.useRef(0),c=o.useRef(null),l=o.useCallback(()=>{s(!1),n.current=0,c.current&&(clearTimeout(c.current),c.current=null)},[]),p=o.useCallback(async w=>{const m=Date.now(),u=m-n.current;if(t||u<e&&u>0){r&&console.warn(i);return}s(!0),n.current=m;try{await w()}catch(f){throw l(),f}finally{c.current=setTimeout(()=>{s(!1)},e)}},[t,e,r,i,l]),x=o.useCallback(w=>{const m=Date.now(),u=m-n.current;if(t||u<e&&u>0){r&&console.warn(i);return}s(!0),n.current=m;try{w()}catch(f){throw l(),f}finally{c.current=setTimeout(()=>{s(!1)},e)}},[t,e,r,i,l]);return{isProcessing:t,execute:p,executeSync:x,reset:l}}function S(a={}){const e=k({delay:2e3,showWarning:!0,warningMessage:"Form sedang diproses, tunggu sebentar...",...a}),r=o.useCallback(async(i,t,s)=>{try{await e.execute(i),t==null||t()}catch(n){s==null||s(n)}},[e]);return{isSubmitting:e.isProcessing,submitForm:r,resetSubmission:e.reset}}function W(a={}){const e=k({delay:1e3,showWarning:!0,warningMessage:"Penyimpanan sedang diproses, tunggu sebentar...",...a}),r=o.useCallback(async(i,t,s)=>{try{await e.execute(i),t==null||t()}catch(n){s==null||s(n)}},[e]);return{isSaving:e.isProcessing,saveData:r,resetSave:e.reset}}const P=({onClick:a,isProcessing:e=!1,processingText:r="Memproses...",processingIcon:i,protectionDelay:t=1e3,showProcessingState:s=!0,onSuccess:n,onError:c,children:l,className:p,disabled:x,...w})=>{const[m,u]=d.useState(!1),[f,T]=d.useState(0),y=d.useRef(null),b=e||m,j=d.useCallback(async()=>{if(!a)return;const h=Date.now(),C=h-f;if(!(b||C<t&&C>0)){u(!0),T(h);try{await a(),n==null||n()}catch(M){c==null||c(M)}finally{y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{u(!1)},t)}}},[a,b,f,t,n,c]);d.useEffect(()=>()=>{y.current&&clearTimeout(y.current)},[]);const R=g.jsx(v,{className:"h-4 w-4 animate-spin text-green-600"});return g.jsx(B,{...w,onClick:j,disabled:x||b,className:D("transition-all duration-200",b&&"cursor-not-allowed",p),children:b&&s?g.jsxs(g.Fragment,{children:[i||R,r]}):l})},N=a=>g.jsx(P,{...a,processingText:"Menyimpan...",protectionDelay:2e3}),A=a=>g.jsx(P,{...a,processingText:"Menyimpan...",protectionDelay:1e3});export{N as S,W as a,A as b,S as u};
//# sourceMappingURL=protected-button-Bl3ccT6I.js.map
