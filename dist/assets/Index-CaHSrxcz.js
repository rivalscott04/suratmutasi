import{j as e,aC as M,aD as P,W as A,_ as I,aE as z}from"./ui-vendor-BCnv6AUJ.js";import{r as s,d as F,c as T}from"./react-vendor-C8WR5ETM.js";import{u as B,I as u,B as i,D as g,e as j,f as p,g as f,h as b}from"./index-D0ubvJ4S.js";import{L as w}from"./label-wdRPEKT_.js";import{C as K,a as O,b as H,d as q,c as R}from"./card-C-ZBHMOX.js";const Q=()=>{const[n,N]=s.useState(""),[o,m]=s.useState(""),[d,k]=s.useState(!1),[r,h]=s.useState(!1),[v,l]=s.useState(!1),[y,t]=s.useState(!1),[C,S]=s.useState(""),{login:D,isAuthenticated:x}=B(),c=F();T.useEffect(()=>{x&&c("/dashboard")},[x,c]);const E=async a=>{if(a.preventDefault(),!r){h(!0),t(!1),l(!1);try{await D(n,o),l(!0)}catch(L){console.error("Login error:",L),S("Email atau password yang Anda masukkan tidak sesuai. Silakan periksa kembali kredensial Anda."),setTimeout(()=>{t(!0)},0)}finally{h(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:[e.jsxs(K,{className:"w-full max-w-md shadow-xl relative z-10",children:[e.jsxs(O,{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Logo Kementerian Agama",className:"w-16 h-16 object-contain"})}),e.jsx(H,{className:"text-2xl font-bold text-gray-900",children:"Si Imut â€” Sistem Informasi Mutasi"}),e.jsx(q,{className:"text-base text-gray-600",children:"Kanwil Kemenag Provinsi NTB"})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:E,className:"space-y-4 relative",onKeyDown:a=>{a.key==="Enter"&&r&&a.preventDefault()},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"email",children:"Email"}),e.jsx(u,{id:"email",type:"email",value:n,onChange:a=>N(a.target.value),placeholder:"nama@kemenag.go.id",required:!0,className:"h-11 relative z-20",autoComplete:"email",autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"password",type:d?"text":"password",value:o,onChange:a=>m(a.target.value),placeholder:"Masukkan password",required:!0,className:"h-11 pr-10 relative z-20",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>k(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors z-30",tabIndex:-1,children:d?e.jsx(M,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]})]}),e.jsx(i,{type:"submit",className:"w-full h-11 text-base font-medium bg-green-600 hover:bg-green-700 text-white relative z-20 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r||!n||!o,children:r?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),"Sedang masuk..."]}):"Masuk"})]})})]}),e.jsx(g,{open:v,onOpenChange:l,children:e.jsxs(j,{className:"sm:max-w-md",children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-green-500"}),"Login Berhasil"]}),e.jsx(b,{children:"Selamat datang kembali! Anda akan dialihkan ke dashboard."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(i,{onClick:()=>{l(!1),c("/dashboard")},className:"bg-green-600 hover:bg-green-700 text-white",children:"Lanjutkan"})})]})}),e.jsx(g,{open:y,onOpenChange:a=>{a||t(!1)},children:e.jsxs(j,{className:"sm:max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(z,{className:"w-6 h-6 text-red-500"}),"Login Gagal"]}),e.jsxs(b,{className:"text-left space-y-3",children:[e.jsx("p",{className:"text-red-600 font-medium",children:C}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 space-y-2",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Saran untuk mengatasi masalah:"}),e.jsxs("ul",{className:"text-sm text-red-600 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Pastikan email yang dimasukkan sudah benar"}),e.jsx("li",{children:"Periksa kembali password Anda"}),e.jsx("li",{children:"Pastikan Caps Lock tidak aktif"}),e.jsx("li",{children:"Hubungi admin jika masalah berlanjut"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(i,{onClick:()=>{t(!1),m("")},variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",children:"Coba Lagi"}),e.jsx(i,{onClick:()=>t(!1),className:"bg-red-600 hover:bg-red-700 text-white",children:"Tutup"})]})]})})]})};export{Q as default};
//# sourceMappingURL=Index-CaHSrxcz.js.map
