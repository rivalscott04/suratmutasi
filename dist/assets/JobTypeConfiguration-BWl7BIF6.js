import{j as a,as as I,at as E,au as M,X as R,ar as H}from"./ui-vendor-C6CR1JGj.js";import{r as l}from"./react-vendor-B0B9C2fS.js";import{C as L,a as z,b as G,c as O}from"./card-DJBMZjiH.js";import{u as Y,d as $,a as X,B as m,b as Q,D as U,e as V,f as W,g as Z,I as P,j as aa,c as ea,l as na}from"./index-Bl8eCSPV.js";import{L as u}from"./label-Bd-V1bag.js";import{C as ta}from"./checkbox-CTHgTfb9.js";import{S as sa}from"./switch-A_RjuRrY.js";const ca=()=>{const{token:p}=Y(),{toast:i}=$(),[y,f]=l.useState([]),[N,b]=l.useState(!0),[v,c]=l.useState(!1),[g,x]=l.useState(null),[k,S]=l.useState(!1),[s,r]=l.useState({jenis_jabatan:"",total_dokumen:0,required_files:[],is_active:!0}),h=[{id:"surat_pengantar",name:"Surat Pengantar",category:"Dokumen Pengantar"},{id:"surat_permohonan_dari_yang_bersangkutan",name:"Surat Permohonan Dari Yang Bersangkutan",category:"Dokumen Pengantar"},{id:"surat_keputusan_cpns",name:"Surat Keputusan CPNS",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_pns",name:"Surat Keputusan PNS",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_kenaikan_pangkat_terakhir",name:"Surat Keputusan Kenaikan Pangkat Terakhir",category:"Dokumen Kepegawaian"},{id:"surat_keputusan_jabatan_terakhir",name:"Surat Keputusan Jabatan Terakhir",category:"Dokumen Kepegawaian"},{id:"skp_2_tahun_terakhir",name:"SKP 2 Tahun Terakhir",category:"Dokumen Kepegawaian"},{id:"surat_keterangan_anjab_abk_instansi_asal",name:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal",category:"Dokumen Keterangan"},{id:"surat_keterangan_anjab_abk_instansi_penerima",name:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima",category:"Dokumen Keterangan"},{id:"surat_pernyataan_tidak_hukuman_disiplin",name:"Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK",category:"Dokumen Pernyataan"},{id:"surat_persetujuan_mutasi_asal",name:"Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki",category:"Dokumen Persetujuan"},{id:"surat_lolos_butuh_ppk",name:"Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju",category:"Dokumen Persetujuan"},{id:"peta_jabatan",name:"Peta Jabatan",category:"Dokumen Pendukung"},{id:"hasil_evaluasi_pertimbangan_baperjakat",name:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",category:"Dokumen Pendukung"},{id:"anjab_abk_instansi_asal",name:"Anjab/Abk Instansi Asal",category:"Dokumen Pendukung"},{id:"anjab_abk_instansi_penerima",name:"Anjab/Abk Instansi Penerima",category:"Dokumen Pendukung"},{id:"surat_keterangan_tidak_tugas_belajar",name:"Surat Keterangan Tidak Sedang Tugas Belajar",category:"Dokumen Keterangan"},{id:"sptjm_pimpinan_satker_asal",name:"SPTJM Pimpinan Satker dari Asal",category:"Dokumen Pernyataan"},{id:"sptjm_pimpinan_satker_penerima",name:"SPTJM Pimpinan Satker dari Penerima",category:"Dokumen Pernyataan"},{id:"surat_rekomendasi_instansi_pembina",name:"Surat Rekomendasi Instansi Pembina",category:"Dokumen Rekomendasi"}];l.useEffect(()=>{j()},[]);const j=async()=>{try{b(!0);const e=await X("/api/job-type-configurations",p);e.success&&f(e.data)}catch{i({title:"Error",description:"Gagal mengambil data konfigurasi",variant:"destructive"})}finally{b(!1)}},K=()=>{r({jenis_jabatan:"",total_dokumen:0,required_files:[],is_active:!0}),x(null),c(!0)},T=e=>{const t=(o=>{const _={"Surat Pengantar":"surat_pengantar","Surat Permohonan Dari Yang Bersangkutan":"surat_permohonan_dari_yang_bersangkutan","Surat Keputusan CPNS":"surat_keputusan_cpns","Surat Keputusan PNS":"surat_keputusan_pns","Surat Keputusan Kenaikan Pangkat Terakhir":"surat_keputusan_kenaikan_pangkat_terakhir","Surat Keputusan Jabatan Terakhir":"surat_keputusan_jabatan_terakhir","SKP 2 Tahun Terakhir":"skp_2_tahun_terakhir","Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal":"surat_keterangan_anjab_abk_instansi_asal","Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima":"surat_keterangan_anjab_abk_instansi_penerima","Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK":"surat_pernyataan_tidak_hukuman_disiplin","Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki":"surat_persetujuan_mutasi_asal","Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju":"surat_lolos_butuh_ppk","Peta Jabatan":"peta_jabatan","Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)":"hasil_evaluasi_pertimbangan_baperjakat","Anjab/Abk Instansi Asal":"anjab_abk_instansi_asal","Anjab/Abk Instansi Penerima":"anjab_abk_instansi_penerima","Surat Keterangan Tidak Sedang Tugas Belajar":"surat_keterangan_tidak_tugas_belajar","SPTJM Pimpinan Satker dari Asal":"sptjm_pimpinan_satker_asal","SPTJM Pimpinan Satker dari Penerima":"sptjm_pimpinan_satker_penerima","Surat Rekomendasi Instansi Pembina":"surat_rekomendasi_instansi_pembina","SK Pangkat Terakhir":"surat_keputusan_kenaikan_pangkat_terakhir","SK Jabatan Terakhir":"surat_keputusan_jabatan_terakhir","Ijazah Terakhir":"surat_keputusan_pns","Sertifikat Diklat":"surat_keputusan_cpns","Surat Pernyataan":"surat_pernyataan_tidak_hukuman_disiplin",Foto:"surat_pengantar"};return o.map(d=>_[d]).filter(d=>d!==void 0)})(e.required_files);r({jenis_jabatan:e.jenis_jabatan,total_dokumen:e.max_dokumen,required_files:t,is_active:e.is_active}),x(e),c(!0)},A=async()=>{try{S(!0);const n=(o=>{const _={surat_pengantar:"Surat Pengantar",surat_permohonan_dari_yang_bersangkutan:"Surat Permohonan Dari Yang Bersangkutan",surat_keputusan_cpns:"Surat Keputusan CPNS",surat_keputusan_pns:"Surat Keputusan PNS",surat_keputusan_kenaikan_pangkat_terakhir:"Surat Keputusan Kenaikan Pangkat Terakhir",surat_keputusan_jabatan_terakhir:"Surat Keputusan Jabatan Terakhir",skp_2_tahun_terakhir:"SKP 2 Tahun Terakhir",surat_keterangan_anjab_abk_instansi_asal:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal",surat_keterangan_anjab_abk_instansi_penerima:"Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima",surat_pernyataan_tidak_hukuman_disiplin:"Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK",surat_persetujuan_mutasi_asal:"Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki",surat_lolos_butuh_ppk:"Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju",peta_jabatan:"Peta Jabatan",hasil_evaluasi_pertimbangan_baperjakat:"Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)",anjab_abk_instansi_asal:"Anjab/Abk Instansi Asal",anjab_abk_instansi_penerima:"Anjab/Abk Instansi Penerima",surat_keterangan_tidak_tugas_belajar:"Surat Keterangan Tidak Sedang Tugas Belajar",sptjm_pimpinan_satker_asal:"SPTJM Pimpinan Satker dari Asal",sptjm_pimpinan_satker_penerima:"SPTJM Pimpinan Satker dari Penerima",surat_rekomendasi_instansi_pembina:"Surat Rekomendasi Instansi Pembina"};return o.map(d=>_[d]).filter(d=>d!==void 0)})(s.required_files),t={...s,required_files:n,is_active:s.is_active};g?(await aa(`/api/job-type-configurations/${g.id}`,t,p),i({title:"Berhasil",description:"Konfigurasi berhasil diperbarui"})):(await ea("/api/job-type-configurations",t,p),i({title:"Berhasil",description:"Konfigurasi berhasil ditambahkan"})),c(!1),j()}catch(e){i({title:"Error",description:(e==null?void 0:e.message)||"Gagal menyimpan konfigurasi",variant:"destructive"})}finally{S(!1)}},D=async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus konfigurasi ini?"))try{await na(`/api/job-type-configurations/${e}`,p),i({title:"Berhasil",description:"Konfigurasi berhasil dihapus"}),j()}catch(n){i({title:"Error",description:(n==null?void 0:n.message)||"Gagal menghapus konfigurasi",variant:"destructive"})}},C=e=>{r(n=>{if(n.required_files.includes(e)){const o=n.required_files.filter(_=>_!==e);return{...n,required_files:o,total_dokumen:o.length}}if(n.required_files.length>=22)return i({title:"Batas Maksimum",description:"Maksimum 22 dokumen yang dapat dipilih untuk mutasi PNS",variant:"destructive"}),n;const t=[...n.required_files,e];return{...n,required_files:t,total_dokumen:t.length}})},w=()=>{const e=h.map(n=>n.id);r(n=>({...n,required_files:e,total_dokumen:e.length})),i({title:"Berhasil",description:"Semua dokumen telah dipilih"})},B=()=>{r(e=>({...e,required_files:[],total_dokumen:0})),i({title:"Berhasil",description:"Semua dokumen telah dihapus dari pilihan"})},q=h.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return N?a.jsx("div",{className:"container mx-auto p-6",children:a.jsx("div",{className:"text-center",children:"Loading..."})}):a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Konfigurasi Jenis Jabatan"}),a.jsxs(m,{onClick:K,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(I,{className:"h-4 w-4"}),"Tambah Konfigurasi"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(e=>a.jsxs(L,{children:[a.jsx(z,{children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx(G,{className:"text-lg",children:e.jenis_jabatan}),a.jsx(Q,{variant:"secondary",className:e.is_active?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200",children:e.is_active?"Aktif":"Nonaktif"})]})}),a.jsx(O,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(u,{className:"text-sm font-medium",children:"Total Dokumen"}),a.jsx("p",{className:"text-lg font-semibold",children:e.max_dokumen})]}),a.jsxs("div",{children:[a.jsx(u,{className:"text-sm font-medium",children:"Min Dokumen"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.min_dokumen})]}),a.jsxs("div",{children:[a.jsx(u,{className:"text-sm font-medium",children:"File Types"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e.required_files.length," file types"]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(m,{size:"sm",variant:"outline",onClick:()=>T(e),className:"flex items-center gap-1 border-green-600 text-green-600 hover:bg-green-50",children:[a.jsx(E,{className:"h-3 w-3"}),"Edit"]}),a.jsxs(m,{size:"sm",variant:"outline",onClick:()=>D(e.id),className:"flex items-center gap-1 border-red-600 text-red-600 hover:bg-red-50",children:[a.jsx(M,{className:"h-3 w-3"}),"Hapus"]})]})]})})]},e.id))}),a.jsx(U,{open:v,onOpenChange:c,children:a.jsxs(V,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(W,{children:a.jsx(Z,{children:g?"Edit Konfigurasi":"Tambah Konfigurasi Baru"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(u,{htmlFor:"jenis_jabatan",children:"Jenis Jabatan"}),a.jsx(P,{id:"jenis_jabatan",value:s.jenis_jabatan,onChange:e=>r(n=>({...n,jenis_jabatan:e.target.value})),placeholder:"Contoh: Guru, Penghulu, dll"})]}),a.jsxs("div",{children:[a.jsx(u,{htmlFor:"total_dokumen",children:"Total Dokumen"}),a.jsx(P,{id:"total_dokumen",type:"number",value:s.total_dokumen,onChange:e=>r(n=>({...n,total_dokumen:parseInt(e.target.value)||0})),min:"1",max:"20",disabled:!0,className:"bg-gray-50"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Otomatis mengikuti jumlah file types yang dipilih"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sa,{id:"is_active",checked:s.is_active,onCheckedChange:e=>r(n=>({...n,is_active:e})),className:"data-[state=checked]:bg-green-600"}),a.jsx(u,{htmlFor:"is_active",className:"text-sm font-medium",children:s.is_active?"Aktif":"Nonaktif"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx(u,{className:"text-base font-medium",children:"Pilih File Types yang Diperlukan"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Centang file types yang diperlukan untuk jenis jabatan ini"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:w,className:"border-green-600 text-green-600 hover:bg-green-50",children:["Pilih Semua (",h.length,")"]}),a.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:B,className:"border-gray-600 text-gray-600 hover:bg-gray-50",children:"Hapus Semua"})]})]}),a.jsx("div",{className:"space-y-4",children:Object.entries(q).map(([e,n])=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium mb-3 text-gray-800",children:e}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.map(t=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ta,{id:t.id,checked:s.required_files.includes(t.id),onCheckedChange:()=>C(t.id),className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),a.jsx(u,{htmlFor:t.id,className:"text-sm cursor-pointer",children:t.name})]},t.id))})]},e))})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Ringkasan"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Total file types yang dipilih: ",a.jsx("strong",{children:s.required_files.length})," / 22"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Total dokumen: ",a.jsx("strong",{children:s.total_dokumen})]}),s.required_files.length>=22&&a.jsx("p",{className:"text-sm text-orange-600 mt-2",children:"⚠️ Maksimum 22 dokumen untuk mutasi PNS"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsxs(m,{variant:"outline",onClick:()=>c(!1),disabled:k,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:[a.jsx(R,{className:"h-4 w-4 mr-2"}),"Batal"]}),a.jsxs(m,{onClick:A,disabled:k||!s.jenis_jabatan||s.required_files.length===0,className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(H,{className:"h-4 w-4 mr-2"}),k?"Menyimpan...":"Simpan"]})]})]})]})})]})};export{ca as default};
