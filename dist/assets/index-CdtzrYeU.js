const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Cov4Rnmf.js","assets/ui-vendor-DipkbOWo.js","assets/react-vendor-DheTkQGW.js","assets/card-DCLRESb7.js","assets/table-CtzvzVp3.js","assets/xlsx-DjuO7_Ju.js","assets/PageHeader-BLqX87jf.js","assets/Settings-9m_fYq7h.js","assets/label-DVEGU6v3.js","assets/textarea-Cc2fh3mk.js","assets/checkbox-Br9fgn46.js","assets/switch-3YHuYZlX.js","assets/tabs-B4xfysEy.js","assets/select-BWAY2yuv.js","assets/alert-dialog-Ckz-gx4Q.js","assets/TemplateSelection-C_IiIfSR.js","assets/TemplateForm-BaCLVyfz.js","assets/PegawaiSearchInput-r1M-AOLJ.js","assets/separator-Bswy3p59.js","assets/Template9-Bw9WqEvF.js","assets/protected-button-DNb1wi_f.js","assets/form-status-indicator-C6DnGUyR.js","assets/SuratPreviewContainer-C77N0icb.js","assets/NotFound-BKPhTCme.js","assets/Index-BmL43LPs.js","assets/LetterDetail-4cup8iuT.js","assets/Letters-NDFHmQJh.js","assets/accordion-BgZUyf7S.js","assets/LetterPrintPreview-D7dTIZWu.js","assets/Users-CcwSjEg3.js","assets/PengajuanSelect-B0Rcbi2T.js","assets/PengajuanFileUpload-BigTxdkG.js","assets/PengajuanIndex-C0-6d7DO.js","assets/PengajuanDetail-BGwWn6bF.js","assets/AuditLogCard-6R2BLFjf.js","assets/PengajuanEdit-DAselC65.js","assets/AuditLogPage-D2MCB8De.js","assets/JobTypeConfiguration-DBU21wWK.js","assets/AdminWilayahDashboard-BCZ4j_4_.js","assets/AdminWilayahUploadPage-DyRWL1rG.js","assets/AdminPusatTracking-C8tvFuRY.js","assets/SuperadminTracking-Dp453WYe.js","assets/TrackingStatusSettings-DzK-deky.js","assets/SKForm-B1pniYLr.js","assets/MaintenancePage-vMAQELZV.js"])))=>i.map(i=>d[i]);
var Qi=Object.defineProperty;var Ba=e=>{throw TypeError(e)};var Gi=(e,t,s)=>t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Qa=(e,t,s)=>Gi(e,typeof t!="symbol"?t+"":t,s),Ds=(e,t,s)=>t.has(e)||Ba("Cannot "+s);var p=(e,t,s)=>(Ds(e,t,"read from private field"),s?s.call(e):t.get(e)),F=(e,t,s)=>t.has(e)?Ba("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),I=(e,t,s,a)=>(Ds(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),Y=(e,t,s)=>(Ds(e,t,"access private method"),s);var Zt=(e,t,s,a)=>({set _(r){I(e,t,r,s)},get _(){return p(e,t,a)}});import{c as ha,a as Kn,u as Hn,j as n,A as Wi,P as xt,b as Ze,d as Ki,D as Hi,C as Xi,R as Ji,e as Yi,f as Zi,t as eo,g as to,H as so,h as ao,F as no,i as ro,k as io,U as oo,T as Ga,S as Wa,E as lo,l as co,m as fa,n as uo,o as Xn,p as ho,q as Jn,r as fo,s as Yn,I as Zn,v as er,w as tr,x as mo,y as sr,z as po,L as ar,B as nr,G as go,J as xo,O as rr,K as ir,M as or,X as ma,N as lr,Q as cr,V as yo,W as vo,Y as bo,Z as wo,_ as Ws,$ as jt,a0 as es,a1 as jo,a2 as Pt,a3 as Ka,a4 as Ha,a5 as hs,a6 as So,a7 as dr,a8 as ko,a9 as Ks,aa as fs,ab as _o,ac as ur,ad as hr,ae as fr,af as mr,ag as pr,ah as gr,ai as Eo,aj as xr,ak as No}from"./ui-vendor-DipkbOWo.js";import{a as yr,r as c,u as pa,d as To,L as St,e as vr,B as Ao,f as Po,g as z,N as yt}from"./react-vendor-DheTkQGW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var br,Xa=yr;br=Xa.createRoot,Xa.hydrateRoot;const Io="modulepreload",Ro=function(e){return"/FE/"+e},Ja={},q=function(t,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(s.map(u=>{if(u=Ro(u),u in Ja)return;Ja[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Io,d||(h.as="script"),h.crossOrigin="",h.href=u,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((x,w)=>{h.addEventListener("load",x),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return r.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};var[js,ju]=ha("Tooltip",[Kn]),ga=Kn(),wr="TooltipProvider",Co=700,Ya="tooltip.open",[Oo,jr]=js(wr),Sr=e=>{const{__scopeTooltip:t,delayDuration:s=Co,skipDelayDuration:a=300,disableHoverableContent:r=!1,children:i}=e,l=c.useRef(!0),o=c.useRef(!1),u=c.useRef(0);return c.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),n.jsx(Oo,{scope:t,isOpenDelayedRef:l,delayDuration:s,onOpen:c.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:c.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,a)},[a]),isPointerInTransitRef:o,onPointerInTransitChange:c.useCallback(d=>{o.current=d},[]),disableHoverableContent:r,children:i})};Sr.displayName=wr;var kr="Tooltip",[Su,Ss]=js(kr),Hs="TooltipTrigger",Do=c.forwardRef((e,t)=>{const{__scopeTooltip:s,...a}=e,r=Ss(Hs,s),i=jr(Hs,s),l=ga(s),o=c.useRef(null),u=Hn(t,o,r.onTriggerChange),d=c.useRef(!1),f=c.useRef(!1),h=c.useCallback(()=>d.current=!1,[]);return c.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),n.jsx(Wi,{asChild:!0,...l,children:n.jsx(xt.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...a,ref:u,onPointerMove:Ze(e.onPointerMove,x=>{x.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ze(e.onPointerLeave,()=>{r.onTriggerLeave(),f.current=!1}),onPointerDown:Ze(e.onPointerDown,()=>{r.open&&r.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ze(e.onFocus,()=>{d.current||r.onOpen()}),onBlur:Ze(e.onBlur,r.onClose),onClick:Ze(e.onClick,r.onClose)})})});Do.displayName=Hs;var Mo="TooltipPortal",[ku,Lo]=js(Mo,{forceMount:void 0}),mt="TooltipContent",_r=c.forwardRef((e,t)=>{const s=Lo(mt,e.__scopeTooltip),{forceMount:a=s.forceMount,side:r="top",...i}=e,l=Ss(mt,e.__scopeTooltip);return n.jsx(Ki,{present:a||l.open,children:l.disableHoverableContent?n.jsx(Er,{side:r,...i,ref:t}):n.jsx(Fo,{side:r,...i,ref:t})})}),Fo=c.forwardRef((e,t)=>{const s=Ss(mt,e.__scopeTooltip),a=jr(mt,e.__scopeTooltip),r=c.useRef(null),i=Hn(t,r),[l,o]=c.useState(null),{trigger:u,onClose:d}=s,f=r.current,{onPointerInTransitChange:h}=a,x=c.useCallback(()=>{o(null),h(!1)},[h]),w=c.useCallback((b,m)=>{const y=b.currentTarget,v={x:b.clientX,y:b.clientY},_=$o(v,y.getBoundingClientRect()),j=Bo(v,_),g=Qo(m.getBoundingClientRect()),T=Wo([...j,...g]);o(T),h(!0)},[h]);return c.useEffect(()=>()=>x(),[x]),c.useEffect(()=>{if(u&&f){const b=y=>w(y,f),m=y=>w(y,u);return u.addEventListener("pointerleave",b),f.addEventListener("pointerleave",m),()=>{u.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",m)}}},[u,f,w,x]),c.useEffect(()=>{if(l){const b=m=>{const y=m.target,v={x:m.clientX,y:m.clientY},_=(u==null?void 0:u.contains(y))||(f==null?void 0:f.contains(y)),j=!Go(v,l);_?x():j&&(x(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[u,f,l,d,x]),n.jsx(Er,{...e,ref:i})}),[Uo,Vo]=js(kr,{isInside:!1}),qo=Zi("TooltipContent"),Er=c.forwardRef((e,t)=>{const{__scopeTooltip:s,children:a,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=e,u=Ss(mt,s),d=ga(s),{onClose:f}=u;return c.useEffect(()=>(document.addEventListener(Ya,f),()=>document.removeEventListener(Ya,f)),[f]),c.useEffect(()=>{if(u.trigger){const h=x=>{const w=x.target;w!=null&&w.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),n.jsx(Hi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:n.jsxs(Xi,{"data-state":u.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(qo,{children:a}),n.jsx(Uo,{scope:s,isInside:!0,children:n.jsx(Ji,{id:u.contentId,role:"tooltip",children:r||a})})]})})});_r.displayName=mt;var Nr="TooltipArrow",zo=c.forwardRef((e,t)=>{const{__scopeTooltip:s,...a}=e,r=ga(s);return Vo(Nr,s).isInside?null:n.jsx(Yi,{...r,...a,ref:t})});zo.displayName=Nr;function $o(e,t){const s=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(s,a,r,i)){case i:return"left";case r:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Bo(e,t,s=5){const a=[];switch(t){case"top":a.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":a.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":a.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":a.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return a}function Qo(e){const{top:t,right:s,bottom:a,left:r}=e;return[{x:r,y:t},{x:s,y:t},{x:s,y:a},{x:r,y:a}]}function Go(e,t){const{x:s,y:a}=e;let r=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i],u=t[l],d=o.x,f=o.y,h=u.x,x=u.y;f>a!=x>a&&s<(h-d)*(a-f)/(x-f)+d&&(r=!r)}return r}function Wo(e){const t=e.slice();return t.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),Ko(t)}function Ko(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const r=e[a];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(r.y-l.y)>=(i.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}t.pop();const s=[];for(let a=e.length-1;a>=0;a--){const r=e[a];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(r.y-l.y)>=(i.y-l.y)*(r.x-l.x))s.pop();else break}s.push(r)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var Ho=Sr,Tr=_r;function D(...e){return eo(to(e))}function _u(e){return`/FE${e}`}function Eu(e){if(!e)return"";const t=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];let s,a,r;return/\d{4}-\d{2}-\d{2}/.test(e)?([r,a,s]=e.split("-"),`${parseInt(s,10)} ${t[parseInt(a,10)]} ${r}`):/\d{2}-\d{2}-\d{4}/.test(e)?([s,a,r]=e.split("-"),`${parseInt(s,10)} ${t[parseInt(a,10)]} ${r}`):e}function Nu(e){return e?e.toLowerCase().replace(/^(kota|kabupaten)/,t=>t.charAt(0).toUpperCase()+t.slice(1)).replace(/(^| )([a-z])/g,t=>t.toUpperCase()):""}const Xo=Ho,Jo=c.forwardRef(({className:e,sideOffset:t=4,...s},a)=>n.jsx(Tr,{ref:a,sideOffset:t,className:D("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));Jo.displayName=Tr.displayName;var ks=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_s=typeof window>"u"||"Deno"in globalThis;function de(){}function Yo(e,t){return typeof e=="function"?e(t):e}function Zo(e){return typeof e=="number"&&e>=0&&e!==1/0}function el(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xs(e,t){return typeof e=="function"?e(t):e}function tl(e,t){return typeof e=="function"?e(t):e}function Za(e,t){const{type:s="all",exact:a,fetchStatus:r,predicate:i,queryKey:l,stale:o}=e;if(l){if(a){if(t.queryHash!==xa(l,t.options))return!1}else if(!Ft(t.queryKey,l))return!1}if(s!=="all"){const u=t.isActive();if(s==="active"&&!u||s==="inactive"&&u)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||r&&r!==t.state.fetchStatus||i&&!i(t))}function en(e,t){const{exact:s,status:a,predicate:r,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(Lt(t.options.mutationKey)!==Lt(i))return!1}else if(!Ft(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||r&&!r(t))}function xa(e,t){return((t==null?void 0:t.queryKeyHashFn)||Lt)(e)}function Lt(e){return JSON.stringify(e,(t,s)=>Js(s)?Object.keys(s).sort().reduce((a,r)=>(a[r]=s[r],a),{}):s)}function Ft(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Ft(e[s],t[s])):!1}function Ar(e,t){if(e===t)return e;const s=tn(e)&&tn(t);if(s||Js(e)&&Js(t)){const a=s?e:Object.keys(e),r=a.length,i=s?t:Object.keys(t),l=i.length,o=s?[]:{},u=new Set(a);let d=0;for(let f=0;f<l;f++){const h=s?f:i[f];(!s&&u.has(h)||s)&&e[h]===void 0&&t[h]===void 0?(o[h]=void 0,d++):(o[h]=Ar(e[h],t[h]),o[h]===e[h]&&e[h]!==void 0&&d++)}return r===l&&d===r?e:o}return t}function tn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Js(e){if(!sn(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!sn(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sn(e){return Object.prototype.toString.call(e)==="[object Object]"}function sl(e){return new Promise(t=>{setTimeout(t,e)})}function al(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Ar(e,t):t}function nl(e,t,s=0){const a=[...e,t];return s&&a.length>s?a.slice(1):a}function rl(e,t,s=0){const a=[t,...e];return s&&a.length>s?a.slice(0,-1):a}var ya=Symbol();function Pr(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ya?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ge,Re,rt,Vn,il=(Vn=class extends ks{constructor(){super();F(this,Ge);F(this,Re);F(this,rt);I(this,rt,t=>{if(!_s&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){p(this,Re)||this.setEventListener(p(this,rt))}onUnsubscribe(){var t;this.hasListeners()||((t=p(this,Re))==null||t.call(this),I(this,Re,void 0))}setEventListener(t){var s;I(this,rt,t),(s=p(this,Re))==null||s.call(this),I(this,Re,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){p(this,Ge)!==t&&(I(this,Ge,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof p(this,Ge)=="boolean"?p(this,Ge):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ge=new WeakMap,Re=new WeakMap,rt=new WeakMap,Vn),Ir=new il,it,Ce,ot,qn,ol=(qn=class extends ks{constructor(){super();F(this,it,!0);F(this,Ce);F(this,ot);I(this,ot,t=>{if(!_s&&window.addEventListener){const s=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){p(this,Ce)||this.setEventListener(p(this,ot))}onUnsubscribe(){var t;this.hasListeners()||((t=p(this,Ce))==null||t.call(this),I(this,Ce,void 0))}setEventListener(t){var s;I(this,ot,t),(s=p(this,Ce))==null||s.call(this),I(this,Ce,t(this.setOnline.bind(this)))}setOnline(t){p(this,it)!==t&&(I(this,it,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return p(this,it)}},it=new WeakMap,Ce=new WeakMap,ot=new WeakMap,qn),ms=new ol;function ll(){let e,t;const s=new Promise((r,i)=>{e=r,t=i});s.status="pending",s.catch(()=>{});function a(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{a({status:"fulfilled",value:r}),e(r)},s.reject=r=>{a({status:"rejected",reason:r}),t(r)},s}function cl(e){return Math.min(1e3*2**e,3e4)}function Rr(e){return(e??"online")==="online"?ms.isOnline():!0}var Ys=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Cr(e){let t=!1,s=0,a;const r=ll(),i=()=>r.status!=="pending",l=m=>{var y;if(!i()){const v=new Ys(m);x(v),(y=e.onCancel)==null||y.call(e,v)}},o=()=>{t=!0},u=()=>{t=!1},d=()=>Ir.isFocused()&&(e.networkMode==="always"||ms.isOnline())&&e.canRun(),f=()=>Rr(e.networkMode)&&e.canRun(),h=m=>{i()||(a==null||a(),r.resolve(m))},x=m=>{i()||(a==null||a(),r.reject(m))},w=()=>new Promise(m=>{var y;a=v=>{(i()||d())&&m(v)},(y=e.onPause)==null||y.call(e)}).then(()=>{var m;a=void 0,i()||(m=e.onContinue)==null||m.call(e)}),b=()=>{if(i())return;let m;const y=s===0?e.initialPromise:void 0;try{m=y??e.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(h).catch(v=>{var M;if(i())return;const _=e.retry??(_s?0:3),j=e.retryDelay??cl,g=typeof j=="function"?j(s,v):j,T=_===!0||typeof _=="number"&&s<_||typeof _=="function"&&_(s,v);if(t||!T){x(v);return}s++,(M=e.onFail)==null||M.call(e,s,v),sl(g).then(()=>d()?void 0:w()).then(()=>{t?x(v):b()})})};return{promise:r,status:()=>r.status,cancel:l,continue:()=>(a==null||a(),r),cancelRetry:o,continueRetry:u,canStart:f,start:()=>(f()?b():w().then(b),r)}}var dl=e=>setTimeout(e,0);function ul(){let e=[],t=0,s=o=>{o()},a=o=>{o()},r=dl;const i=o=>{t?e.push(o):r(()=>{s(o)})},l=()=>{const o=e;e=[],o.length&&r(()=>{a(()=>{o.forEach(u=>{s(u)})})})};return{batch:o=>{let u;t++;try{u=o()}finally{t--,t||l()}return u},batchCalls:o=>(...u)=>{i(()=>{o(...u)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{r=o}}}var ee=ul(),We,zn,Or=(zn=class{constructor(){F(this,We)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zo(this.gcTime)&&I(this,We,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(_s?1/0:5*60*1e3))}clearGcTimeout(){p(this,We)&&(clearTimeout(p(this,We)),I(this,We,void 0))}},We=new WeakMap,zn),lt,ct,re,Ke,X,Wt,He,ue,Se,$n,hl=($n=class extends Or{constructor(t){super();F(this,ue);F(this,lt);F(this,ct);F(this,re);F(this,Ke);F(this,X);F(this,Wt);F(this,He);I(this,He,!1),I(this,Wt,t.defaultOptions),this.setOptions(t.options),this.observers=[],I(this,Ke,t.client),I(this,re,p(this,Ke).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,I(this,lt,ml(this.options)),this.state=t.state??p(this,lt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=p(this,X))==null?void 0:t.promise}setOptions(t){this.options={...p(this,Wt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&p(this,re).remove(this)}setData(t,s){const a=al(this.state.data,t,this.options);return Y(this,ue,Se).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(t,s){Y(this,ue,Se).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var a,r;const s=(a=p(this,X))==null?void 0:a.promise;return(r=p(this,X))==null||r.cancel(t),s?s.then(de).catch(de):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(p(this,lt))}isActive(){return this.observers.some(t=>tl(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ya||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Xs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!el(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=p(this,X))==null||s.continue()}onOnline(){var s;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=p(this,X))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),p(this,re).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(p(this,X)&&(p(this,He)?p(this,X).cancel({revert:!0}):p(this,X).cancelRetry()),this.scheduleGc()),p(this,re).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Y(this,ue,Se).call(this,{type:"invalidate"})}async fetch(t,s){var u,d,f,h,x,w,b,m,y,v,_,j;if(this.state.fetchStatus!=="idle"&&((u=p(this,X))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(p(this,X))return p(this,X).continueRetry(),p(this,X).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(T=>T.options.queryFn);g&&this.setOptions(g.options)}const a=new AbortController,r=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(I(this,He,!0),a.signal)})},i=()=>{const g=Pr(this.options,s),M=(()=>{const E={client:p(this,Ke),queryKey:this.queryKey,meta:this.meta};return r(E),E})();return I(this,He,!1),this.options.persister?this.options.persister(g,M,this):g(M)},o=(()=>{const g={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:p(this,Ke),state:this.state,fetchFn:i};return r(g),g})();(d=this.options.behavior)==null||d.onFetch(o,this),I(this,ct,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&Y(this,ue,Se).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),I(this,X,Cr({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:g=>{g instanceof Ys&&g.revert&&this.setState({...p(this,ct),fetchStatus:"idle"}),a.abort()},onFail:(g,T)=>{Y(this,ue,Se).call(this,{type:"failed",failureCount:g,error:T})},onPause:()=>{Y(this,ue,Se).call(this,{type:"pause"})},onContinue:()=>{Y(this,ue,Se).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const g=await p(this,X).start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),(w=(x=p(this,re).config).onSuccess)==null||w.call(x,g,this),(m=(b=p(this,re).config).onSettled)==null||m.call(b,g,this.state.error,this),g}catch(g){if(g instanceof Ys){if(g.silent)return p(this,X).promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw Y(this,ue,Se).call(this,{type:"error",error:g}),(v=(y=p(this,re).config).onError)==null||v.call(y,g,this),(j=(_=p(this,re).config).onSettled)==null||j.call(_,this.state.data,g,this),g}finally{this.scheduleGc()}}},lt=new WeakMap,ct=new WeakMap,re=new WeakMap,Ke=new WeakMap,X=new WeakMap,Wt=new WeakMap,He=new WeakMap,ue=new WeakSet,Se=function(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fl(a.data,this.options),fetchMeta:t.meta??null};case"success":const r={...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return I(this,ct,t.manual?r:void 0),r;case"error":const i=t.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),ee.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),p(this,re).notify({query:this,type:"updated",action:t})})},$n);function fl(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Rr(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ml(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,a=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ve,Bn,pl=(Bn=class extends ks{constructor(t={}){super();F(this,ve);this.config=t,I(this,ve,new Map)}build(t,s,a){const r=s.queryKey,i=s.queryHash??xa(r,s);let l=this.get(i);return l||(l=new hl({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(r)}),this.add(l)),l}add(t){p(this,ve).has(t.queryHash)||(p(this,ve).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=p(this,ve).get(t.queryHash);s&&(t.destroy(),s===t&&p(this,ve).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ee.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return p(this,ve).get(t)}getAll(){return[...p(this,ve).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>Za(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>Za(t,a)):s}notify(t){ee.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){ee.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ee.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ve=new WeakMap,Bn),be,Z,Xe,we,Ne,Qn,gl=(Qn=class extends Or{constructor(t){super();F(this,we);F(this,be);F(this,Z);F(this,Xe);this.mutationId=t.mutationId,I(this,Z,t.mutationCache),I(this,be,[]),this.state=t.state||xl(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){p(this,be).includes(t)||(p(this,be).push(t),this.clearGcTimeout(),p(this,Z).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){I(this,be,p(this,be).filter(s=>s!==t)),this.scheduleGc(),p(this,Z).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){p(this,be).length||(this.state.status==="pending"?this.scheduleGc():p(this,Z).remove(this))}continue(){var t;return((t=p(this,Xe))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,o,u,d,f,h,x,w,b,m,y,v,_,j,g,T,M,E,L;const s=()=>{Y(this,we,Ne).call(this,{type:"continue"})};I(this,Xe,Cr({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,G)=>{Y(this,we,Ne).call(this,{type:"failed",failureCount:N,error:G})},onPause:()=>{Y(this,we,Ne).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>p(this,Z).canRun(this)}));const a=this.state.status==="pending",r=!p(this,Xe).canStart();try{if(a)s();else{Y(this,we,Ne).call(this,{type:"pending",variables:t,isPaused:r}),await((l=(i=p(this,Z).config).onMutate)==null?void 0:l.call(i,t,this));const G=await((u=(o=this.options).onMutate)==null?void 0:u.call(o,t));G!==this.state.context&&Y(this,we,Ne).call(this,{type:"pending",context:G,variables:t,isPaused:r})}const N=await p(this,Xe).start();return await((f=(d=p(this,Z).config).onSuccess)==null?void 0:f.call(d,N,t,this.state.context,this)),await((x=(h=this.options).onSuccess)==null?void 0:x.call(h,N,t,this.state.context)),await((b=(w=p(this,Z).config).onSettled)==null?void 0:b.call(w,N,null,this.state.variables,this.state.context,this)),await((y=(m=this.options).onSettled)==null?void 0:y.call(m,N,null,t,this.state.context)),Y(this,we,Ne).call(this,{type:"success",data:N}),N}catch(N){try{throw await((_=(v=p(this,Z).config).onError)==null?void 0:_.call(v,N,t,this.state.context,this)),await((g=(j=this.options).onError)==null?void 0:g.call(j,N,t,this.state.context)),await((M=(T=p(this,Z).config).onSettled)==null?void 0:M.call(T,void 0,N,this.state.variables,this.state.context,this)),await((L=(E=this.options).onSettled)==null?void 0:L.call(E,void 0,N,t,this.state.context)),N}finally{Y(this,we,Ne).call(this,{type:"error",error:N})}}finally{p(this,Z).runNext(this)}}},be=new WeakMap,Z=new WeakMap,Xe=new WeakMap,we=new WeakSet,Ne=function(t){const s=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ee.batch(()=>{p(this,be).forEach(a=>{a.onMutationUpdate(t)}),p(this,Z).notify({mutation:this,type:"updated",action:t})})},Qn);function xl(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _e,he,Kt,Gn,yl=(Gn=class extends ks{constructor(t={}){super();F(this,_e);F(this,he);F(this,Kt);this.config=t,I(this,_e,new Set),I(this,he,new Map),I(this,Kt,0)}build(t,s,a){const r=new gl({mutationCache:this,mutationId:++Zt(this,Kt)._,options:t.defaultMutationOptions(s),state:a});return this.add(r),r}add(t){p(this,_e).add(t);const s=ts(t);if(typeof s=="string"){const a=p(this,he).get(s);a?a.push(t):p(this,he).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(p(this,_e).delete(t)){const s=ts(t);if(typeof s=="string"){const a=p(this,he).get(s);if(a)if(a.length>1){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}else a[0]===t&&p(this,he).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=ts(t);if(typeof s=="string"){const a=p(this,he).get(s),r=a==null?void 0:a.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){var a;const s=ts(t);if(typeof s=="string"){const r=(a=p(this,he).get(s))==null?void 0:a.find(i=>i!==t&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ee.batch(()=>{p(this,_e).forEach(t=>{this.notify({type:"removed",mutation:t})}),p(this,_e).clear(),p(this,he).clear()})}getAll(){return Array.from(p(this,_e))}find(t){const s={exact:!0,...t};return this.getAll().find(a=>en(s,a))}findAll(t={}){return this.getAll().filter(s=>en(t,s))}notify(t){ee.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return ee.batch(()=>Promise.all(t.map(s=>s.continue().catch(de))))}},_e=new WeakMap,he=new WeakMap,Kt=new WeakMap,Gn);function ts(e){var t;return(t=e.options.scope)==null?void 0:t.id}function an(e){return{onFetch:(t,s)=>{var f,h,x,w,b;const a=t.options,r=(x=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:x.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],l=((b=t.state.data)==null?void 0:b.pageParams)||[];let o={pages:[],pageParams:[]},u=0;const d=async()=>{let m=!1;const y=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},v=Pr(t.options,t.fetchOptions),_=async(j,g,T)=>{if(m)return Promise.reject();if(g==null&&j.pages.length)return Promise.resolve(j);const E=(()=>{const B={client:t.client,queryKey:t.queryKey,pageParam:g,direction:T?"backward":"forward",meta:t.options.meta};return y(B),B})(),L=await v(E),{maxPages:N}=t.options,G=T?rl:nl;return{pages:G(j.pages,L,N),pageParams:G(j.pageParams,g,N)}};if(r&&i.length){const j=r==="backward",g=j?vl:nn,T={pages:i,pageParams:l},M=g(a,T);o=await _(T,M,j)}else{const j=e??i.length;do{const g=u===0?l[0]??a.initialPageParam:nn(a,o);if(u>0&&g==null)break;o=await _(o,g),u++}while(u<j)}return o};t.options.persister?t.fetchFn=()=>{var m,y;return(y=(m=t.options).persister)==null?void 0:y.call(m,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=d}}}function nn(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function vl(e,{pages:t,pageParams:s}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,s[0],s):void 0}var Q,Oe,De,dt,ut,Me,ht,ft,Wn,bl=(Wn=class{constructor(e={}){F(this,Q);F(this,Oe);F(this,De);F(this,dt);F(this,ut);F(this,Me);F(this,ht);F(this,ft);I(this,Q,e.queryCache||new pl),I(this,Oe,e.mutationCache||new yl),I(this,De,e.defaultOptions||{}),I(this,dt,new Map),I(this,ut,new Map),I(this,Me,0)}mount(){Zt(this,Me)._++,p(this,Me)===1&&(I(this,ht,Ir.subscribe(async e=>{e&&(await this.resumePausedMutations(),p(this,Q).onFocus())})),I(this,ft,ms.subscribe(async e=>{e&&(await this.resumePausedMutations(),p(this,Q).onOnline())})))}unmount(){var e,t;Zt(this,Me)._--,p(this,Me)===0&&((e=p(this,ht))==null||e.call(this),I(this,ht,void 0),(t=p(this,ft))==null||t.call(this),I(this,ft,void 0))}isFetching(e){return p(this,Q).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return p(this,Oe).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=p(this,Q).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=p(this,Q).build(this,t),a=s.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Xs(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return p(this,Q).findAll(e).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),r=p(this,Q).get(a.queryHash),i=r==null?void 0:r.state.data,l=Yo(t,i);if(l!==void 0)return p(this,Q).build(this,a).setData(l,{...s,manual:!0})}setQueriesData(e,t,s){return ee.batch(()=>p(this,Q).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=p(this,Q).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=p(this,Q);ee.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=p(this,Q);return ee.batch(()=>(s.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},a=ee.batch(()=>p(this,Q).findAll(e).map(r=>r.cancel(s)));return Promise.all(a).then(de).catch(de)}invalidateQueries(e,t={}){return ee.batch(()=>(p(this,Q).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=ee.batch(()=>p(this,Q).findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,s);return s.throwOnError||(i=i.catch(de)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(de)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=p(this,Q).build(this,t);return s.isStaleByTime(Xs(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(de).catch(de)}fetchInfiniteQuery(e){return e.behavior=an(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(de).catch(de)}ensureInfiniteQueryData(e){return e.behavior=an(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ms.isOnline()?p(this,Oe).resumePausedMutations():Promise.resolve()}getQueryCache(){return p(this,Q)}getMutationCache(){return p(this,Oe)}getDefaultOptions(){return p(this,De)}setDefaultOptions(e){I(this,De,e)}setQueryDefaults(e,t){p(this,dt).set(Lt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...p(this,dt).values()],s={};return t.forEach(a=>{Ft(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,t){p(this,ut).set(Lt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...p(this,ut).values()],s={};return t.forEach(a=>{Ft(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...p(this,De).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xa(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ya&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...p(this,De).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){p(this,Q).clear(),p(this,Oe).clear()}},Q=new WeakMap,Oe=new WeakMap,De=new WeakMap,dt=new WeakMap,ut=new WeakMap,Me=new WeakMap,ht=new WeakMap,ft=new WeakMap,Wn),wl=c.createContext(void 0),jl=({client:e,children:t})=>(c.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(wl.Provider,{value:e,children:t}));const os=()=>{const e=window.location.hostname,t=window.location.href;return console.log("üîç API Base URL Detection:",{envVar:void 0,hostname:e,protocol:window.location.protocol,href:t,mode:"production"}),e==="103.41.207.103"||e.includes("103.41.207.103")?(console.log("‚úÖ Frontend and backend on same server, using relative URL (no CORS needed)"),""):e==="localhost"||e==="127.0.0.1"?(console.log("‚úÖ Using localhost fallback"),"http://localhost:3000"):(console.log("‚úÖ Using relative URL (same-origin, no CORS)"),"")};async function Es(e,t,s={}){var x,w;const{data:a,token:r,headers:i={}}=s,l=os(),o=l+t;console.log("üì§ API Request:",{method:e,url:t,fullUrl:o,baseUrl:l,hasToken:!!r});const u={method:e,headers:{...i},credentials:"include"};r&&(u.headers={...u.headers,Authorization:`Bearer ${r}`}),a&&(typeof FormData<"u"&&a instanceof FormData?u.body=a:(u.headers={"Content-Type":"application/json",...u.headers},u.body=JSON.stringify(a)));let d;try{d=await fetch(o,{...u,redirect:"follow"})}catch(b){if((x=b.message)!=null&&x.includes("CORS")||(w=b.message)!=null&&w.includes("Failed to fetch"))if(o.startsWith("http://")){const m=o.replace("http://","https://");console.warn("‚ö†Ô∏è CORS error with HTTP, trying HTTPS:",m);try{d=await fetch(m,u)}catch{throw b}}else throw b;else throw b}let f=d.headers.get("content-type"),h;if(f&&f.includes("application/json")?h=await d.json():h=await d.text(),(d.status===401||d.status===403)&&t!=="/api/auth/refresh"&&t!=="/api/auth/me"&&!t.includes("/api/auth/"))try{await new Promise(m=>setTimeout(m,100));const b=await fetch(os()+"/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(b.ok){const m=await b.json();if(m.token){if(localStorage.setItem("token",m.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(m.token),u.headers={...u.headers,Authorization:`Bearer ${m.token}`},d=await fetch(o,u),f=d.headers.get("content-type"),f&&f.includes("application/json")?h=await d.json():h=await d.text(),!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}}console.log("‚ö†Ô∏è Token refresh failed, retrying once...");try{await new Promise(y=>setTimeout(y,500));const m=await fetch(os()+"/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(m.ok){const y=await m.json();if(y.token){if(localStorage.setItem("token",y.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(y.token),u.headers={...u.headers,Authorization:`Bearer ${y.token}`},d=await fetch(o,u),f=d.headers.get("content-type"),f&&f.includes("application/json")?h=await d.json():h=await d.text(),!d.ok)throw new Error((h==null?void 0:h.message)||d.statusText);return h}}}catch(m){console.log("‚ùå Retry refresh also failed:",m)}throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error("Sesi berakhir, silakan login kembali")}catch(b){const m=b instanceof Error?b.message:"Sesi berakhir, silakan login kembali";throw window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Error(m)}if(!d.ok){if(d.status===404){const m=(h==null?void 0:h.message)||"Endpoint tidak ditemukan";throw console.error("‚ùå 404 Not Found:",{url:o,method:e,status:d.status,responseData:h}),new Error(m)}const b=(h==null?void 0:h.message)||h||d.statusText||"Terjadi kesalahan";throw console.error("‚ùå API Error:",{url:o,method:e,status:d.status,error:b}),new Error(b)}return h}const It=(e,t,s)=>Es("GET",e,{token:t,headers:s}),Ms=(e,t,s,a)=>Es("POST",e,{data:t,token:s,headers:a}),Tu=(e,t,s,a)=>Es("PUT",e,{data:t,token:s,headers:a}),Au=(e,t,s)=>Es("DELETE",e,{token:t,headers:s}),Pu=async(e,t,s,a,r,i)=>{const l=new FormData;l.append("file",s);let o="/api";r==="admin_wilayah"?o="/api/admin-wilayah":r==="admin"&&(i==="admin_wilayah"?o="/api/admin-wilayah":o="/api");const u=`${o}/pengajuan/${e}/files/${t}/replace`,d=os()+u;console.log("üîç Debug API replace file:",{pengajuanId:e,fileId:t,fileName:s.name,userRole:r,fileCategory:i,baseUrl:o,url:u,fullUrl:d,token:a?"exists":"missing"});const f=await fetch(d,{method:"PUT",headers:{Authorization:`Bearer ${a}`},body:l});console.log("üîç Response status:",f.status),console.log("üîç Response ok:",f.ok);const h=await f.json();if(console.log("üîç Response data:",h),!f.ok)throw new Error(h.message||"Gagal mengganti file");return h};var va=Xt(),R=e=>Ht(e,va),ba=Xt();R.write=e=>Ht(e,ba);var Ns=Xt();R.onStart=e=>Ht(e,Ns);var wa=Xt();R.onFrame=e=>Ht(e,wa);var ja=Xt();R.onFinish=e=>Ht(e,ja);var at=[];R.setTimeout=(e,t)=>{const s=R.now()+t,a=()=>{const i=at.findIndex(l=>l.cancel==a);~i&&at.splice(i,1),Fe-=~i?1:0},r={time:s,handler:e,cancel:a};return at.splice(Dr(s),0,r),Fe+=1,Mr(),r};var Dr=e=>~(~at.findIndex(t=>t.time>e)||~at.length);R.cancel=e=>{Ns.delete(e),wa.delete(e),ja.delete(e),va.delete(e),ba.delete(e)};R.sync=e=>{Zs=!0,R.batchedUpdates(e),Zs=!1};R.throttle=e=>{let t;function s(){try{e(...t)}finally{t=null}}function a(...r){t=r,R.onStart(s)}return a.handler=e,a.cancel=()=>{Ns.delete(s),t=null},a};var Sa=typeof window<"u"?window.requestAnimationFrame:()=>{};R.use=e=>Sa=e;R.now=typeof performance<"u"?()=>performance.now():Date.now;R.batchedUpdates=e=>e();R.catch=console.error;R.frameLoop="always";R.advance=()=>{R.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Fr()};var Le=-1,Fe=0,Zs=!1;function Ht(e,t){Zs?(t.delete(e),e(0)):(t.add(e),Mr())}function Mr(){Le<0&&(Le=0,R.frameLoop!=="demand"&&Sa(Lr))}function Sl(){Le=-1}function Lr(){~Le&&(Sa(Lr),R.batchedUpdates(Fr))}function Fr(){const e=Le;Le=R.now();const t=Dr(Le);if(t&&(Ur(at.splice(0,t),s=>s.handler()),Fe-=t),!Fe){Sl();return}Ns.flush(),va.flush(e?Math.min(64,Le-e):16.667),wa.flush(),ba.flush(),ja.flush()}function Xt(){let e=new Set,t=e;return{add(s){Fe+=t==e&&!e.has(s)?1:0,e.add(s)},delete(s){return Fe-=t==e&&e.has(s)?1:0,e.delete(s)},flush(s){t.size&&(e=new Set,Fe-=t.size,Ur(t,a=>a(s)&&e.add(a)),Fe+=e.size,t=e)}}}function Ur(e,t){e.forEach(s=>{try{t(s)}catch(a){R.catch(a)}})}var kl=Object.defineProperty,_l=(e,t)=>{for(var s in t)kl(e,s,{get:t[s],enumerable:!0})},pe={};_l(pe,{assign:()=>Nl,colors:()=>Ue,createStringInterpolator:()=>_a,skipAnimation:()=>qr,to:()=>Vr,willAdvance:()=>Ea});function ea(){}var El=(e,t,s)=>Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0}),k={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function ke(e,t){if(k.arr(e)){if(!k.arr(t)||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}return e===t}var O=(e,t)=>e.forEach(t);function je(e,t,s){if(k.arr(e)){for(let a=0;a<e.length;a++)t.call(s,e[a],`${a}`);return}for(const a in e)e.hasOwnProperty(a)&&t.call(s,e[a],a)}var ae=e=>k.und(e)?[]:k.arr(e)?e:[e];function Rt(e,t){if(e.size){const s=Array.from(e);e.clear(),O(s,t)}}var Tt=(e,...t)=>Rt(e,s=>s(...t)),ka=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_a,Vr,Ue=null,qr=!1,Ea=ea,Nl=e=>{e.to&&(Vr=e.to),e.now&&(R.now=e.now),e.colors!==void 0&&(Ue=e.colors),e.skipAnimation!=null&&(qr=e.skipAnimation),e.createStringInterpolator&&(_a=e.createStringInterpolator),e.requestAnimationFrame&&R.use(e.requestAnimationFrame),e.batchedUpdates&&(R.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Ea=e.willAdvance),e.frameLoop&&(R.frameLoop=e.frameLoop)},Ct=new Set,oe=[],Ls=[],ps=0,Ts={get idle(){return!Ct.size&&!oe.length},start(e){ps>e.priority?(Ct.add(e),R.onStart(Tl)):(zr(e),R(ta))},advance:ta,sort(e){if(ps)R.onFrame(()=>Ts.sort(e));else{const t=oe.indexOf(e);~t&&(oe.splice(t,1),$r(e))}},clear(){oe=[],Ct.clear()}};function Tl(){Ct.forEach(zr),Ct.clear(),R(ta)}function zr(e){oe.includes(e)||$r(e)}function $r(e){oe.splice(Al(oe,t=>t.priority>e.priority),0,e)}function ta(e){const t=Ls;for(let s=0;s<oe.length;s++){const a=oe[s];ps=a.priority,a.idle||(Ea(a),a.advance(e),a.idle||t.push(a))}return ps=0,Ls=oe,Ls.length=0,oe=t,oe.length>0}function Al(e,t){const s=e.findIndex(t);return s<0?e.length:s}var Pl=(e,t,s)=>Math.min(Math.max(s,e),t),Il={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},me="[-+]?\\d*\\.?\\d+",gs=me+"%";function As(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Rl=new RegExp("rgb"+As(me,me,me)),Cl=new RegExp("rgba"+As(me,me,me,me)),Ol=new RegExp("hsl"+As(me,gs,gs)),Dl=new RegExp("hsla"+As(me,gs,gs,me)),Ml=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ll=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fl=/^#([0-9a-fA-F]{6})$/,Ul=/^#([0-9a-fA-F]{8})$/;function Vl(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Fl.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ue&&Ue[e]!==void 0?Ue[e]:(t=Rl.exec(e))?(et(t[1])<<24|et(t[2])<<16|et(t[3])<<8|255)>>>0:(t=Cl.exec(e))?(et(t[1])<<24|et(t[2])<<16|et(t[3])<<8|ln(t[4]))>>>0:(t=Ml.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Ul.exec(e))?parseInt(t[1],16)>>>0:(t=Ll.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Ol.exec(e))?(rn(on(t[1]),ss(t[2]),ss(t[3]))|255)>>>0:(t=Dl.exec(e))?(rn(on(t[1]),ss(t[2]),ss(t[3]))|ln(t[4]))>>>0:null}function Fs(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function rn(e,t,s){const a=s<.5?s*(1+t):s+t-s*t,r=2*s-a,i=Fs(r,a,e+1/3),l=Fs(r,a,e),o=Fs(r,a,e-1/3);return Math.round(i*255)<<24|Math.round(l*255)<<16|Math.round(o*255)<<8}function et(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function on(e){return(parseFloat(e)%360+360)%360/360}function ln(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function ss(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function cn(e){let t=Vl(e);if(t===null)return e;t=t||0;const s=(t&4278190080)>>>24,a=(t&16711680)>>>16,r=(t&65280)>>>8,i=(t&255)/255;return`rgba(${s}, ${a}, ${r}, ${i})`}var Ut=(e,t,s)=>{if(k.fun(e))return e;if(k.arr(e))return Ut({range:e,output:t,extrapolate:s});if(k.str(e.output[0]))return _a(e);const a=e,r=a.output,i=a.range||[0,1],l=a.extrapolateLeft||a.extrapolate||"extend",o=a.extrapolateRight||a.extrapolate||"extend",u=a.easing||(d=>d);return d=>{const f=zl(d,i);return ql(d,i[f],i[f+1],r[f],r[f+1],u,l,o,a.map)}};function ql(e,t,s,a,r,i,l,o,u){let d=u?u(e):e;if(d<t){if(l==="identity")return d;l==="clamp"&&(d=t)}if(d>s){if(o==="identity")return d;o==="clamp"&&(d=s)}return a===r?a:t===s?e<=t?a:r:(t===-1/0?d=-d:s===1/0?d=d-t:d=(d-t)/(s-t),d=i(d),a===-1/0?d=-d:r===1/0?d=d+a:d=d*(r-a)+a,d)}function zl(e,t){for(var s=1;s<t.length-1&&!(t[s]>=e);++s);return s-1}var $l=(e,t="end")=>s=>{s=t==="end"?Math.min(s,.999):Math.max(s,.001);const a=s*e,r=t==="end"?Math.floor(a):Math.ceil(a);return Pl(0,1,r/e)},xs=1.70158,as=xs*1.525,dn=xs+1,un=2*Math.PI/3,hn=2*Math.PI/4.5,ns=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,Bl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>dn*e*e*e-xs*e*e,easeOutBack:e=>1+dn*Math.pow(e-1,3)+xs*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((as+1)*2*e-as)/2:(Math.pow(2*e-2,2)*((as+1)*(e*2-2)+as)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*un),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*un)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*hn))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*hn)/2+1,easeInBounce:e=>1-ns(1-e),easeOutBounce:ns,easeInOutBounce:e=>e<.5?(1-ns(1-2*e))/2:(1+ns(2*e-1))/2,steps:$l},Vt=Symbol.for("FluidValue.get"),pt=Symbol.for("FluidValue.observers"),ie=e=>!!(e&&e[Vt]),te=e=>e&&e[Vt]?e[Vt]():e,fn=e=>e[pt]||null;function Ql(e,t){e.eventObserved?e.eventObserved(t):e(t)}function qt(e,t){const s=e[pt];s&&s.forEach(a=>{Ql(a,t)})}var Br=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Gl(this,e)}},Gl=(e,t)=>Qr(e,Vt,t);function vt(e,t){if(e[Vt]){let s=e[pt];s||Qr(e,pt,s=new Set),s.has(t)||(s.add(t),e.observerAdded&&e.observerAdded(s.size,t))}return t}function zt(e,t){const s=e[pt];if(s&&s.has(t)){const a=s.size-1;a?s.delete(t):e[pt]=null,e.observerRemoved&&e.observerRemoved(a,t)}}var Qr=(e,t,s)=>Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0}),ls=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Wl=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,mn=new RegExp(`(${ls.source})(%|[a-z]+)`,"i"),Kl=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ps=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Gr=e=>{const[t,s]=Hl(e);if(!t||ka())return e;const a=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(a)return a.trim();if(s&&s.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(s);return r||e}else{if(s&&Ps.test(s))return Gr(s);if(s)return s}return e},Hl=e=>{const t=Ps.exec(e);if(!t)return[,];const[,s,a]=t;return[s,a]},Us,Xl=(e,t,s,a,r)=>`rgba(${Math.round(t)}, ${Math.round(s)}, ${Math.round(a)}, ${r})`,Wr=e=>{Us||(Us=Ue?new RegExp(`(${Object.keys(Ue).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>te(i).replace(Ps,Gr).replace(Wl,cn).replace(Us,cn)),s=t.map(i=>i.match(ls).map(Number)),r=s[0].map((i,l)=>s.map(o=>{if(!(l in o))throw Error('The arity of each "output" value must be equal');return o[l]})).map(i=>Ut({...e,output:i}));return i=>{var u;const l=!mn.test(t[0])&&((u=t.find(d=>mn.test(d)))==null?void 0:u.replace(ls,""));let o=0;return t[0].replace(ls,()=>`${r[o++](i)}${l||""}`).replace(Kl,Xl)}},Na="react-spring: ",Kr=e=>{const t=e;let s=!1;if(typeof t!="function")throw new TypeError(`${Na}once requires a function parameter`);return(...a)=>{s||(t(...a),s=!0)}},Jl=Kr(console.warn);function Yl(){Jl(`${Na}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Zl=Kr(console.warn);function ec(){Zl(`${Na}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Is(e){return k.str(e)&&(e[0]=="#"||/\d/.test(e)||!ka()&&Ps.test(e)||e in(Ue||{}))}var Ta=ka()?c.useEffect:c.useLayoutEffect,tc=()=>{const e=c.useRef(!1);return Ta(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Hr(){const e=c.useState()[1],t=tc();return()=>{t.current&&e(Math.random())}}var Xr=e=>c.useEffect(e,sc),sc=[];function pn(e){const t=c.useRef(void 0);return c.useEffect(()=>{t.current=e}),t.current}var $t=Symbol.for("Animated:node"),ac=e=>!!e&&e[$t]===e,ye=e=>e&&e[$t],Aa=(e,t)=>El(e,$t,t),Rs=e=>e&&e[$t]&&e[$t].getPayload(),Jr=class{constructor(){Aa(this,this)}getPayload(){return this.payload||[]}},Cs=class Yr extends Jr{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,k.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Yr(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,s){return k.num(t)&&(this.lastPosition=t,s&&(t=Math.round(t/s)*s,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,k.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},ys=class Zr extends Cs{constructor(t){super(0),this._string=null,this._toString=Ut({output:[t,t]})}static create(t){return new Zr(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(k.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Ut({output:[this.getValue(),t]})),this._value=0,super.reset()}},vs={dependencies:null},Os=class extends Jr{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return je(this.source,(s,a)=>{ac(s)?t[a]=s.getValue(e):ie(s)?t[a]=te(s):e||(t[a]=s)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&O(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return je(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){vs.dependencies&&ie(e)&&vs.dependencies.add(e);const t=Rs(e);t&&O(t,s=>this.add(s))}},nc=class ei extends Os{constructor(t){super(t)}static create(t){return new ei(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const s=this.getPayload();return t.length==s.length?s.map((a,r)=>a.setValue(t[r])).some(Boolean):(super.setValue(t.map(rc)),!0)}};function rc(e){return(Is(e)?ys:Cs).create(e)}function sa(e){const t=ye(e);return t?t.constructor:k.arr(e)?nc:Is(e)?ys:Cs}var gn=(e,t)=>{const s=!k.fun(e)||e.prototype&&e.prototype.isReactComponent;return c.forwardRef((a,r)=>{const i=c.useRef(null),l=s&&c.useCallback(b=>{i.current=lc(r,b)},[r]),[o,u]=oc(a,t),d=Hr(),f=()=>{const b=i.current;if(s&&!b)return;(b?t.applyAnimatedValues(b,o.getValue(!0)):!1)===!1&&d()},h=new ic(f,u),x=c.useRef(void 0);Ta(()=>(x.current=h,O(u,b=>vt(b,h)),()=>{x.current&&(O(x.current.deps,b=>zt(b,x.current)),R.cancel(x.current.update))})),c.useEffect(f,[]),Xr(()=>()=>{const b=x.current;O(b.deps,m=>zt(m,b))});const w=t.getComponentProps(o.getValue());return c.createElement(e,{...w,ref:l})})},ic=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&R.write(this.update)}};function oc(e,t){const s=new Set;return vs.dependencies=s,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Os(e),vs.dependencies=null,[e,s]}function lc(e,t){return e&&(k.fun(e)?e(t):e.current=t),t}var xn=Symbol.for("AnimatedComponent"),cc=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:s=r=>new Os(r),getComponentProps:a=r=>r}={})=>{const r={applyAnimatedValues:t,createAnimatedStyle:s,getComponentProps:a},i=l=>{const o=yn(l)||"Anonymous";return k.str(l)?l=i[l]||(i[l]=gn(l,r)):l=l[xn]||(l[xn]=gn(l,r)),l.displayName=`Animated(${o})`,l};return je(e,(l,o)=>{k.arr(e)&&(o=yn(l)),i[o]=i(l)}),{animated:i}},yn=e=>k.str(e)?e:e&&k.str(e.displayName)?e.displayName:k.fun(e)&&e.name||null;function Be(e,...t){return k.fun(e)?e(...t):e}var Ot=(e,t)=>e===!0||!!(t&&e&&(k.fun(e)?e(t):ae(e).includes(t))),ti=(e,t)=>k.obj(e)?t&&e[t]:e,si=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,dc=e=>e,Pa=(e,t=dc)=>{let s=uc;e.default&&e.default!==!0&&(e=e.default,s=Object.keys(e));const a={};for(const r of s){const i=t(e[r],r);k.und(i)||(a[r]=i)}return a},uc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],hc={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function fc(e){const t={};let s=0;if(je(e,(a,r)=>{hc[r]||(t[r]=a,s++)}),s)return t}function ai(e){const t=fc(e);if(t){const s={to:t};return je(e,(a,r)=>r in t||(s[r]=a)),s}return{...e}}function Bt(e){return e=te(e),k.arr(e)?e.map(Bt):Is(e)?pe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function mc(e){for(const t in e)return!0;return!1}function aa(e){return k.fun(e)||k.arr(e)&&k.obj(e[0])}function pc(e,t){var s;(s=e.ref)==null||s.delete(e),t==null||t.delete(e)}function gc(e,t){var s;t&&e.ref!==t&&((s=e.ref)==null||s.delete(e),t.add(e),e.ref=t)}var xc={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},na={...xc.default,mass:1,damping:1,easing:Bl.linear,clamp:!1},yc=class{constructor(){this.velocity=0,Object.assign(this,na)}};function vc(e,t,s){s&&(s={...s},vn(s,t),t={...s,...t}),vn(e,t),Object.assign(e,t);for(const l in na)e[l]==null&&(e[l]=na[l]);let{frequency:a,damping:r}=e;const{mass:i}=e;return k.und(a)||(a<.01&&(a=.01),r<0&&(r=0),e.tension=Math.pow(2*Math.PI/a,2)*i,e.friction=4*Math.PI*r*i/a),e}function vn(e,t){if(!k.und(t.decay))e.duration=void 0;else{const s=!k.und(t.tension)||!k.und(t.friction);(s||!k.und(t.frequency)||!k.und(t.damping)||!k.und(t.mass))&&(e.duration=void 0,e.decay=void 0),s&&(e.frequency=void 0)}}var bn=[],bc=class{constructor(){this.changed=!1,this.values=bn,this.toValues=null,this.fromValues=bn,this.config=new yc,this.immediate=!1}};function ni(e,{key:t,props:s,defaultProps:a,state:r,actions:i}){return new Promise((l,o)=>{let u,d,f=Ot(s.cancel??(a==null?void 0:a.cancel),t);if(f)w();else{k.und(s.pause)||(r.paused=Ot(s.pause,t));let b=a==null?void 0:a.pause;b!==!0&&(b=r.paused||Ot(b,t)),u=Be(s.delay||0,t),b?(r.resumeQueue.add(x),i.pause()):(i.resume(),x())}function h(){r.resumeQueue.add(x),r.timeouts.delete(d),d.cancel(),u=d.time-R.now()}function x(){u>0&&!pe.skipAnimation?(r.delayed=!0,d=R.setTimeout(w,u),r.pauseQueue.add(h),r.timeouts.add(d)):w()}function w(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(d),e<=(r.cancelId||0)&&(f=!0);try{i.start({...s,callId:e,cancel:f},l)}catch(b){o(b)}}})}var Ia=(e,t)=>t.length==1?t[0]:t.some(s=>s.cancelled)?nt(e.get()):t.every(s=>s.noop)?ri(e.get()):fe(e.get(),t.every(s=>s.finished)),ri=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),fe=(e,t,s=!1)=>({value:e,finished:t,cancelled:s}),nt=e=>({value:e,cancelled:!0,finished:!1});function ii(e,t,s,a){const{callId:r,parentId:i,onRest:l}=t,{asyncTo:o,promise:u}=s;return!i&&e===o&&!t.reset?u:s.promise=(async()=>{s.asyncId=r,s.asyncTo=e;const d=Pa(t,(y,v)=>v==="onRest"?void 0:y);let f,h;const x=new Promise((y,v)=>(f=y,h=v)),w=y=>{const v=r<=(s.cancelId||0)&&nt(a)||r!==s.asyncId&&fe(a,!1);if(v)throw y.result=v,h(y),y},b=(y,v)=>{const _=new wn,j=new jn;return(async()=>{if(pe.skipAnimation)throw Qt(s),j.result=fe(a,!1),h(j),j;w(_);const g=k.obj(y)?{...y}:{...v,to:y};g.parentId=r,je(d,(M,E)=>{k.und(g[E])&&(g[E]=M)});const T=await a.start(g);return w(_),s.paused&&await new Promise(M=>{s.resumeQueue.add(M)}),T})()};let m;if(pe.skipAnimation)return Qt(s),fe(a,!1);try{let y;k.arr(e)?y=(async v=>{for(const _ of v)await b(_)})(e):y=Promise.resolve(e(b,a.stop.bind(a))),await Promise.all([y.then(f),x]),m=fe(a.get(),!0,!1)}catch(y){if(y instanceof wn)m=y.result;else if(y instanceof jn)m=y.result;else throw y}finally{r==s.asyncId&&(s.asyncId=i,s.asyncTo=i?o:void 0,s.promise=i?u:void 0)}return k.fun(l)&&R.batchedUpdates(()=>{l(m,a,a.item)}),m})()}function Qt(e,t){Rt(e.timeouts,s=>s.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var wn=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},jn=class extends Error{constructor(){super("SkipAnimationSignal")}},ra=e=>e instanceof Ra,wc=1,Ra=class extends Br{constructor(){super(...arguments),this.id=wc++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=ye(this);return e&&e.getValue()}to(...e){return pe.to(this,e)}interpolate(...e){return Yl(),pe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){qt(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Ts.sort(this),qt(this,{type:"priority",parent:this,priority:e})}},Je=Symbol.for("SpringPhase"),oi=1,ia=2,oa=4,Vs=e=>(e[Je]&oi)>0,Ee=e=>(e[Je]&ia)>0,kt=e=>(e[Je]&oa)>0,Sn=(e,t)=>t?e[Je]|=ia|oi:e[Je]&=~ia,kn=(e,t)=>t?e[Je]|=oa:e[Je]&=~oa,jc=class extends Ra{constructor(e,t){if(super(),this.animation=new bc,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!k.und(e)||!k.und(t)){const s=k.obj(e)?{...e}:{...t,from:e};k.und(s.default)&&(s.default=!0),this.start(s)}}get idle(){return!(Ee(this)||this._state.asyncTo)||kt(this)}get goal(){return te(this.animation.to)}get velocity(){const e=ye(this);return e instanceof Cs?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Vs(this)}get isAnimating(){return Ee(this)}get isPaused(){return kt(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,s=!1;const a=this.animation;let{toValues:r}=a;const{config:i}=a,l=Rs(a.to);!l&&ie(a.to)&&(r=ae(te(a.to))),a.values.forEach((d,f)=>{if(d.done)return;const h=d.constructor==ys?1:l?l[f].lastPosition:r[f];let x=a.immediate,w=h;if(!x){if(w=d.lastPosition,i.tension<=0){d.done=!0;return}let b=d.elapsedTime+=e;const m=a.fromValues[f],y=d.v0!=null?d.v0:d.v0=k.arr(i.velocity)?i.velocity[f]:i.velocity;let v;const _=i.precision||(m==h?.005:Math.min(1,Math.abs(h-m)*.001));if(k.und(i.duration))if(i.decay){const j=i.decay===!0?.998:i.decay,g=Math.exp(-(1-j)*b);w=m+y/(1-j)*(1-g),x=Math.abs(d.lastPosition-w)<=_,v=y*g}else{v=d.lastVelocity==null?y:d.lastVelocity;const j=i.restVelocity||_/10,g=i.clamp?0:i.bounce,T=!k.und(g),M=m==h?d.v0>0:m<h;let E,L=!1;const N=1,G=Math.ceil(e/N);for(let B=0;B<G&&(E=Math.abs(v)>j,!(!E&&(x=Math.abs(h-w)<=_,x)));++B){T&&(L=w==h||w>h==M,L&&(v=-v*g,w=h));const ne=-i.tension*1e-6*(w-h),ge=-i.friction*.001*v,Ve=(ne+ge)/i.mass;v=v+Ve*N,w=w+v*N}}else{let j=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,d.durationProgress>0&&(d.elapsedTime=i.duration*d.durationProgress,b=d.elapsedTime+=e)),j=(i.progress||0)+b/this._memoizedDuration,j=j>1?1:j<0?0:j,d.durationProgress=j),w=m+i.easing(j)*(h-m),v=(w-d.lastPosition)/e,x=j==1}d.lastVelocity=v,Number.isNaN(w)&&(console.warn("Got NaN while animating:",this),x=!0)}l&&!l[f].done&&(x=!1),x?d.done=!0:t=!1,d.setValue(w,i.round)&&(s=!0)});const o=ye(this),u=o.getValue();if(t){const d=te(a.to);(u!==d||s)&&!i.decay?(o.setValue(d),this._onChange(d)):s&&i.decay&&this._onChange(u),this._stop()}else s&&this._onChange(u)}set(e){return R.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ee(this)){const{to:e,config:t}=this.animation;R.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let s;return k.und(e)?(s=this.queue||[],this.queue=[]):s=[k.obj(e)?e:{...t,to:e}],Promise.all(s.map(a=>this._update(a))).then(a=>Ia(this,a))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Qt(this._state,e&&this._lastCallId),R.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:s,from:a}=e;s=k.obj(s)?s[t]:s,(s==null||aa(s))&&(s=void 0),a=k.obj(a)?a[t]:a,a==null&&(a=void 0);const r={to:s,from:a};return Vs(this)||(e.reverse&&([s,a]=[a,s]),a=te(a),k.und(a)?ye(this)||this._set(s):this._set(a)),r}_update({...e},t){const{key:s,defaultProps:a}=this;e.default&&Object.assign(a,Pa(e,(l,o)=>/^on/.test(o)?ti(l,s):l)),En(this,e,"onProps"),Et(this,"onProps",e,this);const r=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return ni(++this._lastCallId,{key:s,props:e,defaultProps:a,state:i,actions:{pause:()=>{kt(this)||(kn(this,!0),Tt(i.pauseQueue),Et(this,"onPause",fe(this,_t(this,this.animation.to)),this))},resume:()=>{kt(this)&&(kn(this,!1),Ee(this)&&this._resume(),Tt(i.resumeQueue),Et(this,"onResume",fe(this,_t(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(l=>{if(e.loop&&l.finished&&!(t&&l.noop)){const o=li(e);if(o)return this._update(o,!0)}return l})}_merge(e,t,s){if(t.cancel)return this.stop(!0),s(nt(this));const a=!k.und(e.to),r=!k.und(e.from);if(a||r)if(t.callId>this._lastToId)this._lastToId=t.callId;else return s(nt(this));const{key:i,defaultProps:l,animation:o}=this,{to:u,from:d}=o;let{to:f=u,from:h=d}=e;r&&!a&&(!t.default||k.und(f))&&(f=h),t.reverse&&([f,h]=[h,f]);const x=!ke(h,d);x&&(o.from=h),h=te(h);const w=!ke(f,u);w&&this._focus(f);const b=aa(t.to),{config:m}=o,{decay:y,velocity:v}=m;(a||r)&&(m.velocity=0),t.config&&!b&&vc(m,Be(t.config,i),t.config!==l.config?Be(l.config,i):void 0);let _=ye(this);if(!_||k.und(f))return s(fe(this,!0));const j=k.und(t.reset)?r&&!t.default:!k.und(h)&&Ot(t.reset,i),g=j?h:this.get(),T=Bt(f),M=k.num(T)||k.arr(T)||Is(T),E=!b&&(!M||Ot(l.immediate||t.immediate,i));if(w){const B=sa(f);if(B!==_.constructor)if(E)_=this._set(T);else throw Error(`Cannot animate between ${_.constructor.name} and ${B.name}, as the "to" prop suggests`)}const L=_.constructor;let N=ie(f),G=!1;if(!N){const B=j||!Vs(this)&&x;(w||B)&&(G=ke(Bt(g),T),N=!G),(!ke(o.immediate,E)&&!E||!ke(m.decay,y)||!ke(m.velocity,v))&&(N=!0)}if(G&&Ee(this)&&(o.changed&&!j?N=!0:N||this._stop(u)),!b&&((N||ie(u))&&(o.values=_.getPayload(),o.toValues=ie(f)?null:L==ys?[1]:ae(T)),o.immediate!=E&&(o.immediate=E,!E&&!j&&this._set(u)),N)){const{onRest:B}=o;O(kc,ge=>En(this,t,ge));const ne=fe(this,_t(this,u));Tt(this._pendingCalls,ne),this._pendingCalls.add(s),o.changed&&R.batchedUpdates(()=>{var ge;o.changed=!j,B==null||B(ne,this),j?Be(l.onRest,ne):(ge=o.onStart)==null||ge.call(o,ne,this)})}j&&this._set(g),b?s(ii(t.to,t,this._state,this)):N?this._start():Ee(this)&&!w?this._pendingCalls.add(s):s(ri(g))}_focus(e){const t=this.animation;e!==t.to&&(fn(this)&&this._detach(),t.to=e,fn(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ie(t)&&(vt(t,this),ra(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ie(e)&&zt(e,this)}_set(e,t=!0){const s=te(e);if(!k.und(s)){const a=ye(this);if(!a||!ke(s,a.getValue())){const r=sa(s);!a||a.constructor!=r?Aa(this,r.create(s)):a.setValue(s),a&&R.batchedUpdates(()=>{this._onChange(s,t)})}}return ye(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Et(this,"onStart",fe(this,_t(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Be(this.animation.onChange,e,this)),Be(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;ye(this).reset(te(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ee(this)||(Sn(this,!0),kt(this)||this._resume())}_resume(){pe.skipAnimation?this.finish():Ts.start(this)}_stop(e,t){if(Ee(this)){Sn(this,!1);const s=this.animation;O(s.values,r=>{r.done=!0}),s.toValues&&(s.onChange=s.onPause=s.onResume=void 0),qt(this,{type:"idle",parent:this});const a=t?nt(this.get()):fe(this.get(),_t(this,e??s.to));Tt(this._pendingCalls,a),s.changed&&(s.changed=!1,Et(this,"onRest",a,this))}}};function _t(e,t){const s=Bt(t),a=Bt(e.get());return ke(a,s)}function li(e,t=e.loop,s=e.to){const a=Be(t);if(a){const r=a!==!0&&ai(a),i=(r||e).reverse,l=!r||r.reset;return Gt({...e,loop:t,default:!1,pause:void 0,to:!i||aa(s)?s:void 0,from:l?e.from:void 0,reset:l,...r})}}function Gt(e){const{to:t,from:s}=e=ai(e),a=new Set;return k.obj(t)&&_n(t,a),k.obj(s)&&_n(s,a),e.keys=a.size?Array.from(a):null,e}function Sc(e){const t=Gt(e);return k.und(t.default)&&(t.default=Pa(t)),t}function _n(e,t){je(e,(s,a)=>s!=null&&t.add(a))}var kc=["onStart","onRest","onChange","onPause","onResume"];function En(e,t,s){e.animation[s]=t[s]!==si(t,s)?ti(t[s],e.key):void 0}function Et(e,t,...s){var a,r,i,l;(r=(a=e.animation)[t])==null||r.call(a,...s),(l=(i=e.defaultProps)[t])==null||l.call(i,...s)}var _c=["onStart","onChange","onRest"],Ec=1,Nc=class{constructor(e,t){this.id=Ec++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,s)=>e[s]=t.get()),e}set(e){for(const t in e){const s=e[t];k.und(s)||this.springs[t].set(s)}}update(e){return e&&this.queue.push(Gt(e)),this}start(e){let{queue:t}=this;return e?t=ae(e).map(Gt):this.queue=[],this._flush?this._flush(this,t):(fi(this,t),la(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const s=this.springs;O(ae(t),a=>s[a].stop(!!e))}else Qt(this._state,this._lastAsyncId),this.each(s=>s.stop(!!e));return this}pause(e){if(k.und(e))this.start({pause:!0});else{const t=this.springs;O(ae(e),s=>t[s].pause())}return this}resume(e){if(k.und(e))this.start({pause:!1});else{const t=this.springs;O(ae(e),s=>t[s].resume())}return this}each(e){je(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:s}=this._events,a=this._active.size>0,r=this._changed.size>0;(a&&!this._started||r&&!this._started)&&(this._started=!0,Rt(e,([o,u])=>{u.value=this.get(),o(u,this,this._item)}));const i=!a&&this._started,l=r||i&&s.size?this.get():null;r&&t.size&&Rt(t,([o,u])=>{u.value=l,o(u,this,this._item)}),i&&(this._started=!1,Rt(s,([o,u])=>{u.value=l,o(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;R.onFrame(this._onFrame)}};function la(e,t){return Promise.all(t.map(s=>ci(e,s))).then(s=>Ia(e,s))}async function ci(e,t,s){const{keys:a,to:r,from:i,loop:l,onRest:o,onResolve:u}=t,d=k.obj(t.default)&&t.default;l&&(t.loop=!1),r===!1&&(t.to=null),i===!1&&(t.from=null);const f=k.arr(r)||k.fun(r)?r:void 0;f?(t.to=void 0,t.onRest=void 0,d&&(d.onRest=void 0)):O(_c,m=>{const y=t[m];if(k.fun(y)){const v=e._events[m];t[m]=({finished:_,cancelled:j})=>{const g=v.get(y);g?(_||(g.finished=!1),j&&(g.cancelled=!0)):v.set(y,{value:null,finished:_||!1,cancelled:j||!1})},d&&(d[m]=t[m])}});const h=e._state;t.pause===!h.paused?(h.paused=t.pause,Tt(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const x=(a||Object.keys(e.springs)).map(m=>e.springs[m].start(t)),w=t.cancel===!0||si(t,"cancel")===!0;(f||w&&h.asyncId)&&x.push(ni(++e._lastAsyncId,{props:t,state:h,actions:{pause:ea,resume:ea,start(m,y){w?(Qt(h,e._lastAsyncId),y(nt(e))):(m.onRest=o,y(ii(f,m,h,e)))}}})),h.paused&&await new Promise(m=>{h.resumeQueue.add(m)});const b=Ia(e,await Promise.all(x));if(l&&b.finished&&!(s&&b.noop)){const m=li(t,l,r);if(m)return fi(e,[m]),ci(e,m,!0)}return u&&R.batchedUpdates(()=>u(b,e,e.item)),b}function Nn(e,t){const s={...e.springs};return t&&O(ae(t),a=>{k.und(a.keys)&&(a=Gt(a)),k.obj(a.to)||(a={...a,to:void 0}),hi(s,a,r=>ui(r))}),di(e,s),s}function di(e,t){je(t,(s,a)=>{e.springs[a]||(e.springs[a]=s,vt(s,e))})}function ui(e,t){const s=new jc;return s.key=e,t&&vt(s,t),s}function hi(e,t,s){t.keys&&O(t.keys,a=>{(e[a]||(e[a]=s(a)))._prepareNode(t)})}function fi(e,t){O(t,s=>{hi(e.springs,s,a=>ui(a,e))})}var Tc=c.createContext({pause:!1,immediate:!1}),Ac=()=>{const e=[],t=function(a){ec();const r=[];return O(e,(i,l)=>{if(k.und(a))r.push(i.start());else{const o=s(a,i,l);o&&r.push(i.start(o))}}),r};t.current=e,t.add=function(a){e.includes(a)||e.push(a)},t.delete=function(a){const r=e.indexOf(a);~r&&e.splice(r,1)},t.pause=function(){return O(e,a=>a.pause(...arguments)),this},t.resume=function(){return O(e,a=>a.resume(...arguments)),this},t.set=function(a){O(e,(r,i)=>{const l=k.fun(a)?a(i,r):a;l&&r.set(l)})},t.start=function(a){const r=[];return O(e,(i,l)=>{if(k.und(a))r.push(i.start());else{const o=this._getProps(a,i,l);o&&r.push(i.start(o))}}),r},t.stop=function(){return O(e,a=>a.stop(...arguments)),this},t.update=function(a){return O(e,(r,i)=>r.update(this._getProps(a,r,i))),this};const s=function(a,r,i){return k.fun(a)?a(i,r):a};return t._getProps=s,t};function Pc(e,t,s){const a=k.fun(t)&&t;a&&!s&&(s=[]);const r=c.useMemo(()=>a||arguments.length==3?Ac():void 0,[]),i=c.useRef(0),l=Hr(),o=c.useMemo(()=>({ctrls:[],queue:[],flush(v,_){const j=Nn(v,_);return i.current>0&&!o.queue.length&&!Object.keys(j).some(T=>!v.springs[T])?la(v,_):new Promise(T=>{di(v,j),o.queue.push(()=>{T(la(v,_))}),l()})}}),[]),u=c.useRef([...o.ctrls]),d=c.useRef([]),f=pn(e)||0;c.useMemo(()=>{O(u.current.slice(e,f),v=>{pc(v,r),v.stop(!0)}),u.current.length=e,h(f,e)},[e]),c.useMemo(()=>{h(0,Math.min(f,e))},s);function h(v,_){for(let j=v;j<_;j++){const g=u.current[j]||(u.current[j]=new Nc(null,o.flush)),T=a?a(j,g):t[j];T&&(d.current[j]=Sc(T))}}const x=u.current.map((v,_)=>Nn(v,d.current[_])),w=c.useContext(Tc),b=pn(w),m=w!==b&&mc(w);Ta(()=>{i.current++,o.ctrls=u.current;const{queue:v}=o;v.length&&(o.queue=[],O(v,_=>_())),O(u.current,(_,j)=>{r==null||r.add(_),m&&_.start({default:w});const g=d.current[j];g&&(gc(_,g.ref),_.ref?_.queue.push(g):_.start(g))})}),Xr(()=>()=>{O(o.ctrls,v=>v.stop(!0))});const y=x.map(v=>({...v}));return r?[y,r]:y}function qe(e,t){const s=k.fun(e),[[a],r]=Pc(1,s?e:[e],s?[]:t);return s||arguments.length==2?[a,r]:a}var Ic=class extends Ra{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Ut(...t);const s=this._get(),a=sa(s);Aa(this,a.create(s))}advance(e){const t=this._get(),s=this.get();ke(t,s)||(ye(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Tn(this._active)&&qs(this)}_get(){const e=k.arr(this.source)?this.source.map(te):ae(te(this.source));return this.calc(...e)}_start(){this.idle&&!Tn(this._active)&&(this.idle=!1,O(Rs(this),e=>{e.done=!1}),pe.skipAnimation?(R.batchedUpdates(()=>this.advance()),qs(this)):Ts.start(this))}_attach(){let e=1;O(ae(this.source),t=>{ie(t)&&vt(t,this),ra(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){O(ae(this.source),e=>{ie(e)&&zt(e,this)}),this._active.clear(),qs(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ae(this.source).reduce((t,s)=>Math.max(t,(ra(s)?s.priority:0)+1),0))}};function Rc(e){return e.idle!==!1}function Tn(e){return!e.size||Array.from(e).every(Rc)}function qs(e){e.idle||(e.idle=!0,O(Rs(e),t=>{t.done=!0}),qt(e,{type:"idle",parent:e}))}pe.assign({createStringInterpolator:Wr,to:(e,t)=>new Ic(e,t)});var mi=/^--/;function Cc(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!mi.test(e)&&!(Dt.hasOwnProperty(e)&&Dt[e])?t+"px":(""+t).trim()}var An={};function Oc(e,t){if(!e.nodeType||!e.setAttribute)return!1;const s=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:a,style:r,children:i,scrollTop:l,scrollLeft:o,viewBox:u,...d}=t,f=Object.values(d),h=Object.keys(d).map(x=>s||e.hasAttribute(x)?x:An[x]||(An[x]=x.replace(/([A-Z])/g,w=>"-"+w.toLowerCase())));i!==void 0&&(e.textContent=i);for(const x in r)if(r.hasOwnProperty(x)){const w=Cc(x,r[x]);mi.test(x)?e.style.setProperty(x,w):e.style[x]=w}h.forEach((x,w)=>{e.setAttribute(x,f[w])}),a!==void 0&&(e.className=a),l!==void 0&&(e.scrollTop=l),o!==void 0&&(e.scrollLeft=o),u!==void 0&&e.setAttribute("viewBox",u)}var Dt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dc=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Mc=["Webkit","Ms","Moz","O"];Dt=Object.keys(Dt).reduce((e,t)=>(Mc.forEach(s=>e[Dc(s,t)]=e[t]),e),Dt);var Lc=/^(matrix|translate|scale|rotate|skew)/,Fc=/^(translate)/,Uc=/^(rotate|skew)/,zs=(e,t)=>k.num(e)&&e!==0?e+t:e,cs=(e,t)=>k.arr(e)?e.every(s=>cs(s,t)):k.num(e)?e===t:parseFloat(e)===t,Vc=class extends Os{constructor({x:e,y:t,z:s,...a}){const r=[],i=[];(e||t||s)&&(r.push([e||0,t||0,s||0]),i.push(l=>[`translate3d(${l.map(o=>zs(o,"px")).join(",")})`,cs(l,0)])),je(a,(l,o)=>{if(o==="transform")r.push([l||""]),i.push(u=>[u,u===""]);else if(Lc.test(o)){if(delete a[o],k.und(l))return;const u=Fc.test(o)?"px":Uc.test(o)?"deg":"";r.push(ae(l)),i.push(o==="rotate3d"?([d,f,h,x])=>[`rotate3d(${d},${f},${h},${zs(x,u)})`,cs(x,0)]:d=>[`${o}(${d.map(f=>zs(f,u)).join(",")})`,cs(d,o.startsWith("scale")?1:0)])}}),r.length&&(a.transform=new qc(r,i)),super(a)}},qc=class extends Br{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return O(this.inputs,(s,a)=>{const r=te(s[0]),[i,l]=this.transforms[a](k.arr(r)?r:s.map(te));e+=" "+i,t=t&&l}),t?"none":e}observerAdded(e){e==1&&O(this.inputs,t=>O(t,s=>ie(s)&&vt(s,this)))}observerRemoved(e){e==0&&O(this.inputs,t=>O(t,s=>ie(s)&&zt(s,this)))}eventObserved(e){e.type=="change"&&(this._value=null),qt(this,e)}},zc=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];pe.assign({batchedUpdates:yr.unstable_batchedUpdates,createStringInterpolator:Wr,colors:Il});var $c=cc(zc,{applyAnimatedValues:Oc,createAnimatedStyle:e=>new Vc(e),getComponentProps:({scrollTop:e,scrollLeft:t,...s})=>s}),ce=$c.animated,pi=(e=>(e.DEFAULT="Default",e.STRETCHED="Stretched",e.SPLIT="Split",e.LARGE="Large",e.SQUARE="Square",e))(pi||{});const Bc=(e,t)=>({name:e,...t}),Qc=ce("feGaussianBlur"),Gc=ce("feColorMatrix"),rs={tension:300,mass:.1},Wc=({scenes:e,currentSceneName:t,isHiding:s=!1})=>{const a=c.useRef(null),r=c.useRef(null),i=c.useRef(null),l=e.find(({name:_})=>_===t),[o,u]=c.useState((l==null?void 0:l.mode)??"Default"),[d,f]=c.useState(352);c.useEffect(()=>{if(o==="Large"&&i.current){const _=()=>{var j,g;if(i.current){const T=i.current.querySelector(".expanded-mode-left-item-wrapper"),M=i.current.querySelector(".expanded-mode-right-item-wrapper");let E=0;if(T){const N=T.querySelector(".left");N&&(N.style.width="auto",N.style.minWidth="fit-content",E+=N.scrollWidth||N.offsetWidth)}if(M){const N=M.querySelector(".right");N&&(N.style.width="auto",N.style.minWidth="fit-content",E+=N.scrollWidth||N.offsetWidth)}const L=Math.max(320,Math.min(700,E+120));console.log("üìè Dynamic Island measurement:",{totalContentWidth:E,calculatedWidth:L,leftWidth:(j=T==null?void 0:T.querySelector(".left"))==null?void 0:j.scrollWidth,rightWidth:(g=M==null?void 0:M.querySelector(".right"))==null?void 0:g.scrollWidth}),f(L)}};requestAnimationFrame(_),setTimeout(_,100),setTimeout(_,300)}else f(352)},[o,l]),c.useEffect(()=>{const _=r.current;if(r.current=l??null,a.current=`from${(_==null?void 0:_.mode)??"Default"}To${(l==null?void 0:l.mode)??"Default"}`,t===null){u("Default");return}u((l==null?void 0:l.mode)??"Default")},[t]);const h=qe(s?{config:{tension:300,mass:.8},width:112,height:32,opacity:0,scale:.8}:o==="Large"?{config:{tension:250,mass:1.5},from:{opacity:0,scale:.8,width:112,height:32},width:d,height:72,opacity:1,scale:1,delay:a.current==="fromSplitToLarge"?50:0}:{config:{...rs},from:{opacity:0,scale:.8},width:112,height:32,opacity:1,scale:1,delay:a.current==="fromSplitToDefault"?0:100}),x=qe(o==="Split"?{config:a.current==="fromLargeToSplit"?{...rs}:{tension:250,mass:2},transform:"translateX(-42px)",width:154,height:32,delay:a.current==="fromLargeToSplit"?100:0}:o==="Large"?{config:{tension:250,mass:1.5},transform:"translateX(0px)",width:d,height:72,delay:a.current==="fromSplitToLarge"?50:0}:{config:{...rs},transform:"translateX(0px)",width:112,height:32,delay:a.current==="fromSplitToDefault"?0:100}),w=qe(o==="Large"?{config:{duration:200},width:d-81,height:55,filter:"blur(0px)",opacity:1,delay:100+(a.current==="fromSplitToLarge"?50:0),transform:"scale(1)"}:{config:{duration:150},width:86,height:25,filter:"blur(5px)",opacity:0,transform:"scale(0.9)"}),b=qe(o==="Split"?{config:{tension:250,mass:2},transform:"translateX(42px)",delay:a.current==="fromLargeToSplit"?200:0}:{config:{...rs},transform:"translateX(0px)"}),m=qe(o==="Split"?{config:{duration:400},stdDeviation:0,delay:250}:{config:{duration:100},stdDeviation:10}),y=qe(o==="Split"?{config:{duration:200},transform:"scaleX(1)",filter:"blur(0px)",opacity:1,delay:100}:{config:{duration:150},transform:"scaleX(0.5)",filter:"blur(4px)",opacity:0}),v=qe(o==="Split"?{config:{duration:200},transform:"translateX(0px) scaleX(1)",filter:"blur(0px)",opacity:1,delay:100}:{config:{duration:150},transform:"translateX(-100px) scaleX(0.5)",filter:"blur(4px)",opacity:0});return!t||!l?null:n.jsxs(ce.div,{className:"dynamic-island",style:h,ref:i,children:[n.jsxs(ce.div,{className:"darkroom",style:x,children:[n.jsx("div",{className:"expanded-mode-item-wrapper expanded-mode-left-item-wrapper",children:n.jsx(ce.div,{className:"left",style:w,children:l&&"left"in l?l.left:n.jsxs("div",{className:"caller",children:[n.jsx("img",{src:"/profile.png",className:"photo"}),n.jsxs("div",{className:"caller-info",children:[n.jsx("span",{className:"device",children:"iPhone"}),n.jsx("span",{className:"name",children:"Jang Haemin"})]})]})})}),n.jsx("div",{className:"expanded-mode-item-wrapper expanded-mode-right-item-wrapper",children:n.jsx(ce.div,{className:"right",style:w,children:l&&"right"in l?l.right:n.jsxs("div",{className:"phone-booth",children:[n.jsx("div",{className:"phone refuse",children:n.jsx("div",{className:"icon",children:"‚ùå"})}),n.jsx("div",{className:"phone receive",children:n.jsx("div",{className:"icon",children:"‚úÖ"})})]})})}),n.jsx("div",{className:"minimized-mode-item-wrapper minimized-mode-left-item-wrapper",children:n.jsx(ce.div,{style:y,className:"minimized-mode-left-item",children:n.jsx("img",{className:"photo",src:"/lyft.png"})})}),n.jsx("div",{className:"minimized-mode-item-wrapper minimized-mode-right-item-wrapper",children:n.jsx(ce.div,{})})]}),n.jsxs("svg",{width:"90",height:"52",className:"meta-animation-parts",children:[n.jsx("defs",{children:n.jsxs("filter",{id:"split-effect",width:"400%",x:"-150%",height:"400%",y:"-150%",children:[n.jsx(Qc,{in:"SourceGraphic",...m,result:"blur"}),n.jsx(Gc,{in:"blur",mode:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 25 -10",result:"matrix"})]})}),n.jsxs("g",{filter:"url(#split-effect)",children:[n.jsx("circle",{cx:"26",cy:"26",r:"15",fill:"black"}),n.jsx(ce.rect,{style:b,x:"6",y:"10",width:"36",height:"32",rx:"16",fill:"black"})]})]}),n.jsx(ce.div,{className:"lonely-island-item-wrapper",children:n.jsx(ce.div,{className:"lonely-island-item",style:v})})]})},Kc=e=>{const[t,s]=c.useState(!1);return c.useEffect(()=>{if(e.currentSceneName!==null)s(!0);else{const a=setTimeout(()=>{s(!1)},650);return()=>clearTimeout(a)}},[e.currentSceneName]),t?n.jsx(Wc,{...e}):null},gi=c.createContext({}),Hc=({children:e})=>{var wt,Yt;const t=pa(),[s,a]=c.useState(null),[r,i]=c.useState(null),[l,o]=c.useState(null),[u,d]=c.useState(null),[f,h]=c.useState(!0),[x,w]=c.useState(!1),[b,m]=c.useState(""),[y,v]=c.useState(!1),[_,j]=c.useState(()=>localStorage.getItem("hasShownWelcome")==="true"),[g,T]=c.useState(!1);c.useEffect(()=>(window.dispatchTokenUpdate=A=>{o(A),localStorage.setItem("token",A)},()=>{delete window.dispatchTokenUpdate}),[]),c.useEffect(()=>{s&&M()},[s]);const M=async()=>{try{const A=await It("/api/maintenance/status"),U=s||JSON.parse(localStorage.getItem("user")||"null");U&&U.role==="admin"&&U.office_id===null?(w(!1),m("")):(w(A.isMaintenanceMode||!1),m(A.message||""))}catch{w(!1),m("")}};c.useEffect(()=>{var se;const A=localStorage.getItem("token"),U=localStorage.getItem("originalToken"),C=localStorage.getItem("originalUser");if(M(),A){if(o(A),U&&C)try{d(U),i(JSON.parse(C)),console.log("Restored impersonation state from localStorage:",{hasOriginalToken:!!U,hasOriginalUser:!!C,originalUserRole:(se=JSON.parse(C))==null?void 0:se.role})}catch(P){console.error("Error parsing stored original user:",P),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser")}It("/api/auth/me",A).then(P=>{var H,V,Ye,Fa,Ua,Va,qa,za,$a;a(P.user);const K=U&&C,S=((H=P.user)==null?void 0:H.impersonating)||((V=P.user)==null?void 0:V.original_admin_id);console.log("Auth state restoration:",{hasOriginalData:K,isImpersonationResponse:S,userRole:(Ye=P.user)==null?void 0:Ye.role,userId:(Fa=P.user)==null?void 0:Fa.id,impersonating:(Ua=P.user)==null?void 0:Ua.impersonating,originalAdminId:(Va=P.user)==null?void 0:Va.original_admin_id}),K?console.log("Restoring impersonation state from localStorage"):S||i(P.user),console.log("Final auth state after restoration:",{currentUser:(qa=P.user)==null?void 0:qa.full_name,currentRole:(za=P.user)==null?void 0:za.role,isImpersonating:!!(U||($a=P.user)!=null&&$a.impersonating),hasOriginalToken:!!U,hasOriginalUser:!!C,userObject:P.user})}).catch(P=>{var K,S;console.error("Error fetching user:",P),((K=P.message)!=null&&K.includes("Sesi berakhir")||(S=P.message)!=null&&S.includes("Unauthorized"))&&L()}).finally(()=>h(!1))}else h(!1)},[]),c.useEffect(()=>{console.log("User state changed:",{user:(s==null?void 0:s.full_name)||"undefined",userId:s==null?void 0:s.id,role:s==null?void 0:s.role,isImpersonating:!!(u||s!=null&&s.impersonating),hasOriginalToken:!!u,hasOriginalUser:!!r})},[s,u,r]),c.useEffect(()=>{var C,se;const A=t.pathname==="/"||t.pathname==="/login",U=t.pathname==="/maintenance"||x;if(console.log("üîç useEffect triggered with conditions:",{hasUser:!!s,hasFullName:!!(s!=null&&s.full_name),showWelcomeIsland:y,hasShownWelcome:_,isHiding:g,isLoginPage:A,isMaintenancePage:U,isMaintenanceMode:x,currentPath:t.pathname,shouldShow:s&&!y&&!_&&!g&&!A&&!U}),(A||U)&&y){console.log("üö´ Login page or maintenance mode detected, hiding Dynamic Island"),v(!1),T(!1),j(!1);return}if(s&&!y&&!_&&!g&&!A&&!U){console.log("‚úÖ Conditions met! User data available, showing Dynamic Island:",{full_name:s.full_name,firstLetter:(se=(C=s.full_name)==null?void 0:C.charAt(0))==null?void 0:se.toUpperCase(),hasUserData:!!s}),console.log("üé¨ Starting show animation..."),v(!0),j(!0),localStorage.setItem("hasShownWelcome","true"),console.log("‚è±Ô∏è Setting timer for hide animation in 3 seconds..."),console.log("üéØ Timer created at:",new Date().toLocaleTimeString());const P=setTimeout(()=>{console.log("‚è∞ Timer fired! Starting hide animation..."),T(!0);const K=setTimeout(()=>{console.log("‚úÖ Hide animation complete, removing Dynamic Island"),v(!1),T(!1),console.log("üéâ Dynamic Island fully removed!")},600);return()=>clearTimeout(K)},3e3);return()=>clearTimeout(P)}},[s,_,g,t.pathname,x]),c.useEffect(()=>{if(console.log("üîÑ Dynamic Island state changed:",{showWelcomeIsland:y,isHiding:g,hasShownWelcome:_,userFullName:s==null?void 0:s.full_name}),y&&!g){console.log("üîÑ Dynamic Island showing, will force hide in 2.5 seconds...");const A=setTimeout(()=>{console.log("üîß Force hiding Dynamic Island after 2.5 seconds - starting hide animation"),T(!0);const U=setTimeout(()=>{console.log("üîß Force hide animation complete, removing Dynamic Island"),v(!1),T(!1)},600);return()=>clearTimeout(U)},2500);return()=>clearTimeout(A)}},[y,g,_,s]);const E=async(A,U)=>{h(!0);try{const C=await Ms("/api/auth/login",{email:A,password:U});if(C.success===!1)throw new Error(C.message||"Login gagal");o(C.token),a(C.user),i(C.user),d(null),localStorage.setItem("token",C.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),j(!1),localStorage.removeItem("hasShownWelcome"),console.log("Login successful, user data:",C.user)}catch(C){throw C.message&&C.message.includes("Rate limit")?new Error("Terlalu banyak percobaan login. Coba lagi dalam 30 menit."):C.message&&C.message.includes("Email atau password salah")?new Error("Email atau password salah"):new Error(C.message||"Terjadi kesalahan saat login")}finally{h(!1)}},L=()=>{o(null),a(null),i(null),d(null),v(!1),j(!1),T(!1),localStorage.removeItem("token"),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),localStorage.removeItem("hasShownWelcome")},N=async()=>{if(l){h(!0);try{const A=await It("/api/auth/me",l);a(A.user)}finally{h(!1)}}},G=A=>{o(A),localStorage.setItem("token",A)},B=async A=>{var U;if(!l||!Ve)throw new Error("Only admin kanwil can impersonate");h(!0);try{d(l),i(s),localStorage.setItem("originalToken",l),localStorage.setItem("originalUser",JSON.stringify(s)),console.log("Starting impersonation for user:",A);const C=await Ms("/api/auth/impersonate",{userId:A},l);o(C.token),a(C.user),localStorage.setItem("token",C.token),console.log("Impersonation started successfully:",{impersonatedUser:(U=C.user)==null?void 0:U.full_name,originalAdmin:s==null?void 0:s.full_name})}catch(C){throw console.error("Failed to start impersonation:",C),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),C}finally{h(!1)}},ne=async()=>{var C,se;const A=u&&r,U=(s==null?void 0:s.impersonating)||(s==null?void 0:s.original_admin_id);if(!l||!A&&!U){console.log("No impersonation to stop:",{hasToken:!!l,hasImpersonationData:A,hasBackendImpersonationFlag:U,userImpersonating:s==null?void 0:s.impersonating,originalAdminId:s==null?void 0:s.original_admin_id});return}h(!0);try{if(console.log("Stopping impersonation..."),U)try{const P=await Ms("/api/auth/stop-impersonate",{},l);console.log("Backend stop impersonation successful:",{adminName:(C=P.user)==null?void 0:C.full_name,adminRole:(se=P.user)==null?void 0:se.role,hasToken:!!P.token}),o(P.token),a(P.user),d(null),localStorage.setItem("token",P.token),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),console.log("Impersonation stopped successfully via backend"),setTimeout(()=>{var K,S;console.log("Backend state update completed:",{currentUser:(K=P.user)==null?void 0:K.full_name,currentRole:(S=P.user)==null?void 0:S.role})},100);return}catch(P){console.warn("Backend stop impersonation failed, using fallback:",P)}if(A){console.log("Using fallback restore from localStorage");const P=localStorage.getItem("originalToken"),K=localStorage.getItem("originalUser");if(P&&K)try{const S=JSON.parse(K);console.log("Restoring admin from localStorage:",{adminName:S==null?void 0:S.full_name,adminRole:S==null?void 0:S.role}),o(P),a(S),d(null),localStorage.setItem("token",P),localStorage.removeItem("originalToken"),localStorage.removeItem("originalUser"),console.log("Impersonation stopped successfully via fallback"),setTimeout(()=>{console.log("Fallback state update completed:",{currentUser:S==null?void 0:S.full_name,currentRole:S==null?void 0:S.role})},100)}catch(S){throw console.error("Error parsing original user in fallback:",S),new Error("Failed to parse original user data")}else throw new Error("Original user data not found in localStorage")}else throw new Error("No impersonation data available to restore")}catch(P){throw console.error("Error stopping impersonation:",P),console.log("Last resort: clearing all auth data"),L(),new Error("Failed to stop impersonation. Please login again.")}finally{h(!1)}},ge=!!u||!!(s!=null&&s.impersonating),Ve=(s==null?void 0:s.role)==="admin"&&(s==null?void 0:s.office_id)===null,xe=A=>{var U,C,se,P,K;return Bc("Welcome",{mode:pi.LARGE,left:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",minWidth:"fit-content",width:"auto",maxWidth:"none"},children:[n.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#34c759",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"600"},children:((C=(U=A==null?void 0:A.full_name)==null?void 0:U.charAt(0))==null?void 0:C.toUpperCase())||((P=(se=A==null?void 0:A.email)==null?void 0:se.charAt(0))==null?void 0:P.toUpperCase())||"U"}),n.jsxs("span",{style:{fontSize:"16px",color:"#fff",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,minWidth:"fit-content"},children:["Selamat Datang, ",(A==null?void 0:A.full_name)||((K=A==null?void 0:A.email)==null?void 0:K.split("@")[0])||"User"]})]}),right:null})};console.log("üé≠ Creating WelcomeScene with user:",{userFullName:s==null?void 0:s.full_name,userExists:!!s,firstLetter:(Yt=(wt=s==null?void 0:s.full_name)==null?void 0:wt.charAt(0))==null?void 0:Yt.toUpperCase()});const Jt=s?xe(s):null;return n.jsxs(gi.Provider,{value:{user:s,originalUser:r,token:l,loading:f,login:E,logout:L,refreshUser:N,isAuthenticated:!!s&&!!l,isImpersonating:ge,isAdminKanwil:Ve,impersonateUser:B,stopImpersonating:ne,updateToken:G,isMaintenanceMode:x,maintenanceMessage:b},children:[e,Jt&&n.jsx(Kc,{scenes:[Jt],currentSceneName:y?"Welcome":null,isHiding:g})]})},le=()=>c.useContext(gi),Xc=[{name:"Dashboard",href:"/dashboard",icon:so,description:"Overview dan statistik sistem",roles:["admin","admin_wilayah","operator","user","bimas","kanwil"]},{name:"Admin Wilayah Dashboard",href:"/admin-wilayah/dashboard",icon:ao,description:"Dashboard khusus Admin Wilayah",roles:["admin_wilayah"]},{name:"Template Generator",href:"/generator",icon:no,description:"Generate surat berdasarkan template",roles:["admin","operator","kanwil"]},{name:"SK Generator",href:"/generator/sk",icon:ro,description:"Generate Surat Keputusan Mutasi",roles:["admin","user"]},{name:"Riwayat Surat",href:"/letters",icon:io,description:"Daftar surat yang telah dibuat",roles:["admin","admin_wilayah","operator","user","kanwil"]},{name:"Data Pengajuan",href:"/pengajuan",icon:oo,description:"Kelola data pengajuan pegawai",roles:["admin","admin_wilayah","operator","user","bimas","kanwil"]},{name:"Tracking",href:"/tracking",icon:Ga,description:"Kelola tracking dokumen dan konfigurasi",roles:["user","admin"],children:[{name:"Setting Status Tracking",href:"/tracking-status-settings",icon:Wa,description:"Kelola status tracking untuk admin pusat",roles:["user"]},{name:"Tracking Dokumen",href:"/tracking",icon:Ga,description:"Input status tracking berkas di pusat",roles:["user"]},{name:"Monitor Tracking",href:"/tracking-monitor",icon:lo,description:"Monitor progress tracking berkas",roles:["admin"]}]},{name:"Management User",href:"/users",icon:co,description:"Kelola pengguna sistem",roles:["admin"]},{name:"Settings",href:"/settings",icon:Wa,description:"Pengaturan sistem dan profil",roles:["admin","admin_wilayah","operator","kanwil"]}],bs={"/":{title:"Beranda",breadcrumbs:[{name:"Beranda",current:!0}],roles:[]},"/dashboard":{title:"Dashboard",breadcrumbs:[{name:"Dashboard",current:!0}],roles:["admin","admin_wilayah","operator","user","kanwil"]},"/admin-wilayah/dashboard":{title:"Dashboard Admin Wilayah",breadcrumbs:[{name:"Dashboard Admin Wilayah",current:!0}],roles:["admin_wilayah"]},"/generator":{title:"Template Generator",breadcrumbs:[{name:"Generator",href:"/generator"},{name:"Pilih Template",current:!0}],roles:["admin","operator"]},"/generator/create/:templateId":{title:"Buat Surat",breadcrumbs:[{name:"Generator",href:"/generator"},{name:"Buat Surat",current:!0}],roles:["admin","operator","kanwil"],parent:"/generator"},"/generator/sk":{title:"SK Generator",breadcrumbs:[{name:"SK Generator",current:!0}],roles:["admin","user"]},"/letters":{title:"Riwayat Surat",breadcrumbs:[{name:"Riwayat Surat",current:!0}],roles:["admin","admin_wilayah","operator","user","kanwil"]},"/letters/:id":{title:"Detail Surat",breadcrumbs:[{name:"Riwayat Surat",href:"/letters"},{name:"Detail Surat",current:!0}],roles:["admin","admin_wilayah","operator","user","kanwil"],parent:"/letters"},"/letters/:id/preview":{title:"Preview Surat",breadcrumbs:[{name:"Riwayat Surat",href:"/letters"},{name:"Detail Surat",href:"/letters/:id"},{name:"Preview",current:!0}],roles:["admin","admin_wilayah","operator","user","kanwil"],parent:"/letters"},"/pengajuan":{title:"Data Pengajuan",breadcrumbs:[{name:"Data Pengajuan",current:!0}],roles:["admin","admin_wilayah","operator","user","bimas","kanwil"]},"/pengajuan/select":{title:"Pilih Pegawai",breadcrumbs:[{name:"Data Pengajuan",href:"/pengajuan"},{name:"Pilih Pegawai",current:!0}],roles:["admin","operator","kanwil"],parent:"/pengajuan"},"/pengajuan/:pengajuanId":{title:"Detail Pengajuan",breadcrumbs:[{name:"Data Pengajuan",href:"/pengajuan"},{name:"Detail Pengajuan",current:!0}],roles:["admin","admin_wilayah","operator","user","bimas","kanwil"],parent:"/pengajuan"},"/pengajuan/:pengajuanId/upload":{title:"Upload File",breadcrumbs:[{name:"Data Pengajuan",href:"/pengajuan"},{name:"Detail Pengajuan",href:"/pengajuan/:pengajuanId"},{name:"Upload File",current:!0}],roles:["admin","operator","kanwil"],parent:"/pengajuan"},"/pengajuan/:pengajuanId/edit":{title:"Edit Pengajuan",breadcrumbs:[{name:"Data Pengajuan",href:"/pengajuan"},{name:"Detail Pengajuan",href:"/pengajuan/:pengajuanId"},{name:"Edit",current:!0}],roles:["admin","operator","kanwil"],parent:"/pengajuan"},"/admin-wilayah/upload/:pengajuanId":{title:"Upload File Admin Wilayah",breadcrumbs:[{name:"Dashboard Admin Wilayah",href:"/admin-wilayah/dashboard"},{name:"Upload File",current:!0}],roles:["admin_wilayah"],parent:"/admin-wilayah/dashboard"},"/tracking":{title:"Tracking Dokumen",breadcrumbs:[{name:"Tracking",href:"/tracking"},{name:"Tracking Dokumen",current:!0}],roles:["user"],parent:"/tracking"},"/tracking-monitor":{title:"Monitor Tracking",breadcrumbs:[{name:"Tracking",href:"/tracking"},{name:"Monitor Tracking",current:!0}],roles:["admin"],parent:"/tracking"},"/users":{title:"Management User",breadcrumbs:[{name:"Management User",current:!0}],roles:["admin"]},"/settings":{title:"Settings",breadcrumbs:[{name:"Settings",current:!0}],roles:["admin","admin_wilayah","operator","kanwil"]},"/tracking-status-settings":{title:"Konfigurasi Status Tracking",breadcrumbs:[{name:"Tracking",href:"/tracking"},{name:"Konfigurasi Status Tracking",current:!0}],roles:["user"],parent:"/tracking"}},Jc=(e,t)=>Xc.filter(s=>s.roles&&!s.roles.includes(e)||s.excludeRoles&&s.excludeRoles.includes(e)||s.requiresSuperadmin&&!(e==="admin"&&t===null)?!1:(s.children&&(s.children.length,s.children=s.children.filter(a=>!(a.roles&&!a.roles.includes(e)||a.excludeRoles&&a.excludeRoles.includes(e)||a.requiresSuperadmin&&!(e==="admin"&&t===null)))),!0)),Yc=(e,t)=>{let s=bs[e];if(!s){for(const[a,r]of Object.entries(bs))if(a.includes(":")&&new RegExp(a.replace(/:\w+/g,"[^/]+")).test(e)){s=r;break}}return s?s.breadcrumbs.map(a=>({...a,href:a.href?a.href.replace(/:(\w+)/g,(r,i)=>(t==null?void 0:t[i])||r):void 0})):[{name:"Halaman",current:!0}]},Pn=(e,t)=>{const s=bs[e];return s?s.roles.length===0||s.roles.includes(t):!0},Zc=(e,t)=>{const s=bs[e];return s?s.title:"Halaman"},ed=()=>{const e=pa(),t=To(),{user:s,isImpersonating:a,originalUser:r}=le(),i=c.useMemo(()=>a&&s?s.role:s==null?void 0:s.role,[s,a]),l=c.useMemo(()=>Jc(i,s==null?void 0:s.office_id),[i,s==null?void 0:s.office_id]),o=c.useMemo(()=>Yc(e.pathname,t),[e.pathname,t]),u=c.useMemo(()=>Zc(e.pathname),[e.pathname,t]),d=c.useMemo(()=>Pn(e.pathname,i),[e.pathname,i]),f=m=>Pn(m,i),h=m=>l.find(y=>y.href===m),x=m=>{if(m==="/")return e.pathname==="/";if(e.pathname===m)return!0;const y={"/generator":["/generator/sk","/generator/create"],"/pengajuan":["/pengajuan/select","/pengajuan/edit"],"/letters":["/letters/preview"],"/admin-wilayah":["/admin-wilayah/dashboard","/admin-wilayah/upload"],"/tracking":["/tracking-status-settings","/tracking-monitor"]};for(const[v,_]of Object.entries(y))if(m===v&&_.some(g=>e.pathname.startsWith(g)))return!1;return e.pathname.startsWith(m)},w=()=>o.length>1?o[o.length-2]:null,b=()=>o[0]||null;return{currentRole:i,currentPath:e.pathname,navigationItems:l,breadcrumbs:o,pageTitle:u,hasPageAccess:d,checkAccess:f,getNavigationItem:h,isActivePath:x,getParentBreadcrumb:w,getRootBreadcrumb:b,params:t,location:e}},td=fa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=c.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...r},i)=>{const l=a?uo:"button";return n.jsx(l,{className:D(td({variant:t,size:s,className:e})),ref:i,...r})});J.displayName="Button";const In=go,Rn=xo,sd=c.forwardRef(({className:e,inset:t,children:s,...a},r)=>n.jsxs(Xn,{ref:r,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...a,children:[s,n.jsx(ho,{className:"ml-auto h-4 w-4"})]}));sd.displayName=Xn.displayName;const ad=c.forwardRef(({className:e,...t},s)=>n.jsx(Jn,{ref:s,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ad.displayName=Jn.displayName;const ca=c.forwardRef(({className:e,sideOffset:t=4,...s},a)=>n.jsx(fo,{children:n.jsx(Yn,{ref:a,sideOffset:t,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));ca.displayName=Yn.displayName;const st=c.forwardRef(({className:e,inset:t,...s},a)=>n.jsx(Zn,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));st.displayName=Zn.displayName;const nd=c.forwardRef(({className:e,children:t,checked:s,...a},r)=>n.jsxs(er,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(tr,{children:n.jsx(mo,{className:"h-4 w-4"})})}),t]}));nd.displayName=er.displayName;const rd=c.forwardRef(({className:e,children:t,...s},a)=>n.jsxs(sr,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(tr,{children:n.jsx(po,{className:"h-2 w-2 fill-current"})})}),t]}));rd.displayName=sr.displayName;const da=c.forwardRef(({className:e,inset:t,...s},a)=>n.jsx(ar,{ref:a,className:D("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));da.displayName=ar.displayName;const At=c.forwardRef(({className:e,...t},s)=>n.jsx(nr,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...t}));At.displayName=nr.displayName;const Qe=yo,Iu=vo,id=bo,Ru=or,xi=c.forwardRef(({className:e,...t},s)=>n.jsx(rr,{ref:s,className:D("fixed inset-0 z-[9999] bg-black/20 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 duration-200",e),...t}));xi.displayName=rr.displayName;const Te=c.forwardRef(({className:e,children:t,...s},a)=>n.jsxs(id,{children:[n.jsx(xi,{}),n.jsxs(ir,{ref:a,className:D("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,n.jsxs(or,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(ma,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Te.displayName=ir.displayName;const Ae=({className:e,...t})=>n.jsx("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ae.displayName="DialogHeader";const od=({className:e,...t})=>n.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});od.displayName="DialogFooter";const Pe=c.forwardRef(({className:e,...t},s)=>n.jsx(lr,{ref:s,className:D("text-lg font-semibold leading-none tracking-tight",e),...t}));Pe.displayName=lr.displayName;const Ie=c.forwardRef(({className:e,...t},s)=>n.jsx(cr,{ref:s,className:D("text-sm text-muted-foreground",e),...t}));Ie.displayName=cr.displayName;var yi={exports:{}},vi={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=c;function ld(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cd=typeof Object.is=="function"?Object.is:ld,dd=gt.useState,ud=gt.useEffect,hd=gt.useLayoutEffect,fd=gt.useDebugValue;function md(e,t){var s=t(),a=dd({inst:{value:s,getSnapshot:t}}),r=a[0].inst,i=a[1];return hd(function(){r.value=s,r.getSnapshot=t,$s(r)&&i({inst:r})},[e,s,t]),ud(function(){return $s(r)&&i({inst:r}),e(function(){$s(r)&&i({inst:r})})},[e]),fd(s),s}function $s(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!cd(e,s)}catch{return!0}}function pd(e,t){return t()}var gd=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pd:md;vi.useSyncExternalStore=gt.useSyncExternalStore!==void 0?gt.useSyncExternalStore:gd;yi.exports=vi;var xd=yi.exports;function yd(){return xd.useSyncExternalStore(vd,()=>!0,()=>!1)}function vd(){return()=>{}}var Ca="Avatar",[bd,Cu]=ha(Ca),[wd,bi]=bd(Ca),wi=c.forwardRef((e,t)=>{const{__scopeAvatar:s,...a}=e,[r,i]=c.useState("idle");return n.jsx(wd,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:n.jsx(xt.span,{...a,ref:t})})});wi.displayName=Ca;var ji="AvatarImage",Si=c.forwardRef((e,t)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:r=()=>{},...i}=e,l=bi(ji,s),o=jd(a,i),u=wo(d=>{r(d),l.onImageLoadingStatusChange(d)});return Ws(()=>{o!=="idle"&&u(o)},[o,u]),o==="loaded"?n.jsx(xt.img,{...i,ref:t,src:a}):null});Si.displayName=ji;var ki="AvatarFallback",_i=c.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:a,...r}=e,i=bi(ki,s),[l,o]=c.useState(a===void 0);return c.useEffect(()=>{if(a!==void 0){const u=window.setTimeout(()=>o(!0),a);return()=>window.clearTimeout(u)}},[a]),l&&i.imageLoadingStatus!=="loaded"?n.jsx(xt.span,{...r,ref:t}):null});_i.displayName=ki;function Cn(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function jd(e,{referrerPolicy:t,crossOrigin:s}){const a=yd(),r=c.useRef(null),i=a?(r.current||(r.current=new window.Image),r.current):null,[l,o]=c.useState(()=>Cn(i,e));return Ws(()=>{o(Cn(i,e))},[i,e]),Ws(()=>{const u=h=>()=>{o(h)};if(!i)return;const d=u("loaded"),f=u("error");return i.addEventListener("load",d),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",d),i.removeEventListener("error",f)}},[i,s,t]),l}var Ei=wi,Ni=Si,Ti=_i;const Ai=c.forwardRef(({className:e,...t},s)=>n.jsx(Ei,{ref:s,className:D("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ai.displayName=Ei.displayName;const Sd=c.forwardRef(({className:e,...t},s)=>n.jsx(Ni,{ref:s,className:D("aspect-square h-full w-full",e),...t}));Sd.displayName=Ni.displayName;const Pi=c.forwardRef(({className:e,...t},s)=>n.jsx(Ti,{ref:s,className:D("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Pi.displayName=Ti.displayName;const Ii=c.forwardRef(({className:e,type:t,...s},a)=>n.jsx("input",{type:t,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));Ii.displayName="Input";const kd=fa("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ua({className:e,variant:t,...s}){return n.jsx("div",{className:D(kd({variant:t}),e),...s})}const _d=1,Ed=1e6;let Bs=0;function Nd(){return Bs=(Bs+1)%Number.MAX_SAFE_INTEGER,Bs.toString()}const Qs=new Map,On=e=>{if(Qs.has(e))return;const t=setTimeout(()=>{Qs.delete(e),Mt({type:"REMOVE_TOAST",toastId:e})},Ed);Qs.set(e,t)},Td=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_d)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?On(s):e.toasts.forEach(a=>{On(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)}}},ds=[];let us={toasts:[]};function Mt(e){us=Td(us,e),ds.forEach(t=>{t(us)})}function $e({...e}){const t=Nd(),s=r=>Mt({type:"UPDATE_TOAST",toast:{...r,id:t}}),a=()=>Mt({type:"DISMISS_TOAST",toastId:t});return Mt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:r=>{r||a()}}}),{id:t,dismiss:a,update:s}}function Ri(){const[e,t]=c.useState(us);return c.useEffect(()=>(ds.push(t),()=>{const s=ds.indexOf(t);s>-1&&ds.splice(s,1)}),[e]),{...e,toast:$e,dismiss:s=>Mt({type:"DISMISS_TOAST",toastId:s})}}const Ad=()=>{const{user:e,originalUser:t,isImpersonating:s,impersonateUser:a,stopImpersonating:r,logout:i,token:l,loading:o,isAdminKanwil:u}=le(),{toast:d}=Ri();pa();const[f,h]=c.useState(!1),[x,w]=c.useState(!1),[b,m]=c.useState(!1),[y,v]=c.useState(!1),[_,j]=c.useState(!1),[g,T]=c.useState(""),[M,E]=c.useState([]),[L,N]=c.useState(!1),[G,B]=c.useState(!1),[ne,ge]=c.useState(""),{navigationItems:Ve,isActivePath:xe}=ed();c.useEffect(()=>{G&&u&&Jt()},[G,u]);const Jt=async()=>{if(l){N(!0);try{console.log(" Fetching users for impersonation...");const S=await It("/api/users",l);console.log(" Raw users response:",S);const H=S.users.filter(V=>V.id!==(t==null?void 0:t.id)&&V.role!=="admin");console.log("‚úÖ Filtered users:",H),E(H)}catch(S){console.error("‚ùå Failed to fetch users:",S),E([])}finally{N(!1)}}},wt=()=>{w(!0),h(!1)},Yt=()=>{i(),w(!1)},A=()=>{B(!0),h(!1)},U=S=>{T(S),B(!1),m(!0)},C=M.filter(S=>S.full_name.toLowerCase().includes(ne.toLowerCase())||S.email.toLowerCase().includes(ne.toLowerCase())),se=async()=>{if(g)try{await a(g),m(!1),T("")}catch(S){console.error("Failed to impersonate user:",S),d({title:"Error",description:"Gagal impersonate user. Coba lagi.",variant:"destructive",duration:3e3})}},P=()=>{v(!0),h(!1)},K=async()=>{try{await r(),v(!1),j(!0),setTimeout(()=>{j(!1)},3e3)}catch(S){console.error("Failed to stop impersonating:",S),d({title:"Error",description:"Gagal menghentikan impersonate. Coba lagi.",variant:"destructive",duration:3e3})}};return n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs(St,{to:"/dashboard",className:"flex items-center space-x-3",children:[n.jsx("img",{src:"/FE/logo-kemenag.png",alt:"Kementerian Agama",className:"h-8 w-8",onError:S=>{console.error("Logo Kemenag not found"),S.currentTarget.style.display="none"}}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("h1",{className:"text-lg font-semibold text-green-700",children:"Si Imut"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Sistem Informasi Mutasi"})]})]})}),s&&n.jsxs("div",{className:"hidden md:flex items-center bg-blue-50 border border-blue-200 rounded-lg px-3 py-1",children:[n.jsx(jt,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Impersonating: ",e==null?void 0:e.full_name]}),n.jsx(J,{variant:"ghost",size:"sm",onClick:P,className:"ml-2 h-6 px-2 text-blue-600 hover:text-blue-700",children:n.jsx(es,{className:"w-3 h-3"})})]}),n.jsx("div",{className:`hidden md:flex items-center ${(e==null?void 0:e.role)==="bimas"?"space-x-3":"space-x-8"}`,children:Ve.map(S=>{const H=S.icon;return S.children&&S.children.length>0?n.jsxs(In,{children:[n.jsx(Rn,{asChild:!0,children:n.jsxs(J,{variant:"ghost",className:D("flex items-center space-x-2 rounded-md text-sm font-medium transition-colors",(e==null?void 0:e.role)==="bimas"?"px-2 py-1.5":"px-3 py-2",xe(S.href)||S.children.some(V=>xe(V.href))?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),children:[n.jsx(H,{className:(e==null?void 0:e.role)==="bimas"?"h-3.5 w-3.5":"h-4 w-4"}),n.jsx("span",{className:(e==null?void 0:e.role)==="bimas"?"text-xs":"",children:S.name})]})}),n.jsxs(ca,{align:"start",className:"w-56",children:[n.jsx(da,{children:S.name}),n.jsx(At,{}),S.children.map(V=>{const Ye=V.icon;return n.jsx(st,{asChild:!0,children:n.jsxs(St,{to:V.href,className:D("flex items-center space-x-2 w-full",xe(V.href)?"bg-green-100 text-green-700":""),children:[n.jsx(Ye,{className:"h-4 w-4"}),n.jsx("span",{children:V.name})]})},V.name)})]})]},S.name):n.jsxs(St,{to:S.href,className:D("flex items-center space-x-2 rounded-md text-sm font-medium transition-colors",(e==null?void 0:e.role)==="bimas"?"px-2 py-1.5":"px-3 py-2",xe(S.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),children:[n.jsx(H,{className:(e==null?void 0:e.role)==="bimas"?"h-3.5 w-3.5":"h-4 w-4"}),n.jsx("span",{className:(e==null?void 0:e.role)==="bimas"?"text-xs":"",children:S.name})]},S.name)})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(In,{children:[n.jsx(Rn,{asChild:!0,children:n.jsx(J,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:n.jsx(Ai,{className:"h-8 w-8",children:n.jsx(Pi,{className:"bg-green-100 text-green-700",children:o?n.jsx("span",{className:"animate-pulse w-6 h-6 block bg-green-200 rounded-full mx-auto"}):e!=null&&e.full_name?e.full_name.split(" ").map(S=>S[0]).join("").toUpperCase():e!=null&&e.email?e.email.charAt(0).toUpperCase():"U"})})})}),n.jsxs(ca,{className:"w-64",align:"end",children:[n.jsx(da,{className:"font-normal",children:n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold leading-none text-gray-900",children:e==null?void 0:e.full_name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e==null?void 0:e.email})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[u?n.jsx("span",{className:"text-xs font-medium text-blue-600",children:"Administrator Kanwil"}):n.jsx("span",{className:"text-xs text-gray-600",children:(e==null?void 0:e.role)==="admin_wilayah"?"Admin Wilayah":(e==null?void 0:e.role)==="operator"?"Operator":"Pengguna"}),(e==null?void 0:e.wilayah)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jo,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-xs text-gray-600",children:e.wilayah})]}),s&&n.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 p-2 rounded",children:[n.jsx(Pt,{className:"h-4 w-4 text-blue-600"}),n.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:["Sedang bertindak sebagai ",e==null?void 0:e.full_name]})]})]})]})}),n.jsxs(st,{className:"flex items-center justify-between py-3 cursor-default hover:bg-gray-50",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ka,{className:"h-4 w-4 text-green-500"}),n.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Sesi Aktif"})]})}),n.jsxs("button",{className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-3 py-1.5 rounded-md transition-all duration-200 font-medium",onClick:async S=>{S.stopPropagation();try{const H=await fetch("/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(H.ok){const V=await H.json();V.token&&(localStorage.setItem("token",V.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(V.token)),d({title:"Sesi Diperpanjang",description:"Sesi Anda telah berhasil diperpanjang."})}}catch(H){console.error("Refresh failed:",H),d({title:"Gagal Memperpanjang Sesi",description:"Terjadi kesalahan saat memperpanjang sesi.",variant:"destructive"})}},children:[n.jsx(Pt,{className:"h-3 w-3"}),"Perpanjang"]})]}),n.jsx(At,{}),s&&n.jsxs(n.Fragment,{children:[n.jsxs(st,{onClick:P,className:"text-blue-600 hover:bg-blue-50 py-2.5",children:[n.jsx(es,{className:"mr-3 h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Kembali ke Akun Asli"})]}),n.jsx(At,{})]}),u&&!s&&n.jsxs(n.Fragment,{children:[n.jsxs(st,{onClick:A,className:"text-blue-600 hover:bg-blue-50 py-2.5",children:[n.jsx(Ha,{className:"mr-3 h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Masuk sebagai Pengguna Lain"})]}),n.jsx(At,{})]}),n.jsxs(st,{onClick:wt,className:"text-red-600 hover:bg-red-50 py-2.5",children:[n.jsx(hs,{className:"mr-3 h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Keluar"})]})]})]}),n.jsx(J,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>h(!f),children:f?n.jsx(ma,{className:"h-5 w-5"}):n.jsx(So,{className:"h-5 w-5"})})]})]}),f&&n.jsx("div",{className:"md:hidden",children:n.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[Ve.map(S=>{const H=S.icon;return S.children&&S.children.length>0?n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:D("flex items-center space-x-3 rounded-md font-medium",(e==null?void 0:e.role)==="bimas"?"px-2 py-1.5 text-sm":"px-3 py-2 text-base",xe(S.href)||S.children.some(V=>xe(V.href))?"bg-green-100 text-green-700":"text-gray-600"),children:[n.jsx(H,{className:(e==null?void 0:e.role)==="bimas"?"h-4 w-4":"h-5 w-5"}),n.jsx("span",{children:S.name})]}),n.jsx("div",{className:"ml-6 space-y-1",children:S.children.map(V=>{const Ye=V.icon;return n.jsxs(St,{to:V.href,className:D("flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium",xe(V.href)?"bg-green-100 text-green-700":"text-gray-500 hover:text-green-700 hover:bg-green-50"),onClick:()=>h(!1),children:[n.jsx(Ye,{className:"h-4 w-4"}),n.jsx("span",{children:V.name})]},V.name)})})]},S.name):n.jsxs(St,{to:S.href,className:D("flex items-center space-x-3 rounded-md font-medium",(e==null?void 0:e.role)==="bimas"?"px-2 py-1.5 text-sm":"px-3 py-2 text-base",xe(S.href)?"bg-green-100 text-green-700":"text-gray-600 hover:text-green-700 hover:bg-green-50"),onClick:()=>h(!1),children:[n.jsx(H,{className:(e==null?void 0:e.role)==="bimas"?"h-4 w-4":"h-5 w-5"}),n.jsx("span",{children:S.name})]},S.name)}),s&&n.jsxs("button",{onClick:P,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(es,{className:"h-5 w-5"}),n.jsx("span",{children:"Stop Impersonating"})]}),u&&!s&&n.jsxs("button",{onClick:A,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 w-full",children:[n.jsx(Ha,{className:"h-5 w-5"}),n.jsx("span",{children:"Impersonate User"})]}),n.jsxs("button",{onClick:wt,className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:text-red-700 hover:bg-red-50 w-full",children:[n.jsx(hs,{className:"h-5 w-5"}),n.jsx("span",{children:"Logout"})]})]})})]})}),n.jsx(Qe,{open:x,onOpenChange:w,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-orange-500"}),"Konfirmasi Logout"]}),n.jsx(Ie,{children:"Apakah Anda yakin ingin keluar dari sistem? Anda perlu login kembali untuk mengakses aplikasi."})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(J,{onClick:()=>w(!1),variant:"outline",children:"Batal"}),n.jsx(J,{onClick:Yt,className:"bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]})}),n.jsx(Qe,{open:G,onOpenChange:B,children:n.jsxs(Te,{className:"sm:max-w-lg",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(jt,{className:"w-5 h-5 text-blue-500"}),"Pilih User untuk Impersonate"]}),n.jsx(Ie,{children:"Pilih user yang ingin Anda impersonate dari daftar di bawah ini."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx(Ii,{placeholder:"Cari user...",value:ne,onChange:S=>ge(S.target.value),className:"pl-10"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:L?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(Ks,{className:"w-6 h-6 animate-spin mr-2 text-green-600"}),n.jsx("span",{className:"text-sm text-gray-500",children:"Loading users..."})]}):M.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang tersedia untuk impersonation"}):C.length===0?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada user yang cocok dengan pencarian"}):n.jsx("div",{className:"divide-y",children:C.map(S=>n.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>U(S.id),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(fs,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:S.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:S.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(ua,{variant:"outline",className:"text-xs",children:S.role}),n.jsx("span",{className:"text-xs text-gray-500",children:S.office_id||"No Office"})]})]})]})},S.id))})})]}),n.jsx("div",{className:"flex justify-end gap-2",children:n.jsx(J,{onClick:()=>B(!1),variant:"outline",children:"Batal"})})]})}),n.jsx(Qe,{open:b,onOpenChange:m,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(jt,{className:"w-5 h-5 text-blue-500"}),"Impersonate User"]}),n.jsx(Ie,{children:"Konfirmasi untuk impersonate user yang dipilih."})]}),n.jsxs("div",{className:"space-y-4",children:[g&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(fs,{className:"w-4 h-4 text-blue-600"})}),n.jsx("div",{className:"flex-1",children:(()=>{const S=M.find(H=>H.id===g);return S?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-medium text-sm",children:S.full_name}),n.jsx("div",{className:"text-xs text-gray-500",children:S.email}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(ua,{variant:"outline",className:"text-xs",children:S.role}),n.jsx("span",{className:"text-xs text-gray-500",children:S.office_id||"No Office"})]})]}):n.jsx("div",{className:"text-sm text-gray-500",children:"User tidak ditemukan"})})()})]})}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsxs(J,{onClick:()=>{m(!1),B(!0)},variant:"outline",className:"w-full",children:[n.jsx(_o,{className:"w-4 h-4 mr-2"}),"Pilih User Lain"]})})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(J,{onClick:()=>m(!1),variant:"outline",children:"Batal"}),n.jsx(J,{onClick:se,disabled:!g,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Impersonate"})]})]})}),n.jsx(Qe,{open:y,onOpenChange:v,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(es,{className:"w-5 h-5 text-blue-500"}),"Stop Impersonating"]}),n.jsxs(Ie,{children:["Anda sedang mengakses sistem sebagai ",n.jsx("strong",{children:e==null?void 0:e.full_name}),". Apakah Anda yakin ingin kembali ke akun admin Anda?"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(jt,{className:"w-4 h-4 text-blue-600 mr-2"}),n.jsxs("span",{className:"text-sm text-blue-700",children:["Setelah stop impersonate, Anda akan kembali ke akun: ",n.jsx("strong",{children:t==null?void 0:t.full_name})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(J,{onClick:()=>v(!1),variant:"outline",children:"Batal"}),n.jsx(J,{onClick:K,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Ya, Stop Impersonating"})]})]})}),n.jsx(Qe,{open:_,onOpenChange:j,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(Ka,{className:"w-5 h-5 text-green-500"}),"Stop Impersonating Berhasil"]}),n.jsx(Ie,{children:"Anda telah berhasil kembali ke akun admin Anda."})]}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 my-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(jt,{className:"w-4 h-4 text-green-600 mr-2"}),n.jsxs("span",{className:"text-sm text-green-700",children:["Sekarang Anda mengakses sistem sebagai: ",n.jsx("strong",{children:e==null?void 0:e.full_name})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(J,{onClick:()=>j(!1),className:"bg-green-600 hover:bg-green-700 text-white",children:"OK"})})]})})]})};function ze({className:e,...t}){return n.jsx("div",{className:D("animate-pulse rounded-md bg-muted",e),...t})}const Pd=Eo,Ci=c.forwardRef(({className:e,...t},s)=>n.jsx(ur,{ref:s,className:D("fixed top-0 z-[99999] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:left-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Ci.displayName=ur.displayName;const Id=fa("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-left-full data-[state=open]:slide-in-from-bottom-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Oi=c.forwardRef(({className:e,variant:t,...s},a)=>n.jsx(hr,{ref:a,className:D(Id({variant:t}),e),...s}));Oi.displayName=hr.displayName;const Rd=c.forwardRef(({className:e,...t},s)=>n.jsx(fr,{ref:s,className:D("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Rd.displayName=fr.displayName;const Di=c.forwardRef(({className:e,...t},s)=>n.jsx(mr,{ref:s,className:D("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(ma,{className:"h-4 w-4"})}));Di.displayName=mr.displayName;const Mi=c.forwardRef(({className:e,...t},s)=>n.jsx(pr,{ref:s,className:D("text-sm font-semibold",e),...t}));Mi.displayName=pr.displayName;const Li=c.forwardRef(({className:e,...t},s)=>n.jsx(gr,{ref:s,className:D("text-sm opacity-90",e),...t}));Li.displayName=gr.displayName;function Dn(){const{toasts:e}=Ri();return n.jsxs(Pd,{children:[e.map(function({id:t,title:s,description:a,action:r,...i}){return n.jsxs(Oi,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(Mi,{children:s}),a&&n.jsx(Li,{children:a})]}),r,n.jsx(Di,{})]},t)}),n.jsx(Ci,{})]})}const bt=({children:e})=>{const{user:t,token:s,refreshUser:a}=le(),[r,i]=c.useState(!1),[l,o]=c.useState([]);return c.useState(""),c.useState(!1),c.useState(null),c.useEffect(()=>{t&&!t.office_id?(i(!0),s&&It("/api/offices",s).then(u=>o(u.offices||[]))):i(!1)},[t,s]),!t&&s?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"h-16 bg-white border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ze,{className:"h-8 w-8 rounded"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ze,{className:"h-4 w-32"}),n.jsx(ze,{className:"h-3 w-24"})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx(ze,{className:"h-8 w-8 rounded-full"})})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(ze,{className:"h-8 w-48"}),n.jsx(ze,{className:"h-32 w-full"}),n.jsx(ze,{className:"h-32 w-full"})]})}),n.jsx(Dn,{})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Ad,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e}),n.jsx(Dn,{})]})};class Cd extends c.Component{constructor(){super(...arguments);Qa(this,"state",{hasError:!1})}static getDerivedStateFromError(s){return s.message.includes("403")||s.message.includes("Forbidden")?(window.showSessionExpiredModal&&window.showSessionExpiredModal(),{hasError:!1}):{hasError:!0,error:s}}componentDidCatch(s,a){if(console.error("ErrorBoundary caught an error:",s,a),s.message.includes("403")||s.message.includes("Forbidden")){window.showSessionExpiredModal&&window.showSessionExpiredModal();return}}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:n.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Terjadi Kesalahan"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maaf, terjadi kesalahan yang tidak terduga. Silakan coba refresh halaman atau hubungi administrator."}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>window.location.reload(),children:"Refresh Halaman"})})]})})}):this.props.children}}var Oa="Progress",Da=100,[Od,Ou]=ha(Oa),[Dd,Md]=Od(Oa),Fi=c.forwardRef((e,t)=>{const{__scopeProgress:s,value:a=null,max:r,getValueLabel:i=Ld,...l}=e;(r||r===0)&&!Mn(r)&&console.error(Fd(`${r}`,"Progress"));const o=Mn(r)?r:Da;a!==null&&!Ln(a,o)&&console.error(Ud(`${a}`,"Progress"));const u=Ln(a,o)?a:null,d=ws(u)?i(u,o):void 0;return n.jsx(Dd,{scope:s,value:u,max:o,children:n.jsx(xt.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":ws(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":qi(u,o),"data-value":u??void 0,"data-max":o,...l,ref:t})})});Fi.displayName=Oa;var Ui="ProgressIndicator",Vi=c.forwardRef((e,t)=>{const{__scopeProgress:s,...a}=e,r=Md(Ui,s);return n.jsx(xt.div,{"data-state":qi(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...a,ref:t})});Vi.displayName=Ui;function Ld(e,t){return`${Math.round(e/t*100)}%`}function qi(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function ws(e){return typeof e=="number"}function Mn(e){return ws(e)&&!isNaN(e)&&e>0}function Ln(e,t){return ws(e)&&!isNaN(e)&&e<=t&&e>=0}function Fd(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Da}\`.`}function Ud(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Da} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var zi=Fi,Vd=Vi;const $i=c.forwardRef(({className:e,value:t,...s},a)=>n.jsx(zi,{ref:a,className:D("relative h-4 w-full overflow-hidden rounded-full bg-gray-200",e),...s,children:n.jsx(Vd,{className:"h-full w-full flex-1 bg-green-600 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));$i.displayName=zi.displayName;const qd={NETWORK_ERROR:{title:"Koneksi Bermasalah",description:"Tidak dapat terhubung ke server. Periksa koneksi internet Anda dan coba lagi."},CONNECTION_TIMEOUT:{title:"Koneksi Timeout",description:"Koneksi ke server memakan waktu terlalu lama. Silakan coba lagi."},SESSION_EXPIRED:{title:"Sesi Berakhir",description:"Sesi Anda telah berakhir. Silakan login kembali."},SESSION_REFRESH_FAILED:{title:"Gagal Memperpanjang Session",description:"Tidak dapat memperpanjang session. Silakan login kembali."},SESSION_EXPIRING_WARNING:{title:"Session Akan Berakhir",description:"Session Anda akan berakhir dalam beberapa menit. Perpanjang session untuk melanjutkan."},ACCESS_DENIED:{title:"Akses Ditolak",description:"Anda tidak memiliki izin untuk melakukan tindakan ini."},INVALID_CREDENTIALS:{title:"Login Gagal",description:"Username atau password salah. Periksa kembali dan coba lagi."},VALIDATION_ERROR:{title:"Data Tidak Valid",description:"Data yang Anda masukkan tidak sesuai. Periksa kembali dan coba lagi."},REQUIRED_FIELD:{title:"Field Wajib",description:"Field ini wajib diisi."},INVALID_FORMAT:{title:"Format Tidak Valid",description:"Format data tidak sesuai dengan yang diharapkan."},FILE_TOO_LARGE:{title:"File Terlalu Besar",description:"Ukuran file melebihi batas maksimum yang diizinkan."},INVALID_FILE_TYPE:{title:"Tipe File Tidak Valid",description:"Tipe file tidak diizinkan. Gunakan format yang sesuai."},SERVER_ERROR:{title:"Server Bermasalah",description:"Terjadi kesalahan pada server. Silakan coba lagi nanti."},INTERNAL_ERROR:{title:"Kesalahan Internal",description:"Terjadi kesalahan internal. Silakan hubungi administrator."},SERVICE_UNAVAILABLE:{title:"Layanan Tidak Tersedia",description:"Layanan sedang tidak tersedia. Silakan coba lagi nanti."},SAVE_FAILED:{title:"Gagal Menyimpan",description:"Data tidak dapat disimpan. Periksa data dan coba lagi."},UPDATE_FAILED:{title:"Gagal Memperbarui",description:"Data tidak dapat diperbarui. Periksa data dan coba lagi."},DELETE_FAILED:{title:"Gagal Menghapus",description:"Data tidak dapat dihapus. Periksa data dan coba lagi."},FETCH_FAILED:{title:"Gagal Mengambil Data",description:"Data tidak dapat diambil dari server. Silakan coba lagi."},UPLOAD_FAILED:{title:"Gagal Upload",description:"File tidak dapat diupload. Periksa file dan coba lagi."},DOWNLOAD_FAILED:{title:"Gagal Download",description:"File tidak dapat diunduh. Silakan coba lagi."},GENERATE_PDF_FAILED:{title:"Gagal Generate PDF",description:"PDF tidak dapat dibuat. Silakan coba lagi."},DUPLICATE_DATA:{title:"Data Duplikat",description:"Data yang sama sudah ada. Gunakan data yang berbeda."},INVALID_OPERATION:{title:"Operasi Tidak Valid",description:"Operasi yang diminta tidak dapat dilakukan."},DEPENDENCY_ERROR:{title:"Dependency Error",description:"Operasi tidak dapat dilakukan karena ada dependency yang belum terpenuhi."},UNKNOWN_ERROR:{title:"Terjadi Kesalahan",description:"Terjadi kesalahan yang tidak terduga. Silakan coba lagi."},OPERATION_FAILED:{title:"Operasi Gagal",description:"Operasi tidak dapat diselesaikan. Silakan coba lagi."}},zd={SESSION_REFRESHED:{title:"Session Diperpanjang",description:"Session berhasil diperpanjang."},LOGIN_SUCCESS:{title:"Login Berhasil",description:"Anda berhasil login ke sistem."},LOGOUT_SUCCESS:{title:"Logout Berhasil",description:"Anda berhasil logout dari sistem."},SAVE_SUCCESS:{title:"Berhasil Disimpan",description:"Data berhasil disimpan."},UPDATE_SUCCESS:{title:"Berhasil Diperbarui",description:"Data berhasil diperbarui."},DELETE_SUCCESS:{title:"Berhasil Dihapus",description:"Data berhasil dihapus."},UPLOAD_SUCCESS:{title:"Upload Berhasil",description:"File berhasil diupload."},DOWNLOAD_SUCCESS:{title:"Download Berhasil",description:"File berhasil diunduh."},GENERATE_PDF_SUCCESS:{title:"PDF Berhasil Dibuat",description:"PDF berhasil dibuat dan siap diunduh."},APPROVE_SUCCESS:{title:"Berhasil Disetujui",description:"Data berhasil disetujui."},REJECT_SUCCESS:{title:"Berhasil Ditolak",description:"Data berhasil ditolak."},SUBMIT_SUCCESS:{title:"Berhasil Dikirim",description:"Data berhasil dikirim."},OPERATION_SUCCESS:{title:"Operasi Berhasil",description:"Operasi berhasil diselesaikan."}},Gs={SAVE:"Menyimpan",UPDATE:"Memperbarui",DELETE:"Menghapus",UPLOAD:"Mengupload",DOWNLOAD:"Mengunduh",GENERATE:"Membuat",APPROVE:"Menyetujui",REJECT:"Menolak",REFRESH_SESSION:"Memperpanjang Session",SUBMIT:"Mengirim",LOAD:"Memuat",PROCESS:"Memproses"};class Ma{static success(t,s,a){const r=zd[t],i=r.title,l=s||r.description;$e({title:i,description:l,variant:"default",duration:(a==null?void 0:a.duration)||3e3,action:a==null?void 0:a.action})}static error(t,s,a){const r=qd[t],i=r.title,l=s||r.description;$e({title:i,description:l,variant:"destructive",duration:(a==null?void 0:a.duration)||5e3,action:a==null?void 0:a.action})}static info(t,s){$e({title:"Informasi",description:t,variant:"default",duration:(s==null?void 0:s.duration)||3e3,action:s==null?void 0:s.action})}static warning(t,s){$e({title:"Peringatan",description:t,variant:"default",duration:(s==null?void 0:s.duration)||4e3,action:s==null?void 0:s.action})}static custom(t,s,a,r){$e({title:s,description:a,variant:t==="error"?"destructive":"default",duration:(r==null?void 0:r.duration)||(t==="error"?5e3:3e3),action:r==null?void 0:r.action})}static actionResult(t,s,a){s?this.success("OPERATION_SUCCESS",a||`${Gs[t]} berhasil dilakukan.`):this.error("OPERATION_FAILED",a||`Gagal ${Gs[t].toLowerCase()}.`)}static loading(t){$e({title:Gs[t],description:"Mohon tunggu...",variant:"default",duration:2e3})}}const Bi=(e,t,s)=>Ma.success(e,t,s),La=(e,t,s)=>Ma.error(e,t,s),Du=(e,t)=>Ma.info(e,t),Mu=e=>Bi("SAVE_SUCCESS",e),Lu=e=>La("SAVE_FAILED",e),Fu=e=>La("DOWNLOAD_FAILED",e),$d=({children:e})=>{const[t,s]=c.useState({isExpired:!1,isRefreshing:!1,refreshAttempts:0}),[a,r]=c.useState(!1),[i,l]=c.useState(!1),[o,u]=c.useState(0),{token:d,user:f,logout:h,refreshUser:x}=le(),w=vr(),b=5*60*1e3,m=3,y=c.useCallback(E=>{try{const L=JSON.parse(atob(E.split(".")[1]));return new Date(L.exp*1e3)}catch{return null}},[]),v=c.useCallback(()=>{if(!d)return;const E=y(d);if(!E)return;const L=new Date,N=E.getTime()-L.getTime();N<=0?(s(G=>({...G,isExpired:!0})),r(!0)):N<=b&&(l(!0),u(Math.floor(N/1e3)))},[d,y]),_=c.useCallback(async()=>{if(t.isRefreshing||t.refreshAttempts>=m)return!1;s(E=>({...E,isRefreshing:!0,refreshAttempts:E.refreshAttempts+1}));try{const E=await fetch("/api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(E.ok){const L=await E.json();if(L.token)return localStorage.setItem("token",L.token),window.dispatchTokenUpdate&&window.dispatchTokenUpdate(L.token),s(N=>({...N,isExpired:!1,isRefreshing:!1,lastRefreshTime:new Date,refreshAttempts:0})),l(!1),Bi("SESSION_REFRESHED","Session berhasil diperpanjang"),!0}}catch(E){console.error("Token refresh failed:",E)}return s(E=>({...E,isRefreshing:!1})),!1},[t.isRefreshing,t.refreshAttempts]),j=c.useCallback(()=>{s(E=>({...E,isExpired:!0})),r(!0),l(!1)},[]),g=c.useCallback(async()=>{try{h(),r(!1),l(!1),w("/",{replace:!0})}catch(E){console.error("Logout error:",E),localStorage.removeItem("token"),window.location.assign("/")}},[h,w]),T=c.useCallback(async()=>{await _()||La("SESSION_REFRESH_FAILED","Gagal memperpanjang session")},[_]);c.useEffect(()=>{if(!d||i)return;const E=setInterval(v,3e4);return()=>clearInterval(E)},[d,v,i]),c.useEffect(()=>{if(!i||o<=0)return;const E=setInterval(()=>{u(L=>L<=1?(j(),0):L-1)},1e3);return()=>clearInterval(E)},[i,o,j]),c.useEffect(()=>(window.showSessionExpiredModal=j,window.dispatchTokenUpdate=E=>{localStorage.setItem("token",E),s(L=>({...L,lastRefreshTime:new Date}))},()=>{delete window.showSessionExpiredModal,delete window.dispatchTokenUpdate}),[j]);const M=E=>{const L=Math.floor(E/60),N=E%60;return`${L}:${N.toString().padStart(2,"0")}`};return n.jsxs(n.Fragment,{children:[e,n.jsx(Qe,{open:i,onOpenChange:l,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(dr,{className:"h-5 w-5 text-yellow-500"}),"Session Akan Berakhir"]}),n.jsx(Ie,{children:"Session Anda akan berakhir dalam beberapa saat. Perpanjang session untuk melanjutkan bekerja."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:M(o)}),n.jsx($i,{value:o/(b/1e3)*100,className:"h-2"})]}),f&&n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx(fs,{className:"h-8 w-8 text-gray-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f.full_name}),n.jsx("div",{className:"text-sm text-gray-600",children:f.role})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(J,{onClick:T,disabled:t.isRefreshing,className:"flex-1",children:t.isRefreshing?n.jsxs(n.Fragment,{children:[n.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin text-green-600"}),"Memperpanjang..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Perpanjang Session"]})}),n.jsxs(J,{variant:"outline",onClick:g,className:"flex-1",children:[n.jsx(hs,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})}),n.jsx(Qe,{open:a,onOpenChange:()=>{},children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ae,{children:[n.jsxs(Pe,{className:"flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5 text-red-500"}),"Session Berakhir"]}),n.jsx(Ie,{children:"Session Anda telah berakhir. Silakan login kembali untuk melanjutkan."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(No,{className:"h-4 w-4 text-red-500"}),n.jsx("span",{className:"text-sm font-medium text-red-700",children:"Session Berakhir"})]}),t.lastRefreshTime&&n.jsxs(ua,{variant:"outline",className:"text-xs",children:["Terakhir refresh: ",t.lastRefreshTime.toLocaleTimeString("id-ID")]})]}),f&&n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx(fs,{className:"h-8 w-8 text-gray-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f.full_name}),n.jsx("div",{className:"text-sm text-gray-600",children:f.role})]})]}),t.refreshAttempts<m&&n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Pt,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Mencoba memperpanjang session..."})]}),n.jsxs("div",{className:"text-xs text-blue-600 mb-3",children:["Percobaan: ",t.refreshAttempts,"/",m]}),n.jsx(J,{onClick:T,disabled:t.isRefreshing,size:"sm",variant:"outline",className:"w-full",children:t.isRefreshing?n.jsxs(n.Fragment,{children:[n.jsx(Ks,{className:"h-4 w-4 mr-2 animate-spin text-green-600"}),"Mencoba..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Coba Lagi"]})})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(J,{onClick:g,className:"flex-1 bg-red-600 hover:bg-red-700",children:[n.jsx(hs,{className:"h-4 w-4 mr-2"}),"Login Ulang"]})})]})]})})]})},Bd=c.lazy(()=>q(()=>import("./Dashboard-Cov4Rnmf.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Qd=c.lazy(()=>q(()=>import("./Settings-9m_fYq7h.js"),__vite__mapDeps([7,1,2,3,8,9,10,11,12,13,14]))),Gd=c.lazy(()=>q(()=>import("./TemplateSelection-C_IiIfSR.js"),__vite__mapDeps([15,1,2,3]))),Wd=c.lazy(()=>q(()=>import("./TemplateForm-BaCLVyfz.js"),__vite__mapDeps([16,1,2,8,13,17,3,18,19,20,6,21,22]))),Kd=c.lazy(()=>q(()=>import("./NotFound-BKPhTCme.js"),__vite__mapDeps([23,1,2]))),Hd=c.lazy(()=>q(()=>import("./Index-BmL43LPs.js"),__vite__mapDeps([24,1,2,8,3]))),Xd=c.lazy(()=>q(()=>import("./LetterDetail-4cup8iuT.js"),__vite__mapDeps([25,1,2,3,19,4,22]))),Jd=c.lazy(()=>q(()=>import("./Letters-NDFHmQJh.js"),__vite__mapDeps([26,1,2,3,4,19,27,13,17,8,5]))),Yd=c.lazy(()=>q(()=>import("./LetterPrintPreview-D7dTIZWu.js"),__vite__mapDeps([28,1,2,19]))),Zd=c.lazy(()=>q(()=>import("./Users-CcwSjEg3.js"),__vite__mapDeps([29,1,2,8,13,4,14,3]))),eu=c.lazy(()=>q(()=>import("./PengajuanSelect-B0Rcbi2T.js"),__vite__mapDeps([30,1,2,3,10,4]))),tu=c.lazy(()=>q(()=>import("./PengajuanFileUpload-BigTxdkG.js"),__vite__mapDeps([31,1,2,3,14,12]))),su=c.lazy(()=>q(()=>import("./PengajuanIndex-C0-6d7DO.js"),__vite__mapDeps([32,1,2,3,13,4,27,14,8,9]))),au=c.lazy(()=>q(()=>import("./PengajuanDetail-BGwWn6bF.js"),__vite__mapDeps([33,1,2,3,12,27,14,9,8,11,13,34,18]))),nu=c.lazy(()=>q(()=>import("./PengajuanEdit-DAselC65.js"),__vite__mapDeps([35,1,2,3,8,14]))),ru=c.lazy(()=>q(()=>import("./AuditLogPage-D2MCB8De.js"),__vite__mapDeps([36,1,2,3,34,18]))),iu=c.lazy(()=>q(()=>import("./JobTypeConfiguration-DBU21wWK.js"),__vite__mapDeps([37,1,2,3,8,10,11]))),ou=c.lazy(()=>q(()=>import("./AdminWilayahDashboard-BCZ4j_4_.js"),__vite__mapDeps([38,1,2,3,13,5]))),lu=c.lazy(()=>q(()=>import("./AdminWilayahUploadPage-DyRWL1rG.js"),__vite__mapDeps([39,1,2,3,13,20,6,14]))),cu=c.lazy(()=>q(()=>import("./AdminPusatTracking-C8tvFuRY.js"),__vite__mapDeps([40,1,2,3,8,9,13,6]))),du=c.lazy(()=>q(()=>import("./SuperadminTracking-Dp453WYe.js"),__vite__mapDeps([41,1,2,3,4,13,6]))),uu=c.lazy(()=>q(()=>import("./TrackingStatusSettings-DzK-deky.js"),__vite__mapDeps([42,1,2,8,9,11,3,14,4,6]))),hu=c.lazy(()=>q(()=>import("./SKForm-B1pniYLr.js"),__vite__mapDeps([43,1,2,20,21,17,8,3]))),fu=c.lazy(()=>q(()=>import("./MaintenancePage-vMAQELZV.js"),__vite__mapDeps([44,1,2]))),$=()=>n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),mu=new bl,tt=({children:e})=>{const{user:t,loading:s}=le();return s?null:t?n.jsx(bt,{children:e}):n.jsx(yt,{to:"/",replace:!0})},is=({children:e})=>{const{user:t,loading:s}=le();return s?n.jsx("div",{children:"Loading..."}):!t||t.role!=="admin"?n.jsx(yt,{to:"/dashboard",replace:!0}):n.jsx(bt,{children:e})},Nt=({children:e})=>{const{user:t,loading:s}=le();return s?n.jsx("div",{children:"Loading..."}):!t||t.role!=="admin"&&t.role!=="operator"&&t.role!=="admin_wilayah"&&t.role!=="kanwil"?n.jsx(yt,{to:"/dashboard",replace:!0}):n.jsx(bt,{children:e})},pu=({children:e})=>{const{user:t,loading:s}=le();return s?n.jsx("div",{children:"Loading..."}):!t||t.role!=="admin"&&t.role!=="user"?n.jsx(yt,{to:"/dashboard",replace:!0}):n.jsx(bt,{children:e})},Fn=({children:e})=>{const{user:t,loading:s}=le();return s?n.jsx("div",{children:"Loading..."}):!t||t.role!=="admin_wilayah"?n.jsx(yt,{to:"/dashboard",replace:!0}):n.jsx(bt,{children:e})},Un=({children:e})=>{const{user:t,loading:s}=le();return s?n.jsx("div",{children:"Loading..."}):!t||t.role!=="user"?n.jsx(yt,{to:"/dashboard",replace:!0}):n.jsx(bt,{children:e})},W=({children:e})=>{const{user:t,loading:s,isMaintenanceMode:a}=le();return s?n.jsx("div",{children:"Loading..."}):a&&(!t||t.role!=="admin"||t.office_id!==null)?n.jsx(fu,{}):n.jsx(n.Fragment,{children:e})},gu=()=>n.jsxs(Po,{children:[n.jsx(z,{path:"/",element:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Hd,{})})}),n.jsx(z,{path:"/dashboard",element:n.jsx(W,{children:n.jsx(tt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Bd,{})})})})}),n.jsx(z,{path:"/generator",element:n.jsx(W,{children:n.jsx(Nt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Gd,{})})})})}),n.jsx(z,{path:"/generator/create/:templateId",element:n.jsx(W,{children:n.jsx(Nt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Wd,{})})})})}),n.jsx(z,{path:"/generator/sk",element:n.jsx(W,{children:n.jsx(pu,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(hu,{})})})})}),n.jsx(z,{path:"/users",element:n.jsx(W,{children:n.jsx(is,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Zd,{})})})})}),n.jsx(z,{path:"/settings",element:n.jsx(W,{children:n.jsx(tt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Qd,{})})})})}),n.jsx(z,{path:"/letters/:id",element:n.jsx(W,{children:n.jsx(tt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Xd,{})})})})}),n.jsx(z,{path:"/letters",element:n.jsx(W,{children:n.jsx(tt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Jd,{})})})})}),n.jsx(z,{path:"/letters/:id/preview",element:n.jsx(W,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Yd,{})})})}),n.jsx(z,{path:"/pengajuan",element:n.jsx(W,{children:n.jsx(tt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(su,{})})})})}),n.jsx(z,{path:"/pengajuan/select",element:n.jsx(W,{children:n.jsx(Nt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(eu,{})})})})}),n.jsx(z,{path:"/pengajuan/:pengajuanId",element:n.jsx(W,{children:n.jsx(tt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(au,{})})})})}),n.jsx(z,{path:"/pengajuan/:pengajuanId/upload",element:n.jsx(W,{children:n.jsx(Nt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(tu,{})})})})}),n.jsx(z,{path:"/pengajuan/:pengajuanId/edit",element:n.jsx(W,{children:n.jsx(Nt,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(nu,{})})})})}),n.jsx(z,{path:"/pengajuan/:pengajuanId/audit-log",element:n.jsx(W,{children:n.jsx(is,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(ru,{})})})})}),n.jsx(z,{path:"/job-type-configuration",element:n.jsx(W,{children:n.jsx(is,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(iu,{})})})})}),n.jsx(z,{path:"/tracking-status-settings",element:n.jsx(W,{children:n.jsx(Un,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(uu,{})})})})}),n.jsx(z,{path:"/admin-wilayah/dashboard",element:n.jsx(W,{children:n.jsx(Fn,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(ou,{})})})})}),n.jsx(z,{path:"/admin-wilayah/upload/:pengajuanId",element:n.jsx(W,{children:n.jsx(Fn,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(lu,{})})})})}),n.jsx(z,{path:"/tracking",element:n.jsx(W,{children:n.jsx(Un,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(cu,{})})})})}),n.jsx(z,{path:"/tracking-monitor",element:n.jsx(W,{children:n.jsx(is,{children:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(du,{})})})})}),n.jsx(z,{path:"*",element:n.jsx(c.Suspense,{fallback:n.jsx($,{}),children:n.jsx(Kd,{})})})]}),xu=()=>{const[e,t]=c.useState(!1),s=vr(),{logout:a}=le();return c.useEffect(()=>{window.showSessionExpiredModal=()=>{const o=window.location.pathname;o==="/"||o==="/login"||t(!0)},window.dispatchTokenUpdate=o=>{localStorage.setItem("token",o)};const r=o=>{var u,d;if(o.error&&typeof o.error=="object"){const f=o.error;if(f.status===403||(u=f.message)!=null&&u.includes("403")||(d=f.message)!=null&&d.includes("Forbidden")){o.preventDefault();const h=window.location.pathname;!(h==="/"||h==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},i=o=>{var u,d;if(o.reason&&typeof o.reason=="object"){const f=o.reason;if(f.status===403||(u=f.message)!=null&&u.includes("403")||(d=f.message)!=null&&d.includes("Forbidden")){o.preventDefault();const h=window.location.pathname;!(h==="/"||h==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal()}}},l=window.fetch;return window.fetch=async(...o)=>{try{const u=await l(...o);if(u.status===403&&!(typeof o[0]=="string"?o[0]:o[0].url).includes("/api/auth/")){const f=window.location.pathname;return!(f==="/"||f==="/login")&&window.showSessionExpiredModal&&window.showSessionExpiredModal(),new Response(JSON.stringify({success:!1,message:"Sesi berakhir, silakan login kembali"}),{status:403,headers:{"Content-Type":"application/json"}})}return u}catch(u){throw u}},window.addEventListener("error",r),window.addEventListener("unhandledrejection",i),()=>{window.removeEventListener("error",r),window.removeEventListener("unhandledrejection",i),window.fetch=l,delete window.showSessionExpiredModal,delete window.dispatchTokenUpdate}},[]),n.jsx(jl,{client:mu,children:n.jsxs(Xo,{children:[e&&n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/20 backdrop-blur-sm animate-in fade-in-0 duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-sm w-full flex flex-col items-center animate-in zoom-in-95 duration-200",children:[n.jsx(xr,{className:"w-16 h-16 text-yellow-500 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900",children:"Sesi Berakhir"}),n.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Sesi Anda telah habis. Silakan login kembali untuk melanjutkan."}),n.jsx("button",{className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white text-lg font-semibold shadow transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{try{localStorage.removeItem("token")}catch{}try{a()}catch{}t(!1);try{window.location.assign("/")}catch{s("/",{replace:!0})}},children:"Login Ulang"})]})}),n.jsx(Hc,{children:n.jsx($d,{children:n.jsx(gu,{})})})]})})},yu=()=>n.jsx(Cd,{children:n.jsx(Ao,{basename:"/FE",children:n.jsx(xu,{})})});{const e=(...t)=>{};console.log=e,console.debug=e,console.info=e,console.warn=e}br(document.getElementById("root")).render(n.jsx(yu,{}));export{Iu as A,J as B,td as C,Qe as D,ed as E,Mu as F,Lu as G,Du as H,Ii as I,$i as P,ze as S,It as a,ua as b,Ms as c,Ri as d,Te as e,Ae as f,Pe as g,Ie as h,od as i,Tu as j,Ru as k,Au as l,_u as m,Eu as n,Nu as o,In as p,Rn as q,ca as r,Bi as s,$e as t,le as u,st as v,Pu as w,D as x,La as y,Fu as z};
//# sourceMappingURL=index-CdtzrYeU.js.map
