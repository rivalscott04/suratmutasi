{"version":3,"file":"PengajuanEdit-DyuZDinG.js","sources":["../../src/pages/PengajuanEdit.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\nimport { \n  ArrowLeft, \n  Upload, \n  FileText, \n  CheckCircle, \n  XCircle, \n  AlertCircle,\n  Loader2,\n  Save,\n  Eye,\n  Download,\n  Trash2\n} from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiGet, apiPut } from '@/lib/api';\n\ninterface PengajuanFile {\n  id: string;\n  file_type: string;\n  file_name: string;\n  file_size: number;\n  upload_status: string;\n  verification_status: 'pending' | 'approved' | 'rejected';\n  verification_notes?: string;\n  verified_by?: string;\n  verified_at?: string;\n  blobUrl?: string;\n}\n\ninterface PengajuanData {\n  id: string;\n  user_id?: string;\n  pegawai: {\n    nama: string;\n    jabatan: string;\n    nip: string;\n  };\n  jenis_jabatan: string;\n  jabatan_id?: number;\n  total_dokumen: number;\n  status: 'draft' | 'submitted' | 'approved' | 'rejected' | 'resubmitted';\n  files: PengajuanFile[];\n}\n\ninterface FileUpload {\n  file_type: string;\n  file: File;\n  display_name: string;\n  is_required: boolean;\n}\n\nconst PengajuanEdit: React.FC = () => {\n  const { pengajuanId } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, token, isAuthenticated } = useAuth();\n  \n  const [pengajuan, setPengajuan] = useState<PengajuanData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [submitting, setSubmitting] = useState(false);\n  const [showSubmitDialog, setShowSubmitDialog] = useState(false);\n  const [fileUploads, setFileUploads] = useState<FileUpload[]>([]);\n  const [previewFile, setPreviewFile] = useState<PengajuanFile | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/');\n      return;\n    }\n    if (pengajuanId) {\n      fetchPengajuanData();\n    }\n  }, [isAuthenticated, navigate, pengajuanId]);\n\n  const fetchPengajuanData = async () => {\n    try {\n      setLoading(true);\n      const response = await apiGet(`/api/pengajuan/${pengajuanId}`, token);\n      if (response.success) {\n        setPengajuan(response.data.pengajuan);\n        initializeFileUploads(response.data.pengajuan);\n      } else {\n        setError(response.message || 'Gagal mengambil data pengajuan');\n      }\n    } catch (error) {\n      console.error('Error fetching pengajuan data:', error);\n      setError('Terjadi kesalahan saat mengambil data pengajuan');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const initializeFileUploads = (pengajuanData: PengajuanData) => {\n    // Hanya inisialisasi file upload untuk dokumen yang tidak sesuai\n    const rejectedFiles = pengajuanData.files.filter(file => file.verification_status === 'rejected');\n    const uploads: FileUpload[] = rejectedFiles.map(file => ({\n      file_type: file.file_type,\n      file: null as any,\n      display_name: getFileDisplayName(file.file_type),\n      is_required: true\n    }));\n    setFileUploads(uploads);\n  };\n\n  const getFileDisplayName = (fileType: string): string => {\n    const fileTypeMap: Record<string, string> = {\n      'surat_pengantar': 'Surat Pengantar',\n      'surat_permohonan_dari_yang_bersangkutan': 'Surat Permohonan Dari Yang Bersangkutan',\n      'surat_keputusan_cpns': 'Surat Keputusan CPNS',\n      'surat_keputusan_pns': 'Surat Keputusan PNS',\n      'surat_keputusan_kenaikan_pangkat_terakhir': 'Surat Keputusan Kenaikan Pangkat Terakhir',\n      'surat_keputusan_jabatan_terakhir': 'Surat Keputusan Jabatan Terakhir',\n      'skp_2_tahun_terakhir': 'SKP 2 Tahun Terakhir',\n      'surat_keterangan_bebas_temuan_inspektorat': 'Surat Keterangan Bebas Temuan Yang Diterbitkan Inspektorat Jenderal Kementerian Agama',\n      'surat_keterangan_anjab_abk_instansi_asal': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi asal',\n      'surat_keterangan_anjab_abk_instansi_penerima': 'Surat Keterangan Anjab dan ABK terhadap jabatan PNS dari instansi penerima',\n      'surat_pernyataan_tidak_hukuman_disiplin': 'Surat Pernyataan Tidak Pernah Dijatuhi Hukuman Disiplin Tingkat Sedang atau Berat Dalam 1 (satu) Tahun Terakhir Dari PPK',\n      'surat_persetujuan_mutasi_asal': 'Surat Persetujuan Mutasi dari ASAL dengan menyebutkan jabatan yang akan diduduki',\n      'surat_lolos_butuh_ppk': 'Surat Lolos Butuh dari Pejabat Pembina Kepegawaian instansi yang dituju',\n      'peta_jabatan': 'Peta Jabatan',\n      'hasil_uji_kompetensi': 'Hasil Uji Kompetensi',\n    'hasil_evaluasi_pertimbangan_baperjakat': 'Hasil Evaluasi dan Pertimbangan (BAPERJAKAT)',\n      'anjab_abk_instansi_asal': 'Anjab/Abk Instansi Asal',\n      'anjab_abk_instansi_penerima': 'Anjab/Abk Instansi Penerima',\n      'surat_keterangan_tidak_tugas_belajar': 'Surat Keterangan Tidak Sedang Tugas Belajar',\n      'sptjm_pimpinan_satker_asal': 'SPTJM Pimpinan Satker dari Asal',\n      'sptjm_pimpinan_satker_penerima': 'SPTJM Pimpinan Satker dari Penerima',\n      'surat_rekomendasi_instansi_pembina': 'Surat Rekomendasi Instansi Pembina'\n    };\n    \n    return fileTypeMap[fileType] || fileType.replace(/_/g, ' ').toUpperCase();\n  };\n\n  const handleFileChange = (fileType: string, file: File) => {\n    setFileUploads(prev => \n      prev.map(upload => \n        upload.file_type === fileType \n          ? { ...upload, file } \n          : upload\n      )\n    );\n  };\n\n  const handleSubmit = async () => {\n    try {\n      setSubmitting(true);\n      \n      // Upload files yang baru\n      const formData = new FormData();\n      fileUploads.forEach(upload => {\n        if (upload.file) {\n          formData.append('files', upload.file);\n          formData.append('file_types', upload.file_type);\n        }\n      });\n\n      const response = await apiPut(`/api/pengajuan/${pengajuanId}/update-files`, formData, token);\n      \n      if (response.success) {\n        // Redirect ke detail pengajuan\n        navigate(`/pengajuan/${pengajuanId}`);\n      } else {\n        setError(response.message || 'Gagal memperbarui dokumen');\n      }\n    } catch (error) {\n      console.error('Error updating files:', error);\n      setError('Terjadi kesalahan saat memperbarui dokumen');\n    } finally {\n      setSubmitting(false);\n      setShowSubmitDialog(false);\n    }\n  };\n\n  const handlePreviewFile = async (file: PengajuanFile) => {\n    try {\n      const response = await fetch(`/api/pengajuan/files/${file.id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error('Gagal mengambil file');\n      }\n      \n      const blob = await response.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      \n      setPreviewFile({\n        ...file,\n        blobUrl: blobUrl\n      });\n      setShowPreview(true);\n    } catch (error) {\n      console.error('Error previewing file:', error);\n      setError('Gagal preview file. Silakan coba lagi.');\n    }\n  };\n\n  const handleDownloadFile = (file: PengajuanFile) => {\n    window.open(`/api/pengajuan/files/${file.id}`, '_blank');\n  };\n\n  const getFileSize = (bytes: number) => {\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card>\n          <CardContent className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"h-8 w-8 animate-spin mr-2 text-green-600\" />\n            <span>Memuat data pengajuan...</span>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!pengajuan) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card>\n          <CardContent className=\"flex items-center justify-center py-12\">\n            <AlertCircle className=\"h-8 w-8 text-red-500 mr-2\" />\n            <span className=\"text-red-600\">Pengajuan tidak ditemukan</span>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const rejectedFiles = pengajuan.files.filter(file => file.verification_status === 'rejected');\n  const approvedFiles = pengajuan.files.filter(file => file.verification_status === 'approved');\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-4\">\n          <Button\n            variant=\"outline\"\n            onClick={() => navigate(`/pengajuan/${pengajuanId}`)}\n            className=\"flex items-center gap-2\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n            Kembali ke Detail Pengajuan\n          </Button>\n          <div>\n            <h1 className=\"text-2xl font-bold\">Perbaiki Dokumen Pengajuan</h1>\n            <p className=\"text-gray-600\">ID: {pengajuan.id}</p>\n          </div>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n          <p className=\"text-red-600\">{error}</p>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Dokumen yang Sudah Sesuai (Readonly) */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CheckCircle className=\"h-5 w-5 text-green-600\" />\n              Dokumen yang Sudah Sesuai\n              <Badge variant=\"outline\" className=\"ml-2\">\n                {approvedFiles.length}\n              </Badge>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {approvedFiles.length === 0 ? (\n              <p className=\"text-gray-500 text-center py-4\">Tidak ada dokumen yang sudah sesuai</p>\n            ) : (\n              <div className=\"space-y-3\">\n                {approvedFiles.map((file) => (\n                  <div key={file.id} className=\"p-4 border border-green-200 rounded-lg bg-green-50\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-medium text-green-800\">{getFileDisplayName(file.file_type)}</h4>\n                        <p className=\"text-sm text-green-600\">{file.file_name}</p>\n                        <p className=\"text-xs text-green-500\">{getFileSize(file.file_size)}</p>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handlePreviewFile(file)}\n                          className=\"text-green-600 border-green-300 hover:bg-green-100\"\n                        >\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handleDownloadFile(file)}\n                          className=\"text-green-600 border-green-300 hover:bg-green-100\"\n                        >\n                          <Download className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Dokumen yang Perlu Diperbaiki */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <XCircle className=\"h-5 w-5 text-red-600\" />\n              Dokumen yang Perlu Diperbaiki\n              <Badge variant=\"outline\" className=\"ml-2\">\n                {rejectedFiles.length}\n              </Badge>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {rejectedFiles.length === 0 ? (\n              <p className=\"text-gray-500 text-center py-4\">Tidak ada dokumen yang perlu diperbaiki</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {fileUploads.map((upload) => {\n                  const originalFile = rejectedFiles.find(f => f.file_type === upload.file_type);\n                  return (\n                    <div key={upload.file_type} className=\"p-4 border border-red-200 rounded-lg bg-red-50\">\n                      <div className=\"space-y-3\">\n                        <div>\n                          <Label className=\"text-sm font-medium text-red-800\">\n                            {upload.display_name}\n                          </Label>\n                          {originalFile && (\n                            <div className=\"mt-2 p-3 bg-white rounded border\">\n                              <p className=\"text-sm text-gray-600\">Dokumen saat ini: {originalFile.file_name}</p>\n                              <p className=\"text-xs text-gray-500\">{getFileSize(originalFile.file_size)}</p>\n                              {originalFile.verification_notes && (\n                                <p className=\"text-xs text-red-600 mt-1\">\n                                  Catatan: {originalFile.verification_notes}\n                                </p>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                        \n                        <div>\n                          <Label htmlFor={`file-${upload.file_type}`} className=\"text-sm font-medium text-red-800\">\n                            Upload Dokumen Baru\n                          </Label>\n                          <div className=\"mt-1 flex items-center gap-3\">\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              onClick={() => document.getElementById(`file-${upload.file_type}`)?.click()}\n                              className=\"bg-white text-gray-700 border-gray-300 hover:bg-gray-50\"\n                            >\n                              <Upload className=\"h-4 w-4 mr-2\" />\n                              Pilih File\n                            </Button>\n                            <span className=\"text-sm text-gray-600\">\n                              {upload.file ? upload.file.name : 'Belum ada file dipilih'}\n                            </span>\n                          </div>\n                          <Input\n                            id={`file-${upload.file_type}`}\n                            type=\"file\"\n                            accept=\".pdf,.doc,.docx\"\n                            onChange={(e) => {\n                              const file = e.target.files?.[0];\n                              if (file) {\n                                handleFileChange(upload.file_type, file);\n                                // Reset file input setelah file dipilih\n                                e.target.value = '';\n                              }\n                            }}\n                            className=\"hidden\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Submit Button */}\n      {rejectedFiles.length > 0 && (\n        <div className=\"mt-6 flex justify-end\">\n          <Button\n            onClick={() => setShowSubmitDialog(true)}\n            disabled={submitting || fileUploads.every(upload => !upload.file)}\n            className=\"bg-green-600 hover:bg-green-700 text-white\"\n            size=\"lg\"\n          >\n            {submitting ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin text-green-600\" />\n                Menyimpan...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Simpan Perubahan\n              </>\n            )}\n          </Button>\n        </div>\n      )}\n\n      {/* Submit Confirmation Dialog */}\n      <AlertDialog open={showSubmitDialog} onOpenChange={setShowSubmitDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Simpan Perubahan</AlertDialogTitle>\n            <AlertDialogDescription>\n              Apakah Anda yakin ingin menyimpan perubahan dokumen? Dokumen yang sudah sesuai tidak akan berubah.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel disabled={submitting}>Batal</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleSubmit}\n              disabled={submitting}\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              {submitting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin text-green-600\" />\n                  Menyimpan...\n                </>\n              ) : (\n                'Simpan'\n              )}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Preview Modal */}\n      <AlertDialog open={showPreview} onOpenChange={(open) => {\n        setShowPreview(open);\n        if (!open && previewFile?.blobUrl) {\n          URL.revokeObjectURL(previewFile.blobUrl);\n        }\n      }}>\n        <AlertDialogContent className=\"max-w-4xl\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>Preview File: {previewFile?.file_name}</AlertDialogTitle>\n          </AlertDialogHeader>\n          <div className=\"mt-4\">\n            {previewFile && (\n              <div className=\"border rounded-lg overflow-hidden bg-white\">\n                <div className=\"bg-green-600 text-white px-4 py-2 flex items-center justify-between\">\n                  <span className=\"font-medium\">{previewFile.file_name}</span>\n                </div>\n                <iframe\n                  src={previewFile.blobUrl || `/api/pengajuan/files/${previewFile.id}`}\n                  className=\"w-full h-96 border-0\"\n                  title=\"File Preview\"\n                />\n              </div>\n            )}\n          </div>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n};\n\nexport default PengajuanEdit;\n"],"names":["PengajuanEdit","pengajuanId","useParams","navigate","useNavigate","useLocation","user","token","isAuthenticated","useAuth","pengajuan","setPengajuan","useState","loading","setLoading","error","setError","submitting","setSubmitting","showSubmitDialog","setShowSubmitDialog","fileUploads","setFileUploads","previewFile","setPreviewFile","showPreview","setShowPreview","useEffect","fetchPengajuanData","response","apiGet","initializeFileUploads","pengajuanData","uploads","file","getFileDisplayName","fileType","handleFileChange","prev","upload","handleSubmit","formData","apiPut","handlePreviewFile","blob","blobUrl","handleDownloadFile","getFileSize","bytes","sizes","i","jsx","Card","jsxs","CardContent","Loader2","AlertCircle","rejectedFiles","approvedFiles","Button","ArrowLeft","CardHeader","CardTitle","CheckCircle","Badge","Eye","Download","XCircle","originalFile","f","Label","_a","Upload","Input","e","Fragment","Save","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","open"],"mappings":"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"}