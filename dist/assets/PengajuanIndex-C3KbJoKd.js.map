{"version":3,"file":"PengajuanIndex-C3KbJoKd.js","sources":["../../src/pages/PengajuanIndex.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\r\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\r\nimport { \r\n  Plus, \r\n  Search, \r\n  Filter, \r\n  MoreHorizontal, \r\n  Eye, \r\n  Edit, \r\n  Trash2, \r\n  CheckCircle, \r\n  XCircle, \r\n  Clock, \r\n  FileText,\r\n  Loader2,\r\n  ChevronLeft,\r\n  ChevronRight\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { apiGet, apiDelete } from '@/lib/api';\r\n\r\ninterface PengajuanData {\r\n  id: string;\r\n  created_by?: string;\r\n  pegawai: {\r\n    nama: string;\r\n    jabatan: string;\r\n  };\r\n  jenis_jabatan: string;\r\n  total_dokumen: number;\r\n  status: 'draft' | 'submitted' | 'approved' | 'rejected' | 'resubmitted' | 'admin_wilayah_approved' | 'admin_wilayah_rejected' | 'final_approved' | 'final_rejected';\r\n  catatan?: string;\r\n  rejection_reason?: string;\r\n  resubmitted_at?: string;\r\n  resubmitted_by?: string;\r\n  created_at: string;\r\n  files: Array<{\r\n    id: string;\r\n    file_type: string;\r\n    file_name: string;\r\n    file_category?: string;\r\n  }>;\r\n}\r\n\r\nconst PengajuanIndex: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const { user, token, isAuthenticated } = useAuth();\r\n  const [pengajuanList, setPengajuanList] = useState<PengajuanData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [createdByFilter, setCreatedByFilter] = useState<string>('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [totalItems, setTotalItems] = useState(0);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [pengajuanToDelete, setPengajuanToDelete] = useState<string | null>(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [filterOptions, setFilterOptions] = useState<{\r\n    users: Array<{ id: string; email: string; full_name: string }>;\r\n  }>({ users: [] });\r\n  const [groupedByKabkota, setGroupedByKabkota] = useState<Record<string, PengajuanData[]>>({});\r\n\r\n  const itemsPerPage = 50;\r\n  const isAdmin = user?.role === 'admin';\r\n  const isReadOnlyUser = user?.role === 'user';\r\n  const isGroupingRole = isAdmin || isReadOnlyUser;\r\n\r\n  // Fallback grouping on client for admin when server doesn't provide grouping\r\n  const clientGroupedByKabkota: Record<string, PengajuanData[]> = React.useMemo(() => {\r\n    if (!isGroupingRole) return {};\r\n    \r\n    // Always use server grouping if available\r\n    if (Object.keys(groupedByKabkota).length > 0) {\r\n      console.log('üîç Using server grouping:', groupedByKabkota);\r\n      return groupedByKabkota;\r\n    }\r\n    \r\n    // Fallback to client grouping\r\n    if (!pengajuanList || pengajuanList.length === 0) return {};\r\n    \r\n    console.log('üîç Using client grouping, pengajuanList length:', pengajuanList.length);\r\n    const clientGrouped = pengajuanList.reduce((acc: Record<string, PengajuanData[]>, item: any) => {\r\n      const kab = (item.office && (item.office.kabkota || item.office.name)) || (item.pegawai && (item.pegawai as any).induk_unit) || (item.pegawai as any)?.unit_kerja || 'Lainnya';\r\n      if (!acc[kab]) acc[kab] = [];\r\n      acc[kab].push(item);\r\n      return acc;\r\n    }, {});\r\n    \r\n    console.log('üîç Client grouped result:', clientGrouped);\r\n    return clientGrouped;\r\n  }, [isGroupingRole, groupedByKabkota, pengajuanList]);\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    // Lock status filter to final_approved for read-only user (admin pusat)\r\n    if (isReadOnlyUser && statusFilter !== 'final_approved') {\r\n      setStatusFilter('final_approved');\r\n    }\r\n    fetchPengajuanData();\r\n  }, [isAuthenticated, navigate, currentPage, statusFilter, createdByFilter, isReadOnlyUser]);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && isAdmin) {\r\n      fetchFilterOptions();\r\n    }\r\n  }, [isAuthenticated, isAdmin]);\r\n\r\n\r\n    const fetchPengajuanData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = new URLSearchParams({\r\n        page: currentPage.toString(),\r\n        limit: itemsPerPage.toString(),\r\n        ...(statusFilter !== 'all' && { status: statusFilter }),\r\n        ...(searchTerm && { search: searchTerm }),\r\n        ...(isAdmin && createdByFilter !== 'all' && { created_by: createdByFilter })\r\n      });\r\n\r\n\r\n      const response = await apiGet(`/api/pengajuan?${params}`, token);\r\n      \r\n      \r\n      if (response.success) {\r\n        setPengajuanList(response.data);\r\n        if (isAdmin) {\r\n          const grouped = response.grouped_by_kabkota;\r\n          console.log('üîç Frontend received grouped data:', grouped);\r\n          console.log('üîç Frontend received data length:', response.data?.length);\r\n          if (grouped) {\r\n            setGroupedByKabkota(grouped as Record<string, PengajuanData[]>);\r\n          } else {\r\n            setGroupedByKabkota({});\r\n          }\r\n        }\r\n        \r\n        const totalPagesValue = response.pagination?.totalPages || 1;\r\n        const totalItemsValue = response.pagination?.total || 0;\r\n        \r\n        \r\n        setTotalPages(totalPagesValue);\r\n        setTotalItems(totalItemsValue);\r\n        \r\n      } else {\r\n        setError(response.message || 'Gagal mengambil data pengajuan');\r\n      }\r\n     } catch (error) {\r\n       console.error('Error fetching pengajuan data:', error);\r\n       setError('Terjadi kesalahan saat mengambil data pengajuan');\r\n     } finally {\r\n       setLoading(false);\r\n     }\r\n   };\r\n\r\n       const fetchFilterOptions = async () => {\r\n      try {\r\n        const response = await apiGet('/api/pengajuan/filter-options', token);\r\n        if (response.success) {\r\n          setFilterOptions(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching filter options:', error);\r\n      }\r\n    };\r\n\r\n  const handleSearch = (value: string) => {\r\n    setSearchTerm(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleStatusFilter = (value: string) => {\r\n    if (isReadOnlyUser) return; // locked to final_approved\r\n    setStatusFilter(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleCreatedByFilter = (value: string) => {\r\n    setCreatedByFilter(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n\r\n\r\n    const handleDelete = async () => {\r\n    if (!pengajuanToDelete) return;\r\n\r\n    try {\r\n      setDeleting(true);\r\n      const response = await apiDelete(`/api/pengajuan/${pengajuanToDelete}`, token);\r\n      \r\n      if (response.success) {\r\n        fetchPengajuanData();\r\n        setDeleteDialogOpen(false);\r\n        setPengajuanToDelete(null);\r\n      } else {\r\n        setError(response.message || 'Gagal menghapus pengajuan');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting pengajuan:', error);\r\n      setError('Terjadi kesalahan saat menghapus pengajuan');\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string, pengajuan?: PengajuanData) => {\r\n    // Helper function to determine if this is submitted after admin wilayah approval\r\n    const isSubmittedAfterAdminWilayah = (status: string, pengajuan?: PengajuanData) => {\r\n      if (status !== 'submitted' || !pengajuan) return false;\r\n      // Only show \"Diajukan Admin Wilayah\" if there are actual admin wilayah files\r\n      return pengajuan.files?.some(f => f.file_category === 'admin_wilayah') || false;\r\n    };\r\n\r\n    const statusConfig = {\r\n      draft: { label: 'Draft', className: 'bg-gray-100 text-gray-800 hover:bg-gray-200', icon: Clock },\r\n      submitted: { \r\n        label: isSubmittedAfterAdminWilayah(status, pengajuan) ? 'Diajukan Admin Wilayah' : 'Diajukan', \r\n        className: 'bg-blue-100 text-blue-800 hover:bg-blue-200', \r\n        icon: FileText \r\n      },\r\n      approved: { label: 'Disetujui', className: 'bg-green-100 text-green-800 hover:bg-green-200', icon: CheckCircle },\r\n      rejected: { label: 'Ditolak', className: 'bg-red-100 text-red-800 hover:bg-red-200', icon: XCircle },\r\n      resubmitted: { label: 'Diajukan Ulang', className: 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200', icon: Clock },\r\n      admin_wilayah_approved: { label: 'Disetujui Admin Wilayah', className: 'bg-green-200 text-green-800 hover:bg-green-300', icon: CheckCircle },\r\n      admin_wilayah_rejected: { label: 'Ditolak Admin Wilayah', className: 'bg-red-200 text-red-800 hover:bg-red-300', icon: XCircle },\r\n      final_approved: { label: 'Final Approved', className: 'bg-green-600 text-white', icon: CheckCircle },\r\n      final_rejected: { label: 'Final Rejected', className: 'bg-red-600 text-white', icon: XCircle }\r\n    } as const;\r\n\r\n    const config = (statusConfig as any)[status] || { label: status, className: 'bg-gray-100 text-gray-800', icon: FileText };\r\n    const Icon = config.icon as any;\r\n\r\n    return (\r\n      <Badge className={config.className}>\r\n        <Icon className=\"h-3 w-3 mr-1\" />\r\n        {config.label}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const getJabatanDisplayName = (jenisJabatan: string): string => {\r\n    const jabatanMap: Record<string, string> = {\r\n      'guru': 'Guru',\r\n      'eselon_iv': 'Eselon IV',\r\n      'fungsional': 'Fungsional',\r\n      'pelaksana': 'Pelaksana'\r\n    };\r\n    \r\n    return jabatanMap[jenisJabatan] || jenisJabatan;\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('id-ID', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  // Rekap dan export (khusus read-only user)\r\n  const buildRekapPerKabkota = () => {\r\n    const source = Object.keys(clientGroupedByKabkota).length > 0\r\n      ? clientGroupedByKabkota\r\n      : pengajuanList.reduce((acc: Record<string, PengajuanData[]>, item: any) => {\r\n          const kab = (item.office && (item.office.kabkota || item.office.name)) || (item.pegawai && (item.pegawai as any).induk_unit) || (item.pegawai as any)?.unit_kerja || 'Lainnya';\r\n          if (!acc[kab]) acc[kab] = [];\r\n          acc[kab].push(item);\r\n          return acc;\r\n        }, {});\r\n    return Object.entries(source).map(([kab, items]) => ({ kabkota: kab, total: items.length }));\r\n  };\r\n\r\n  const downloadBlob = (blob: Blob, filename: string) => {\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportExcel = () => {\r\n    const rows = buildRekapPerKabkota();\r\n    const today = new Date();\r\n    const ymd = `${today.getFullYear()}${String(today.getMonth() + 1).padStart(2, '0')}${String(today.getDate()).padStart(2, '0')}`;\r\n    const filename = `Rekap-final_approved-per-kabkota-${ymd}.xls`;\r\n    const tableHtml = `\r\n      <html>\r\n      <head><meta charset=\"UTF-8\" /></head>\r\n      <body>\r\n        <table border=\"1\">\r\n          <thead>\r\n            <tr><th>Kab/Kota</th><th>Jumlah Pengajuan Final Approved</th></tr>\r\n          </thead>\r\n          <tbody>\r\n            ${rows.map(r => `<tr><td>${r.kabkota}</td><td>${r.total}</td></tr>`).join('')}\r\n          </tbody>\r\n        </table>\r\n      </body>\r\n      </html>`;\r\n    const blob = new Blob([tableHtml], { type: 'application/vnd.ms-excel' });\r\n    downloadBlob(blob, filename);\r\n  };\r\n\r\n  const exportPDF = () => {\r\n    const rows = buildRekapPerKabkota().sort((a, b) => b.total - a.total);\r\n    const total = rows.reduce((acc, r) => acc + r.total, 0);\r\n    const max = Math.max(1, ...rows.map(r => r.total));\r\n    const kabCount = rows.length;\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleString('id-ID', { day: '2-digit', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' });\r\n    const ymd = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}`;\r\n    const filename = `Rekap-disetujui-kanwil-per-kabkota-${ymd}.pdf`;\r\n\r\n    const createdBy = (user?.full_name || user?.email || 'Admin Pusat');\r\n    const top5 = rows.slice(0, 5);\r\n\r\n    const win = window.open('', '_blank');\r\n    if (!win) return;\r\n    win.document.write(`\r\n      <html>\r\n        <head>\r\n          <meta charset=\\\"UTF-8\\\" />\r\n          <title>${filename}</title>\r\n          <style>\r\n            @page { size: A4; margin: 18mm 14mm; }\r\n            * { box-sizing: border-box; }\r\n            body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color: #111827; }\r\n            .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }\r\n            .title { font-size: 18px; font-weight: 700; }\r\n            .meta { font-size: 12px; color: #4b5563; }\r\n            .summary { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 8px; margin: 12px 0 16px; }\r\n            .card { border: 1px solid #e5e7eb; border-radius: 8px; padding: 10px; }\r\n            .card h3 { font-size: 12px; color: #6b7280; margin: 0 0 4px; font-weight: 600; }\r\n            .card .value { font-size: 20px; font-weight: 700; color: #111827; }\r\n            table { border-collapse: collapse; width: 100%; margin-top: 4px; }\r\n            th, td { border: 1px solid #e5e7eb; padding: 8px 10px; font-size: 12px; }\r\n            th { background: #f9fafb; text-align: left; }\r\n            tfoot td { font-weight: 700; background: #f3f4f6; }\r\n            .row { display: flex; align-items: center; gap: 10px; }\r\n            .bar { height: 8px; background: #d1fae5; border-radius: 4px; overflow: hidden; }\r\n            .bar > span { display: block; height: 100%; background: #10b981; }\r\n            .note { margin-top: 12px; font-size: 11px; color: #6b7280; }\r\n            .section-title { margin-top: 16px; font-size: 14px; font-weight: 700; }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <div class=\"header\">\r\n            <div>\r\n              <div class=\"title\">Rekap Pengajuan Telah Disetujui Kanwil per Kab/Kota</div>\r\n              <div class=\"meta\">Dihasilkan: ${dateStr} ‚Ä¢ Dibuat oleh: ${createdBy}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"summary\">\r\n            <div class=\"card\">\r\n              <h3>Total Telah Disetujui Kanwil</h3>\r\n              <div class=\"value\">${total}</div>\r\n            </div>\r\n            <div class=\"card\">\r\n              <h3>Jumlah Kab/Kota</h3>\r\n              <div class=\"value\">${kabCount}</div>\r\n            </div>\r\n            <div class=\"card\">\r\n              <h3>Top Kab/Kota</h3>\r\n              <div style=\"font-size:12px; color:#111827; line-height:1.4;\">\r\n                ${top5.map((r, i) => `${i + 1}. ${r.kabkota} (${r.total})`).join('<br/>') || '-'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"section-title\">Tabel Rekap</div>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th style=\"width:36px;\">No</th>\r\n                <th>Kab/Kota</th>\r\n                <th style=\"width:110px;\">Jumlah</th>\r\n                <th style=\"width:80px;\">Persen</th>\r\n                <th>Visual</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${rows.map((r, idx) => {\r\n                const pct = total > 0 ? Math.round((r.total / total) * 1000) / 10 : 0;\r\n                const rel = Math.round((r.total / max) * 100);\r\n                const barWidth = 140;\r\n                const filled = Math.max(1, Math.round((rel / 100) * barWidth));\r\n                return `\r\n                  <tr>\r\n                    <td>${idx + 1}</td>\r\n                    <td>${r.kabkota}</td>\r\n                    <td style=\"text-align:right; font-variant-numeric: tabular-nums;\">${r.total}</td>\r\n                    <td style=\"text-align:right; font-variant-numeric: tabular-nums;\">${pct.toFixed(1)}%</td>\r\n                    <td>\r\n                      <svg width=\"${barWidth}\" height=\"10\" viewBox=\"0 0 ${barWidth} 10\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <rect x=\"0\" y=\"0\" width=\"${barWidth}\" height=\"10\" fill=\"#E5F6F1\" stroke=\"#D1D5DB\" />\r\n                        <rect x=\"0\" y=\"0\" width=\"${filled}\" height=\"10\" fill=\"#10B981\" />\r\n                      </svg>\r\n                    </td>\r\n                  </tr>\r\n                `;\r\n              }).join('')}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td colspan=\"2\">Total</td>\r\n                <td style=\"text-align:right; font-variant-numeric: tabular-nums;\">${total}</td>\r\n                <td></td>\r\n                <td></td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n\r\n          <div class=\"note\">Catatan: Laporan ini menampilkan pengajuan yang <strong>telah disetujui Kanwil</strong>.</div>\r\n\r\n          <script>\r\n            window.onload = function() { window.print(); };\r\n          <\\/script>\r\n        </body>\r\n      </html>\r\n    `);\r\n    win.document.close();\r\n  };\r\n  \r\n  // Debug info\r\n  console.log('üîç Debug PengajuanIndex:', {\r\n    userRole: user?.role,\r\n    isAdmin,\r\n    userEmail: user?.email\r\n  });\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <FileText className=\"h-5 w-5\" />\r\n                Daftar Pengajuan Mutasi PNS\r\n              </CardTitle>\r\n              <p className=\"text-sm text-gray-600 mt-1\">\r\n                {isAdmin ? 'Semua pengajuan mutasi PNS' : (isReadOnlyUser ? 'Semua pengajuan berstatus final_approved (read-only)' : 'Pengajuan mutasi PNS Anda')}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              {isReadOnlyUser && (\r\n                <>\r\n                  <Button onClick={exportExcel} className=\"bg-green-600 hover:bg-green-700 text-white\">Export Excel</Button>\r\n                  <Button onClick={exportPDF} className=\"bg-blue-600 hover:bg-blue-700 text-white\">Export PDF</Button>\r\n                </>\r\n              )}\r\n              {/* Only show Add button for admin and operator, not for user role */}\r\n              {user?.role !== 'user' && (\r\n                <Button\r\n                  onClick={() => navigate('/pengajuan/select')}\r\n                  className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                >\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Tambah Pengajuan\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-600\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n                     {/* Search and Filter */}\r\n           <div className=\"flex flex-col gap-4 mb-6\">\r\n             {/* Search Bar */}\r\n             <div className=\"relative flex-1\">\r\n               <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n               <Input\r\n                 placeholder=\"Cari berdasarkan nama pegawai, jabatan, atau jenis jabatan...\"\r\n                 value={searchTerm}\r\n                 onChange={(e) => handleSearch(e.target.value)}\r\n                 className=\"pl-10\"\r\n               />\r\n             </div>\r\n             \r\n             {/* Filter Row */}\r\n             <div className=\"flex flex-col sm:flex-row gap-4\">\r\n               <div className=\"flex items-center gap-2\">\r\n                 <Filter className=\"h-4 w-4 text-gray-400\" />\r\n                 <Select value={statusFilter} onValueChange={handleStatusFilter}>\r\n                   <SelectTrigger className=\"w-48\">\r\n                     <SelectValue placeholder=\"Filter Status\" />\r\n                   </SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"all\">Semua Status</SelectItem>\r\n                     <SelectItem value=\"draft\">Draft</SelectItem>\r\n                     <SelectItem value=\"submitted\">Diajukan</SelectItem>\r\n                     <SelectItem value=\"approved\">Disetujui</SelectItem>\r\n                     <SelectItem value=\"rejected\">Ditolak</SelectItem>\r\n                     <SelectItem value=\"resubmitted\">Diajukan Ulang</SelectItem>\r\n                     <SelectItem value=\"admin_wilayah_approved\">Disetujui Admin Wilayah</SelectItem>\r\n                     <SelectItem value=\"admin_wilayah_rejected\">Ditolak Admin Wilayah</SelectItem>\r\n                     <SelectItem value=\"admin_wilayah_submitted\">Pengajuan Admin Wilayah</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n               \r\n                               {/* Admin Only Filters */}\r\n                {isAdmin && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Filter className=\"h-4 w-4 text-gray-400\" />\r\n                    <Select value={createdByFilter} onValueChange={handleCreatedByFilter}>\r\n                      <SelectTrigger className=\"w-48\">\r\n                        <SelectValue placeholder=\"Filter Pembuat\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">Semua Pembuat</SelectItem>\r\n                        {filterOptions.users.map((user) => (\r\n                          <SelectItem key={user.id} value={user.id}>\r\n                            {user.full_name || user.email || 'Unknown User'}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                )}\r\n             </div>\r\n           </div>\r\n\r\n          {/* Grouped view for admin and read-only user */}\r\n          {isGroupingRole && Object.keys(clientGroupedByKabkota).length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-sm text-gray-600\">Tergabung berdasarkan kabupaten/kota</div>\r\n              <Accordion type=\"multiple\" className=\"w-full\">\r\n                {Object.entries(clientGroupedByKabkota).map(([kab, items]) => (\r\n                  <AccordionItem key={kab} value={kab} className=\"border rounded-lg\">\r\n                    <AccordionTrigger className=\"px-4 py-3 hover:no-underline\">\r\n                      <div className=\"flex items-center justify-between w-full\">\r\n                        <div className=\"font-medium\">{kab}</div>\r\n                        <Badge variant=\"secondary\" className=\"ml-2\">{items.length}</Badge>\r\n                      </div>\r\n                    </AccordionTrigger>\r\n                    <AccordionContent className=\"px-0\">\r\n                      <div className=\"border-t\">\r\n                        <Table>\r\n                          <TableHeader>\r\n                            <TableRow>\r\n                              <TableHead>Pegawai</TableHead>\r\n                              <TableHead>Jenis Jabatan</TableHead>\r\n                              <TableHead>Status</TableHead>\r\n                              <TableHead>Dokumen</TableHead>\r\n                              {isAdmin && <TableHead>Pembuat</TableHead>}\r\n                              <TableHead>Tanggal Dibuat</TableHead>\r\n                              <TableHead className=\"text-right\">Aksi</TableHead>\r\n                            </TableRow>\r\n                          </TableHeader>\r\n                          <TableBody>\r\n                            {items.map((pengajuan) => (\r\n                              <TableRow key={pengajuan.id} className=\"hover:bg-gray-50\">\r\n                                <TableCell>\r\n                                  <div>\r\n                                    <div className=\"font-medium\">{pengajuan.pegawai.nama}</div>\r\n                                    <div className=\"text-sm text-gray-500\">{pengajuan.pegawai.jabatan}</div>\r\n                                  </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                  <Badge variant=\"outline\">{getJabatanDisplayName(pengajuan.jenis_jabatan)}</Badge>\r\n                                </TableCell>\r\n                                <TableCell>{getStatusBadge(pengajuan.status, pengajuan)}</TableCell>\r\n                                <TableCell>\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"text-sm\">{pengajuan.files.length}</span>\r\n                                    <span className=\"text-gray-500\">/</span>\r\n                                    <span className=\"text-sm\">{pengajuan.total_dokumen}</span>\r\n                                  </div>\r\n                                </TableCell>\r\n                                {isAdmin && (\r\n                                  <TableCell>\r\n                                    <div className=\"text-sm text-gray-600\">\r\n                                      {(() => {\r\n                                        const u = filterOptions.users.find(u => u.id === pengajuan.created_by);\r\n                                        if (u) return u.full_name || u.email || 'Unknown User';\r\n                                        return pengajuan.created_by?.includes('@') ? pengajuan.created_by : 'Unknown User';\r\n                                      })()}\r\n                                    </div>\r\n                                  </TableCell>\r\n                                )}\r\n                                <TableCell>\r\n                                  <div className=\"text-sm text-gray-600\">{formatDate(pengajuan.created_at)}</div>\r\n                                </TableCell>\r\n                                <TableCell className=\"text-right\">\r\n                                  <DropdownMenu>\r\n                                    <DropdownMenuTrigger asChild>\r\n                                      <Button variant=\"ghost\" size=\"sm\">\r\n                                        <MoreHorizontal className=\"h-4 w-4\" />\r\n                                      </Button>\r\n                                    </DropdownMenuTrigger>\r\n                                    <DropdownMenuContent align=\"end\">\r\n                                      <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                        <Eye className=\"h-4 w-4 mr-2\" />\r\n                                        Lihat Detail\r\n                                      </DropdownMenuItem>\r\n                                      {isAdmin && pengajuan.status === 'submitted' && (\r\n                                        <>\r\n                                          <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                            <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                                            Setujui\r\n                                          </DropdownMenuItem>\r\n                                          <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                            <XCircle className=\"h-4 w-4 mr-2\" />\r\n                                            Tolak\r\n                                          </DropdownMenuItem>\r\n                                        </>\r\n                                      )}\r\n                                      {isAdmin && (\r\n                                        <DropdownMenuItem \r\n                                          onClick={() => {\r\n                                            setPengajuanToDelete(pengajuan.id);\r\n                                            setDeleteDialogOpen(true);\r\n                                          }}\r\n                                          className=\"text-red-600\"\r\n                                        >\r\n                                          <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                                          Hapus\r\n                                        </DropdownMenuItem>\r\n                                      )}\r\n                                    </DropdownMenuContent>\r\n                                  </DropdownMenu>\r\n                                </TableCell>\r\n                              </TableRow>\r\n                            ))}\r\n                          </TableBody>\r\n                        </Table>\r\n                      </div>\r\n                    </AccordionContent>\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n              {/* Pagination for admin grouped view */}\r\n              {totalPages > 1 && (\r\n                <div className=\"flex items-center justify-between px-4 py-3 border rounded-lg bg-gray-50\">\r\n                  <div className=\"text-sm text-gray-700\">\r\n                    Menampilkan {((currentPage - 1) * itemsPerPage) + 1} sampai {Math.min(currentPage * itemsPerPage, totalItems)} dari {totalItems} pengajuan\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(currentPage - 1)}\r\n                      disabled={currentPage === 1}\r\n                    >\r\n                      <ChevronLeft className=\"h-4 w-4\" />\r\n                      Sebelumnya\r\n                    </Button>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                        <Button\r\n                          key={page}\r\n                          variant={currentPage === page ? \"default\" : \"outline\"}\r\n                          size=\"sm\"\r\n                          onClick={() => setCurrentPage(page)}\r\n                          className=\"w-8 h-8 p-0\"\r\n                        >\r\n                          {page}\r\n                        </Button>\r\n                      ))}\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => setCurrentPage(currentPage + 1)}\r\n                      disabled={currentPage === totalPages}\r\n                    >\r\n                      Selanjutnya\r\n                      <ChevronRight className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n          /* Table */\r\n          <div className=\"border rounded-lg overflow-hidden\">\r\n            {loading ? (\r\n              <div className=\"flex items-center justify-center py-12\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin mr-2\" />\r\n                <span>Memuat data pengajuan...</span>\r\n              </div>\r\n            ) : pengajuanList.length === 0 && totalItems === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n                <p className=\"text-gray-500 mb-2\">\r\n                  {searchTerm || statusFilter !== 'all' \r\n                    ? 'Tidak ada pengajuan yang sesuai dengan filter'\r\n                    : 'Belum ada pengajuan'\r\n                  }\r\n                </p>\r\n                {!searchTerm && statusFilter === 'all' && user?.role !== 'user' && (\r\n                  <Button\r\n                    onClick={() => navigate('/pengajuan/select')}\r\n                    className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Buat Pengajuan Pertama\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            ) : pengajuanList.length === 0 && totalItems > 0 ? (\r\n              <>\r\n                <Table>\r\n                  <TableHeader>\r\n                    <TableRow>\r\n                      <TableHead>Pegawai</TableHead>\r\n                      <TableHead>Jenis Jabatan</TableHead>\r\n                      <TableHead>Status</TableHead>\r\n                      <TableHead>Dokumen</TableHead>\r\n                      <TableHead>Tanggal Dibuat</TableHead>\r\n                      <TableHead>Aksi</TableHead>\r\n                    </TableRow>\r\n                  </TableHeader>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell colSpan={6} className=\"text-center py-8 text-gray-500\">\r\n                        Tidak ada data di halaman ini\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n\r\n\r\n                {/* Pagination Info - Always show for debugging */}\r\n                <div className=\"flex items-center justify-between px-4 py-3 border-t bg-gray-50\">\r\n                  <div className=\"text-sm text-gray-700\">\r\n                    Menampilkan {((currentPage - 1) * itemsPerPage) + 1} sampai {Math.min(currentPage * itemsPerPage, totalItems)} dari {totalItems} pengajuan\r\n                  </div>\r\n                  {true && ( // Always show for debugging - change back to (totalPages > 1 || totalItems > itemsPerPage) later\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => setCurrentPage(currentPage - 1)}\r\n                        disabled={currentPage === 1}\r\n                      >\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                        Sebelumnya\r\n                      </Button>\r\n                      \r\n                      <div className=\"flex items-center gap-1\">\r\n                        {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                          <Button\r\n                            key={page}\r\n                            variant={currentPage === page ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => setCurrentPage(page)}\r\n                            className=\"w-8 h-8 p-0\"\r\n                          >\r\n                            {page}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                      \r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => setCurrentPage(currentPage + 1)}\r\n                        disabled={currentPage === totalPages}\r\n                      >\r\n                        Selanjutnya\r\n                        <ChevronRight className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Table>\r\n                   <TableHeader>\r\n                     <TableRow>\r\n                       <TableHead>Pegawai</TableHead>\r\n                       <TableHead>Jenis Jabatan</TableHead>\r\n                       <TableHead>Status</TableHead>\r\n                       <TableHead>Dokumen</TableHead>\r\n                       {isAdmin && <TableHead>Pembuat</TableHead>}\r\n                       <TableHead>Tanggal Dibuat</TableHead>\r\n                       <TableHead className=\"text-right\">Aksi</TableHead>\r\n                     </TableRow>\r\n                   </TableHeader>\r\n                  <TableBody>\r\n                    {pengajuanList.map((pengajuan) => (\r\n                      <TableRow key={pengajuan.id} className=\"hover:bg-gray-50\">\r\n                        <TableCell>\r\n                          <div>\r\n                            <div className=\"font-medium\">{pengajuan.pegawai.nama}</div>\r\n                            <div className=\"text-sm text-gray-500\">{pengajuan.pegawai.jabatan}</div>\r\n                          </div>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Badge variant=\"outline\">\r\n                            {getJabatanDisplayName(pengajuan.jenis_jabatan)}\r\n                          </Badge>\r\n                        </TableCell>\r\n                                                 <TableCell>\r\n                           {getStatusBadge(pengajuan.status, pengajuan)}\r\n                         </TableCell>\r\n                                                 <TableCell>\r\n                           <div className=\"flex items-center gap-2\">\r\n                             <span className=\"text-sm\">{pengajuan.files.length}</span>\r\n                             <span className=\"text-gray-500\">/</span>\r\n                             <span className=\"text-sm\">{pengajuan.total_dokumen}</span>\r\n                           </div>\r\n                         </TableCell>\r\n                                                   {isAdmin && (\r\n                            <TableCell>\r\n                              <div className=\"text-sm text-gray-600\">\r\n                                {(() => {\r\n                                  const user = filterOptions.users.find(u => u.id === pengajuan.created_by);\r\n                                  if (user) {\r\n                                    // Prioritaskan full_name, jika tidak ada gunakan email\r\n                                    return user.full_name || user.email || 'Unknown User';\r\n                                  }\r\n                                  // Jika user tidak ditemukan, tampilkan email dari created_by (jika itu email)\r\n                                  return pengajuan.created_by?.includes('@') ? pengajuan.created_by : 'Unknown User';\r\n                                })()}\r\n                              </div>\r\n                            </TableCell>\r\n                          )}\r\n                         <TableCell>\r\n                           <div className=\"text-sm text-gray-600\">\r\n                             {formatDate(pengajuan.created_at)}\r\n                           </div>\r\n                         </TableCell>\r\n                        <TableCell className=\"text-right\">\r\n                          <DropdownMenu>\r\n                            <DropdownMenuTrigger asChild>\r\n                              <Button variant=\"ghost\" size=\"sm\">\r\n                                <MoreHorizontal className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </DropdownMenuTrigger>\r\n                            <DropdownMenuContent align=\"end\">\r\n                              <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                <Eye className=\"h-4 w-4 mr-2\" />\r\n                                Lihat Detail\r\n                              </DropdownMenuItem>\r\n                              {/* Only show edit actions for admin and operator, not for user role */}\r\n                              {user?.role !== 'user' && (\r\n                                <>\r\n                                  {pengajuan.status === 'draft' && (\r\n                                    <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}/upload`)}>\r\n                                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                                      Upload Dokumen\r\n                                    </DropdownMenuItem>\r\n                                  )}\r\n                                  {pengajuan.status === 'rejected' && (\r\n                                    <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}/edit`)}>\r\n                                      <Edit className=\"h-4 w-4 mr-2\" />\r\n                                      Perbaiki Dokumen\r\n                                    </DropdownMenuItem>\r\n                                  )}\r\n                                </>\r\n                              )}\r\n                               {isAdmin && pengajuan.status === 'submitted' && (\r\n                                 <>\r\n                                   <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                     <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                                     Setujui\r\n                                   </DropdownMenuItem>\r\n                                   <DropdownMenuItem onClick={() => navigate(`/pengajuan/${pengajuan.id}`)}>\r\n                                     <XCircle className=\"h-4 w-4 mr-2\" />\r\n                                     Tolak\r\n                                   </DropdownMenuItem>\r\n                                 </>\r\n                               )}\r\n                                                                                          {/* Only show delete for admin and operator, not for user role */}\r\n                              {(isAdmin || (pengajuan.status === 'draft' && user?.role !== 'user')) && (\r\n                                <DropdownMenuItem \r\n                                  onClick={() => {\r\n                                    console.log('üîç Debug: Klik hapus untuk pengajuan:', {\r\n                                      id: pengajuan.id,\r\n                                      status: pengajuan.status,\r\n                                      isAdmin,\r\n                                      userRole: user?.role\r\n                                    });\r\n                                    setPengajuanToDelete(pengajuan.id);\r\n                                    setDeleteDialogOpen(true);\r\n                                  }}\r\n                                  className=\"text-red-600\"\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                                  Hapus\r\n                                </DropdownMenuItem>\r\n                              )}\r\n                             \r\n                            </DropdownMenuContent>\r\n                          </DropdownMenu>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n\r\n\r\n                {/* Pagination Info - Always show for debugging */}\r\n                <div className=\"flex items-center justify-between px-4 py-3 border-t bg-gray-50\">\r\n                  <div className=\"text-sm text-gray-700\">\r\n                    Menampilkan {((currentPage - 1) * itemsPerPage) + 1} sampai {Math.min(currentPage * itemsPerPage, totalItems)} dari {totalItems} pengajuan\r\n                  </div>\r\n                  {true && ( // Always show for debugging - change back to (totalPages > 1 || totalItems > itemsPerPage) later\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => setCurrentPage(currentPage - 1)}\r\n                        disabled={currentPage === 1}\r\n                      >\r\n                        <ChevronLeft className=\"h-4 w-4\" />\r\n                        Sebelumnya\r\n                      </Button>\r\n                      \r\n                      <div className=\"flex items-center gap-1\">\r\n                        {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                          <Button\r\n                            key={page}\r\n                            variant={currentPage === page ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => setCurrentPage(page)}\r\n                            className=\"w-8 h-8 p-0\"\r\n                          >\r\n                            {page}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                      \r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => setCurrentPage(currentPage + 1)}\r\n                        disabled={currentPage === totalPages}\r\n                      >\r\n                        Selanjutnya\r\n                        <ChevronRight className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Hapus Pengajuan</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Apakah Anda yakin ingin menghapus pengajuan ini? Tindakan ini tidak dapat dibatalkan.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={deleting}>Batal</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleDelete}\r\n              disabled={deleting}\r\n              className=\"bg-red-600 hover:bg-red-700\"\r\n            >\r\n              {deleting ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                  Menghapus...\r\n                </>\r\n              ) : (\r\n                'Hapus'\r\n              )}\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PengajuanIndex;\r\n"],"names":["PengajuanIndex","navigate","useNavigate","user","token","isAuthenticated","useAuth","pengajuanList","setPengajuanList","useState","loading","setLoading","error","setError","searchTerm","setSearchTerm","statusFilter","setStatusFilter","createdByFilter","setCreatedByFilter","currentPage","setCurrentPage","totalPages","setTotalPages","totalItems","setTotalItems","deleteDialogOpen","setDeleteDialogOpen","pengajuanToDelete","setPengajuanToDelete","deleting","setDeleting","filterOptions","setFilterOptions","groupedByKabkota","setGroupedByKabkota","itemsPerPage","isAdmin","isReadOnlyUser","isGroupingRole","clientGroupedByKabkota","React","clientGrouped","acc","item","kab","_a","useEffect","fetchPengajuanData","fetchFilterOptions","params","response","apiGet","grouped","totalPagesValue","_b","totalItemsValue","_c","handleSearch","value","handleStatusFilter","handleCreatedByFilter","handleDelete","apiDelete","getStatusBadge","status","pengajuan","config","Clock","f","FileText","CheckCircle","XCircle","Icon","jsxs","Badge","jsx","getJabatanDisplayName","jenisJabatan","formatDate","dateString","buildRekapPerKabkota","source","items","downloadBlob","blob","filename","url","a","exportExcel","rows","today","tableHtml","r","exportPDF","b","total","max","kabCount","now","dateStr","createdBy","top5","win","i","idx","pct","rel","barWidth","filled","Card","CardHeader","CardTitle","Fragment","Button","Plus","CardContent","Search","Input","e","Filter","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Accordion","AccordionItem","AccordionTrigger","AccordionContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","u","DropdownMenu","DropdownMenuTrigger","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","Eye","Trash2","ChevronLeft","_","page","ChevronRight","Loader2","Edit","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}